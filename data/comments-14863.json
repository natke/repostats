[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450220344",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1450220344",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1450220344,
        "node_id": "IC_kwDOCVq1mM5WcJs4",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-01T14:13:32Z",
        "updated_at": "2023-03-01T14:13:32Z",
        "author_association": "CONTRIBUTOR",
        "body": "How are you preparing the batches on the Java side? The multidimensional array support is slow so it's better to use a direct `FloatBuffer` to get data into ORT, and use the get buffer method on the tensors on the way back out.\r\n\r\nOtherwise there can be differences in how ORT optimizes things for dynamic batch sizes. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450220344/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450633681",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1450633681",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1450633681,
        "node_id": "IC_kwDOCVq1mM5WdunR",
        "user": {
            "login": "ml5ah",
            "id": 65744410,
            "node_id": "MDQ6VXNlcjY1NzQ0NDEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/65744410?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ml5ah",
            "html_url": "https://github.com/ml5ah",
            "followers_url": "https://api.github.com/users/ml5ah/followers",
            "following_url": "https://api.github.com/users/ml5ah/following{/other_user}",
            "gists_url": "https://api.github.com/users/ml5ah/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ml5ah/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ml5ah/subscriptions",
            "organizations_url": "https://api.github.com/users/ml5ah/orgs",
            "repos_url": "https://api.github.com/users/ml5ah/repos",
            "events_url": "https://api.github.com/users/ml5ah/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ml5ah/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-01T18:13:25Z",
        "updated_at": "2023-03-01T18:13:44Z",
        "author_association": "NONE",
        "body": "@Craigacp  As of now, I am using multidimensional array. I see, thanks for the suggestion - will try out using FloatBuffer as input/output for OrtSession. This might be a difficult question, but as compare to running 1 inference at a time using multidimensional array, is there a rough idea of speedup we should see? \r\n\r\nThanks a lot for your response! \r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450633681/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450697046",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1450697046",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1450697046,
        "node_id": "IC_kwDOCVq1mM5Wd-FW",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-01T18:58:47Z",
        "updated_at": "2023-03-01T18:58:47Z",
        "author_association": "CONTRIBUTOR",
        "body": "That's a function of the model, data size and hardware, so I'm not sure how to answer it. Bigger batches increase computational intensity which is helpful as single example batches are usually bottlenecked on memory bandwidth for loading the models and you can compute a lot of floats while waiting for the data load from RAM into cache. But how much better is very context dependent.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450697046/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450764477",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1450764477",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1450764477,
        "node_id": "IC_kwDOCVq1mM5WeOi9",
        "user": {
            "login": "ml5ah",
            "id": 65744410,
            "node_id": "MDQ6VXNlcjY1NzQ0NDEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/65744410?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ml5ah",
            "html_url": "https://github.com/ml5ah",
            "followers_url": "https://api.github.com/users/ml5ah/followers",
            "following_url": "https://api.github.com/users/ml5ah/following{/other_user}",
            "gists_url": "https://api.github.com/users/ml5ah/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ml5ah/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ml5ah/subscriptions",
            "organizations_url": "https://api.github.com/users/ml5ah/orgs",
            "repos_url": "https://api.github.com/users/ml5ah/repos",
            "events_url": "https://api.github.com/users/ml5ah/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ml5ah/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-01T19:56:20Z",
        "updated_at": "2023-03-01T19:56:20Z",
        "author_association": "NONE",
        "body": "Yep that makes total sense, just wanted to check if there was some indication. Thanks again for the help. I'll post the outcome here after giving it a try. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1450764477/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1560280961",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1560280961",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1560280961,
        "node_id": "IC_kwDOCVq1mM5c__-B",
        "user": {
            "login": "ml5ah",
            "id": 65744410,
            "node_id": "MDQ6VXNlcjY1NzQ0NDEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/65744410?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ml5ah",
            "html_url": "https://github.com/ml5ah",
            "followers_url": "https://api.github.com/users/ml5ah/followers",
            "following_url": "https://api.github.com/users/ml5ah/following{/other_user}",
            "gists_url": "https://api.github.com/users/ml5ah/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ml5ah/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ml5ah/subscriptions",
            "organizations_url": "https://api.github.com/users/ml5ah/orgs",
            "repos_url": "https://api.github.com/users/ml5ah/repos",
            "events_url": "https://api.github.com/users/ml5ah/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ml5ah/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-24T00:13:08Z",
        "updated_at": "2023-05-24T00:13:08Z",
        "author_association": "NONE",
        "body": "Hi @Craigacp, thanks for the valuable suggestion! We saw a marked increase in inference speed with this change. I saw several other threads as well recommending this change. \r\n\r\nI was wondering if this could be in the official onnxruntime documentation as one of the best practices. \r\n@pranavsharma. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1560280961/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1560296551",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14863#issuecomment-1560296551",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14863",
        "id": 1560296551,
        "node_id": "IC_kwDOCVq1mM5dADxn",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-24T00:36:23Z",
        "updated_at": "2023-05-24T00:36:23Z",
        "author_association": "CONTRIBUTOR",
        "body": "I'm working on a Java port of the [C# Stable Diffusion tutorial](https://onnxruntime.ai/docs/tutorials/csharp/stable-diffusion-csharp.html), and once that's released I can do a similar tutorial writeup which makes best practices clear. My aim is to keep the stable diffusion example up to date with ORT Java as we bring in features like output pinning and IOBinding, but the open source process is taking me a little while and I don't have bandwidth for other ORT work until that's done.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1560296551/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]