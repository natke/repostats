[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957184529",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-957184529",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 957184529,
        "node_id": "IC_kwDOCVq1mM45DXoR",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-02T08:06:02Z",
        "updated_at": "2021-11-02T08:06:02Z",
        "author_association": "MEMBER",
        "body": "Do you see a difference in behavior between T4 and 1080 even with just the C++ API (sans JNI)? ORT doesn't have a different execution path on T4 cards.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957184529/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957391767",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-957391767",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 957391767,
        "node_id": "IC_kwDOCVq1mM45EKOX",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-02T12:01:24Z",
        "updated_at": "2021-11-02T12:01:24Z",
        "author_association": "NONE",
        "body": "The inference results are the same.\r\n\r\nI managed to isolate the problematic code:\r\n```\r\n    std::array<int64_t, 4> shape;\r\n    auto input_values = pack_tensor(images, roi, begin, end, shape); // type of input_values is std::vector<uint8_t>\r\n    auto memory_info = Ort::MemoryInfo::CreateCpu(OrtArenaAllocator,\r\n            OrtMemTypeDefault);\r\n    Ort::Value input = Ort::Value::CreateTensor<uint8_t>(memory_info,\r\n            input_values.data(), input_values.size(), shape.data(), 4);\r\n\r\n    const char* input_names[] = {\"COALER_raw_input\"};\r\n    const char* output_names[] = {\"COALER_bbox\", \"COALER_label\",\r\n            \"COALER_confidence\"};\r\n\r\n    auto output = session_->Run(Ort::RunOptions{nullptr}, input_names, &input,\r\n            1, output_names, 3);\r\n```\r\nIf the `session_->Run` is commented out, the program doesn't have any significant leaks.\r\n\r\nI have also tested IoBinding and different IoBinding options, as long as `session_->Run` is called, I got significant leaks.\r\n\r\nI'm still trying to reproduce with minimal code.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957391767/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957640936",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-957640936",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 957640936,
        "node_id": "IC_kwDOCVq1mM45FHDo",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-02T14:01:23Z",
        "updated_at": "2021-11-02T14:01:23Z",
        "author_association": "CONTRIBUTOR",
        "body": "Is it the lack of IoBinding support that made you choose to write your own Java interface rather than use the built in one, or something else?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/957640936/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958100435",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-958100435",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 958100435,
        "node_id": "IC_kwDOCVq1mM45G3PT",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-02T19:26:26Z",
        "updated_at": "2021-11-02T19:26:26Z",
        "author_association": "MEMBER",
        "body": "AFAIK we don't have any memory leaks in ORT. You may try turning off arena and memory pattern. SessionOptions::DisableCpuMemArena and SessionOptions::DisableMemPattern.\r\nPlease provide a reproducible program along with the model file.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958100435/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958607494",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-958607494",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 958607494,
        "node_id": "IC_kwDOCVq1mM45IzCG",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T02:36:58Z",
        "updated_at": "2021-11-03T02:36:58Z",
        "author_association": "NONE",
        "body": "> Is it the lack of IoBinding support that made you choose to write your own Java interface rather than use the built in one, or something else?\r\n\r\nOur wrapper is on a higher level (AI level, e.g. object detection) and also has many other features unrelated to models, e.g. video decoding.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958607494/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958621526",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-958621526",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 958621526,
        "node_id": "IC_kwDOCVq1mM45I2dW",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T03:14:03Z",
        "updated_at": "2021-11-03T03:20:44Z",
        "author_association": "NONE",
        "body": "I have managed to reproduce the leaks on T4, with the following code:\r\n```\r\n#include <cstdio>\r\n\r\n#include <onnxruntime/core/session/onnxruntime_cxx_api.h>\r\n#include <onnxruntime/core/providers/cuda/cuda_provider_factory.h>\r\n\r\n\r\nint main(int argc, char** argv) {\r\n    if (argc != 3) {\r\n        std::fprintf(stderr, \"Usage: leak_debug <model> <number>\\n\");\r\n        return 1;\r\n    }\r\n\r\n    Ort::Env env{ORT_LOGGING_LEVEL_INFO, \"\"};\r\n\r\n    Ort::SessionOptions options;\r\n    Ort::ThrowOnError(\r\n         OrtSessionOptionsAppendExecutionProvider_CUDA(options, 0));\r\n    options.SetGraphOptimizationLevel(\r\n         GraphOptimizationLevel::ORT_ENABLE_EXTENDED);\r\n    options.SetIntraOpNumThreads(1);\r\n    options.DisableCpuMemArena();\r\n    options.DisableMemPattern();\r\n\r\n    Ort::Session session{env, argv[1], options};\r\n\r\n    std::array<std::int64_t, 4> shape{1, 1080, 1920, 3};\r\n    std::vector<std::uint8_t> input_values(1080 * 1920 * 3);\r\n\r\n    const char* input_names[] = {\"COALER_raw_input\"};\r\n    const char* output_names[] = {\"COALER_bbox\", \"COALER_label\",\r\n         \"COALER_confidence\"};\r\n\r\n    int count = std::atoi(argv[2]);\r\n\r\n    for (int i = 0; i < count; ++i) {\r\n        auto memory_info = Ort::MemoryInfo::CreateCpu(OrtArenaAllocator,\r\n             OrtMemTypeDefault);\r\n        Ort::Value input = Ort::Value::CreateTensor<uint8_t>(memory_info,\r\n             input_values.data(), input_values.size(), shape.data(), 4);\r\n        session.Run(Ort::RunOptions{nullptr}, input_names, &input,\r\n                1, output_names, 3);\r\n    }\r\n\r\n    return 0;\r\n}\r\n```\r\n\r\nThe source is compiled with gcc-7 on Ubuntu 20.04\r\nThe model file is available here: https://github.com/torshie/leak-debug/releases/tag/leak\r\nThe runtime docker image used is nvidia/cuda:11.0.3-cudnn8-devel-ubuntu20.04\r\nORT version v1.8.2 compiled from source.\r\n\r\nTest command:\r\n```\r\n./leak_debug leak.onnx 1000000\r\n```\r\nThe memory usage of `leak_debug` increases very fast.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958621526/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/959835810",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-959835810",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 959835810,
        "node_id": "IC_kwDOCVq1mM45Ne6i",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T19:05:01Z",
        "updated_at": "2021-11-03T19:06:03Z",
        "author_association": "MEMBER",
        "body": "I do not have T4 handy. Try to take `memory_info` and `input` out of the loop and see what changes. Also can you try running the same code on CPU, please?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/959835810/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/960421257",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-960421257",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 960421257,
        "node_id": "IC_kwDOCVq1mM45Pt2J",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-04T03:14:23Z",
        "updated_at": "2021-11-04T03:14:23Z",
        "author_association": "NONE",
        "body": "> I do not have T4 handy. Try to take `memory_info` and `input` out of the loop and see what changes. Also can you try running the same code on CPU, please?\r\n\r\nJust did the following tests:\r\n1. Run on CPU (`memory_info` and `input` still inside the loop): no leaks.\r\n2. Run on T4 GPU, move `memory_info` and `input` out of the loop: leaks fast, about 100MB/s~200MB/s\r\n    * BTW, in a real world situation, `input` cannot be moved out side of the loop unless IoBinding is used, because every input is different.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/960421257/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961318055",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-961318055",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 961318055,
        "node_id": "IC_kwDOCVq1mM45TIyn",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-04T18:41:37Z",
        "updated_at": "2021-11-04T18:41:37Z",
        "author_association": "MEMBER",
        "body": "@torshie you have submitted a very good bug report. I have installed a Nuget package 1.8.1 and build your test executable (one of the include paths is broken in the package, but easy to correct). I am not seeing any leaks with my GPU, as you probably expected.\r\n\r\nWith T4 available, you may have to investigate it so the product and the community can benefit from your work. Let me know if there is any more help I can provide.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961318055/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961331469",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-961331469",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 961331469,
        "node_id": "IC_kwDOCVq1mM45TMEN",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-04T18:59:22Z",
        "updated_at": "2021-11-04T18:59:22Z",
        "author_association": "MEMBER",
        "body": "Can you turn on leak sanitizer while compiling your program for T4 ? \r\n\r\nA while back, there was a very similar issue of memory leaks reproing only on Linux but not on Windows (for the same CUDA and CuDNN versions). Tracked it down to some issue in CuDNN on Linux that time:\r\n\r\n![image](https://user-images.githubusercontent.com/9969784/140402400-be849af6-9fb0-42ab-a654-a29c18f81a38.png)\r\n\r\nIt was fixed by using a later version of CuDNN with the same CUDA version. \r\n\r\nI also remember that the leak happened while running a \"fused\" Conv node - the fusion only occurred when the graph optimization level was >= ORT_ENABLE_EXTENDED. Keeping the graph optimization level ORT_ENABLE_BASIC didn't trigger that specific fusion and the faulty CuDNN call didn't come into the picture.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961331469/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961680132",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-961680132",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 961680132,
        "node_id": "IC_kwDOCVq1mM45UhME",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-05T07:29:41Z",
        "updated_at": "2021-11-05T07:30:24Z",
        "author_association": "NONE",
        "body": "@hariharans29 Wala! Leak sanitizer reported memory leaks (I almost forgot leak sanitizer, after running into its bugs a couple times):\r\nCommand: `./leak_debug leak.onnx 10`\r\n```\r\n=================================================================\r\n==61120==ERROR: LeakSanitizer: detected memory leaks\r\n\r\nDirect leak of 71997856 byte(s) in 629 object(s) allocated from:\r\n    #0 0x7fe9cd9543c1 in operator new(unsigned long) ../../../../src/libsanitizer/lsan/lsan_interceptors.cpp:229\r\n    #1 0x7fe8fe2980d1 in cudnn::fusion::ConvBiasActPatternMatchingEngine<cudnn::cnn::EngineContainer<(cudnnBackendEngineName_t)18, 113664ul>, (cudnnBackendEngineName_t)4021, std::integral_constant<int, -1> >::ConvBiasActPatternMatchingEngine(cudnnContext*, cudnn::backend::OperationSet const&, bool) (/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8+0x2d3e40d1)\r\n\r\nDirect leak of 68678400 byte(s) in 600 object(s) allocated from:\r\n    #0 0x7fe9cd9543c1 in operator new(unsigned long) ../../../../src/libsanitizer/lsan/lsan_interceptors.cpp:229\r\n    #1 0x7fe8fe297211 in cudnn::fusion::ConvBiasActPatternMatchingEngine<cudnn::cnn::EngineContainer<(cudnnBackendEngineName_t)16, 113664ul>, (cudnnBackendEngineName_t)4008, std::integral_constant<int, -1> >::ConvBiasActPatternMatchingEngine(cudnnContext*, cudnn::backend::OperationSet const&, bool) (/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8+0x2d3e3211)\r\n\r\nDirect leak of 68449472 byte(s) in 598 object(s) allocated from:\r\n    #0 0x7fe9cd9543c1 in operator new(unsigned long) ../../../../src/libsanitizer/lsan/lsan_interceptors.cpp:229\r\n    #1 0x7fe8fe292fb1 in cudnn::fusion::ConvBiasActPatternMatchingEngine<cudnn::cnn::EngineContainer<(cudnnBackendEngineName_t)8, 113664ul>, (cudnnBackendEngineName_t)4002, std::integral_constant<int, -1> >::ConvBiasActPatternMatchingEngine(cudnnContext*, cudnn::backend::OperationSet const&, bool) (/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8+0x2d3defb1)\r\n\r\nDirect leak of 1144640 byte(s) in 10 object(s) allocated from:\r\n    #0 0x7fe9cd9543c1 in operator new(unsigned long) ../../../../src/libsanitizer/lsan/lsan_interceptors.cpp:229\r\n    #1 0x7fe8fe297971 in cudnn::fusion::ConvBiasActPatternMatchingEngine<cudnn::cnn::EngineContainer<(cudnnBackendEngineName_t)17, 113664ul>, (cudnnBackendEngineName_t)4021, std::integral_constant<int, -1> >::ConvBiasActPatternMatchingEngine(cudnnContext*, cudnn::backend::OperationSet const&, bool) (/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8+0x2d3e3971)\r\n\r\nDirect leak of 1144640 byte(s) in 10 object(s) allocated from:\r\n    #0 0x7fe9cd9543c1 in operator new(unsigned long) ../../../../src/libsanitizer/lsan/lsan_interceptors.cpp:229\r\n    #1 0x7fe8fe298831 in cudnn::fusion::ConvBiasActPatternMatchingEngine<cudnn::cnn::EngineContainer<(cudnnBackendEngineName_t)19, 113664ul>, (cudnnBackendEngineName_t)4022, std::integral_constant<int, -1> >::ConvBiasActPatternMatchingEngine(cudnnContext*, cudnn::backend::OperationSet const&, bool) (/lib/x86_64-linux-gnu/libcudnn_cnn_infer.so.8+0x2d3e4831)\r\n\r\nSUMMARY: LeakSanitizer: 211415008 byte(s) leaked in 1847 allocation(s).\r\n```\r\n\r\nAlso the program doesn't leak when running at ORT_ENABLE_BASIC optimization!  Nvidia disappointed me again.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961680132/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/962023764",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-962023764",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 962023764,
        "node_id": "IC_kwDOCVq1mM45V1FU",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-05T16:10:01Z",
        "updated_at": "2021-11-05T16:11:10Z",
        "author_association": "MEMBER",
        "body": "@torshie - Thanks. This is the same leak then. An internal team had reported this a while back and we spent some time to investigate and narrow it down. A [fused Conv](https://github.com/microsoft/onnxruntime/blob/74dc48f61c07c144375693bc0d9e3dde13da5e02/onnxruntime/core/optimizer/graph_transformer_utils.cc#L198) node (that is how the graph optimization level comes in) was the source of those leaks but we couldn't find what was wrong in our client code that calls into CuDNN and they just went away with a newer CuDNN version. CC: @RandySheriffH ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/962023764/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/962186067",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-962186067",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 962186067,
        "node_id": "IC_kwDOCVq1mM45WctT",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-05T20:08:55Z",
        "updated_at": "2021-11-05T20:08:55Z",
        "author_association": "MEMBER",
        "body": "@torshie : will reproduce your case with listed configurations - the culprit might be the CUDNN version, upgrade should help.\r\nAllow me confirm this and propose a solution.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/962186067/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/963843847",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-963843847",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 963843847,
        "node_id": "IC_kwDOCVq1mM45cxcH",
        "user": {
            "login": "torshie",
            "id": 1214465,
            "node_id": "MDQ6VXNlcjEyMTQ0NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1214465?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/torshie",
            "html_url": "https://github.com/torshie",
            "followers_url": "https://api.github.com/users/torshie/followers",
            "following_url": "https://api.github.com/users/torshie/following{/other_user}",
            "gists_url": "https://api.github.com/users/torshie/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/torshie/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/torshie/subscriptions",
            "organizations_url": "https://api.github.com/users/torshie/orgs",
            "repos_url": "https://api.github.com/users/torshie/repos",
            "events_url": "https://api.github.com/users/torshie/events{/privacy}",
            "received_events_url": "https://api.github.com/users/torshie/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-09T06:04:47Z",
        "updated_at": "2021-11-09T06:04:47Z",
        "author_association": "NONE",
        "body": "> @torshie : will reproduce your case with listed configurations - the culprit might be the CUDNN version, upgrade should help. Allow me confirm this and propose a solution.\r\n\r\nYou're right. After upgrading the docker image to version 11.4.2-cudnn8-runtime-ubuntu20.04, the leak is gone.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/963843847/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/964663234",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-964663234",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 964663234,
        "node_id": "IC_kwDOCVq1mM45f5fC",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-10T00:20:33Z",
        "updated_at": "2021-11-10T00:20:33Z",
        "author_association": "MEMBER",
        "body": "@torshie: thanks for the confirmation, I am testing a few versions, will doc this in coming release. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/964663234/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/965750920",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-965750920",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 965750920,
        "node_id": "IC_kwDOCVq1mM45kDCI",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-10T21:14:25Z",
        "updated_at": "2021-11-10T21:14:40Z",
        "author_association": "MEMBER",
        "body": "Updated release note for 1.8.2:\r\nhttps://github.com/microsoft/onnxruntime/releases/tag/v1.8.2",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/965750920/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/998810741",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9643#issuecomment-998810741",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9643",
        "id": 998810741,
        "node_id": "IC_kwDOCVq1mM47iKR1",
        "user": {
            "login": "se7enXF",
            "id": 33513042,
            "node_id": "MDQ6VXNlcjMzNTEzMDQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/33513042?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/se7enXF",
            "html_url": "https://github.com/se7enXF",
            "followers_url": "https://api.github.com/users/se7enXF/followers",
            "following_url": "https://api.github.com/users/se7enXF/following{/other_user}",
            "gists_url": "https://api.github.com/users/se7enXF/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/se7enXF/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/se7enXF/subscriptions",
            "organizations_url": "https://api.github.com/users/se7enXF/orgs",
            "repos_url": "https://api.github.com/users/se7enXF/repos",
            "events_url": "https://api.github.com/users/se7enXF/events{/privacy}",
            "received_events_url": "https://api.github.com/users/se7enXF/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-21T14:11:11Z",
        "updated_at": "2021-12-21T14:11:11Z",
        "author_association": "NONE",
        "body": "same question in ort-gpu==1.10, same T4 GPU #10095 \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/998810741/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 1,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]