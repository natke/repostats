[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1404828944",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1404828944",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1404828944,
        "node_id": "IC_kwDOCVq1mM5Tu_0Q",
        "user": {
            "login": "canaxx",
            "id": 11154905,
            "node_id": "MDQ6VXNlcjExMTU0OTA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/11154905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/canaxx",
            "html_url": "https://github.com/canaxx",
            "followers_url": "https://api.github.com/users/canaxx/followers",
            "following_url": "https://api.github.com/users/canaxx/following{/other_user}",
            "gists_url": "https://api.github.com/users/canaxx/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/canaxx/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/canaxx/subscriptions",
            "organizations_url": "https://api.github.com/users/canaxx/orgs",
            "repos_url": "https://api.github.com/users/canaxx/repos",
            "events_url": "https://api.github.com/users/canaxx/events{/privacy}",
            "received_events_url": "https://api.github.com/users/canaxx/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-26T10:45:49Z",
        "updated_at": "2023-01-26T10:45:49Z",
        "author_association": "NONE",
        "body": "Thank you for the good news;\r\n\r\n\"Microsoft.ML.OnnxRuntime.DirectML 1.14.0-dev-20230123-0747-b51415b0ea\" RC Nuget package has many problems. \r\n\r\n1. It only works for \"x64\" target platform.\r\n2. Code stops if you try inferencing in a seperate Task for paralellism.\r\n3. You can not use this DML package with CUDA nuget package in same project.\r\n\r\nPlease fix those issues before RTM packages are released. Former stable version also lacks same issues and problem blocks .net users to enjoy this lovely backend.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1404828944/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1405625644",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1405625644",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1405625644,
        "node_id": "IC_kwDOCVq1mM5TyCUs",
        "user": {
            "login": "sumitsays",
            "id": 11188170,
            "node_id": "MDQ6VXNlcjExMTg4MTcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/11188170?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sumitsays",
            "html_url": "https://github.com/sumitsays",
            "followers_url": "https://api.github.com/users/sumitsays/followers",
            "following_url": "https://api.github.com/users/sumitsays/following{/other_user}",
            "gists_url": "https://api.github.com/users/sumitsays/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sumitsays/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sumitsays/subscriptions",
            "organizations_url": "https://api.github.com/users/sumitsays/orgs",
            "repos_url": "https://api.github.com/users/sumitsays/repos",
            "events_url": "https://api.github.com/users/sumitsays/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sumitsays/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-26T20:42:58Z",
        "updated_at": "2023-01-26T20:50:21Z",
        "author_association": "MEMBER",
        "body": "Hi @canaxx ,\r\n\r\n1. The NuGet package does include the dll for other architectures (like x86, arm64, etc) and the package also has dependency on DirectML1.10.0, which also has .dll for all corresponding architectures.\r\n   Screenshots:\r\n   onnxruntime package downloaded from above link:\r\n   ![image](https://user-images.githubusercontent.com/11188170/214945244-9addc03a-def4-4227-997e-90c297a5dcb0.png)\r\n\r\n   DirectML 1.10.0\r\n   ![image](https://user-images.githubusercontent.com/11188170/214945185-6cd8750b-e0fe-4666-b23a-c8a54d86af04.png)\r\n\r\n    Can you please share how are you trying to use it for other architectures?\r\n\r\n2. Can you please share more details on what does \"Code stops\" refer to? Is it crashing on ORT side or is it a DML problem? Call stack and error message would really help here.\r\n\r\n3. Thank you for the suggestion. ORT publishes binaries only for selected combinations. But if you want to have the binaries for a specific combination like (CUDA + DML), you can always build it from source. Reference: https://onnxruntime.ai/docs/build/eps.html",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1405625644/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1406294680",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1406294680",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1406294680,
        "node_id": "IC_kwDOCVq1mM5T0lqY",
        "user": {
            "login": "canaxx",
            "id": 11154905,
            "node_id": "MDQ6VXNlcjExMTU0OTA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/11154905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/canaxx",
            "html_url": "https://github.com/canaxx",
            "followers_url": "https://api.github.com/users/canaxx/followers",
            "following_url": "https://api.github.com/users/canaxx/following{/other_user}",
            "gists_url": "https://api.github.com/users/canaxx/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/canaxx/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/canaxx/subscriptions",
            "organizations_url": "https://api.github.com/users/canaxx/orgs",
            "repos_url": "https://api.github.com/users/canaxx/repos",
            "events_url": "https://api.github.com/users/canaxx/events{/privacy}",
            "received_events_url": "https://api.github.com/users/canaxx/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-27T10:15:25Z",
        "updated_at": "2023-01-27T10:16:15Z",
        "author_association": "NONE",
        "body": "Hi @sumitsays \r\n\r\nCan you please check and compare the content in each platform folder ? You will clearly see that only \"x64\" platform folder is different than other platforms (for DML backend)\r\n\r\nFor you to review the ongoing discussions on the list that i gave in my previous message, please kindly check below issues list ;\r\n\r\n**Preview Result :** \"Microsoft.ML.OnnxRuntime.DirectML 1.14.0-dev-20230123-0747-b51415b0ea\" RC Nuget package has many problems.\r\n\r\n1. It only works for \"x64\" target platform.\r\n2. Code stops if you try inferencing in a seperate Task for paralellism.\r\n3. You can not use this DML package with CUDA nuget package in same project. \r\n4. you can not build DML nuget package on your own.\r\n\r\n**Issues List Pointing above Comment ;**\r\n\r\n#14376\r\n#13429\r\n#14378\r\n#14388\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1406294680/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407472689",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1407472689",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1407472689,
        "node_id": "IC_kwDOCVq1mM5T5FQx",
        "user": {
            "login": "pauldog",
            "id": 33497043,
            "node_id": "MDQ6VXNlcjMzNDk3MDQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/33497043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pauldog",
            "html_url": "https://github.com/pauldog",
            "followers_url": "https://api.github.com/users/pauldog/followers",
            "following_url": "https://api.github.com/users/pauldog/following{/other_user}",
            "gists_url": "https://api.github.com/users/pauldog/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pauldog/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pauldog/subscriptions",
            "organizations_url": "https://api.github.com/users/pauldog/orgs",
            "repos_url": "https://api.github.com/users/pauldog/repos",
            "events_url": "https://api.github.com/users/pauldog/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pauldog/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-28T19:47:53Z",
        "updated_at": "2023-01-31T05:51:00Z",
        "author_association": "NONE",
        "body": "Hi I've tried the latest build Microsoft.ML.OnnxRuntime.DirectML.1.15.0-dev-20230128-0210-7aecb2150f\r\n\r\nUnfortunately there is still a massive memory leak. For example for 1GB model DirectML: Using c# runtime\r\n\r\n\r\n```\r\nSessionOptions so = new SessionOptions\r\n                {\r\n                    ExecutionMode = ExecutionMode.ORT_SEQUENTIAL,\r\n                    GraphOptimizationLevel = GraphOptimizationLevel.ORT_ENABLE_EXTENDED\r\n                };\r\n                 so.AppendExecutionProvider_DML();\r\nsession = new InferenceSession(\"mymodel.onnx\",so)   //Adds 1GB VRAM and 1GB RAM\r\nsession.Dispose()   //Clears 1GB VRAM  but doesn't clear 1GB RAM\r\n```\r\n\r\nIn an IDE, you such as Unity you will essentially be running this many times over so each time increasing the RAM by 1GB until the program crashes.\r\n\r\n**Fix** I think I have found the fix for this. Make sure your onnx file is a single file and not have a separate weights.pb file. It seems that these auxiliary files are not being unloaded from RAM. Hopefully this is a simple bug fix.\r\n\r\n\r\nP.S\r\n\r\nIn terms of the thread blocking as stated above. This may be  specific thing to do with running in Unity DirectX 12 mode. Running in DirectX 11 mode I didn't get this problem. My guess is that the DirectML is somehow blocking all DirectX12 processing. IDK. (This might be a problem if you want to run inference in the background while displaying other 3D graphics.) Perhaps recreate this by trying to draw a rotating 3D cube in DirectX 12 while trying to do inference on another thread.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407472689/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407511682",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1407511682",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1407511682,
        "node_id": "IC_kwDOCVq1mM5T5OyC",
        "user": {
            "login": "pauldog",
            "id": 33497043,
            "node_id": "MDQ6VXNlcjMzNDk3MDQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/33497043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pauldog",
            "html_url": "https://github.com/pauldog",
            "followers_url": "https://api.github.com/users/pauldog/followers",
            "following_url": "https://api.github.com/users/pauldog/following{/other_user}",
            "gists_url": "https://api.github.com/users/pauldog/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pauldog/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pauldog/subscriptions",
            "organizations_url": "https://api.github.com/users/pauldog/orgs",
            "repos_url": "https://api.github.com/users/pauldog/repos",
            "events_url": "https://api.github.com/users/pauldog/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pauldog/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-28T23:34:37Z",
        "updated_at": "2023-02-08T21:02:09Z",
        "author_association": "NONE",
        "body": "A second issue still present in the latest build for DirectML is the following:\r\n\r\nWhen running an inference session of an input, the session _becomes optimised for that particular batch number_.\r\n\r\nThis means that running inference session for inputs of a different batch number, **the session is slower than if all your previous inputs were of that batch number**.\r\n\r\nThis means to get optimal speed for running inputs of a different batch size, you have to reload the session.\r\n\r\nexample: running 10 inputs with batch-number=2 (then reload the session for optimal speed) run 10 inputs with batch number=1\r\n\r\nWithout reloading the session in between, the second set of inputs will run slower.\r\n\r\nThis is only an issue with DirectML and not CUDA. \r\n\r\nWhy does this happen? IDK. I'm guessing that the first time you run the session, it sets up specific memory for that size input, so that if you run the session again with a different size input, it has to do some real-time conversion. That would be my guess. \r\n\r\n**Why is this a problem?**\r\nAn example is using Stable Diffusion. Sometimes you want to run it \"guided\" which involves sending two batches at a time and sometimes \"unguided\" which involves sending one batch at a time. To switch between these modes we shouldn't have to reload the Unet model for optimal efficiency.\r\n\r\nTo be precise a batch of 1 might be tensor of size (1,4,64,64) and a batch of 2 might be tensor of size (2,4,64,64)\r\n\r\n**A fix for lower end GPUs**\r\nFor lower end GPUs a fix is to never change batch sizes. For stable diffusion instead of sending 2 batches at at time. Just send one after the other sequentially. This also saves some VRAM and for most GPUs will be just as fast. For higher end GPUs you may want to send 2 batches at a time so this is not a fix for everyone. The DirectML people have said they are working on improvements for memory for larger batch sizes.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407511682/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1412781754",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1412781754",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1412781754,
        "node_id": "IC_kwDOCVq1mM5UNVa6",
        "user": {
            "login": "seddonm1",
            "id": 3468624,
            "node_id": "MDQ6VXNlcjM0Njg2MjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3468624?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/seddonm1",
            "html_url": "https://github.com/seddonm1",
            "followers_url": "https://api.github.com/users/seddonm1/followers",
            "following_url": "https://api.github.com/users/seddonm1/following{/other_user}",
            "gists_url": "https://api.github.com/users/seddonm1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/seddonm1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/seddonm1/subscriptions",
            "organizations_url": "https://api.github.com/users/seddonm1/orgs",
            "repos_url": "https://api.github.com/users/seddonm1/repos",
            "events_url": "https://api.github.com/users/seddonm1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/seddonm1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-01T21:48:38Z",
        "updated_at": "2023-02-01T21:48:38Z",
        "author_association": "NONE",
        "body": "Hi @faxu.\r\n\r\nDo you publish the docs for 1.14.0RC1 anywhere - like a versioned https://onnxruntime.ai/docs/api/c/struct_ort_api.html?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1412781754/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423175150",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1423175150",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1423175150,
        "node_id": "IC_kwDOCVq1mM5U0-3u",
        "user": {
            "login": "natke",
            "id": 3302433,
            "node_id": "MDQ6VXNlcjMzMDI0MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3302433?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/natke",
            "html_url": "https://github.com/natke",
            "followers_url": "https://api.github.com/users/natke/followers",
            "following_url": "https://api.github.com/users/natke/following{/other_user}",
            "gists_url": "https://api.github.com/users/natke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/natke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/natke/subscriptions",
            "organizations_url": "https://api.github.com/users/natke/orgs",
            "repos_url": "https://api.github.com/users/natke/repos",
            "events_url": "https://api.github.com/users/natke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/natke/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-08T20:06:44Z",
        "updated_at": "2023-02-08T20:06:44Z",
        "author_association": "MEMBER",
        "body": "Yes, the docs are published here: https://onnxruntime.ai/docs/api/c/",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423175150/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423223444",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1423223444",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1423223444,
        "node_id": "IC_kwDOCVq1mM5U1KqU",
        "user": {
            "login": "seddonm1",
            "id": 3468624,
            "node_id": "MDQ6VXNlcjM0Njg2MjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3468624?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/seddonm1",
            "html_url": "https://github.com/seddonm1",
            "followers_url": "https://api.github.com/users/seddonm1/followers",
            "following_url": "https://api.github.com/users/seddonm1/following{/other_user}",
            "gists_url": "https://api.github.com/users/seddonm1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/seddonm1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/seddonm1/subscriptions",
            "organizations_url": "https://api.github.com/users/seddonm1/orgs",
            "repos_url": "https://api.github.com/users/seddonm1/repos",
            "events_url": "https://api.github.com/users/seddonm1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/seddonm1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-08T20:51:42Z",
        "updated_at": "2023-02-08T20:51:42Z",
        "author_association": "NONE",
        "body": "Hi. These docs are not versioned so they do not incorporate all the changes in 1.14 - like the additional TensorrtProviderOptions: https://github.com/microsoft/onnxruntime/blob/rel-1.14.0/include/onnxruntime/core/providers/tensorrt/tensorrt_provider_options.h",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423223444/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423244188",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14431#issuecomment-1423244188",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14431",
        "id": 1423244188,
        "node_id": "IC_kwDOCVq1mM5U1Puc",
        "user": {
            "login": "natke",
            "id": 3302433,
            "node_id": "MDQ6VXNlcjMzMDI0MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3302433?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/natke",
            "html_url": "https://github.com/natke",
            "followers_url": "https://api.github.com/users/natke/followers",
            "following_url": "https://api.github.com/users/natke/following{/other_user}",
            "gists_url": "https://api.github.com/users/natke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/natke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/natke/subscriptions",
            "organizations_url": "https://api.github.com/users/natke/orgs",
            "repos_url": "https://api.github.com/users/natke/repos",
            "events_url": "https://api.github.com/users/natke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/natke/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-08T21:11:30Z",
        "updated_at": "2023-02-08T21:11:30Z",
        "author_association": "MEMBER",
        "body": "They are not versioned but they should incorporate all changes, and note where an API has been added in a specific release. Let me look into that specific issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1423244188/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]