[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1568812198",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16158#issuecomment-1568812198",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16158",
        "id": 1568812198,
        "node_id": "IC_kwDOCVq1mM5dgiym",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-30T17:30:52Z",
        "updated_at": "2023-05-30T17:30:52Z",
        "author_association": "MEMBER",
        "body": "Yes, you're absolutely right. We got rid of the parallel executor when we introduced the multi-stream change because we received reports of deadlocks and other issues. Does your graph have many parallel paths that lends itself to parallel paths of execution?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1568812198/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1569922896",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16158#issuecomment-1569922896",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16158",
        "id": 1569922896,
        "node_id": "IC_kwDOCVq1mM5dkx9Q",
        "user": {
            "login": "nick-griaznov",
            "id": 118535856,
            "node_id": "U_kgDOBxC2sA",
            "avatar_url": "https://avatars.githubusercontent.com/u/118535856?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nick-griaznov",
            "html_url": "https://github.com/nick-griaznov",
            "followers_url": "https://api.github.com/users/nick-griaznov/followers",
            "following_url": "https://api.github.com/users/nick-griaznov/following{/other_user}",
            "gists_url": "https://api.github.com/users/nick-griaznov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nick-griaznov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nick-griaznov/subscriptions",
            "organizations_url": "https://api.github.com/users/nick-griaznov/orgs",
            "repos_url": "https://api.github.com/users/nick-griaznov/repos",
            "events_url": "https://api.github.com/users/nick-griaznov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nick-griaznov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-31T10:23:44Z",
        "updated_at": "2023-05-31T10:33:44Z",
        "author_association": "NONE",
        "body": "We have models with multiple independent heads, hence they can be can be completely parallelized. I think these heads have parallel paths in them as well\r\n\r\nRegarding deadlocks, we previously had a forked version of ONNX Runtime, where we modified ParallelExecutor to use atomics instead of mutexes as much as possible. This implementation worked faster, but initially caused deadlocks. It turned out that problem was not in modified ParallelExecutor but in current implementation of EigenNonBlockingThreadPool. There is a bug in synchronization between threads. This bug was probably introduced when code was taken from Eigen repo and modified. We fixed this bug in our fork and had not experienced deadlocks any more.\r\nIf you have any plans of returning ParallelExecutor we would be happy to share our patches that improve performance of ParallelExecutor and fix synchronization bug in EigenNonBlockingThreadPool",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1569922896/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]