[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1566386973",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1566386973",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1566386973,
        "node_id": "IC_kwDOCVq1mM5dXSsd",
        "user": {
            "login": "Apisteftos",
            "id": 23746242,
            "node_id": "MDQ6VXNlcjIzNzQ2MjQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/23746242?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Apisteftos",
            "html_url": "https://github.com/Apisteftos",
            "followers_url": "https://api.github.com/users/Apisteftos/followers",
            "following_url": "https://api.github.com/users/Apisteftos/following{/other_user}",
            "gists_url": "https://api.github.com/users/Apisteftos/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Apisteftos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Apisteftos/subscriptions",
            "organizations_url": "https://api.github.com/users/Apisteftos/orgs",
            "repos_url": "https://api.github.com/users/Apisteftos/repos",
            "events_url": "https://api.github.com/users/Apisteftos/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Apisteftos/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-29T02:03:29Z",
        "updated_at": "2023-05-29T02:03:29Z",
        "author_association": "NONE",
        "body": "I don't know how, I just imported torch and the problem solved. I am not using at all pytorch, but it seems activates 'CUDA' libraries which they are missing. Does anyone has any idea what causes this issue?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1566386973/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1584510235",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1584510235",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1584510235,
        "node_id": "IC_kwDOCVq1mM5ecbUb",
        "user": {
            "login": "mizhitian-xiaomi",
            "id": 53911570,
            "node_id": "MDQ6VXNlcjUzOTExNTcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/53911570?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mizhitian-xiaomi",
            "html_url": "https://github.com/mizhitian-xiaomi",
            "followers_url": "https://api.github.com/users/mizhitian-xiaomi/followers",
            "following_url": "https://api.github.com/users/mizhitian-xiaomi/following{/other_user}",
            "gists_url": "https://api.github.com/users/mizhitian-xiaomi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mizhitian-xiaomi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mizhitian-xiaomi/subscriptions",
            "organizations_url": "https://api.github.com/users/mizhitian-xiaomi/orgs",
            "repos_url": "https://api.github.com/users/mizhitian-xiaomi/repos",
            "events_url": "https://api.github.com/users/mizhitian-xiaomi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mizhitian-xiaomi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-09T12:39:09Z",
        "updated_at": "2023-06-09T12:39:09Z",
        "author_association": "NONE",
        "body": "Did you solve it? \r\nI'm also having the same issue in docker containers",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1584510235/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1586235844",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1586235844",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1586235844,
        "node_id": "IC_kwDOCVq1mM5ejAnE",
        "user": {
            "login": "Apisteftos",
            "id": 23746242,
            "node_id": "MDQ6VXNlcjIzNzQ2MjQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/23746242?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Apisteftos",
            "html_url": "https://github.com/Apisteftos",
            "followers_url": "https://api.github.com/users/Apisteftos/followers",
            "following_url": "https://api.github.com/users/Apisteftos/following{/other_user}",
            "gists_url": "https://api.github.com/users/Apisteftos/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Apisteftos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Apisteftos/subscriptions",
            "organizations_url": "https://api.github.com/users/Apisteftos/orgs",
            "repos_url": "https://api.github.com/users/Apisteftos/repos",
            "events_url": "https://api.github.com/users/Apisteftos/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Apisteftos/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-11T16:19:13Z",
        "updated_at": "2023-06-11T16:19:13Z",
        "author_association": "NONE",
        "body": "I just imported the torch. Import in your python script: import torch try in the main or in the current script and it will activate the CUDA libs. Do not ask me how is that happening, I don't know but you can find here more information. #13264 and here #11092",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1586235844/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1604115143",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1604115143",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1604115143,
        "node_id": "IC_kwDOCVq1mM5fnNrH",
        "user": {
            "login": "kopyl",
            "id": 17604849,
            "node_id": "MDQ6VXNlcjE3NjA0ODQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/17604849?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kopyl",
            "html_url": "https://github.com/kopyl",
            "followers_url": "https://api.github.com/users/kopyl/followers",
            "following_url": "https://api.github.com/users/kopyl/following{/other_user}",
            "gists_url": "https://api.github.com/users/kopyl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kopyl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kopyl/subscriptions",
            "organizations_url": "https://api.github.com/users/kopyl/orgs",
            "repos_url": "https://api.github.com/users/kopyl/repos",
            "events_url": "https://api.github.com/users/kopyl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kopyl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-23T11:02:41Z",
        "updated_at": "2023-06-23T11:02:41Z",
        "author_association": "NONE",
        "body": "Importing Torch helps. But we need a better solution since Torch takes a lot of time to load.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1604115143/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1605821872",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1605821872",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1605821872,
        "node_id": "IC_kwDOCVq1mM5ftuWw",
        "user": {
            "login": "mizhitian-xiaomi",
            "id": 53911570,
            "node_id": "MDQ6VXNlcjUzOTExNTcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/53911570?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mizhitian-xiaomi",
            "html_url": "https://github.com/mizhitian-xiaomi",
            "followers_url": "https://api.github.com/users/mizhitian-xiaomi/followers",
            "following_url": "https://api.github.com/users/mizhitian-xiaomi/following{/other_user}",
            "gists_url": "https://api.github.com/users/mizhitian-xiaomi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mizhitian-xiaomi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mizhitian-xiaomi/subscriptions",
            "organizations_url": "https://api.github.com/users/mizhitian-xiaomi/orgs",
            "repos_url": "https://api.github.com/users/mizhitian-xiaomi/repos",
            "events_url": "https://api.github.com/users/mizhitian-xiaomi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mizhitian-xiaomi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-25T02:12:03Z",
        "updated_at": "2023-06-25T02:12:03Z",
        "author_association": "NONE",
        "body": "thank u. \r\nI solved the problem. I checked the `/dev` dir ，then didn't found `nvidia-uvm` module. I run one sample that nvidia driver provided and it installed the nvidia-uvm automatically. then i can call onnxruntime-gpu in docker containers.\r\n\r\nuse `lsmod | grep -i nvidia` to check if there is an `nvidia-uvm` module in the container.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1605821872/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1652760999",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1652760999",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1652760999,
        "node_id": "IC_kwDOCVq1mM5igyGn",
        "user": {
            "login": "Apisteftos",
            "id": 23746242,
            "node_id": "MDQ6VXNlcjIzNzQ2MjQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/23746242?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Apisteftos",
            "html_url": "https://github.com/Apisteftos",
            "followers_url": "https://api.github.com/users/Apisteftos/followers",
            "following_url": "https://api.github.com/users/Apisteftos/following{/other_user}",
            "gists_url": "https://api.github.com/users/Apisteftos/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Apisteftos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Apisteftos/subscriptions",
            "organizations_url": "https://api.github.com/users/Apisteftos/orgs",
            "repos_url": "https://api.github.com/users/Apisteftos/repos",
            "events_url": "https://api.github.com/users/Apisteftos/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Apisteftos/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-27T01:06:11Z",
        "updated_at": "2023-07-27T01:06:11Z",
        "author_association": "NONE",
        "body": "You mean you show the nvidia_uvm flag = 0? \r\n\r\n```\r\nnvidia_uvm           1400832  0\r\nnvidia_drm             73728  9\r\nnvidia_modeset       1241088  14 nvidia_drm\r\nnvidia              56328192  838 nvidia_uvm,nvidia_modeset\r\ndrm_kms_helper        200704  1 nvidia_drm\r\ndrm                   581632  13 drm_kms_helper,nvidia,nvidia_drm\r\n\r\n```\r\n\r\n\r\nI am having again issues since I uninstalled onnxruntime and onnxruntime-gpu\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1652760999/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1654095229",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1654095229",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1654095229,
        "node_id": "IC_kwDOCVq1mM5il319",
        "user": {
            "login": "Apisteftos",
            "id": 23746242,
            "node_id": "MDQ6VXNlcjIzNzQ2MjQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/23746242?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Apisteftos",
            "html_url": "https://github.com/Apisteftos",
            "followers_url": "https://api.github.com/users/Apisteftos/followers",
            "following_url": "https://api.github.com/users/Apisteftos/following{/other_user}",
            "gists_url": "https://api.github.com/users/Apisteftos/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Apisteftos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Apisteftos/subscriptions",
            "organizations_url": "https://api.github.com/users/Apisteftos/orgs",
            "repos_url": "https://api.github.com/users/Apisteftos/repos",
            "events_url": "https://api.github.com/users/Apisteftos/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Apisteftos/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-27T17:38:54Z",
        "updated_at": "2023-07-27T17:38:54Z",
        "author_association": "NONE",
        "body": "Found the problem: \r\nIn python packages they are missing the pre_reloaded cuda libraries:\r\n\r\nAccording to (ONNXRUNTIME)[https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/python/_ld_preload.py] these libraries can be modified: That means the libraries are missing from the policies or the onnxruntime, Also `__init__` file is totally empty and I am not sure is it should be. \r\n\r\n\r\n```\r\n# -------------------------------------------------------------------------\r\n# Copyright (c) Microsoft Corporation. All rights reserved.\r\n# Licensed under the MIT License.\r\n# --------------------------------------------------------------------------\r\n\r\n\r\n# This file can be modified by setup.py when building a manylinux2010 wheel\r\n# When modified, it will preload some libraries needed for the python C extension\r\n\r\n```\r\n\r\nI this file should be the cuda libraries. I was working today on a server and doing some research on onnxruntime and here were the loaded libraries such as:\r\n\r\n```\r\n        libcudart.so: CUDA runtime library\r\n\tlibcublas.so: CUDA Basic Linear Algebra Subprograms (BLAS) library\r\n\tlibcusparse.so: CUDA sparse matrix library\r\n\tlibcurand.so: CUDA random number generation library\r\n\tlibcufft.so: CUDA Fast Fourier Transform (FFT) library\r\n\tlibcusolver.so: CUDA linear solver library\r\n\tlibnvrtc.so: NVIDIA Runtime Compilation (NVRTC) library (for compiling CUDA code at runtime)\r\n\r\n```\r\n\r\nTo find which cuda libraries are installed in the machine we need:\r\n\r\n\r\n```\r\n        find  -name \"libcudart.so*\"\r\n\tfind  -name \"libcublas.so*\"\r\n\tfind  -name \"libcusparse.so*\"\r\n\tfind  -name \"libcurand.so*\"\r\n\tfind  -name \"libcufft.so*\"\r\n\tfind  -name \"libcusolver.so*\"\r\n\tfind  -name \"libnvrtc.so*\"\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1654095229/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1654581117",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16128#issuecomment-1654581117",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16128",
        "id": 1654581117,
        "node_id": "IC_kwDOCVq1mM5inud9",
        "user": {
            "login": "Apisteftos",
            "id": 23746242,
            "node_id": "MDQ6VXNlcjIzNzQ2MjQy",
            "avatar_url": "https://avatars.githubusercontent.com/u/23746242?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Apisteftos",
            "html_url": "https://github.com/Apisteftos",
            "followers_url": "https://api.github.com/users/Apisteftos/followers",
            "following_url": "https://api.github.com/users/Apisteftos/following{/other_user}",
            "gists_url": "https://api.github.com/users/Apisteftos/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Apisteftos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Apisteftos/subscriptions",
            "organizations_url": "https://api.github.com/users/Apisteftos/orgs",
            "repos_url": "https://api.github.com/users/Apisteftos/repos",
            "events_url": "https://api.github.com/users/Apisteftos/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Apisteftos/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-27T21:02:12Z",
        "updated_at": "2023-07-27T21:04:19Z",
        "author_association": "NONE",
        "body": "Now it works without importing the pytorch: \r\n\r\nI tried to build it from the source and it had several problems.\r\nI uninstalled onnxruntime and onnxruntime-gpu and installed again\r\n\r\nFirstly I copied inside the venv/lib64/python3.10/site-packages/onnxruntime/capi/_ld_preload.py  which was empty.\r\n\r\n```\r\nfrom ctypes import CDLL, RTLD_GLOBAL\r\ntry:\r\n    _libcublasLt = CDLL(\"libcublasLt.so.11\", mode=RTLD_GLOBAL)\r\n    _libcublas = CDLL(\"libcublas.so.11\", mode=RTLD_GLOBAL)\r\n    _libcudnn = CDLL(\"libcudnn.so.8\", mode=RTLD_GLOBAL)\r\n    _libcurand = CDLL(\"libcurand.so.10\", mode=RTLD_GLOBAL)\r\n    _libcufft = CDLL(\"libcufft.so.10\", mode=RTLD_GLOBAL)\r\n    _libcudart = CDLL(\"libcudart.so.11.0\", mode=RTLD_GLOBAL)\r\nexcept OSError:\r\n    import os\r\n    os.environ[\"ORT_CUDA_UNAVAILABLE\"] = \"1\"\r\nfrom ctypes import CDLL, RTLD_GLOBAL\r\ntry:\r\n    _libcudnn = CDLL(\"libcudnn.so.8\", mode=RTLD_GLOBAL)\r\n    _libcublas = CDLL(\"libcublas.so.11\", mode=RTLD_GLOBAL)\r\n    _libnvinfer = CDLL(\"libnvinfer.so.8\", mode=RTLD_GLOBAL)\r\n    _libnvinfer_plugin = CDLL(\"libnvinfer_plugin.so.8\", mode=RTLD_GLOBAL)\r\n    _libnvonnxparser = CDLL(\"libnvonnxparser.so.8\", mode=RTLD_GLOBAL)\r\n    _libcudart = CDLL(\"libcudart.so.11.0\", mode=RTLD_GLOBAL)\r\nexcept OSError:\r\n    import os\r\n    os.environ[\"ORT_TENSORRT_UNAVAILABLE\"] = \"1\"\r\n```\r\nbut it didn't worked\r\n\r\nThen I uninstalled the again onnxruntime and onnxruntime-gpu and tried to installed from source. The installation from source had several issues and it was really very slowly. As I was searching inside the packages I found a remtand of previous onnxruntime packages I just deleted in lib64 and lib the onnxruntime packages and then I installed again. \r\n\r\nAfter the re-installation I checked if the  `_ld_preload.py` file was empty, but luckily  all the libs installed correctly without any problem. I removed also the `import torch` from my scripts and works without that. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1654581117/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]