[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1409968906",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14493#issuecomment-1409968906",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14493",
        "id": 1409968906,
        "node_id": "IC_kwDOCVq1mM5UCmsK",
        "user": {
            "login": "RyanUnderhill",
            "id": 38674843,
            "node_id": "MDQ6VXNlcjM4Njc0ODQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/38674843?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RyanUnderhill",
            "html_url": "https://github.com/RyanUnderhill",
            "followers_url": "https://api.github.com/users/RyanUnderhill/followers",
            "following_url": "https://api.github.com/users/RyanUnderhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/RyanUnderhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RyanUnderhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RyanUnderhill/subscriptions",
            "organizations_url": "https://api.github.com/users/RyanUnderhill/orgs",
            "repos_url": "https://api.github.com/users/RyanUnderhill/repos",
            "events_url": "https://api.github.com/users/RyanUnderhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RyanUnderhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-31T08:41:46Z",
        "updated_at": "2023-01-31T08:41:46Z",
        "author_association": "MEMBER",
        "body": "@fs-eire Can you help or assign this one?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1409968906/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1410806643",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14493#issuecomment-1410806643",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14493",
        "id": 1410806643,
        "node_id": "IC_kwDOCVq1mM5UFzNz",
        "user": {
            "login": "shalvamist",
            "id": 94086448,
            "node_id": "U_kgDOBZulMA",
            "avatar_url": "https://avatars.githubusercontent.com/u/94086448?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shalvamist",
            "html_url": "https://github.com/shalvamist",
            "followers_url": "https://api.github.com/users/shalvamist/followers",
            "following_url": "https://api.github.com/users/shalvamist/following{/other_user}",
            "gists_url": "https://api.github.com/users/shalvamist/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shalvamist/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shalvamist/subscriptions",
            "organizations_url": "https://api.github.com/users/shalvamist/orgs",
            "repos_url": "https://api.github.com/users/shalvamist/repos",
            "events_url": "https://api.github.com/users/shalvamist/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shalvamist/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-31T17:42:04Z",
        "updated_at": "2023-01-31T17:42:04Z",
        "author_association": "CONTRIBUTOR",
        "body": "Hi Xiaohk,\r\n\r\nThanks for the detailed report of the issue.\r\nI think since there are 2 outputs you need to use the 'fetches' option in run API. \r\nI was able to run the model using this modification - \r\n```\r\n      try {\r\n          const session = await ort.InferenceSession.create('./model.onnx');\r\n\r\n          // prepare inputs. a tensor need its corresponding TypedArray as data\r\n          const dataA = Float32Array.from(new Array(31).fill(0));\r\n          const tensorA = new ort.Tensor('float32', dataA, [1, 31]);\r\n\r\n          let dataB = new BigInt64Array([ BigInt(Number.MAX_SAFE_INTEGER) ]);\r\n          let tensorB = new ort.Tensor('int64', dataB, [1]);\r\n\r\n          let map1 = new Map();\r\n\r\n          // prepare feeds. use model input names as keys.\r\n          const feeds = { float_input: tensorA};\r\n\r\n          // prepare feeds. use model input names as keys.\r\n          const fetches = { label: tensorB, probabilities: map1};\r\n\r\n          // feed inputs and run\r\n          const results = await session.run(feeds, fetches);\r\n\r\n          // read from results\r\n          document.write(`Results: ${results.label} ${results.probabilities}`);\r\n\r\n      } catch (e) {\r\n          document.write(`failed to inference ONNX model: ${e}.`);\r\n      }\r\n  }\r\n```\r\nPlease try this approach and let me know if it resolves the problem.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1410806643/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1410882223",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14493#issuecomment-1410882223",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14493",
        "id": 1410882223,
        "node_id": "IC_kwDOCVq1mM5UGFqv",
        "user": {
            "login": "xiaohk",
            "id": 15007159,
            "node_id": "MDQ6VXNlcjE1MDA3MTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/15007159?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xiaohk",
            "html_url": "https://github.com/xiaohk",
            "followers_url": "https://api.github.com/users/xiaohk/followers",
            "following_url": "https://api.github.com/users/xiaohk/following{/other_user}",
            "gists_url": "https://api.github.com/users/xiaohk/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xiaohk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xiaohk/subscriptions",
            "organizations_url": "https://api.github.com/users/xiaohk/orgs",
            "repos_url": "https://api.github.com/users/xiaohk/repos",
            "events_url": "https://api.github.com/users/xiaohk/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xiaohk/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-31T18:36:07Z",
        "updated_at": "2023-01-31T18:36:07Z",
        "author_association": "NONE",
        "body": "Thank you so much for your quick rely @shalvamist and @RyanUnderhill.\r\n\r\nI tried your code and my error is gone üëç. However, the `results` object only has a `label` attribute, and it doesn't has the `probabilities` attribute. Do you have any suggestions to debug it?\r\n\r\nHere is my code:\r\n\r\n```ts\r\n    try {\r\n      // Create a new session and load the LightGBM model\r\n      const session = await ort.InferenceSession.create(modelUrl);\r\n\r\n      const x = Float32Array.from(new Array(31).fill(0));\r\n\r\n      // Prepare feeds, use model input names as keys.\r\n      const xTensor = new ort.Tensor('float32', x, [1, 31]);\r\n      const feeds = { float_input: xTensor };\r\n\r\n      let dataB = new BigInt64Array([BigInt(Number.MAX_SAFE_INTEGER)]);\r\n      let tensorB = new ort.Tensor('int64', dataB, [1]);\r\n      let map1 = new Map();\r\n\r\n      // prepare feeds. use model input names as keys.\r\n      const fetches = { label: tensorB, probabilities: map1 };\r\n\r\n      // Feed inputs and run\r\n      const results = await session.run(feeds, fetches);\r\n\r\n      // Read from results\r\n      // const probs = results.probabilities.data;\r\n      console.log(results);\r\n\r\n      this.message = `Success: ${results}`;\r\n    } catch (e) {\r\n      this.message = `Failed: ${e}.`;\r\n    }\r\n```\r\n\r\nHere is the printed out `results`\r\n\r\n![image](https://user-images.githubusercontent.com/15007159/215851589-8cb5161c-8e14-42ca-bd97-70fb7e90ecb0.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1410882223/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1412842060",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14493#issuecomment-1412842060",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14493",
        "id": 1412842060,
        "node_id": "IC_kwDOCVq1mM5UNkJM",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-01T22:44:16Z",
        "updated_at": "2023-02-01T22:44:16Z",
        "author_association": "MEMBER",
        "body": "The model uses non-tensor type (probabilities is type of `sequence<map<int64,float32>>`) as its input/output and onnxruntime-web does not support those types yet. a quick fix is to re-export the model with options that disable the non-tensor types.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1412842060/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1489187785",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14493#issuecomment-1489187785",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14493",
        "id": 1489187785,
        "node_id": "IC_kwDOCVq1mM5YwzPJ",
        "user": {
            "login": "xiaohk",
            "id": 15007159,
            "node_id": "MDQ6VXNlcjE1MDA3MTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/15007159?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xiaohk",
            "html_url": "https://github.com/xiaohk",
            "followers_url": "https://api.github.com/users/xiaohk/followers",
            "following_url": "https://api.github.com/users/xiaohk/following{/other_user}",
            "gists_url": "https://api.github.com/users/xiaohk/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xiaohk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xiaohk/subscriptions",
            "organizations_url": "https://api.github.com/users/xiaohk/orgs",
            "repos_url": "https://api.github.com/users/xiaohk/repos",
            "events_url": "https://api.github.com/users/xiaohk/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xiaohk/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-29T19:33:24Z",
        "updated_at": "2023-03-29T19:33:24Z",
        "author_association": "NONE",
        "body": "Thank you all for helping out! I eventually solved this issue by using XGBoost instead of LightGBM. I believe @fs-eire's suggestion will work.\r\n\r\nOn a related note, we encountered this issue when we were developing [WebSHAP](https://poloclub.github.io/webshap/), which is now public! WebSHAP is a JavaScript library that enables users to explain any ML models in their browser. We created three application examples using WebSHAP (explaining XGBoost, CNNs, and transformer models). We used ONNX Web Runtime for two examples. I was impressed to see how easy it was to use ONNX Web Runtime and everything just worked! Thank you all for creating and maintaining ONNX Web Runtime!! ‚ù§Ô∏è \r\n\r\n\r\n![webshap-demo](https://user-images.githubusercontent.com/15007159/228648090-67fa3efa-a091-43b2-8940-cbadd3730e12.gif)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1489187785/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]