[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515387679",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15567#issuecomment-1515387679",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15567",
        "id": 1515387679,
        "node_id": "IC_kwDOCVq1mM5aUvsf",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-19T21:12:31Z",
        "updated_at": "2023-04-19T21:12:57Z",
        "author_association": "MEMBER",
        "body": "@pauldog, thanks for reporting the issue. Please share the onnx model and a test script that could reproduce the issue.\r\nTry the following two:\r\n(1) It seems that you are using opset 18 model. If you do not want to see onnxruntime warnings about opset version , you can export your onnx model with older opset version (like 14~16) and try again.\r\n(2) Try disable graph optimization in session option to see whether the issue is gone.\r\n\r\n@PatriceVignola, any idea of possible commit that break intel DML?\r\nI saw two commits on Jan 12: \r\n- DML EP Register ScatterND-16 (14240) \r\n- [DML EP] Add FusedMatMul (14196) \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515387679/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515422136",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15567#issuecomment-1515422136",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15567",
        "id": 1515422136,
        "node_id": "IC_kwDOCVq1mM5aU4G4",
        "user": {
            "login": "pauldog",
            "id": 33497043,
            "node_id": "MDQ6VXNlcjMzNDk3MDQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/33497043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pauldog",
            "html_url": "https://github.com/pauldog",
            "followers_url": "https://api.github.com/users/pauldog/followers",
            "following_url": "https://api.github.com/users/pauldog/following{/other_user}",
            "gists_url": "https://api.github.com/users/pauldog/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pauldog/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pauldog/subscriptions",
            "organizations_url": "https://api.github.com/users/pauldog/orgs",
            "repos_url": "https://api.github.com/users/pauldog/repos",
            "events_url": "https://api.github.com/users/pauldog/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pauldog/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-19T21:41:39Z",
        "updated_at": "2023-04-19T22:47:24Z",
        "author_association": "NONE",
        "body": "Hi, my results using the latest version 15 are (for DirectML Intel GPU)\r\n\r\n```\r\nGraphOptimizationLevel.ORT_DISABLE_ALL --> correct results\r\nGraphOptimizationLevel.OORT_ENABLE_BASIC --> correct results\r\nGraphOptimizationLevel.ORT_ENABLE_EXTENDED -> wrong results\r\nGraphOptimizationLevel.ORT_ENABLE_ALL --> wrong results\r\n```\r\n\r\nSo it does look like it's an issue with \"extended optimisation\" for Intel, perhaps? And since it works with the quantized int8 model and not the float16 model. My guess is some kind conversion error for float16 multiplication? Just a guess.\r\n\r\nPerhaps it's not liking the way I'm binding in the data. Although I'm not sure why I'd get different results on Nvidia than Intel.\r\n(What I'm doing is reading in an onnx file without embedded weights then binding in the weights myself - not sure if this is relevant. It shouldn't be as it just treats the weights as inputs.).\r\n\r\nSo it looks like setting it to GraphOptimizationLevel.OORT_ENABLE_BASIC could potentially be a solution for me, if it doesn't slow things down too much. (Tested, it slows it down by about 10% on Nvidia).\r\n\r\nFor the separate issue which was the opcode error message. I'm not sure why I got that as the onnx was opset 14. But that is not important as I don't get this error message in the latest 14 or 15 builds.\r\n\r\nI'll see if I can get an example onnx to send you.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515422136/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515560304",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15567#issuecomment-1515560304",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15567",
        "id": 1515560304,
        "node_id": "IC_kwDOCVq1mM5aVZ1w",
        "user": {
            "login": "PatriceVignola",
            "id": 5880386,
            "node_id": "MDQ6VXNlcjU4ODAzODY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5880386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/PatriceVignola",
            "html_url": "https://github.com/PatriceVignola",
            "followers_url": "https://api.github.com/users/PatriceVignola/followers",
            "following_url": "https://api.github.com/users/PatriceVignola/following{/other_user}",
            "gists_url": "https://api.github.com/users/PatriceVignola/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/PatriceVignola/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/PatriceVignola/subscriptions",
            "organizations_url": "https://api.github.com/users/PatriceVignola/orgs",
            "repos_url": "https://api.github.com/users/PatriceVignola/repos",
            "events_url": "https://api.github.com/users/PatriceVignola/events{/privacy}",
            "received_events_url": "https://api.github.com/users/PatriceVignola/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-20T00:54:43Z",
        "updated_at": "2023-04-20T00:54:43Z",
        "author_association": "MEMBER",
        "body": "@pauldog can you tell us the exact hardware and driver version that you're running this on? Since it works on Nvidia but fails on Intel, this will help us investigate deeper.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515560304/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515568469",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15567#issuecomment-1515568469",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15567",
        "id": 1515568469,
        "node_id": "IC_kwDOCVq1mM5aVb1V",
        "user": {
            "login": "pauldog",
            "id": 33497043,
            "node_id": "MDQ6VXNlcjMzNDk3MDQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/33497043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pauldog",
            "html_url": "https://github.com/pauldog",
            "followers_url": "https://api.github.com/users/pauldog/followers",
            "following_url": "https://api.github.com/users/pauldog/following{/other_user}",
            "gists_url": "https://api.github.com/users/pauldog/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pauldog/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pauldog/subscriptions",
            "organizations_url": "https://api.github.com/users/pauldog/orgs",
            "repos_url": "https://api.github.com/users/pauldog/repos",
            "events_url": "https://api.github.com/users/pauldog/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pauldog/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-20T01:06:40Z",
        "updated_at": "2023-04-20T01:11:57Z",
        "author_association": "NONE",
        "body": "HP laptop\r\nWindows 10\r\nIntel Core i3\r\nIntel (R) UHD Graphics\r\nDriver version: 27.20.100.9664\r\nDriver date: 01/06/2021\r\nDriver: Driver\tC:\\WINDOWS\\SYSTEM32\\DRIVERSTORE\\FILEREPOSITORY\\IIGD_DCH.INF_AMD64_04C961BA9D7827AF\\IGDKMDN64.SYS \r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1515568469/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]