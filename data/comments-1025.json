[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492381264",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492381264",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492381264,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjM4MTI2NA==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-14T19:42:26Z",
        "updated_at": "2019-05-14T19:42:26Z",
        "author_association": "MEMBER",
        "body": "There are no plans currently to add clang support. If there is enough interest we can reconsider this. Thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492381264/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492929583",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492929583",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492929583,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MjkyOTU4Mw==",
        "user": {
            "login": "xkszltl",
            "id": 5203025,
            "node_id": "MDQ6VXNlcjUyMDMwMjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5203025?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xkszltl",
            "html_url": "https://github.com/xkszltl",
            "followers_url": "https://api.github.com/users/xkszltl/followers",
            "following_url": "https://api.github.com/users/xkszltl/following{/other_user}",
            "gists_url": "https://api.github.com/users/xkszltl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xkszltl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xkszltl/subscriptions",
            "organizations_url": "https://api.github.com/users/xkszltl/orgs",
            "repos_url": "https://api.github.com/users/xkszltl/repos",
            "events_url": "https://api.github.com/users/xkszltl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xkszltl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-16T06:03:50Z",
        "updated_at": "2019-05-16T06:03:50Z",
        "author_association": "CONTRIBUTOR",
        "body": "@pranavsharma \r\n++interest",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492929583/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492952607",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492952607",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492952607,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjk1MjYwNw==",
        "user": {
            "login": "letmaik",
            "id": 530988,
            "node_id": "MDQ6VXNlcjUzMDk4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/530988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/letmaik",
            "html_url": "https://github.com/letmaik",
            "followers_url": "https://api.github.com/users/letmaik/followers",
            "following_url": "https://api.github.com/users/letmaik/following{/other_user}",
            "gists_url": "https://api.github.com/users/letmaik/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/letmaik/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/letmaik/subscriptions",
            "organizations_url": "https://api.github.com/users/letmaik/orgs",
            "repos_url": "https://api.github.com/users/letmaik/repos",
            "events_url": "https://api.github.com/users/letmaik/events{/privacy}",
            "received_events_url": "https://api.github.com/users/letmaik/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-16T07:31:04Z",
        "updated_at": "2019-05-16T07:31:35Z",
        "author_association": "MEMBER",
        "body": "For what it's worth, ONNX RT compiles just fine with Clang (`CC=clang CXX=clang++`) so this is mostly a matter of adding it to CI and making sure not to introduce breaks.\r\nEDIT: I haven't tried all build options though, just the basics.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492952607/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492953313",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492953313",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492953313,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjk1MzMxMw==",
        "user": {
            "login": "xkszltl",
            "id": 5203025,
            "node_id": "MDQ6VXNlcjUyMDMwMjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5203025?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xkszltl",
            "html_url": "https://github.com/xkszltl",
            "followers_url": "https://api.github.com/users/xkszltl/followers",
            "following_url": "https://api.github.com/users/xkszltl/following{/other_user}",
            "gists_url": "https://api.github.com/users/xkszltl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xkszltl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xkszltl/subscriptions",
            "organizations_url": "https://api.github.com/users/xkszltl/orgs",
            "repos_url": "https://api.github.com/users/xkszltl/repos",
            "events_url": "https://api.github.com/users/xkszltl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xkszltl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-16T07:33:25Z",
        "updated_at": "2019-05-16T07:33:25Z",
        "author_association": "CONTRIBUTOR",
        "body": "@letmaik\r\nA few question about your setup:\r\n  1. Which linker, ld or lld (-fuse-ld=lld)?\r\n  2. libc++ or libstdc++?\r\n  3. Which version of llvm?\r\n\r\nThanks",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492953313/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492954921",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492954921",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492954921,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjk1NDkyMQ==",
        "user": {
            "login": "letmaik",
            "id": 530988,
            "node_id": "MDQ6VXNlcjUzMDk4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/530988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/letmaik",
            "html_url": "https://github.com/letmaik",
            "followers_url": "https://api.github.com/users/letmaik/followers",
            "following_url": "https://api.github.com/users/letmaik/following{/other_user}",
            "gists_url": "https://api.github.com/users/letmaik/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/letmaik/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/letmaik/subscriptions",
            "organizations_url": "https://api.github.com/users/letmaik/orgs",
            "repos_url": "https://api.github.com/users/letmaik/repos",
            "events_url": "https://api.github.com/users/letmaik/events{/privacy}",
            "received_events_url": "https://api.github.com/users/letmaik/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-16T07:38:32Z",
        "updated_at": "2019-05-16T07:39:10Z",
        "author_association": "MEMBER",
        "body": "ld, libstdc++, llvm 7",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492954921/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492955452",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-492955452",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 492955452,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjk1NTQ1Mg==",
        "user": {
            "login": "xkszltl",
            "id": 5203025,
            "node_id": "MDQ6VXNlcjUyMDMwMjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5203025?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xkszltl",
            "html_url": "https://github.com/xkszltl",
            "followers_url": "https://api.github.com/users/xkszltl/followers",
            "following_url": "https://api.github.com/users/xkszltl/following{/other_user}",
            "gists_url": "https://api.github.com/users/xkszltl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xkszltl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xkszltl/subscriptions",
            "organizations_url": "https://api.github.com/users/xkszltl/orgs",
            "repos_url": "https://api.github.com/users/xkszltl/repos",
            "events_url": "https://api.github.com/users/xkszltl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xkszltl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-16T07:40:10Z",
        "updated_at": "2019-05-16T07:40:10Z",
        "author_association": "CONTRIBUTOR",
        "body": "> ld, libstdc++, llvm 7\r\n\r\nThanks for the quick response",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/492955452/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1150205928",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-1150205928",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 1150205928,
        "node_id": "IC_kwDOCVq1mM5Ejr_o",
        "user": {
            "login": "zahiraam",
            "id": 55545820,
            "node_id": "MDQ6VXNlcjU1NTQ1ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/55545820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zahiraam",
            "html_url": "https://github.com/zahiraam",
            "followers_url": "https://api.github.com/users/zahiraam/followers",
            "following_url": "https://api.github.com/users/zahiraam/following{/other_user}",
            "gists_url": "https://api.github.com/users/zahiraam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zahiraam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zahiraam/subscriptions",
            "organizations_url": "https://api.github.com/users/zahiraam/orgs",
            "repos_url": "https://api.github.com/users/zahiraam/repos",
            "events_url": "https://api.github.com/users/zahiraam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zahiraam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-08T17:37:54Z",
        "updated_at": "2022-06-08T17:37:54Z",
        "author_association": "NONE",
        "body": "@letmaik, @xkszltl \r\nThis is not quite the experience I had. \r\nOn Linux when building shared libraries using this command:\r\n\r\n./build.sh --config RelWithDebInfo --build_shared_lib --use_dnnl\r\n\r\nWith clang 15.0.0 , I got a build error:\r\n\r\nonnxruntime-new/onnxruntime/include/onnxruntime/core/common/make_string.h:46:3: note: in instantiation of function template specialization 'onnxruntime::detail::MakeStringImpl<const char *, unsigned long, const char *, long, const char *, gsl::span<long>>' requested here\r\n  MakeStringImpl(ss, args...);\r\n  ^\r\nonnxruntime-new/onnxruntime/include/onnxruntime/core/common/make_string.h:93:18: note: in instantiation of function template specialization 'onnxruntime::detail::MakeStringImpl<const char *, unsigned long, const char *, long, const char *, gsl::span<long>>' requested here\r\n  return detail::MakeStringImpl(detail::if_char_array_make_ptr_t<Args const&>(args)...);\r\n                 ^\r\nonnxruntime-new/onnxruntime/onnxruntime/core/providers/dnnl/subgraph/dnnl_reduce.cc:276:11: note: in instantiation of function template specialization 'onnxruntime::MakeString<char[20], unsigned long, char[23], long, char[9], gsl::span<long>>' requested here\r\n          ORT_ENFORCE(src_dims[i] == 1, \"Dimension of input \", i, \" must be 1 instead of \", src_dims[i],\r\n          ^\r\nonnxruntime-new/onnxruntime/include/onnxruntime/core/common/common.h:182:64: note: expanded from macro 'ORT_ENFORCE'\r\n                                                ::onnxruntime::MakeString(__VA_ARGS__)); \\\r\n                                                               ^\r\nonnxruntime-new/onnxruntime/onnxruntime/core/providers/dnnl/subgraph/dnnl_subgraph_primitive.h:130:22: note: 'operator<<' should be declared prior to the call site or in namespace 'gsl'\r\ninline std::ostream& operator<<(std::ostream& os, const gsl::span<int64_t>& span) {\r\n                     ^\r\n1 error generated.\r\n\r\nThis issue is related to unqualified lookup templates. This is a common issue documented here: [Language Compatibility (llvm.org)](https://clang.llvm.org/compatibility.html#dep_lookup) It describes invalid code that GCC allows but not clang. It also offers two solutions which I adapted to onnxruntime. \r\n\r\nMaking this change:\r\n\r\ndiff --git a/onnxruntime/core/providers/dnnl/subgraph/dnnl_subgraph_primitive.h b/onnxruntime/core/providers/dnnl/subgraph/dnnl_subgraph_primitive.h\r\n--- a/onnxruntime/core/providers/dnnl/subgraph/dnnl_subgraph_primitive.h\r\n+++ b/onnxruntime/core/providers/dnnl/subgraph/dnnl_subgraph_primitive.h\r\n@@ -127,10 +127,13 @@ inline std::ostream& operator<<(std::ostream& os, const gsl::span<const int64_t>\r\n   return os;\r\n }\r\n \r\n+}  // namespace onnxruntime\r\n+\r\n+namespace gsl {\r\n inline std::ostream& operator<<(std::ostream& os, const gsl::span<int64_t>& span) {\r\n   std::copy(span.cbegin(), span.cend(), std::ostream_iterator<int64_t>(os, \" \"));\r\n   return os;\r\n }\r\n \r\n-}  // namespace onnxruntime\r\n+}  // namespace gsl\r\n\r\nFixes the issue. With clang onnxruntime is building and running.\r\n\r\nIs MS willing to make changes to the code in order to fix build errors with other compilers? The above change is certainly offering a more valid code.\r\n\r\nWe also have encountered several issues with the Intel compiler that are all related to implicit instantiation of function templates. Adding explicit instantiation of these functions fixed the issues. \r\nThe difference of behavior between the Intel compiler and other compilers for these function templates is that they are being inlined with the Intel compiler (and therefore their definitions are discarded and any reference to them will result into undefined symbols at link time). Other compilers might not be inlining these functions and are therefore not encountering the link errors.\r\nHas anyone seen these issues? Any comments welcome.\r\nThanks.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1150205928/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1151102841",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1025#issuecomment-1151102841",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1025",
        "id": 1151102841,
        "node_id": "IC_kwDOCVq1mM5EnG95",
        "user": {
            "login": "zahiraam",
            "id": 55545820,
            "node_id": "MDQ6VXNlcjU1NTQ1ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/55545820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zahiraam",
            "html_url": "https://github.com/zahiraam",
            "followers_url": "https://api.github.com/users/zahiraam/followers",
            "following_url": "https://api.github.com/users/zahiraam/following{/other_user}",
            "gists_url": "https://api.github.com/users/zahiraam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zahiraam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zahiraam/subscriptions",
            "organizations_url": "https://api.github.com/users/zahiraam/orgs",
            "repos_url": "https://api.github.com/users/zahiraam/repos",
            "events_url": "https://api.github.com/users/zahiraam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zahiraam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-09T13:12:42Z",
        "updated_at": "2022-06-09T13:14:14Z",
        "author_association": "NONE",
        "body": "@[pranavsharma](https://github.com/pranavsharma) Please comment on this? Here at Intel we are interested in having it compile with clang and with our internal compiler.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1151102841/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]