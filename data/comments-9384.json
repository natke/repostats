[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/944813168",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-944813168",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 944813168,
        "node_id": "IC_kwDOCVq1mM44ULRw",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-15T23:50:15Z",
        "updated_at": "2021-10-15T23:50:15Z",
        "author_association": "MEMBER",
        "body": "Are you able to share the model? Looks like almost all types are supported by ConstantOfShape from opset 9 and on. \r\n\r\nAre you excluding any operators via the build flags you are using? Could you share your build command line as well please?\r\n\r\n<html>\r\n<body>\r\n<!--StartFragment-->\r\n\r\nConstantOfShape | in input:T1out output:T2 | 9+ | T1 = tensor(int64)T2 = tensor(bool), tensor(double), tensor(float), tensor(float16), tensor(int16), tensor(int32), tensor(int64), tensor(int8), tensor(uint16), tensor(uint32), tensor(uint64), tensor(uint8)\r\n-- | -- | -- | --\r\n\r\n\r\n<!--EndFragment-->\r\n</body>\r\n</html>",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/944813168/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/945276134",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-945276134",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 945276134,
        "node_id": "IC_kwDOCVq1mM44V8Tm",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-18T01:40:25Z",
        "updated_at": "2021-10-18T01:40:25Z",
        "author_association": "NONE",
        "body": "This is my build command:\r\n./build.sh --build_shared_lib --cuda_home /usr/local/cuda-11.2 --cudnn_home /usr/lib/x86_64-linux-gnu/ --use_cuda --config Release --build_wheel --update --build --parallel --cmake_extra_defines ONNXRUNTIME_VERSION=1.8.2 CMAKE_CUDA_ARCHITECTURES=86\r\n\r\nThis is the [model link](https://pan.baidu.com/s/19IW8oVMcvH3tkwsElsXbHw ), code：40hd",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/945276134/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/946301770",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-946301770",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 946301770,
        "node_id": "IC_kwDOCVq1mM44Z2tK",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-19T01:56:35Z",
        "updated_at": "2021-10-19T01:58:22Z",
        "author_association": "NONE",
        "body": "The ConstantOfShape in faster-rcnn model,it results the error:\r\n![image](https://user-images.githubusercontent.com/44046955/137830632-1e4c03a9-4887-4df5-93a1-91117d739f54.png)\r\nwhile the ConstantOfShape in yolov3 runs well:\r\n![image](https://user-images.githubusercontent.com/44046955/137830683-5c0b7a0e-00f9-4352-9769-7af3bef65a1d.png)\r\nit seems the ConstantOfShape node in faster-rcnn has no input. I have no idea about the difference between them.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/946301770/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947201042",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-947201042",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 947201042,
        "node_id": "IC_kwDOCVq1mM44dSQS",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-20T00:15:41Z",
        "updated_at": "2021-10-20T00:15:41Z",
        "author_association": "MEMBER",
        "body": "I'm not able to download the model from that link. Can you please put it somewhere where installing software is not required to download it?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947201042/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947268613",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-947268613",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 947268613,
        "node_id": "IC_kwDOCVq1mM44diwF",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-20T02:36:35Z",
        "updated_at": "2021-10-20T02:37:06Z",
        "author_association": "NONE",
        "body": "The onnx model is in the [repository](https://github.com/BChunlei/faster-rcnn-onnx)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947268613/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947324433",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-947324433",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 947324433,
        "node_id": "IC_kwDOCVq1mM44dwYR",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-20T04:44:10Z",
        "updated_at": "2021-10-20T04:44:10Z",
        "author_association": "MEMBER",
        "body": "I'm able to load and execute the model without any problems using the 1.9 ORT release package. Is there a reason you need to build from source?\r\n\r\nThe netron screenshot showing no input to the ConstantOfShape node is because the input is an initializer and not the output from another node. This is perfectly valid. \r\n\r\n![image](https://user-images.githubusercontent.com/979079/138029632-85b118d6-272a-482f-a88b-abef81c15710.png)\r\n\r\n> --cmake_extra_defines ONNXRUNTIME_VERSION=1.8.2\r\n\r\nThe actual ORT version is whatever version you checked out from github. What does `git rev-parse  HEAD` report as your current commit id?\r\n\r\nAre there any other changes to your local repo that `git status` reports?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/947324433/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949322082",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-949322082",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 949322082,
        "node_id": "IC_kwDOCVq1mM44lYFi",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-22T06:23:59Z",
        "updated_at": "2021-10-22T06:25:01Z",
        "author_association": "NONE",
        "body": "git rev-parse HEAD shows:\r\n4daa14bc74b5378d5fcb0d6de063a9fa8bd42eac\r\ngit status shows:\r\nNot currently on any branch.\r\nnothing to commit, working tree clean",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949322082/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949349268",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-949349268",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 949349268,
        "node_id": "IC_kwDOCVq1mM44leuU",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-22T07:06:58Z",
        "updated_at": "2021-10-22T07:06:58Z",
        "author_association": "MEMBER",
        "body": "That commit id is for 1.9.0. To make things clearer maybe do `git checkout rel-1.9.0` (should equate to the same commit id) and remove `--cmake_extra_defines ONNXRUNTIME_VERSION=1.8.2 CMAKE_CUDA_ARCHITECTURES=86` from your build command as I'm not aware of any reason why you'd need those.\r\n\r\nIt would also be good to validate you can load the model with the official ORT 1.9 python package, as I'm able to do that. \r\n\r\n`pip3 install onnxruntime`  and....\r\n\r\n```python\r\nimport onnxruntime as ort\r\nsession = ort.InferenceSession('<path to>/faster_dianlan3.onnx')\r\n```\r\n\r\nYou should see a number of messages about initializers in graph inputs preventing optimizations, but the session should be able to be created. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949349268/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949457053",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-949457053",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 949457053,
        "node_id": "IC_kwDOCVq1mM44l5Cd",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-22T09:37:53Z",
        "updated_at": "2021-10-22T09:37:53Z",
        "author_association": "NONE",
        "body": "Yes, I can load the model with python. I want to do inference using c++ in Ubuntu system, so I build onnxruntime from source. I have chanded onnxruntime version to 1.9.0, CMAKE_CUDA_ARCHITECTURES=86 means I use GeForce 3080 GPU. I build the .cpp file to executable file, the error occurred:\r\nterminate called after throwing an instance of 'Ort::Exception'\r\nwhat(): Load model from ./faster_dianlan3.onnx failed:This is an invalid model. Error in Node:ConstantOfShape_1085 : No Op registered for ConstantOfShape with domain_version of 11\r\nAborted (core dumped)\r\nwhen do inference with the executable file.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/949457053/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/950403942",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-950403942",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 950403942,
        "node_id": "IC_kwDOCVq1mM44pgNm",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-24T22:12:48Z",
        "updated_at": "2021-10-24T22:12:48Z",
        "author_association": "MEMBER",
        "body": "Not sure why your build lacks support for ConstantOfShape. Is there a reason why the pre-built package from https://github.com/microsoft/onnxruntime/releases can't be used? There are packages for 1.9.0 and 1.8.1 there (note that for a patch release we only have packages for things affected by the patch). e.g. https://github.com/microsoft/onnxruntime/releases/download/v1.9.0/onnxruntime-linux-x64-gpu-1.9.0.tgz\r\n\r\n ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/950403942/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/952579155",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-952579155",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 952579155,
        "node_id": "IC_kwDOCVq1mM44xzRT",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-27T06:21:14Z",
        "updated_at": "2021-10-27T06:21:14Z",
        "author_association": "NONE",
        "body": "I download the pre-built package from https://github.com/microsoft/onnxruntime/releases/download/v1.9.0/onnxruntime-linux-x64-gpu-1.9.0.tgz, and get the same error.\r\n\r\nBy the way, I register my own op in onnxruntime as the following code:\r\n```\r\nOrt::CustomOpDomain custom_op_domain(\"\");\r\ncustom_op_domain.Add(&custom_op);\r\nsession_options.Add(custom_op_domain);\r\nOrt::ThrowOnError(OrtSessionOptionsAppendExecutionProvider_CUDA(session_options, device_id));\r\n```\r\nDoes it matter to the error?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/952579155/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953436231",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-953436231",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 953436231,
        "node_id": "IC_kwDOCVq1mM441EhH",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-28T01:52:26Z",
        "updated_at": "2021-10-28T22:17:44Z",
        "author_association": "MEMBER",
        "body": "Yes it does. \r\n\r\nThe empty domain string equates to the default onnx domain. When you register a custom op domain using that as the domain, some of the internal checks are thrown off and we can't look up schemas for onnx operators correctly.\r\n\r\nWhat are you trying to do via custom op registration? If you are trying to replace some existing ONNX op with a custom implementation I believe currently you would need to use a custom domain, and update the relevant nodes in the model to have that domain.\r\n\r\ne.g. say you wanted to use a custom op for Gemm, the nodes in the model would have domain of \"\" (i.e. ONNX) and op_type of Gemm. if you have a Gemm operator in your custom ops you would need to update the Gemm nodes in the model to have a domain that matches your custom op domain. \r\n\r\nThis is fairly easily done using the onnx python library\r\n```python\r\nimport onnx\r\n\r\ndef add_custom_op_domain_to_gemm_node(node):\r\n    # update relevant nodes to use the kernel from your custom domain\r\n    if node.op_type == 'Gemm':\r\n        node.domain = 'my_domain'\r\n\r\ndef iterate_graph(graph, per_node_func):\r\n\r\n    for node in graph.node:\r\n        per_node_func(node)\r\n\r\n        # recurse into subgraph for control flow nodes (Scan/Loop/If)\r\n        for attr in node.attribute:\r\n            if attr.HasField('g'):\r\n                iterate_graph(attr.g, per_node_func)\r\n\r\nmodel = onnx.load('model.onnx')\r\niterate_graph(model.graph, add_custom_op_domain_to_gemm_node)\r\nonnx.save(model, 'new_model.onnx')\r\n```\r\n\r\nNote that that example doesn't recurse into nodes with a graph attribute (Scan/Loop/If) in case that's relevant. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953436231/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958591553",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-958591553",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 958591553,
        "node_id": "IC_kwDOCVq1mM45IvJB",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T01:44:20Z",
        "updated_at": "2021-11-03T01:44:20Z",
        "author_association": "NONE",
        "body": "I want to register the new op named 'MMCVRoiAlign' which is not supported in onnxruntime.\r\nMy understanding is I should register my op with a custom domain?\r\nI just modify the code :\r\n\r\n`Ort::CustomOpDomain custom_op_domain(\"\");`\r\nto:\r\n`Ort::CustomOpDomain custom_op_domain(\"abc\");`\r\n\r\nMore details:\r\n```\r\n  Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"\");\r\n  Ort::SessionOptions session_options;\r\n  session_options.SetIntraOpNumThreads(1);\r\n  session_options.SetGraphOptimizationLevel(GraphOptimizationLevel::ORT_ENABLE_ALL);\r\n\r\n  cudaStream_t compute_stream = nullptr;\r\n\r\n  MMCVRoiAlign custom_op{\"CUDAExecutionProvider\", compute_stream};\r\n  //ConstantOfShape custom_op2{\"CUDAExecutionProvider\", compute_stream};\r\n\r\n  Ort::CustomOpDomain custom_op_domain(\"abc\");\r\n\r\n  custom_op_domain.Add(&custom_op);\r\n\r\n  session_options.Add(custom_op_domain);\r\n\r\n  int device_id = 0;\r\n  Ort::ThrowOnError(OrtSessionOptionsAppendExecutionProvider_CUDA(session_options, device_id));\r\n\r\n  Ort::Session session(env, model_path, session_options);\r\n```\r\n\r\nWhen I use the custom domain \"abc\" , onnxruntime can't find the new registered op:\r\n`Load model from ./faster.onnx failed:Fatal error: MMCVRoiAlign is not a registered function/op`\r\nWhen I use default domain \"\", the above error disappear. But shows:\r\n`Load model from ./faster.onnx failed:This is an invalid model. Error in Node:ConstantOfShape_1002 : No Op registered for ConstantOfShape with domain_version of 11`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958591553/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958679001",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-958679001",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 958679001,
        "node_id": "IC_kwDOCVq1mM45JEfZ",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T06:14:38Z",
        "updated_at": "2021-11-03T06:14:38Z",
        "author_association": "MEMBER",
        "body": "Most likely the error doesn't disappear - the model just fails earlier due to the onnx kernel lookup failure when the domain is empty.\r\n\r\nDoes the MMCVRoiAlign node in the model have a domain of 'abc'? Should be able to check that using Netron.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958679001/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958689028",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-958689028",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 958689028,
        "node_id": "IC_kwDOCVq1mM45JG8E",
        "user": {
            "login": "BChunlei",
            "id": 44046955,
            "node_id": "MDQ6VXNlcjQ0MDQ2OTU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/44046955?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BChunlei",
            "html_url": "https://github.com/BChunlei",
            "followers_url": "https://api.github.com/users/BChunlei/followers",
            "following_url": "https://api.github.com/users/BChunlei/following{/other_user}",
            "gists_url": "https://api.github.com/users/BChunlei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BChunlei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BChunlei/subscriptions",
            "organizations_url": "https://api.github.com/users/BChunlei/orgs",
            "repos_url": "https://api.github.com/users/BChunlei/repos",
            "events_url": "https://api.github.com/users/BChunlei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BChunlei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-03T06:45:15Z",
        "updated_at": "2021-11-03T06:45:15Z",
        "author_association": "NONE",
        "body": "![image](https://user-images.githubusercontent.com/44046955/140017900-ab5fe4f0-ea53-4890-bfa5-07a0c7283247.png)\r\n\r\nIt seems ok, the module \"mmcv\" should be the domain, right?\r\n\r\nWhen I use following code:\r\n`Ort::CustomOpDomain custom_op_domain(\"mmcv\");`\r\n\r\nboth errors disappear.\r\n\r\nBy the way, where could I look for more details about onnxruntime or how to use onnxruntime.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/958689028/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961446673",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9384#issuecomment-961446673",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9384",
        "id": 961446673,
        "node_id": "IC_kwDOCVq1mM45ToMR",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-04T21:35:14Z",
        "updated_at": "2021-11-04T21:35:14Z",
        "author_association": "MEMBER",
        "body": "For the model to load successfully what Netron is calling 'module' must be the domain.\r\n\r\nDocumentation is at https://onnxruntime.ai/",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/961446673/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]