[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1460695730",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14937#issuecomment-1460695730",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14937",
        "id": 1460695730,
        "node_id": "IC_kwDOCVq1mM5XEHKy",
        "user": {
            "login": "jchen351",
            "id": 73297588,
            "node_id": "MDQ6VXNlcjczMjk3NTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/73297588?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jchen351",
            "html_url": "https://github.com/jchen351",
            "followers_url": "https://api.github.com/users/jchen351/followers",
            "following_url": "https://api.github.com/users/jchen351/following{/other_user}",
            "gists_url": "https://api.github.com/users/jchen351/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jchen351/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jchen351/subscriptions",
            "organizations_url": "https://api.github.com/users/jchen351/orgs",
            "repos_url": "https://api.github.com/users/jchen351/repos",
            "events_url": "https://api.github.com/users/jchen351/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jchen351/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-08T18:51:17Z",
        "updated_at": "2023-03-08T18:51:17Z",
        "author_association": "MEMBER",
        "body": "@Hrayo712 Can you provide me with a CalibrationDataReader so I can run it in debug mode? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1460695730/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463831767",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14937#issuecomment-1463831767",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14937",
        "id": 1463831767,
        "node_id": "IC_kwDOCVq1mM5XQEzX",
        "user": {
            "login": "Hrayo712",
            "id": 34102313,
            "node_id": "MDQ6VXNlcjM0MTAyMzEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/34102313?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Hrayo712",
            "html_url": "https://github.com/Hrayo712",
            "followers_url": "https://api.github.com/users/Hrayo712/followers",
            "following_url": "https://api.github.com/users/Hrayo712/following{/other_user}",
            "gists_url": "https://api.github.com/users/Hrayo712/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Hrayo712/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Hrayo712/subscriptions",
            "organizations_url": "https://api.github.com/users/Hrayo712/orgs",
            "repos_url": "https://api.github.com/users/Hrayo712/repos",
            "events_url": "https://api.github.com/users/Hrayo712/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Hrayo712/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T13:50:48Z",
        "updated_at": "2023-03-10T13:50:48Z",
        "author_association": "NONE",
        "body": "Of course!\r\n\r\nIn the attached zip, you'll find a python script which defines `CalibrationDataGen` you can use.\r\n\r\nThanks in advance for your support!\r\n\r\n[datareader.zip](https://github.com/microsoft/onnxruntime/files/10942640/datareader.zip)\r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463831767/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464516795",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14937#issuecomment-1464516795",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14937",
        "id": 1464516795,
        "node_id": "IC_kwDOCVq1mM5XSsC7",
        "user": {
            "login": "jchen351",
            "id": 73297588,
            "node_id": "MDQ6VXNlcjczMjk3NTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/73297588?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jchen351",
            "html_url": "https://github.com/jchen351",
            "followers_url": "https://api.github.com/users/jchen351/followers",
            "following_url": "https://api.github.com/users/jchen351/following{/other_user}",
            "gists_url": "https://api.github.com/users/jchen351/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jchen351/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jchen351/subscriptions",
            "organizations_url": "https://api.github.com/users/jchen351/orgs",
            "repos_url": "https://api.github.com/users/jchen351/repos",
            "events_url": "https://api.github.com/users/jchen351/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jchen351/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T21:51:15Z",
        "updated_at": "2023-03-10T21:51:15Z",
        "author_association": "MEMBER",
        "body": "@Hrayo712  I cannot reproduce the error. I am using onnxruntime 1.14.1 (lastest) this is what I got running following python script:\r\n\r\n```\r\nimport onnx\r\nfrom onnxruntime.quantization import quantize_static, QuantFormat, QuantType, CalibrationMethod ,preprocess\r\n\r\nfrom datareader import CalibrationDataGen\r\n\r\nclass Main:\r\n    input_model = None\r\n    out_model = None\r\n\r\n    def static_quantize(self, model_path: str):\r\n        self.input_model = model_path\r\n        self.out_model = f'quantized_{self.input_model}'\r\n        print('Quantizing...')\r\n        reader = CalibrationDataGen(model=onnx.load(self.input_model))\r\n        quantize_static(\r\n            self.input_model, self.out_model,\r\n            calibration_data_reader=reader,\r\n            quant_format=QuantFormat.QOperator,\r\n            per_channel=True,\r\n            activation_type=QuantType.QUInt8,\r\n            weight_type=QuantType.QUInt8,\r\n            calibrate_method=CalibrationMethod.MinMax,\r\n        )\r\n\r\n\r\ndef main():\r\n    main_class = Main()\r\n    main_class.static_quantize('custom_model.onnx')\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nPlease try it out from the [Archive.zip](https://github.com/microsoft/onnxruntime/files/10946411/Archive.zip)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464516795/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464880326",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14937#issuecomment-1464880326",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14937",
        "id": 1464880326,
        "node_id": "IC_kwDOCVq1mM5XUEzG",
        "user": {
            "login": "Hrayo712",
            "id": 34102313,
            "node_id": "MDQ6VXNlcjM0MTAyMzEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/34102313?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Hrayo712",
            "html_url": "https://github.com/Hrayo712",
            "followers_url": "https://api.github.com/users/Hrayo712/followers",
            "following_url": "https://api.github.com/users/Hrayo712/following{/other_user}",
            "gists_url": "https://api.github.com/users/Hrayo712/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Hrayo712/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Hrayo712/subscriptions",
            "organizations_url": "https://api.github.com/users/Hrayo712/orgs",
            "repos_url": "https://api.github.com/users/Hrayo712/repos",
            "events_url": "https://api.github.com/users/Hrayo712/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Hrayo712/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-11T10:26:54Z",
        "updated_at": "2023-03-11T10:26:54Z",
        "author_association": "NONE",
        "body": "I used your script and it seems to be a version problem. It shows the error on onnxruntime `1.8.1` but works on version >= `1.10` . I'll update. Thanks for the support!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464880326/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 1,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]