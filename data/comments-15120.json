[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475734729",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1475734729",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1475734729,
        "node_id": "IC_kwDOCVq1mM5X9ezJ",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-20T07:16:51Z",
        "updated_at": "2023-03-20T07:16:51Z",
        "author_association": "MEMBER",
        "body": "Please see the examples for correct usage of CreateTensor.\r\n\r\nhttps://github.com/search?q=repo%3Amicrosoft%2Fonnxruntime-inference-examples%20CreateTensor&type=code\r\n\r\nThe input dimensions are an array of int64_t values. You're using a vector of a vector of int64_t values, so `input_node_dims.data()` is returning a pointer to another vector and not to the int64_t values. \r\n\r\n`std::vector<std::vector<int64_t>> input_node_dims(1);`\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475734729/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475770423",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1475770423",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1475770423,
        "node_id": "IC_kwDOCVq1mM5X9ng3",
        "user": {
            "login": "Maniron28",
            "id": 71628009,
            "node_id": "MDQ6VXNlcjcxNjI4MDA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/71628009?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Maniron28",
            "html_url": "https://github.com/Maniron28",
            "followers_url": "https://api.github.com/users/Maniron28/followers",
            "following_url": "https://api.github.com/users/Maniron28/following{/other_user}",
            "gists_url": "https://api.github.com/users/Maniron28/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Maniron28/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Maniron28/subscriptions",
            "organizations_url": "https://api.github.com/users/Maniron28/orgs",
            "repos_url": "https://api.github.com/users/Maniron28/repos",
            "events_url": "https://api.github.com/users/Maniron28/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Maniron28/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-20T07:58:20Z",
        "updated_at": "2023-03-20T08:04:21Z",
        "author_association": "NONE",
        "body": "![image](https://user-images.githubusercontent.com/71628009/226278706-ca866906-1bc4-4277-8266-319c61d22869.png)\r\n\r\nI have changed the code to look something like this \r\n\r\n     #include<GLFW/glfw3.h>\r\n     #define STB_IMAGE_IMPLEMENTATION\r\n     #include \"stb_image.h\"\r\n    \r\n     #include <iostream>\r\n     #include <onnxruntime_cxx_api.h>\r\n     #include<dml_provider_factory.h>\r\n     #include <vector>\r\n\r\n      std::vector<float> load_image_and_preprocess(std::string& filename, int& x, int& y);\r\n\r\n      std::vector<float> load_image_and_preprocess(std::string& filename, int& x, int& y) \r\n     {\r\n         std::cout << x<<y<<filename<<std::endl;\r\n         x = 0;\r\n         y = 0;\r\n         std::vector<float> ret;\r\n         int n;\r\n         unsigned char* data = stbi_load(filename.c_str(), &x, &y, &n, 3);\r\n         ret.resize(x * y * 3);\r\n         float* rptr = &ret[0 * x * y], * gptr = &ret[1 * x * y], * bptr = &ret[2 * x * y];\r\n         for (int i = 0; i < x * y; i++) {\r\n             *rptr++ = (float(data[3 * i + 0]) / 255 - 0.485) / 0.229;\r\n             *gptr++ = (float(data[3 * i + 1]) / 255 - 0.456) / 0.224;\r\n             *bptr++ = (float(data[3 * i + 2]) / 255 - 0.406) / 0.225;\r\n         }\r\n         stbi_image_free(data);\r\n         return ret;\r\n\r\n         }\r\n\r\n     int main() \r\n     { \r\n\r\n     const std::string model_s = \"C:/Downloads/resnet18-v1-7.tar/resnet18-v1-7/resnet18-v1-7.onnx\";\r\n     std::basic_string<ORTCHAR_T> model = std::basic_string<ORTCHAR_T>(model_s.begin(), model_s.end());\r\n     std::cout << model.c_str();\r\n     // onnxruntime setup\r\n     Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"batch-model-explorer\");\r\n     Ort::SessionOptions session_options;\r\n\r\n     OrtSessionOptionsAppendExecutionProvider_DML(session_options, 0);\r\n     Ort::Session session = Ort::Session(env, model.c_str(), session_options);\r\n\r\n     std::cout << \"number of model input:\" << session.GetInputCount() << std::endl;\r\n     std::cout << \"number of model Output:\" << session.GetOutputCount() << std::endl;\r\n\r\n     Ort::AllocatorWithDefaultOptions allocator;\r\n\r\n     auto val = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape().size();\r\n     auto val1 = session.GetOutputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape().size();\r\n     std::cout << \"number of model input:\" << val << std::endl;\r\n     std::cout << \"number of model Output:\" << val1 << std::endl;\r\n\r\n     auto input_names = session.GetInputNameAllocated(0, allocator);\r\n     auto output_names = session.GetOutputNameAllocated(0, allocator);\r\n     std::cout << \"Val:\" << input_names << std::endl;\r\n     std::cout << \"Val:\" << output_names << std::endl;\r\n\r\n\r\n     std::vector<int64_t> input_node_dims;\r\n     int i = 0;\r\n     input_node_dims[0] = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape();\r\n\r\n     for (int j = 0; j < input_node_dims[i].size(); j++)\r\n         printf(\"Input %d : dim %d=%jd\\n\", i, j, input_node_dims[i][j]);\r\n\r\n     int x = 0, y = 0;\r\n     std::string sVal = \"C:/Desktop/Image.png\";\r\n     std::vector<float> vecVal = load_image_and_preprocess(sVal, x, y);\r\n     std::cout << vecVal.size() << std::endl;\r\n     //for (int j = 0; j < vecVal.size(); j++)\r\n      //   std::cout << vecVal[j] << std::endl;\r\n     \r\n     constexpr size_t input_tensor_size = 224 * 224 * 3;\r\n     auto memory_info = Ort::MemoryInfo::CreateCpu(OrtArenaAllocator, OrtMemTypeDefault);\r\n\r\n      auto input_tensor = Ort::Value::CreateTensor<float>(memory_info, vecVal.data(), vecVal.size(), input_node_dims.data(), 4);\r\n\r\n\r\n     return 0;\r\n     }\r\n\r\nits gets exited with code 3 and if I comment the below line it compiles properly\r\n\r\n      auto input_tensor = Ort::Value::CreateTensor<float>(memory_info, vecVal.data(), vecVal.size(), input_node_dims.data(), 4);\r\n\r\nAnd I am not able to find \r\n\r\n       session.GetInputNames();\r\nas a part of session\r\n       Ort::Session",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475770423/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475847331",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1475847331",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1475847331,
        "node_id": "IC_kwDOCVq1mM5X96Sj",
        "user": {
            "login": "Maniron28",
            "id": 71628009,
            "node_id": "MDQ6VXNlcjcxNjI4MDA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/71628009?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Maniron28",
            "html_url": "https://github.com/Maniron28",
            "followers_url": "https://api.github.com/users/Maniron28/followers",
            "following_url": "https://api.github.com/users/Maniron28/following{/other_user}",
            "gists_url": "https://api.github.com/users/Maniron28/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Maniron28/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Maniron28/subscriptions",
            "organizations_url": "https://api.github.com/users/Maniron28/orgs",
            "repos_url": "https://api.github.com/users/Maniron28/repos",
            "events_url": "https://api.github.com/users/Maniron28/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Maniron28/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-20T08:59:16Z",
        "updated_at": "2023-03-20T08:59:43Z",
        "author_association": "NONE",
        "body": "certain functionality are not getting listed or not available as a part the code which I am trying to run,\r\n      \r\n        #include <experimental_onnxruntime_cxx_api.h>\r\n\r\nthe above header file is not available\r\nand \r\n      \r\n           session.GetInputNames();\r\n\r\nis also not available",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1475847331/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1476568205",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1476568205",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1476568205,
        "node_id": "IC_kwDOCVq1mM5YAqSN",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-20T16:33:23Z",
        "updated_at": "2023-03-20T16:33:23Z",
        "author_association": "MEMBER",
        "body": "Do not use experimental_onnxruntime_cxx_api.h as it's not actively maintained. Use onnxruntime_cxx_api.h instead as it's the official one.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1476568205/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477242754",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1477242754",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1477242754,
        "node_id": "IC_kwDOCVq1mM5YDO-C",
        "user": {
            "login": "Maniron28",
            "id": 71628009,
            "node_id": "MDQ6VXNlcjcxNjI4MDA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/71628009?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Maniron28",
            "html_url": "https://github.com/Maniron28",
            "followers_url": "https://api.github.com/users/Maniron28/followers",
            "following_url": "https://api.github.com/users/Maniron28/following{/other_user}",
            "gists_url": "https://api.github.com/users/Maniron28/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Maniron28/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Maniron28/subscriptions",
            "organizations_url": "https://api.github.com/users/Maniron28/orgs",
            "repos_url": "https://api.github.com/users/Maniron28/repos",
            "events_url": "https://api.github.com/users/Maniron28/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Maniron28/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-21T03:49:26Z",
        "updated_at": "2023-03-21T05:33:01Z",
        "author_association": "NONE",
        "body": "> Do not use experimental_onnxruntime_cxx_api.h as it's not actively maintained. Use onnxruntime_cxx_api.h instead as it's the official one.\r\n\r\nIf I use the onnxruntime_cxx_api.h still I am facing the issue as it couldnt determine the \"GetInputNames\" function, and kindly check the code which I have posted and let me know if I have done something wrong\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477242754/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477330644",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1477330644",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1477330644,
        "node_id": "IC_kwDOCVq1mM5YDkbU",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-21T06:09:55Z",
        "updated_at": "2023-03-21T06:10:29Z",
        "author_association": "MEMBER",
        "body": "GetShape() returns a vector as seen [here](https://github.com/microsoft/onnxruntime/blob/8d87fdcfa19a6b5932c88137b9cd6a43a658c7f3/include/onnxruntime/core/session/onnxruntime_cxx_api.h#L853. Hence, this statement ``` input_node_dims[0] = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape();``` is wrong. GetNames is not supported in the session API. You don't even need it. Please consider reading the API docs and examples.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477330644/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477342490",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15120#issuecomment-1477342490",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15120",
        "id": 1477342490,
        "node_id": "IC_kwDOCVq1mM5YDnUa",
        "user": {
            "login": "Maniron28",
            "id": 71628009,
            "node_id": "MDQ6VXNlcjcxNjI4MDA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/71628009?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Maniron28",
            "html_url": "https://github.com/Maniron28",
            "followers_url": "https://api.github.com/users/Maniron28/followers",
            "following_url": "https://api.github.com/users/Maniron28/following{/other_user}",
            "gists_url": "https://api.github.com/users/Maniron28/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Maniron28/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Maniron28/subscriptions",
            "organizations_url": "https://api.github.com/users/Maniron28/orgs",
            "repos_url": "https://api.github.com/users/Maniron28/repos",
            "events_url": "https://api.github.com/users/Maniron28/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Maniron28/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-21T06:30:12Z",
        "updated_at": "2023-03-21T06:31:10Z",
        "author_association": "NONE",
        "body": "> GetShape() returns a vector as seen [here](\r\n> \r\n> https://github.com/microsoft/onnxruntime/blob/8d87fdcfa19a6b5932c88137b9cd6a43a658c7f3/include/onnxruntime/core/session/onnxruntime_cxx_api.h#L853\r\n> \r\n> . Hence, this statement ` input_node_dims[0] = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape();` is wrong. GetNames is not supported in the session API. You don't even need it. Please consider reading the API docs and examples.\r\n\r\nHere is the updated code, but still I am facing the same issue\r\n\r\n      const std::string model_s = \"C:/Downloads/resnet18-v1-7.tar/resnet18-v1-7/resnet18-v1-7.onnx\";\r\n    std::basic_string<ORTCHAR_T> model = std::basic_string<ORTCHAR_T>(model_s.begin(), model_s.end());\r\n    std::cout << model.c_str();\r\n    // onnxruntime setup\r\n    Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"batch-model-explorer\");\r\n    Ort::SessionOptions session_options;\r\n    OrtSessionOptionsAppendExecutionProvider_DML(session_options, 0);\r\n    Ort::Session session = Ort::Session(env, model.c_str(), session_options);\r\n\r\n    std::cout << \"number of model input:\" << session.GetInputCount() << std::endl;\r\n    std::cout << \"number of model Output:\" << session.GetOutputCount() << std::endl;\r\n\r\n    Ort::AllocatorWithDefaultOptions allocator;\r\n\r\n    auto val = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape().size();\r\n    auto val1 = session.GetOutputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape().size();\r\n    std::cout << \"number of model input:\" << val << std::endl;\r\n    std::cout << \"number of model Output:\" << val1 << std::endl;\r\n\r\n    auto input_names = session.GetInputNameAllocated(0, allocator);\r\n    auto output_names = session.GetOutputNameAllocated(0, allocator);\r\n    std::cout << \"Val:\" << input_names << std::endl;\r\n    std::cout << \"Val:\" << output_names << std::endl;\r\n\r\n\r\n    std::vector<int64_t> input_node_dims;\r\n    int i = 0;\r\n    input_node_dims = session.GetInputTypeInfo(0).GetTensorTypeAndShapeInfo().GetShape();\r\n\r\n    for (int j = 0; j < input_node_dims.size(); j++)\r\n        printf(\"Input %d : dim %d=%jd\\n\", i, j, input_node_dims[j]);\r\n    \r\n    int x = 0, y = 0;\r\n    std::string sVal = \"C:/Desktop/Image.png\";\r\n    std::vector<float> vecVal = load_image_and_preprocess(sVal, x, y);\r\n    std::cout << vecVal.size() << std::endl;\r\n    //for (int j = 0; j < vecVal.size(); j++)\r\n     //   std::cout << vecVal[j] << std::endl;\r\n    \r\n    constexpr size_t input_tensor_size = 224 * 224 * 3;\r\n    auto memory_info = Ort::MemoryInfo::CreateCpu(OrtArenaAllocator, OrtMemTypeDefault);\r\n\r\n    std::cout << \"input_node_dims.data()\" << typeid(input_node_dims.data()).name() << std::endl;\r\n    \r\n    auto input_tensor = Ort::Value::CreateTensor<float>(memory_info, vecVal.data(), vecVal.size(),input_node_dims.data(), 4);\r\n\r\n \r\n    return 0;",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1477342490/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]