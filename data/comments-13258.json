[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273882164",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1273882164",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1273882164,
        "node_id": "IC_kwDOCVq1mM5L7eY0",
        "user": {
            "login": "ytaous",
            "id": 4484531,
            "node_id": "MDQ6VXNlcjQ0ODQ1MzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4484531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ytaous",
            "html_url": "https://github.com/ytaous",
            "followers_url": "https://api.github.com/users/ytaous/followers",
            "following_url": "https://api.github.com/users/ytaous/following{/other_user}",
            "gists_url": "https://api.github.com/users/ytaous/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ytaous/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ytaous/subscriptions",
            "organizations_url": "https://api.github.com/users/ytaous/orgs",
            "repos_url": "https://api.github.com/users/ytaous/repos",
            "events_url": "https://api.github.com/users/ytaous/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ytaous/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-10T22:42:04Z",
        "updated_at": "2022-10-10T22:42:04Z",
        "author_association": "MEMBER",
        "body": "Can u pls try just one provider and see? Namely, use cpu execution provider as baseline, and test cuda execution provider to compare with.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273882164/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273938737",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1273938737",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1273938737,
        "node_id": "IC_kwDOCVq1mM5L7sMx",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T00:24:56Z",
        "updated_at": "2022-10-11T00:31:00Z",
        "author_association": "MEMBER",
        "body": "@rayray41414141, Could it be related to other application or service is running?\r\n\r\nIn ubuntu VM with T4 GPU, I saw the CPU is busy (You might need change the test script to use I/O binding to avoid copy inputs/outputs between CPU & GPU).\r\n\r\n10000 runs is like the following:\r\n![image](https://user-images.githubusercontent.com/30328909/194971202-28abdbcd-b19a-40ff-b0c5-42b65a7718ff.png)\r\nI did saw small jump (from 160 to 210) in a short period of time. Probably not a big issue since 99.9% percentile is 170.7, which is only slightly larger than average.\r\n\r\nTest script:\r\n```\r\nimport time\r\nimport numpy as np\r\nimport onnxruntime as rt\r\nimport matplotlib.pyplot as plt\r\n\r\ntimes = []\r\ninput_shape = (1,512,7808,6)\r\n\r\nprint(rt.get_available_providers()[1:])\r\n\r\nsess = rt.InferenceSession(\r\n    \"model.onnx\", providers=rt.get_available_providers()[1:])\r\n\r\ninput_name = sess.get_inputs()[0].name\r\n\r\nwarm_up = 3\r\nfor i in range(warm_up):\r\n    x = np.random.random(input_shape)\r\n    x = x.astype(np.float32)\r\n    sess.run(None, {input_name: x})[0]\r\n\r\nfor i in range(10000):\r\n    x = np.random.random(input_shape)\r\n    x = x.astype(np.float32)\r\n    input_ready = time.perf_counter_ns()\r\n    sess.run(None, {input_name: x})[0]  # TODO: Use IO/Binding to avoid data copy between CPU & GPU\r\n    times.append(((time.perf_counter_ns() - input_ready)/1000000))\r\n\r\nfor p in [50, 75, 95, 99, 99.9]:\r\n    print(p, np.percentile(times, p))\r\n\r\nprint(times)\r\n\r\ny = np.array(times)\r\nx = np.arange(10000)\r\nplt.scatter(x, y)\r\nplt.show()\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273938737/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274170075",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1274170075",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1274170075,
        "node_id": "IC_kwDOCVq1mM5L8krb",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T06:54:31Z",
        "updated_at": "2022-10-11T06:54:31Z",
        "author_association": "NONE",
        "body": "> Can u pls try just one provider and see? Namely, use cpu execution provider as baseline, and test cuda execution provider to compare with.\r\n\r\nAlright, with only CUDAExecutionProvider selected it still has these outliers. \r\nI've alterd this line:\r\n```\r\nsess = rt.InferenceSession(\r\n    \".\\\\model.onnx\", providers=[rt.get_available_providers()[1]])\r\n```\r\n\r\nResult is this:\r\n![grafik](https://user-images.githubusercontent.com/90267929/195016484-5a467f68-61d3-4588-92b2-43a97eb3bcf8.png)\r\n\r\nRegarding the CPU, that one is still running.\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274170075/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274179167",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1274179167",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1274179167,
        "node_id": "IC_kwDOCVq1mM5L8m5f",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T07:02:04Z",
        "updated_at": "2022-10-11T07:02:04Z",
        "author_association": "NONE",
        "body": "> @rayray41414141, Could it be related to other application or service is running?\r\n> \r\n> In ubuntu VM with T4 GPU, I saw the CPU is busy (You might need change the test script to use I/O binding to avoid copy inputs/outputs between CPU & GPU).\r\n> \r\n> 10000 runs is like the following: ![image](https://user-images.githubusercontent.com/30328909/194971202-28abdbcd-b19a-40ff-b0c5-42b65a7718ff.png) I did saw small jump (from 160 to 210) in a short period of time. Probably not a big issue since 99.9% percentile is 170.7, which is only slightly larger than average.\r\n> \r\n> Test script:\r\n> \r\n> ```\r\n> import time\r\n> import numpy as np\r\n> import onnxruntime as rt\r\n> import matplotlib.pyplot as plt\r\n> \r\n> times = []\r\n> input_shape = (1,512,7808,6)\r\n> \r\n> print(rt.get_available_providers()[1:])\r\n> \r\n> sess = rt.InferenceSession(\r\n>     \"model.onnx\", providers=rt.get_available_providers()[1:])\r\n> \r\n> input_name = sess.get_inputs()[0].name\r\n> \r\n> warm_up = 3\r\n> for i in range(warm_up):\r\n>     x = np.random.random(input_shape)\r\n>     x = x.astype(np.float32)\r\n>     sess.run(None, {input_name: x})[0]\r\n> \r\n> for i in range(10000):\r\n>     x = np.random.random(input_shape)\r\n>     x = x.astype(np.float32)\r\n>     input_ready = time.perf_counter_ns()\r\n>     sess.run(None, {input_name: x})[0]  # TODO: Use IO/Binding to avoid data copy between CPU & GPU\r\n>     times.append(((time.perf_counter_ns() - input_ready)/1000000))\r\n> \r\n> for p in [50, 75, 95, 99, 99.9]:\r\n>     print(p, np.percentile(times, p))\r\n> \r\n> print(times)\r\n> \r\n> y = np.array(times)\r\n> x = np.arange(10000)\r\n> plt.scatter(x, y)\r\n> plt.show()\r\n> ```\r\n\r\nI have implemented IO/Bindings like this:\r\n```\r\ntimes = []\r\ntimes_full = []\r\ninput_shape = (1,512,7808,6)\r\n\r\nsess = rt.InferenceSession(\r\n    \".\\\\model.onnx\", providers=[rt.get_available_providers()[1]]) #exclude TensorrtExecutionProvider\r\ninput_name = sess.get_inputs()[0].name\r\noutput_name = sess.get_outputs()[0].name\r\n\r\nfor ii in tqdm(range(3000)):\r\n    x = np.random.random(input_shape)\r\n    x = x.astype(np.float32)\r\n\r\n    bind_timer = time.perf_counter_ns()\r\n\r\n    io_binding = sess.io_binding()\r\n    io_binding.bind_cpu_input(input_name, x)\r\n    io_binding.bind_output(output_name)\r\n\r\n    input_ready = time.perf_counter_ns()\r\n    \r\n    sess.run_with_iobinding(io_binding)\r\n    times.append(((time.perf_counter_ns() - input_ready)/1000000))\r\n    y = io_binding.copy_outputs_to_cpu()[0]\r\n    times_full.append(((time.perf_counter_ns() - bind_timer)/1000000))\r\n```\r\n\r\nBut there are still some spikes. Interestingly, the measured time is down to half of the time measured with normal input/outputs. So uploading and downloading takes the same time as infering it. \r\n\r\nThe PC is not doing anything, except running this python code and RemoteDesktop.\r\n\r\n![grafik](https://user-images.githubusercontent.com/90267929/195017575-0a4c509e-cf5c-40a9-9dac-8ecb37003cfa.png)\r\n\r\nNEXT, I will try your test script. Just in case.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274179167/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274598517",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1274598517",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1274598517,
        "node_id": "IC_kwDOCVq1mM5L-NR1",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T12:21:50Z",
        "updated_at": "2022-10-11T12:21:50Z",
        "author_association": "NONE",
        "body": "> Can u pls try just one provider and see? Namely, use cpu execution provider as baseline, and test cuda execution provider to compare with.\r\n\r\nSo the baseline would be this than? \r\nCPU as execution provider\r\n![grafik](https://user-images.githubusercontent.com/90267929/195087416-1f5822c1-4be6-479d-b6a1-bea2702bb12e.png)\r\n\r\nGenerated with this code:\r\n```\r\ntimes = []\r\ninput_shape = (1,512,7808,6)\r\n\r\nsess = rt.InferenceSession(\r\n    \".\\\\model.onnx\", providers=[rt.get_available_providers()[2]]) #exclude TensorrtExecutionProvider\r\ninput_name = sess.get_inputs()[0].name\r\n\r\nfor ii in tqdm(range(3000)):\r\n    x = np.random.random(input_shape)\r\n    x = x.astype(np.float32)\r\n    input_ready = time.perf_counter_ns()\r\n    \r\n    sess.run(None, {input_name: x})[0]\r\n    times.append(((time.perf_counter_ns() - input_ready)/1000000))\r\n```\r\nThere are still some spikes and this weird part where the time drops temporarily below 4000ms .. \r\nAs I already mentioned the PC is totally idle, except the python code and RemoteDesktop.\r\nDo you @ytaous  have any idea what I could change?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274598517/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274776077",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1274776077",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1274776077,
        "node_id": "IC_kwDOCVq1mM5L-4oN",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T14:23:27Z",
        "updated_at": "2022-10-11T14:23:27Z",
        "author_association": "NONE",
        "body": "> @rayray41414141, Could it be related to other application or service is running?\r\n> \r\n> In ubuntu VM with T4 GPU, I saw the CPU is busy (You might need change the test script to use I/O binding to avoid copy inputs/outputs between CPU & GPU).\r\n> \r\n> 10000 runs is like the following: ![image](https://user-images.githubusercontent.com/30328909/194971202-28abdbcd-b19a-40ff-b0c5-42b65a7718ff.png) I did saw small jump (from 160 to 210) in a short period of time. Probably not a big issue since 99.9% percentile is 170.7, which is only slightly larger than average.\r\n> \r\n> Test script:\r\n> \r\n> ```\r\n> import time\r\n> import numpy as np\r\n> import onnxruntime as rt\r\n> import matplotlib.pyplot as plt\r\n> \r\n> times = []\r\n> input_shape = (1,512,7808,6)\r\n> \r\n> print(rt.get_available_providers()[1:])\r\n> \r\n> sess = rt.InferenceSession(\r\n>     \"model.onnx\", providers=rt.get_available_providers()[1:])\r\n> \r\n> input_name = sess.get_inputs()[0].name\r\n> \r\n> warm_up = 3\r\n> for i in range(warm_up):\r\n>     x = np.random.random(input_shape)\r\n>     x = x.astype(np.float32)\r\n>     sess.run(None, {input_name: x})[0]\r\n> \r\n> for i in range(10000):\r\n>     x = np.random.random(input_shape)\r\n>     x = x.astype(np.float32)\r\n>     input_ready = time.perf_counter_ns()\r\n>     sess.run(None, {input_name: x})[0]  # TODO: Use IO/Binding to avoid data copy between CPU & GPU\r\n>     times.append(((time.perf_counter_ns() - input_ready)/1000000))\r\n> \r\n> for p in [50, 75, 95, 99, 99.9]:\r\n>     print(p, np.percentile(times, p))\r\n> \r\n> print(times)\r\n> \r\n> y = np.array(times)\r\n> x = np.arange(10000)\r\n> plt.scatter(x, y)\r\n> plt.show()\r\n> ```\r\n\r\n@tianleiwu So no I have tested yours too.\r\n\r\nthis is without IO/Bindings \r\n![grafik](https://user-images.githubusercontent.com/90267929/195117486-aaa7546e-9c5a-4ad7-8ca1-cc6dd6b61a86.png)\r\n\r\nand this with IO/Bindings\r\n\r\n![grafik](https://user-images.githubusercontent.com/90267929/195117571-cd3b898e-2c87-4600-b6ca-378d09f7b444.png)\r\n\r\nDo you have any idea what else I could have wrong? \r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274776077/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274795554",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1274795554",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1274795554,
        "node_id": "IC_kwDOCVq1mM5L-9Yi",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T14:34:05Z",
        "updated_at": "2022-10-11T14:34:05Z",
        "author_association": "NONE",
        "body": "@tianleiwu @ytaous \r\n\r\nIs it possible that this is network related? Like could it be that this type of network is not memory efficient and sometimes the GPU has to free memory? Even if I use IO/Bindings and do always have the same size of input..?\r\n\r\nAs far as I know perf_counter_ns is the most accurate timer, otherwise this could be a problem too? \r\n\r\nCould I test a onnx file, which has constant inference times for any of you guys? \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274795554/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1275092765",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1275092765",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1275092765,
        "node_id": "IC_kwDOCVq1mM5MAF8d",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T18:15:30Z",
        "updated_at": "2022-10-11T18:37:39Z",
        "author_association": "MEMBER",
        "body": "@rayray41414141, there are a few things to try:\r\n(1) Use nvidia-smi to monitor which process is using GPU during one test run.\r\n(2) Modify script to keep inputs and output in GPU memory, and see whether the spike disappear. If so, it is likely large memory copy has paging.\r\n(3) Look for signs of thread switch like this: https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc938606(v=technet.10)?redirectedfrom=MSDN\r\n(4) use `nvprof --cpu-thread-tracing on --cpu-profiling-thread-mode separated` to profile, see https://docs.nvidia.com/hpc-sdk/pgi-compilers/18.10/x86/profiler-users-guide/index.htm#nvprof-command-line-options-cpu for more options.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1275092765/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1276092208",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1276092208",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1276092208,
        "node_id": "IC_kwDOCVq1mM5MD58w",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-12T12:34:39Z",
        "updated_at": "2022-10-26T09:44:40Z",
        "author_association": "NONE",
        "body": "> @rayray41414141, there are a few things to try: (1) Use nvidia-smi to monitor which process is using GPU during one test run. (2) Modify script to keep inputs and output in GPU memory, and see whether the spike disappear. If so, it is likely large memory copy has paging. (3) Look for signs of thread switch like this: https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc938606(v=technet.10)?redirectedfrom=MSDN (4) use `nvprof --cpu-thread-tracing on --cpu-profiling-thread-mode separated` to profile, see https://docs.nvidia.com/hpc-sdk/pgi-compilers/18.10/x86/profiler-users-guide/index.htm#nvprof-command-line-options-cpu for more options.\r\n\r\nOke so\r\n\r\n1.) I was running multiple tests and there was never another process using the GPU except the python process.\r\n\r\n2.) I have modified the script as follows, but the spikes remained:\r\n```\r\n    x = np.random.random(input_shape)\r\n    x = x.astype(np.float32)\r\n        \r\n    X_ortvalue = rt.OrtValue.ortvalue_from_numpy(x, 'cuda', 0)\r\n    Y_ortvalue = rt.OrtValue.ortvalue_from_shape_and_type([1, 512, 7808, 5], np.float32, 'cuda', 0)  # Change the shape to the actual shape of the output being bound\r\n\r\n    io_binding = sess.io_binding()\r\n    io_binding.bind_input(name=input_name, device_type=X_ortvalue.device_name(), device_id=0, element_type=np.float32, shape=X_ortvalue.shape(), buffer_ptr=X_ortvalue.data_ptr())\r\n    io_binding.bind_output(name=output_name, device_type=Y_ortvalue.device_name(), device_id=0, element_type=np.float32, shape=Y_ortvalue.shape(), buffer_ptr=Y_ortvalue.data_ptr())\r\n    \r\n    sess.run_with_iobinding(io_binding)\r\n```\r\n\r\n3.) I did this and for me it does not look like there is a specific increase of context switches. I mean, if the overal activity increases should the amount of switches also increase? Anyway, here is one of the results:\r\nFor this test:\r\n![grafik](https://user-images.githubusercontent.com/90267929/195340255-542333de-8b9b-4a08-80d7-d0156ee4301c.png)\r\n\r\nI've generated this PerfMon output:\r\n![grafik](https://user-images.githubusercontent.com/90267929/195340569-dee1d11d-adda-4046-a192-a25de4fad184.png)\r\nThe yellow line marks the test period and the black dots mark the first 4 major outliers from the first chart.\r\nWhat does seem interesting to me, is that there is a symmertic-like pattern of the context switches (blue/green line). But these are happening during idle times too. \r\n\r\n4.)  If I execute this line of code, I get the `ncprof.exe stopped working`-pop up 😅 At the moment, I've no idea why, BUT!\r\nBut I ran it without any parameters and the times where stable!\r\nCommand:\r\n`nvprof --log-file \"profiling.log\" --csv python .\\script_IO_onGPU.py`\r\n\r\nThe result was:\r\n![grafik](https://user-images.githubusercontent.com/90267929/195343282-b0102d46-b5bb-42cc-9f6c-1423b0db08e0.png)\r\n\r\nthe question now is, WHY? \r\n\r\nEDIT:\r\nThe output of the profiling. Sorted by avg duration.\r\n![grafik](https://user-images.githubusercontent.com/90267929/195354165-2fac83a5-5d70-4d3c-b704-4d15cc2528ad.png)\r\n\r\nEDIT_2:\r\nFurther into the problem it seems that the spikes are not allways happening.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1276092208/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1276870003",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1276870003",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1276870003,
        "node_id": "IC_kwDOCVq1mM5MG31z",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-13T00:19:36Z",
        "updated_at": "2022-10-13T00:31:35Z",
        "author_association": "MEMBER",
        "body": "@rayray41414141, please output the nvprof result to a file with a parameter (`-o output.nvvp`), then share the output file. You can import the file to Visual Profiler (nvvp). From the timeline, you shall be able to identify those places that having a spike of time. Then take a look at GPU/CPU activity at those spots.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1276870003/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1277828184",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1277828184",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1277828184,
        "node_id": "IC_kwDOCVq1mM5MKhxY",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-13T15:49:47Z",
        "updated_at": "2022-10-13T15:49:47Z",
        "author_association": "NONE",
        "body": "@tianleiwu \r\nYea, it took a while to genenerate the ouput. It seems like these spikes are not that frequent using nvprof.\r\n\r\nApparently, the spikes come from the cudaStreamSynchronize Runtime API call. \r\n\r\n![grafik](https://user-images.githubusercontent.com/90267929/195638706-cf46377e-84fd-41fe-8348-da5a8d3183d1.png)\r\n\r\nYou can download the full output.nvvp [HERE](https://github.com/rayray41414141/nvvp_output). \r\n\r\nThe biggest spike is at 266.4 seconds uptime.\r\nThere are a couple more at:\r\n* 12.75s\r\n* 13.85s\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1277828184/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1278312613",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1278312613",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1278312613,
        "node_id": "IC_kwDOCVq1mM5MMYCl",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-14T00:20:09Z",
        "updated_at": "2022-10-14T00:20:09Z",
        "author_association": "MEMBER",
        "body": "@rayray41414141,  it is weird that cudaStreamSyncronze does not return when kernels on the stream has finished. There are two possible causes: (1) host thread is not active at that time. (2) some bug in device driver or WDDM.  \r\nFor 1, need cpu thread tracing as I mentioned earlier. \r\nFor 2, you can try upgrade CUDA (including driver) and cuDNN to latest version, and try our 1.13 RC: https://github.com/microsoft/onnxruntime/issues/13285\r\n\r\nAt the meantime, we will try to reproduce it in some Windows machines.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1278312613/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1279080792",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1279080792",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1279080792,
        "node_id": "IC_kwDOCVq1mM5MPTlY",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-14T14:23:26Z",
        "updated_at": "2022-10-14T14:36:29Z",
        "author_association": "NONE",
        "body": "@tianleiwu \r\nTook me longer than expected, but this does not seem to be possible .. 😬\r\n![grafik](https://user-images.githubusercontent.com/90267929/195869877-4b025639-f756-4e63-adf8-b13a7ea5da1e.png)\r\n\r\nBut I managed to install latest versions and the 1.13 RC.. Will keep you up to date.\r\nAnd thank you very much for your help till now! \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1279080792/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1279288394",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1279288394",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1279288394,
        "node_id": "IC_kwDOCVq1mM5MQGRK",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-14T17:39:33Z",
        "updated_at": "2022-10-14T17:51:57Z",
        "author_association": "MEMBER",
        "body": "![image](https://user-images.githubusercontent.com/48490400/195907738-e130d957-008c-4186-a33a-3d5692bcd55e.png)\r\nTested on my windows A2000,11.4(472.50) + 8.2.4, ort 1.12.1, no similar bumps found even with 10000 laps of running. After a few initial lagging the curve became flat.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1279288394/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1288526872",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1288526872",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1288526872,
        "node_id": "IC_kwDOCVq1mM5MzVwY",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-24T07:15:57Z",
        "updated_at": "2022-10-24T07:15:57Z",
        "author_association": "NONE",
        "body": "Sry I temporarily had something else to deal with...\r\nso [this](https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1279288394) above is the windows machine test?\r\nI assume @RandySheriffH you did multiple tests..? \r\n\r\nSo, what else could it be? Maybe something hardware related? I did try it on different machines, but always the same model of PC.. I will try it on a different model. \r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1288526872/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1291772095",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1291772095",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1291772095,
        "node_id": "IC_kwDOCVq1mM5M_uC_",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-26T09:41:53Z",
        "updated_at": "2022-10-28T05:58:07Z",
        "author_association": "NONE",
        "body": "> @rayray41414141, it is weird that cudaStreamSyncronze does not return when kernels on the stream has finished. There are two possible causes: (1) host thread is not active at that time. (2) some bug in device driver or WDDM. For 1, need cpu thread tracing as I mentioned earlier. For 2, you can try upgrade CUDA (including driver) and cuDNN to latest version, and try our 1.13 RC: #13285\r\n> \r\n> At the meantime, we will try to reproduce it in some Windows machines.\r\n\r\nI did all this and there are still spikes. I have switched the GPU to TCC mode as well but that too did not fix the issue.\r\n\r\nAs I said before, I tried it on a totally different HW and still get the spikes.\r\n\r\nI have to test it further, but it seems like the spikes do only occure if I actively use the PC.\r\nIs there an other way to trace CPU activity, other than with cpu_tracing parameter?\r\n\r\nEDIT:\r\n@tianleiwu ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1291772095/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293439388",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13258#issuecomment-1293439388",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13258",
        "id": 1293439388,
        "node_id": "IC_kwDOCVq1mM5NGFGc",
        "user": {
            "login": "rayray41414141",
            "id": 90267929,
            "node_id": "MDQ6VXNlcjkwMjY3OTI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/90267929?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rayray41414141",
            "html_url": "https://github.com/rayray41414141",
            "followers_url": "https://api.github.com/users/rayray41414141/followers",
            "following_url": "https://api.github.com/users/rayray41414141/following{/other_user}",
            "gists_url": "https://api.github.com/users/rayray41414141/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rayray41414141/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rayray41414141/subscriptions",
            "organizations_url": "https://api.github.com/users/rayray41414141/orgs",
            "repos_url": "https://api.github.com/users/rayray41414141/repos",
            "events_url": "https://api.github.com/users/rayray41414141/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rayray41414141/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T12:16:34Z",
        "updated_at": "2022-10-27T12:16:34Z",
        "author_association": "NONE",
        "body": "> ![image](https://user-images.githubusercontent.com/48490400/195907738-e130d957-008c-4186-a33a-3d5692bcd55e.png) Tested on my windows A2000,11.4(472.50) + 8.2.4, ort 1.12.1, no similar bumps found even with 10000 laps of running. After a few initial lagging the curve became flat.\r\n\r\n@RandySheriffH what kind of script are you using? Could you provide me with the script and maybe with the requirements file of your python installation you have tested it? 😅 ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293439388/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]