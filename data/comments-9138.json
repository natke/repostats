[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924182132",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-924182132",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 924182132,
        "node_id": "IC_kwDOCVq1mM43FeZ0",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-21T17:05:23Z",
        "updated_at": "2021-09-21T17:05:23Z",
        "author_association": "MEMBER",
        "body": "Could you say more about onnxruntime+torch? Do you load both onnxruntime and torch? And what is your build option? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924182132/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924440094",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-924440094",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 924440094,
        "node_id": "IC_kwDOCVq1mM43GdYe",
        "user": {
            "login": "mifikri",
            "id": 31136309,
            "node_id": "MDQ6VXNlcjMxMTM2MzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/31136309?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mifikri",
            "html_url": "https://github.com/mifikri",
            "followers_url": "https://api.github.com/users/mifikri/followers",
            "following_url": "https://api.github.com/users/mifikri/following{/other_user}",
            "gists_url": "https://api.github.com/users/mifikri/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mifikri/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mifikri/subscriptions",
            "organizations_url": "https://api.github.com/users/mifikri/orgs",
            "repos_url": "https://api.github.com/users/mifikri/repos",
            "events_url": "https://api.github.com/users/mifikri/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mifikri/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-21T22:38:10Z",
        "updated_at": "2021-09-21T22:40:59Z",
        "author_association": "NONE",
        "body": "i just create session using onnxruntime, there is no invoke torch library. \n\nthe point is: \nif the build option linking to onnxruntime, the gpu memory allocate 207 MiB. \n\nand if both onnxruntime and torch are linking, the gpu memory allocate 825MiB.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924440094/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924542271",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-924542271",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 924542271,
        "node_id": "IC_kwDOCVq1mM43G2U_",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-22T03:02:50Z",
        "updated_at": "2021-09-22T03:02:50Z",
        "author_association": "MEMBER",
        "body": "As you built from source, I want to know if you built with training enabled by asking for the build option. Our training has dependency on torch in certain cases.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924542271/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924567906",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-924567906",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 924567906,
        "node_id": "IC_kwDOCVq1mM43G8li",
        "user": {
            "login": "mifikri",
            "id": 31136309,
            "node_id": "MDQ6VXNlcjMxMTM2MzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/31136309?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mifikri",
            "html_url": "https://github.com/mifikri",
            "followers_url": "https://api.github.com/users/mifikri/followers",
            "following_url": "https://api.github.com/users/mifikri/following{/other_user}",
            "gists_url": "https://api.github.com/users/mifikri/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mifikri/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mifikri/subscriptions",
            "organizations_url": "https://api.github.com/users/mifikri/orgs",
            "repos_url": "https://api.github.com/users/mifikri/repos",
            "events_url": "https://api.github.com/users/mifikri/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mifikri/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-22T04:13:46Z",
        "updated_at": "2021-09-22T04:18:27Z",
        "author_association": "NONE",
        "body": "I was using the build script from https://github.com/microsoft/onnxruntime/blob/v1.8.2/dockerfiles/Dockerfile.tensorrt#L21 .\r\n```bash\r\n...\r\n'-Donnxruntime_ENABLE_TRAINING=OFF', \r\n'-Donnxruntime_ENABLE_TRAINING_OPS=OFF'\r\n```\r\nDoes it introduce effect for create session?\r\n\r\n-------------------------------------------------------------------------------------------------------------------\r\nFYI, i just test onnxruntime v1.4.0 with torch 1.6. has same effect. The build command same too https://github.com/microsoft/onnxruntime/blob/v1.4.0/dockerfiles/Dockerfile.tensorrt#L21\r\n\r\n| model | linking ort 1.4.0 | linking ort 1.4.0 and torch 1.6.0 |\r\n|----------|----------------------|-------------------------------------------|\r\n| yolov4 | 311 MiB | 611 MiB|\r\n\r\nthe pattern is likely same as ort 1.8.2 version. \r\n\r\nlinking ort 1.4.0\r\n\r\n![Screenshot from 2021-09-22 11-05-28](https://user-images.githubusercontent.com/31136309/134282244-1542d5cb-e4a3-4492-9c3d-2b4f17d78c18.png)\r\n\r\nlinking ort 1.4.0 + torch 1.6.0\r\n\r\n![Screenshot from 2021-09-22 11-05-23](https://user-images.githubusercontent.com/31136309/134282250-3260fddd-d605-477e-97c6-fba73d219154.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924567906/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924785160",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-924785160",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 924785160,
        "node_id": "IC_kwDOCVq1mM43HxoI",
        "user": {
            "login": "triwahyuu",
            "id": 18413229,
            "node_id": "MDQ6VXNlcjE4NDEzMjI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/18413229?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/triwahyuu",
            "html_url": "https://github.com/triwahyuu",
            "followers_url": "https://api.github.com/users/triwahyuu/followers",
            "following_url": "https://api.github.com/users/triwahyuu/following{/other_user}",
            "gists_url": "https://api.github.com/users/triwahyuu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/triwahyuu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/triwahyuu/subscriptions",
            "organizations_url": "https://api.github.com/users/triwahyuu/orgs",
            "repos_url": "https://api.github.com/users/triwahyuu/repos",
            "events_url": "https://api.github.com/users/triwahyuu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/triwahyuu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-22T10:09:32Z",
        "updated_at": "2021-09-22T10:09:32Z",
        "author_association": "NONE",
        "body": "looks like similar problem occur in python, as described in #8823 ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/924785160/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/993044825",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-993044825",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 993044825,
        "node_id": "IC_kwDOCVq1mM47MKlZ",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-14T00:39:02Z",
        "updated_at": "2021-12-14T00:39:02Z",
        "author_association": "MEMBER",
        "body": "I will do some digging into this",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/993044825/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/997056699",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-997056699",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 997056699,
        "node_id": "IC_kwDOCVq1mM47beC7",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-17T22:01:59Z",
        "updated_at": "2021-12-18T00:06:26Z",
        "author_association": "MEMBER",
        "body": "I couldn't repro this on Windows (K620) or Ubuntu 20 (V100). Any chance you could try with ORT 1.10 and check if the issue persists ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/997056699/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/997331134",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-997331134",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 997331134,
        "node_id": "IC_kwDOCVq1mM47chC-",
        "user": {
            "login": "triwahyuu",
            "id": 18413229,
            "node_id": "MDQ6VXNlcjE4NDEzMjI5",
            "avatar_url": "https://avatars.githubusercontent.com/u/18413229?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/triwahyuu",
            "html_url": "https://github.com/triwahyuu",
            "followers_url": "https://api.github.com/users/triwahyuu/followers",
            "following_url": "https://api.github.com/users/triwahyuu/following{/other_user}",
            "gists_url": "https://api.github.com/users/triwahyuu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/triwahyuu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/triwahyuu/subscriptions",
            "organizations_url": "https://api.github.com/users/triwahyuu/orgs",
            "repos_url": "https://api.github.com/users/triwahyuu/repos",
            "events_url": "https://api.github.com/users/triwahyuu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/triwahyuu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-19T05:12:03Z",
        "updated_at": "2021-12-19T05:18:35Z",
        "author_association": "NONE",
        "body": "Hi @hariharans29, I could replicate this in python by importing or not importing torch in the same script:\r\n```python\r\nimport onnxruntime as ort\r\n\r\nsess = ort.InferenceSession(\"resnet18-v2-7.onnx\", providers=['CUDAExecutionProvider'])\r\nassert 'CUDAExecutionProvider' in sess.get_providers()\r\nwhile True:\r\n    pass\r\n```\r\ngets 345MB of memory:\r\n![Screenshot from 2021-12-19 12-01-26](https://user-images.githubusercontent.com/18413229/146664559-80f20f3c-0693-4571-b086-18ebdfb78bf0.png)\r\n\r\nwhile when adding import torch:\r\n```python\r\nimport onnxruntime as ort\r\nimport torch\r\n\r\nsess = ort.InferenceSession(\"resnet18-v2-7.onnx\", providers=['CUDAExecutionProvider'])\r\nassert 'CUDAExecutionProvider' in sess.get_providers()\r\nwhile True:\r\n    pass\r\n```\r\nI get 1031MB:\r\n![image](https://user-images.githubusercontent.com/18413229/146664611-564845c5-495b-42d0-b5d1-1efb1465c7b5.png)\r\n\r\nI'm using:\r\n- onnxruntime 1.8.1\r\n- pytorch 1.9.0\r\n- CUDA 11.3\r\n\r\nI got around the same memory usage when using onnxruntime 1.10.\r\nI'm using resnet model from onnx repo https://github.com/onnx/models/blob/master/vision/classification/resnet/model/resnet18-v2-7.onnx",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/997331134/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100843537",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9138#issuecomment-1100843537",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9138",
        "id": 1100843537,
        "node_id": "IC_kwDOCVq1mM5BnYoR",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-17T09:53:43Z",
        "updated_at": "2022-04-17T09:53:43Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100843537/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]