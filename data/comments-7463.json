[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/827943088",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7463#issuecomment-827943088",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7463",
        "id": 827943088,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyNzk0MzA4OA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-27T21:28:38Z",
        "updated_at": "2021-04-27T21:28:38Z",
        "author_association": "MEMBER",
        "body": "We use a memory pool for the GPU memory. That is freed when the ORT session is deleted. \r\n\r\nCurrently there's no mechanism to explicitly free memory that the session is using whilst keeping the session around. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/827943088/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/828864822",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7463#issuecomment-828864822",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7463",
        "id": 828864822,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyODg2NDgyMg==",
        "user": {
            "login": "feipxyz",
            "id": 26288410,
            "node_id": "MDQ6VXNlcjI2Mjg4NDEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/26288410?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/feipxyz",
            "html_url": "https://github.com/feipxyz",
            "followers_url": "https://api.github.com/users/feipxyz/followers",
            "following_url": "https://api.github.com/users/feipxyz/following{/other_user}",
            "gists_url": "https://api.github.com/users/feipxyz/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/feipxyz/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/feipxyz/subscriptions",
            "organizations_url": "https://api.github.com/users/feipxyz/orgs",
            "repos_url": "https://api.github.com/users/feipxyz/repos",
            "events_url": "https://api.github.com/users/feipxyz/events{/privacy}",
            "received_events_url": "https://api.github.com/users/feipxyz/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-29T00:26:57Z",
        "updated_at": "2021-04-29T00:26:57Z",
        "author_association": "NONE",
        "body": "> We use a memory pool for the GPU memory. That is freed when the ORT session is deleted.\r\n> \r\n> Currently there's no mechanism to explicitly free memory that the session is using whilst keeping the session around.\r\n\r\nI want to limit memory usage when forward. I refer to this document[CUDA Execution Provider](https://www.onnxruntime.ai/docs/reference/execution-providers/CUDA-ExecutionProvider.html). \r\n```python\r\nso = onnxruntime.SessionOptions()\r\n        so.graph_optimization_level = onnxruntime.GraphOptimizationLevel.ORT_ENABLE_ALL # ORT_ENABLE_EXTENDED ORT_ENABLE_ALL\r\n        so.intra_op_num_threads = 4\r\n        so.execution_mode = onnxruntime.ExecutionMode.ORT_SEQUENTIAL # ORT_PARALLEL ORT_SEQUENTIAL\r\n        providers = [\r\n            ('CUDAExecutionProvider', {\r\n                'device_id': 0,\r\n                'arena_extend_strategy': 'kNextPowerOfTwo',\r\n                'cuda_mem_limit': 4 * 1024 * 1024 * 1024,\r\n                'cudnn_conv_algo_search': 'EXHAUSTIVE',\r\n                'do_copy_in_default_stream': True,\r\n            }),\r\n            'CPUExecutionProvider',\r\n        ]\r\n        # self.ort_session = onnxruntime.InferenceSession(model_path, sess_options=so)              \r\n        self.ort_session = onnxruntime.InferenceSession(model_path, sess_options=so, providers=providers)             \r\n```\r\nBut An error occurred during running \r\n```\r\n    self.ort_session = onnxruntime.InferenceSession(model_path, sess_options=so, providers=providers)\r\n  File \"C:\\Users\\1\\miniconda3\\envs\\py37\\lib\\site-packages\\onnxruntime\\capi\\session.py\", line 195, in __init__\r\n    self._create_inference_session(providers, provider_options)\r\n  File \"C:\\Users\\1\\miniconda3\\envs\\py37\\lib\\site-packages\\onnxruntime\\capi\\session.py\", line 205, in _create_inference_session\r\n    sess.initialize_session(providers or [], provider_options or [])\r\nTypeError: initialize_session(): incompatible function arguments. The following argument types are supported:\r\n    1. (self: onnxruntime.capi.onnxruntime_pybind11_state.InferenceSession, arg0: List[str], arg1: List[Dict[str, str]]) -> None\r\n\r\nInvoked with: <onnxruntime.capi.onnxruntime_pybind11_state.InferenceSession object at 0x000001DD895D80F0>, [('CUDAExecutionProvider', {'device_id': 0, 'arena_extend_strategy': 'kNextPowerOfTwo', 'cuda_mem_limit': 4294967296, 'cudnn_conv_algo_search': 'EXHAUSTIVE', 'do_copy_in_default_stream': True}), 'CPUExecutionProvider'], []\r\n```\r\nHow to do it rightï¼Ÿ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/828864822/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/831050454",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7463#issuecomment-831050454",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7463",
        "id": 831050454,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTA1MDQ1NA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-03T06:27:39Z",
        "updated_at": "2021-05-03T06:27:39Z",
        "author_association": "MEMBER",
        "body": "I pasted your `providers` config and tried with ORT v1.7 with no problem. Can you check the ORT version you're using in the miniconda environment (`help(onnxruntime)` after importing onnxruntime should print the version near the end of the output) to make sure it's 1.7?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/831050454/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]