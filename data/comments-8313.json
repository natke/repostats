[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/875762030",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-875762030",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 875762030,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTc2MjAzMA==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-07T16:47:09Z",
        "updated_at": "2021-07-07T16:47:09Z",
        "author_association": "MEMBER",
        "body": "I believe you have used cpuset at the same time?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/875762030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876092511",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876092511",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876092511,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjA5MjUxMQ==",
        "user": {
            "login": "zyl112334",
            "id": 44828597,
            "node_id": "MDQ6VXNlcjQ0ODI4NTk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/44828597?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zyl112334",
            "html_url": "https://github.com/zyl112334",
            "followers_url": "https://api.github.com/users/zyl112334/followers",
            "following_url": "https://api.github.com/users/zyl112334/following{/other_user}",
            "gists_url": "https://api.github.com/users/zyl112334/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zyl112334/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zyl112334/subscriptions",
            "organizations_url": "https://api.github.com/users/zyl112334/orgs",
            "repos_url": "https://api.github.com/users/zyl112334/repos",
            "events_url": "https://api.github.com/users/zyl112334/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zyl112334/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T03:23:07Z",
        "updated_at": "2021-07-08T03:23:07Z",
        "author_association": "NONE",
        "body": "I solve this problem with seting \"options = ort.SessionOptions()   options.intra_op_num_threads = 1 options.inter_op_num_threads = 1\"(the defalut value for those params is 0), how can i understand this condition?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876092511/reactions",
            "total_count": 3,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876289857",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876289857",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876289857,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjI4OTg1Nw==",
        "user": {
            "login": "NCEPUYTL",
            "id": 37887563,
            "node_id": "MDQ6VXNlcjM3ODg3NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/37887563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NCEPUYTL",
            "html_url": "https://github.com/NCEPUYTL",
            "followers_url": "https://api.github.com/users/NCEPUYTL/followers",
            "following_url": "https://api.github.com/users/NCEPUYTL/following{/other_user}",
            "gists_url": "https://api.github.com/users/NCEPUYTL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NCEPUYTL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NCEPUYTL/subscriptions",
            "organizations_url": "https://api.github.com/users/NCEPUYTL/orgs",
            "repos_url": "https://api.github.com/users/NCEPUYTL/repos",
            "events_url": "https://api.github.com/users/NCEPUYTL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NCEPUYTL/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T09:35:59Z",
        "updated_at": "2021-07-08T09:35:59Z",
        "author_association": "NONE",
        "body": "I meet the same error, by setting \"options = ort.SessionOptions() options.intra_op_num_threads = 1 options.inter_op_num_threads = 1\" ,but the inference speed is slow，How can I still inference using CPU under GPU environment",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876289857/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876732519",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876732519",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876732519,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjczMjUxOQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T20:42:07Z",
        "updated_at": "2021-07-08T20:42:07Z",
        "author_association": "MEMBER",
        "body": "What if you set intra_op_num_threads  to the number of your CPU cores? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876732519/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876885818",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876885818",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876885818,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3Njg4NTgxOA==",
        "user": {
            "login": "NCEPUYTL",
            "id": 37887563,
            "node_id": "MDQ6VXNlcjM3ODg3NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/37887563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NCEPUYTL",
            "html_url": "https://github.com/NCEPUYTL",
            "followers_url": "https://api.github.com/users/NCEPUYTL/followers",
            "following_url": "https://api.github.com/users/NCEPUYTL/following{/other_user}",
            "gists_url": "https://api.github.com/users/NCEPUYTL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NCEPUYTL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NCEPUYTL/subscriptions",
            "organizations_url": "https://api.github.com/users/NCEPUYTL/orgs",
            "repos_url": "https://api.github.com/users/NCEPUYTL/repos",
            "events_url": "https://api.github.com/users/NCEPUYTL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NCEPUYTL/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-09T03:28:16Z",
        "updated_at": "2021-07-09T03:28:16Z",
        "author_association": "NONE",
        "body": "> What if you set intra_op_num_threads to the number of your CPU cores?\r\n\r\nslower if I set  intra_op_num_threads to the number of my CPU cores，So How can I infer only use CPU under GPU  environment,thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876885818/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878421181",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-878421181",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 878421181,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODQyMTE4MQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-12T16:29:34Z",
        "updated_at": "2021-07-12T16:29:34Z",
        "author_association": "MEMBER",
        "body": "> How can I infer only use CPU under GPU\r\n\r\nYou can use the cpu only package: https://pypi.org/project/onnxruntime/ instead of https://pypi.org/project/onnxruntime-gpu/ .",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878421181/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1043495584",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1043495584",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1043495584,
        "node_id": "IC_kwDOCVq1mM4-Mnqg",
        "user": {
            "login": "poem2018",
            "id": 40330318,
            "node_id": "MDQ6VXNlcjQwMzMwMzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/40330318?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/poem2018",
            "html_url": "https://github.com/poem2018",
            "followers_url": "https://api.github.com/users/poem2018/followers",
            "following_url": "https://api.github.com/users/poem2018/following{/other_user}",
            "gists_url": "https://api.github.com/users/poem2018/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/poem2018/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/poem2018/subscriptions",
            "organizations_url": "https://api.github.com/users/poem2018/orgs",
            "repos_url": "https://api.github.com/users/poem2018/repos",
            "events_url": "https://api.github.com/users/poem2018/events{/privacy}",
            "received_events_url": "https://api.github.com/users/poem2018/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-17T21:52:46Z",
        "updated_at": "2022-02-17T21:55:16Z",
        "author_association": "NONE",
        "body": "Hi, I also met the same problem. And I want to use GPU to do the onnx inference, I tried 'options = ort.SessionOptions() options.intra_op_num_threads = 1 options.inter_op_num_threads = 1', but the error become 'segmentation fault', I wonder is there any other solutions to solve this problem?\r\n\r\nmy environment:\r\npython                      3.6.13\r\nonnx                         1.10.2\r\nonnxruntime-gpu     1.10.0\r\ntorch                         1.10.2\r\ntorchaudio                0.10.2\r\ntorchvision                0.11.3\r\nOS                             x86_64 GNU/Linux \r\nGCC version              Ubuntu 9.3.0 \r\nCUDA                        11.4 \r\nGPU type                   A100 \r\nDriver Version           470.82.01\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1043495584/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051481689",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1051481689",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1051481689,
        "node_id": "IC_kwDOCVq1mM4-rFZZ",
        "user": {
            "login": "felker",
            "id": 1410981,
            "node_id": "MDQ6VXNlcjE0MTA5ODE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1410981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/felker",
            "html_url": "https://github.com/felker",
            "followers_url": "https://api.github.com/users/felker/followers",
            "following_url": "https://api.github.com/users/felker/following{/other_user}",
            "gists_url": "https://api.github.com/users/felker/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/felker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/felker/subscriptions",
            "organizations_url": "https://api.github.com/users/felker/orgs",
            "repos_url": "https://api.github.com/users/felker/repos",
            "events_url": "https://api.github.com/users/felker/events{/privacy}",
            "received_events_url": "https://api.github.com/users/felker/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-26T02:31:42Z",
        "updated_at": "2022-02-26T02:31:42Z",
        "author_association": "NONE",
        "body": "@snnn just to provide more context to @poem2018 's comment: our `onnxruntime-gpu` installation on a shared DGX-A100 machine (8x GPUs, 2x AMD CPUs per node) works totally fine when an entire dedicated node is used.  \r\n\r\nWe encounter seg-faults / core dumps / the above exception when it is run on a shared node allocation, where each user is given a dedicated single GPU on the node and shares a fraction of the cores with another user controlled via cpusets which lock user sessions to gpu-affine cores, e.g.\r\n```\r\ncat /sys/fs/cgroup/cpuset/single-gpu/gpu0/cpuset.cpus\r\n48-63,176-191\r\n```\r\nWithin that cpuset, you have to share cycles with another user on the paired GPU, if it is in use. cgroup fair scheduling is used for that. \r\n\r\nI dont believe we had issues with earlier versions of ORT using cpuset, but I would need to recheck it. And as @poem2018 indicated, setting the num threads to 1 does not avoid the issue. So not clear if #10122 would fix this. \r\n\r\nhttps://github.com/microsoft/onnxruntime/issues/10113#issuecomment-1014940914 is there a way to bind specific core affinity?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051481689/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051566643",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1051566643",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1051566643,
        "node_id": "IC_kwDOCVq1mM4-raIz",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-26T04:28:10Z",
        "updated_at": "2022-02-26T04:28:10Z",
        "author_association": "MEMBER",
        "body": "By default, ONNX Runtime tried to bind each thread to a logical CPU if the user didn't explicitly set intra_op_num_threads. As you see, it is causing problems. So I'd prefer to not doing the binding. And if you have the need to setup thread affinity through ONNX Runtime API, we can design one and add it to onnxruntime_c_api.h.  ONNX Runtime is an open source project, if you already have a design in mind, welcome to let us know. \r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051566643/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176959571",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1176959571",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1176959571,
        "node_id": "IC_kwDOCVq1mM5GJvpT",
        "user": {
            "login": "baoachun",
            "id": 22114318,
            "node_id": "MDQ6VXNlcjIyMTE0MzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/22114318?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baoachun",
            "html_url": "https://github.com/baoachun",
            "followers_url": "https://api.github.com/users/baoachun/followers",
            "following_url": "https://api.github.com/users/baoachun/following{/other_user}",
            "gists_url": "https://api.github.com/users/baoachun/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baoachun/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baoachun/subscriptions",
            "organizations_url": "https://api.github.com/users/baoachun/orgs",
            "repos_url": "https://api.github.com/users/baoachun/repos",
            "events_url": "https://api.github.com/users/baoachun/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baoachun/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-07T02:06:00Z",
        "updated_at": "2022-07-07T02:06:00Z",
        "author_association": "NONE",
        "body": "Any progress？I had the same problem with 1.10.1 cpu version.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176959571/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]