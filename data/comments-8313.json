[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/875762030",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-875762030",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 875762030,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTc2MjAzMA==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-07T16:47:09Z",
        "updated_at": "2021-07-07T16:47:09Z",
        "author_association": "MEMBER",
        "body": "I believe you have used cpuset at the same time?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/875762030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876092511",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876092511",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876092511,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjA5MjUxMQ==",
        "user": {
            "login": "zyl112334",
            "id": 44828597,
            "node_id": "MDQ6VXNlcjQ0ODI4NTk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/44828597?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zyl112334",
            "html_url": "https://github.com/zyl112334",
            "followers_url": "https://api.github.com/users/zyl112334/followers",
            "following_url": "https://api.github.com/users/zyl112334/following{/other_user}",
            "gists_url": "https://api.github.com/users/zyl112334/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zyl112334/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zyl112334/subscriptions",
            "organizations_url": "https://api.github.com/users/zyl112334/orgs",
            "repos_url": "https://api.github.com/users/zyl112334/repos",
            "events_url": "https://api.github.com/users/zyl112334/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zyl112334/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T03:23:07Z",
        "updated_at": "2021-07-08T03:23:07Z",
        "author_association": "NONE",
        "body": "I solve this problem with seting \"options = ort.SessionOptions()   options.intra_op_num_threads = 1 options.inter_op_num_threads = 1\"(the defalut value for those params is 0), how can i understand this condition?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876092511/reactions",
            "total_count": 10,
            "+1": 10,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876289857",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876289857",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876289857,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjI4OTg1Nw==",
        "user": {
            "login": "NCEPUYTL",
            "id": 37887563,
            "node_id": "MDQ6VXNlcjM3ODg3NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/37887563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NCEPUYTL",
            "html_url": "https://github.com/NCEPUYTL",
            "followers_url": "https://api.github.com/users/NCEPUYTL/followers",
            "following_url": "https://api.github.com/users/NCEPUYTL/following{/other_user}",
            "gists_url": "https://api.github.com/users/NCEPUYTL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NCEPUYTL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NCEPUYTL/subscriptions",
            "organizations_url": "https://api.github.com/users/NCEPUYTL/orgs",
            "repos_url": "https://api.github.com/users/NCEPUYTL/repos",
            "events_url": "https://api.github.com/users/NCEPUYTL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NCEPUYTL/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T09:35:59Z",
        "updated_at": "2021-07-08T09:35:59Z",
        "author_association": "NONE",
        "body": "I meet the same error, by setting \"options = ort.SessionOptions() options.intra_op_num_threads = 1 options.inter_op_num_threads = 1\" ,but the inference speed is slow，How can I still inference using CPU under GPU environment",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876289857/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876732519",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876732519",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876732519,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjczMjUxOQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T20:42:07Z",
        "updated_at": "2021-07-08T20:42:07Z",
        "author_association": "MEMBER",
        "body": "What if you set intra_op_num_threads  to the number of your CPU cores? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876732519/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876885818",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-876885818",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 876885818,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3Njg4NTgxOA==",
        "user": {
            "login": "NCEPUYTL",
            "id": 37887563,
            "node_id": "MDQ6VXNlcjM3ODg3NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/37887563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NCEPUYTL",
            "html_url": "https://github.com/NCEPUYTL",
            "followers_url": "https://api.github.com/users/NCEPUYTL/followers",
            "following_url": "https://api.github.com/users/NCEPUYTL/following{/other_user}",
            "gists_url": "https://api.github.com/users/NCEPUYTL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NCEPUYTL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NCEPUYTL/subscriptions",
            "organizations_url": "https://api.github.com/users/NCEPUYTL/orgs",
            "repos_url": "https://api.github.com/users/NCEPUYTL/repos",
            "events_url": "https://api.github.com/users/NCEPUYTL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NCEPUYTL/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-09T03:28:16Z",
        "updated_at": "2021-07-09T03:28:16Z",
        "author_association": "NONE",
        "body": "> What if you set intra_op_num_threads to the number of your CPU cores?\r\n\r\nslower if I set  intra_op_num_threads to the number of my CPU cores，So How can I infer only use CPU under GPU  environment,thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/876885818/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878421181",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-878421181",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 878421181,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODQyMTE4MQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-12T16:29:34Z",
        "updated_at": "2021-07-12T16:29:34Z",
        "author_association": "MEMBER",
        "body": "> How can I infer only use CPU under GPU\r\n\r\nYou can use the cpu only package: https://pypi.org/project/onnxruntime/ instead of https://pypi.org/project/onnxruntime-gpu/ .",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878421181/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1043495584",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1043495584",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1043495584,
        "node_id": "IC_kwDOCVq1mM4-Mnqg",
        "user": {
            "login": "poem2018",
            "id": 40330318,
            "node_id": "MDQ6VXNlcjQwMzMwMzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/40330318?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/poem2018",
            "html_url": "https://github.com/poem2018",
            "followers_url": "https://api.github.com/users/poem2018/followers",
            "following_url": "https://api.github.com/users/poem2018/following{/other_user}",
            "gists_url": "https://api.github.com/users/poem2018/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/poem2018/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/poem2018/subscriptions",
            "organizations_url": "https://api.github.com/users/poem2018/orgs",
            "repos_url": "https://api.github.com/users/poem2018/repos",
            "events_url": "https://api.github.com/users/poem2018/events{/privacy}",
            "received_events_url": "https://api.github.com/users/poem2018/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-17T21:52:46Z",
        "updated_at": "2022-02-17T21:55:16Z",
        "author_association": "NONE",
        "body": "Hi, I also met the same problem. And I want to use GPU to do the onnx inference, I tried 'options = ort.SessionOptions() options.intra_op_num_threads = 1 options.inter_op_num_threads = 1', but the error become 'segmentation fault', I wonder is there any other solutions to solve this problem?\r\n\r\nmy environment:\r\npython                      3.6.13\r\nonnx                         1.10.2\r\nonnxruntime-gpu     1.10.0\r\ntorch                         1.10.2\r\ntorchaudio                0.10.2\r\ntorchvision                0.11.3\r\nOS                             x86_64 GNU/Linux \r\nGCC version              Ubuntu 9.3.0 \r\nCUDA                        11.4 \r\nGPU type                   A100 \r\nDriver Version           470.82.01\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1043495584/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051481689",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1051481689",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1051481689,
        "node_id": "IC_kwDOCVq1mM4-rFZZ",
        "user": {
            "login": "felker",
            "id": 1410981,
            "node_id": "MDQ6VXNlcjE0MTA5ODE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1410981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/felker",
            "html_url": "https://github.com/felker",
            "followers_url": "https://api.github.com/users/felker/followers",
            "following_url": "https://api.github.com/users/felker/following{/other_user}",
            "gists_url": "https://api.github.com/users/felker/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/felker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/felker/subscriptions",
            "organizations_url": "https://api.github.com/users/felker/orgs",
            "repos_url": "https://api.github.com/users/felker/repos",
            "events_url": "https://api.github.com/users/felker/events{/privacy}",
            "received_events_url": "https://api.github.com/users/felker/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-26T02:31:42Z",
        "updated_at": "2022-02-26T02:31:42Z",
        "author_association": "NONE",
        "body": "@snnn just to provide more context to @poem2018 's comment: our `onnxruntime-gpu` installation on a shared DGX-A100 machine (8x GPUs, 2x AMD CPUs per node) works totally fine when an entire dedicated node is used.  \r\n\r\nWe encounter seg-faults / core dumps / the above exception when it is run on a shared node allocation, where each user is given a dedicated single GPU on the node and shares a fraction of the cores with another user controlled via cpusets which lock user sessions to gpu-affine cores, e.g.\r\n```\r\ncat /sys/fs/cgroup/cpuset/single-gpu/gpu0/cpuset.cpus\r\n48-63,176-191\r\n```\r\nWithin that cpuset, you have to share cycles with another user on the paired GPU, if it is in use. cgroup fair scheduling is used for that. \r\n\r\nI dont believe we had issues with earlier versions of ORT using cpuset, but I would need to recheck it. And as @poem2018 indicated, setting the num threads to 1 does not avoid the issue. So not clear if #10122 would fix this. \r\n\r\nhttps://github.com/microsoft/onnxruntime/issues/10113#issuecomment-1014940914 is there a way to bind specific core affinity?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051481689/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051566643",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1051566643",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1051566643,
        "node_id": "IC_kwDOCVq1mM4-raIz",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-26T04:28:10Z",
        "updated_at": "2022-02-26T04:28:10Z",
        "author_association": "MEMBER",
        "body": "By default, ONNX Runtime tried to bind each thread to a logical CPU if the user didn't explicitly set intra_op_num_threads. As you see, it is causing problems. So I'd prefer to not doing the binding. And if you have the need to setup thread affinity through ONNX Runtime API, we can design one and add it to onnxruntime_c_api.h.  ONNX Runtime is an open source project, if you already have a design in mind, welcome to let us know. \r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1051566643/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176959571",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1176959571",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1176959571,
        "node_id": "IC_kwDOCVq1mM5GJvpT",
        "user": {
            "login": "baoachun",
            "id": 22114318,
            "node_id": "MDQ6VXNlcjIyMTE0MzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/22114318?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baoachun",
            "html_url": "https://github.com/baoachun",
            "followers_url": "https://api.github.com/users/baoachun/followers",
            "following_url": "https://api.github.com/users/baoachun/following{/other_user}",
            "gists_url": "https://api.github.com/users/baoachun/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baoachun/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baoachun/subscriptions",
            "organizations_url": "https://api.github.com/users/baoachun/orgs",
            "repos_url": "https://api.github.com/users/baoachun/repos",
            "events_url": "https://api.github.com/users/baoachun/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baoachun/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-07T02:06:00Z",
        "updated_at": "2022-07-07T02:06:00Z",
        "author_association": "NONE",
        "body": "Any progress？I had the same problem with 1.10.1 cpu version.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176959571/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1312387622",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1312387622",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1312387622,
        "node_id": "IC_kwDOCVq1mM5OOXIm",
        "user": {
            "login": "mohsenMahmoodzadeh",
            "id": 34777149,
            "node_id": "MDQ6VXNlcjM0Nzc3MTQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/34777149?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mohsenMahmoodzadeh",
            "html_url": "https://github.com/mohsenMahmoodzadeh",
            "followers_url": "https://api.github.com/users/mohsenMahmoodzadeh/followers",
            "following_url": "https://api.github.com/users/mohsenMahmoodzadeh/following{/other_user}",
            "gists_url": "https://api.github.com/users/mohsenMahmoodzadeh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mohsenMahmoodzadeh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mohsenMahmoodzadeh/subscriptions",
            "organizations_url": "https://api.github.com/users/mohsenMahmoodzadeh/orgs",
            "repos_url": "https://api.github.com/users/mohsenMahmoodzadeh/repos",
            "events_url": "https://api.github.com/users/mohsenMahmoodzadeh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mohsenMahmoodzadeh/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-12T06:42:18Z",
        "updated_at": "2022-11-12T07:02:02Z",
        "author_association": "NONE",
        "body": "@snnn\r\n\r\nSuppose we set intra_op_num_thread on a specific integer or cpu_count(logical=True). \r\n\r\nThen we create an image from our project(with onnx) and setup a container. If we constrain cpu cores for the container, what if this number is fewer than set intra_op_num_thread parameter?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1312387622/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1316353028",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1316353028",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1316353028,
        "node_id": "IC_kwDOCVq1mM5OdfQE",
        "user": {
            "login": "aluminumbox",
            "id": 31685265,
            "node_id": "MDQ6VXNlcjMxNjg1MjY1",
            "avatar_url": "https://avatars.githubusercontent.com/u/31685265?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aluminumbox",
            "html_url": "https://github.com/aluminumbox",
            "followers_url": "https://api.github.com/users/aluminumbox/followers",
            "following_url": "https://api.github.com/users/aluminumbox/following{/other_user}",
            "gists_url": "https://api.github.com/users/aluminumbox/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/aluminumbox/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/aluminumbox/subscriptions",
            "organizations_url": "https://api.github.com/users/aluminumbox/orgs",
            "repos_url": "https://api.github.com/users/aluminumbox/repos",
            "events_url": "https://api.github.com/users/aluminumbox/events{/privacy}",
            "received_events_url": "https://api.github.com/users/aluminumbox/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-16T05:02:43Z",
        "updated_at": "2022-11-16T05:02:43Z",
        "author_association": "NONE",
        "body": "> By default, ONNX Runtime tried to bind each thread to a logical CPU if the user didn't explicitly set intra_op_num_threads. As you see, it is causing problems. So I'd prefer to not doing the binding. And if you have the need to setup thread affinity through ONNX Runtime API, we can design one and add it to onnxruntime_c_api.h. ONNX Runtime is an open source project, if you already have a design in mind, welcome to let us know.\r\n\r\nI am using nvidia triton with onnxruntime backend. When I try to run triton with k8s deployment, I ran into same pthread_setaffinity_np failed problem. Because the triton is already compiled and  it does not provide method to set intra_op_num_thread, I wonder if there is any envorionment variable for onnx to specify intra_op_num_thread? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1316353028/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1377686153",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1377686153",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1377686153,
        "node_id": "IC_kwDOCVq1mM5SHdKJ",
        "user": {
            "login": "causten",
            "id": 7440191,
            "node_id": "MDQ6VXNlcjc0NDAxOTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7440191?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/causten",
            "html_url": "https://github.com/causten",
            "followers_url": "https://api.github.com/users/causten/followers",
            "following_url": "https://api.github.com/users/causten/following{/other_user}",
            "gists_url": "https://api.github.com/users/causten/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/causten/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/causten/subscriptions",
            "organizations_url": "https://api.github.com/users/causten/orgs",
            "repos_url": "https://api.github.com/users/causten/repos",
            "events_url": "https://api.github.com/users/causten/events{/privacy}",
            "received_events_url": "https://api.github.com/users/causten/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-10T18:35:18Z",
        "updated_at": "2023-01-10T18:35:18Z",
        "author_association": "CONTRIBUTOR",
        "body": "I see the same issue as described above.  I was setting affinity when I launched a docker container \"--cpuset-cpus=32-63,160-191\" which removes ORT from having to deal with it.  Is there something I should set in ORT to avoid the failure?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1377686153/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1455957635",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1455957635",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1455957635,
        "node_id": "IC_kwDOCVq1mM5WyCaD",
        "user": {
            "login": "lkretsch",
            "id": 127103324,
            "node_id": "U_kgDOB5NxXA",
            "avatar_url": "https://avatars.githubusercontent.com/u/127103324?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lkretsch",
            "html_url": "https://github.com/lkretsch",
            "followers_url": "https://api.github.com/users/lkretsch/followers",
            "following_url": "https://api.github.com/users/lkretsch/following{/other_user}",
            "gists_url": "https://api.github.com/users/lkretsch/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lkretsch/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lkretsch/subscriptions",
            "organizations_url": "https://api.github.com/users/lkretsch/orgs",
            "repos_url": "https://api.github.com/users/lkretsch/repos",
            "events_url": "https://api.github.com/users/lkretsch/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lkretsch/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-06T11:25:28Z",
        "updated_at": "2023-03-06T11:27:54Z",
        "author_association": "NONE",
        "body": "Hi, I also ran into this issue while using [Slurm](https://slurm.schedmd.com/documentation.html) to submit jobs to a computing cluster. Slurm uses the `--cpu-bind=...` [option](https://slurm.schedmd.com/mc_support.html) to set the explicit process affinity binding and control options. This runs into an issue with ORT when trying to start a new session, it leads to this error \r\n\r\n`Eigen::ThreadPoolInterface, const onnxruntime::ThreadOptions&) pthread_setaffinity_np failed`\r\n\r\nBy setting these options (like recommended here)\r\n\r\n`sessionOptions.SetInterOpNumThreads(1);\r\n  sessionOptions.SetIntraOpNumThreads(1);`\r\n  \r\nThe issue can no longer be observed.\r\n\r\n\r\nSetting the number of threads used to parallelize the execution of the graph (across nodes) solves the problem since ORT can no longer chosse this by itself. This can potentially be a problem for every job-scheduler, but it depends on how the system is set up.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1455957635/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1486097717",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1486097717",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1486097717,
        "node_id": "IC_kwDOCVq1mM5YlA01",
        "user": {
            "login": "cwlseu",
            "id": 5145788,
            "node_id": "MDQ6VXNlcjUxNDU3ODg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5145788?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cwlseu",
            "html_url": "https://github.com/cwlseu",
            "followers_url": "https://api.github.com/users/cwlseu/followers",
            "following_url": "https://api.github.com/users/cwlseu/following{/other_user}",
            "gists_url": "https://api.github.com/users/cwlseu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cwlseu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cwlseu/subscriptions",
            "organizations_url": "https://api.github.com/users/cwlseu/orgs",
            "repos_url": "https://api.github.com/users/cwlseu/repos",
            "events_url": "https://api.github.com/users/cwlseu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cwlseu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-28T02:00:15Z",
        "updated_at": "2023-03-28T07:17:53Z",
        "author_association": "NONE",
        "body": "Hi, I use a tricky method to modify the default value globally to prevent such errors.\r\n\r\nWe will rely on onnx, onnx-simplify, etc. during the development process. By default, these will implicitly call ORT for inferencing. So the above method needs to be fixed one by one. Then we use an intrusive method to implement global modification of the default value to prevent such errors from appearing.\r\n\r\n[InferenceSession](https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/python/onnxruntime_inference_collection.py#L365) implements session init by calling `_create_inference_session` in the constructor\r\n```python\r\nsession_options = self._sess_options if self._sess_options else C.get_default_session_options()\r\nif self._model_path:\r\n    sess = C.InferenceSession(session_options, self._model_path, True, self._read_config_from_model)\r\nelse:\r\n    sess = C.InferenceSession(session_options, self._model_bytes, False, self._read_config_from_model)\r\n```\r\n\r\nWe can modify the return result of `C.get_default_session_options()`.\r\n\r\nAdd the following code to our program to globally modify the default `inter_op_num_threads` and `intra_op_num_threads` parameters,\r\n```python\r\nimport onnxruntime as ort\r\n_default_session_options = ort.capi._pybind_state.get_default_session_options()\r\ndef get_default_session_options_new():\r\n     _default_session_options.inter_op_num_threads = 1\r\n     _default_session_options.intra_op_num_threads = 1\r\n     return _default_session_options\r\nort.capi._pybind_state.get_default_session_options = get_default_session_options_new\r\n\r\n# other ORT inference code \r\n# ...\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1486097717/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1514486357",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1514486357",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1514486357,
        "node_id": "IC_kwDOCVq1mM5aRTpV",
        "user": {
            "login": "xuyingzhongguo",
            "id": 55081401,
            "node_id": "MDQ6VXNlcjU1MDgxNDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/55081401?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xuyingzhongguo",
            "html_url": "https://github.com/xuyingzhongguo",
            "followers_url": "https://api.github.com/users/xuyingzhongguo/followers",
            "following_url": "https://api.github.com/users/xuyingzhongguo/following{/other_user}",
            "gists_url": "https://api.github.com/users/xuyingzhongguo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xuyingzhongguo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xuyingzhongguo/subscriptions",
            "organizations_url": "https://api.github.com/users/xuyingzhongguo/orgs",
            "repos_url": "https://api.github.com/users/xuyingzhongguo/repos",
            "events_url": "https://api.github.com/users/xuyingzhongguo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xuyingzhongguo/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-19T10:17:44Z",
        "updated_at": "2023-04-19T10:17:44Z",
        "author_association": "NONE",
        "body": "> sessionOptions\r\n\r\nHello, thank you for this suggestion. I am using SLURM and facing this problem too. I wonder where I could set sessionOptions.SetInterOpNumThreads(1); sessionOptions.SetIntraOpNumThreads(1);.\r\nThank you!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1514486357/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1596553080",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8313#issuecomment-1596553080",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8313",
        "id": 1596553080,
        "node_id": "IC_kwDOCVq1mM5fKXd4",
        "user": {
            "login": "lkretsch",
            "id": 127103324,
            "node_id": "U_kgDOB5NxXA",
            "avatar_url": "https://avatars.githubusercontent.com/u/127103324?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lkretsch",
            "html_url": "https://github.com/lkretsch",
            "followers_url": "https://api.github.com/users/lkretsch/followers",
            "following_url": "https://api.github.com/users/lkretsch/following{/other_user}",
            "gists_url": "https://api.github.com/users/lkretsch/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lkretsch/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lkretsch/subscriptions",
            "organizations_url": "https://api.github.com/users/lkretsch/orgs",
            "repos_url": "https://api.github.com/users/lkretsch/repos",
            "events_url": "https://api.github.com/users/lkretsch/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lkretsch/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-19T05:59:22Z",
        "updated_at": "2023-06-19T05:59:22Z",
        "author_association": "NONE",
        "body": "\r\n\r\n\r\n> > sessionOptions\r\n> \r\n> Hello, thank you for this suggestion. I am using SLURM and facing this problem too. I wonder where I could set sessionOptions.SetInterOpNumThreads(1); sessionOptions.SetIntraOpNumThreads(1);. Thank you!\r\n\r\nYou can add these two options into the script where you are also initializing the ORT session.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1596553080/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]