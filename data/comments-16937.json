[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1658424424",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16937#issuecomment-1658424424",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16937",
        "id": 1658424424,
        "node_id": "IC_kwDOCVq1mM5i2Yxo",
        "user": {
            "login": "octavflorescu",
            "id": 15170320,
            "node_id": "MDQ6VXNlcjE1MTcwMzIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/15170320?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/octavflorescu",
            "html_url": "https://github.com/octavflorescu",
            "followers_url": "https://api.github.com/users/octavflorescu/followers",
            "following_url": "https://api.github.com/users/octavflorescu/following{/other_user}",
            "gists_url": "https://api.github.com/users/octavflorescu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/octavflorescu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/octavflorescu/subscriptions",
            "organizations_url": "https://api.github.com/users/octavflorescu/orgs",
            "repos_url": "https://api.github.com/users/octavflorescu/repos",
            "events_url": "https://api.github.com/users/octavflorescu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/octavflorescu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-31T13:55:58Z",
        "updated_at": "2023-07-31T14:01:02Z",
        "author_association": "NONE",
        "body": "Note: creating the tensor from bytebuffer (converted from float buffer) is ~instant, but i need the Float option due to the shape check:  \r\n`ai.onnxruntime.OrtException: Shape [1, 3, 640, 640], requires 1228800 elements but the buffer has 4915200 elements.`  \r\nIf there is an alternative, please do tell...\r\n\r\nThis is the snippet i used to convert the floatbuffer to bytebuffer:\r\n```kotlin\r\n        var localByteBuffer = ByteBuffer.allocateDirect(floatBuffer.remaining()*4)\r\n        localByteBuffer.order(ByteOrder.nativeOrder())\r\n        floatBuffer.mark();\r\n        localByteBuffer.asFloatBuffer().put(floatBuffer)\r\n        floatBuffer.reset()\r\n        localByteBuffer.rewind()\r\n        return OnnxTensor.createTensor(\r\n            ortEnvironment,\r\n            localByteBuffer,\r\n            shape,\r\n            OnnxJavaType.FLOAT\r\n        )\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1658424424/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1658779741",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16937#issuecomment-1658779741",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16937",
        "id": 1658779741,
        "node_id": "IC_kwDOCVq1mM5i3vhd",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-31T17:02:06Z",
        "updated_at": "2023-07-31T17:02:06Z",
        "author_association": "CONTRIBUTOR",
        "body": "You can use the `asFloatBuffer` version of the direct byte buffer like so:\r\n\r\n```java\r\n        var localByteBuffer = ByteBuffer.allocateDirect(floatBuffer.remaining()*4)\r\n        localByteBuffer.order(ByteOrder.nativeOrder())\r\n        floatBuffer.mark();\r\n        var directFloatBuffer = localByteBuffer.asFloatBuffer();\r\n        directFloatBuffer.put(floatBuffer)\r\n        floatBuffer.reset()\r\n        directFloatBuffer.rewind()\r\n        return OnnxTensor.createTensor(\r\n            ortEnvironment,\r\n            directFloatBuffer,\r\n            shape\r\n        )\r\n```\r\n\r\nOn a separate note the inbounding shape checking logic is currently being improved, and it might have landed in the FP16 PR.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1658779741/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1659445981",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16937#issuecomment-1659445981",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16937",
        "id": 1659445981,
        "node_id": "IC_kwDOCVq1mM5i6SLd",
        "user": {
            "login": "Craigacp",
            "id": 729696,
            "node_id": "MDQ6VXNlcjcyOTY5Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/729696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Craigacp",
            "html_url": "https://github.com/Craigacp",
            "followers_url": "https://api.github.com/users/Craigacp/followers",
            "following_url": "https://api.github.com/users/Craigacp/following{/other_user}",
            "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions",
            "organizations_url": "https://api.github.com/users/Craigacp/orgs",
            "repos_url": "https://api.github.com/users/Craigacp/repos",
            "events_url": "https://api.github.com/users/Craigacp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Craigacp/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-01T01:54:53Z",
        "updated_at": "2023-08-01T01:54:53Z",
        "author_association": "CONTRIBUTOR",
        "body": "With the recent merges of the Java FP16 logic the byte buffer creation path now checks to see if the number of elements lines up for the supplied type, not just treating it as if it is a byte buffer, so your code snippet probably works on `main`. The one I posted will work on both `main` and older versions of ORT.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1659445981/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]