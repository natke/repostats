[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463440739",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14994#issuecomment-1463440739",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14994",
        "id": 1463440739,
        "node_id": "IC_kwDOCVq1mM5XOlVj",
        "user": {
            "login": "yunyaoXYY",
            "id": 109218879,
            "node_id": "U_kgDOBoKMPw",
            "avatar_url": "https://avatars.githubusercontent.com/u/109218879?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yunyaoXYY",
            "html_url": "https://github.com/yunyaoXYY",
            "followers_url": "https://api.github.com/users/yunyaoXYY/followers",
            "following_url": "https://api.github.com/users/yunyaoXYY/following{/other_user}",
            "gists_url": "https://api.github.com/users/yunyaoXYY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yunyaoXYY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yunyaoXYY/subscriptions",
            "organizations_url": "https://api.github.com/users/yunyaoXYY/orgs",
            "repos_url": "https://api.github.com/users/yunyaoXYY/repos",
            "events_url": "https://api.github.com/users/yunyaoXYY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yunyaoXYY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T08:22:54Z",
        "updated_at": "2023-03-10T08:22:54Z",
        "author_association": "NONE",
        "body": "Could you help to answer this Questionï¼Ÿ Thanks @fdwr ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463440739/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464350232",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14994#issuecomment-1464350232",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14994",
        "id": 1464350232,
        "node_id": "IC_kwDOCVq1mM5XSDYY",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T20:02:46Z",
        "updated_at": "2023-03-10T20:03:52Z",
        "author_association": "MEMBER",
        "body": "@yunyaoXYY If you look in task manager, you can see which GPU device is numbered 0, 1... (I only have a single GPU in this machine, but you would see more below in a multiple GPU machine). Which device is 0 can depend on your power plan. e.g. On a laptop, the integrated device may be 0 for power savings, but on a desktop, GPU 0 might be the more powerful one. There's an option in the NVidia Control Panel to select your preferred graphics card.\r\n\r\n`ortDmlApi->SessionOptionsAppendExecutionProvider_DML(sessionOptions2, adapterIndex);`\r\n\r\nAdditionally, if you want to select the given model more deterministically regardless of power settings, then @SJDai-375's approach of asking DXGI for the name works too.\r\n\r\n![image](https://user-images.githubusercontent.com/1809166/224414691-15b37736-0645-4dcb-9e6e-bd704511df98.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464350232/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1478853028",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14994#issuecomment-1478853028",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14994",
        "id": 1478853028,
        "node_id": "IC_kwDOCVq1mM5YJYGk",
        "user": {
            "login": "yunyaoXYY",
            "id": 109218879,
            "node_id": "U_kgDOBoKMPw",
            "avatar_url": "https://avatars.githubusercontent.com/u/109218879?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yunyaoXYY",
            "html_url": "https://github.com/yunyaoXYY",
            "followers_url": "https://api.github.com/users/yunyaoXYY/followers",
            "following_url": "https://api.github.com/users/yunyaoXYY/following{/other_user}",
            "gists_url": "https://api.github.com/users/yunyaoXYY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yunyaoXYY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yunyaoXYY/subscriptions",
            "organizations_url": "https://api.github.com/users/yunyaoXYY/orgs",
            "repos_url": "https://api.github.com/users/yunyaoXYY/repos",
            "events_url": "https://api.github.com/users/yunyaoXYY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yunyaoXYY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-22T02:58:01Z",
        "updated_at": "2023-03-22T02:58:01Z",
        "author_association": "NONE",
        "body": "> @yunyaoXYY If you look in task manager, you can see which GPU device is numbered 0, 1... (I only have a single GPU in this machine, but you would see more below in a multiple GPU machine). Which device is 0 can depend on your power plan. e.g. On a laptop, the integrated device may be 0 for power savings, but on a desktop, GPU 0 might be the more powerful one. There's an option in the NVidia Control Panel to select your preferred graphics card.\r\n> \r\n> `ortDmlApi->SessionOptionsAppendExecutionProvider_DML(sessionOptions2, adapterIndex);`\r\n> \r\n> Additionally, if you want to select the given model more deterministically regardless of power settings, then @SJDai-375's approach of asking DXGI for the name works too.\r\n> \r\n> ![image](https://user-images.githubusercontent.com/1809166/224414691-15b37736-0645-4dcb-9e6e-bd704511df98.png)\r\n\r\nHello, Thanks for your reply!\r\nBut I find a small problem, When I set the ortDmlApi->SessionOptionsAppendExecutionProvider_DML(sessionOptions2 , device = 0) , the program will on my GPU1 (nvidia card);  When I set the ortDmlApi->SessionOptionsAppendExecutionProvider_DML(sessionOptions2 , device = 1 ), the program will run on my GPU0 (Intel GPU).  So the device ID which I sent to the DML API is different from that of task manager. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1478853028/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1478894103",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14994#issuecomment-1478894103",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14994",
        "id": 1478894103,
        "node_id": "IC_kwDOCVq1mM5YJiIX",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-22T04:09:48Z",
        "updated_at": "2023-03-22T04:10:22Z",
        "author_association": "MEMBER",
        "body": "ðŸ¤¨ Hmm. Do you see different adapter indices when running D3D12info? https://github.com/sawickiap/D3d12info\r\n\r\n`c:\\> D3d12info.exe --List`\r\n\r\n```\r\nDXGI Adapter 0:\r\n===============\r\n\r\nDXGI_ADAPTER_DESC3:\r\n-------------------\r\n    Description = ...\r\n    VendorId = ...\r\n    ...\r\n\r\nDXGI Adapter 1:\r\n===============\r\n\r\nDXGI_ADAPTER_DESC3:\r\n-------------------\r\n    Description = Microsoft Basic Render Driver\r\n    VendorId = Microsoft (0x1414)\r\n    DeviceId = 0x8C\r\n    SubSysId = 0x0\r\n    Revision = 0x0\r\n...\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1478894103/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1508907844",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14994#issuecomment-1508907844",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14994",
        "id": 1508907844,
        "node_id": "IC_kwDOCVq1mM5Z8BtE",
        "user": {
            "login": "apleynes",
            "id": 19675801,
            "node_id": "MDQ6VXNlcjE5Njc1ODAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/19675801?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/apleynes",
            "html_url": "https://github.com/apleynes",
            "followers_url": "https://api.github.com/users/apleynes/followers",
            "following_url": "https://api.github.com/users/apleynes/following{/other_user}",
            "gists_url": "https://api.github.com/users/apleynes/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/apleynes/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/apleynes/subscriptions",
            "organizations_url": "https://api.github.com/users/apleynes/orgs",
            "repos_url": "https://api.github.com/users/apleynes/repos",
            "events_url": "https://api.github.com/users/apleynes/events{/privacy}",
            "received_events_url": "https://api.github.com/users/apleynes/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-14T16:13:46Z",
        "updated_at": "2023-04-14T16:13:46Z",
        "author_association": "NONE",
        "body": "@yunyaoXYY I ran into the same issue on Python where I didn't have direct access to probe the devices. I ended up coding a benchmark function with a small model to probe the devices and select based on speed.\r\n\r\n@fdwr To add to the device ID problem, I ran into the same issue with onnxruntime-directml (1.13.1) on Python 3.9. I wrote about it on the 2nd paragraph here https://github.com/microsoft/onnxruntime/issues/14214: \r\n\r\n> Also, the device numbering seems to be inconsistent between sessions. Sometimes NVIDIA GPU is device 1, sometimes it's device 0. Sometimes I run the session with device 1 and it first runs on Intel iGPU, then subsequent runs of the same code then runs on NVIDIA GPU.\r\n\r\nD3D12info is consistent with Task Manager on my machine.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1508907844/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]