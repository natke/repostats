[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/860851667",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-860851667",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 860851667,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MDg1MTY2Nw==",
        "user": {
            "login": "hanbitmyths",
            "id": 35605090,
            "node_id": "MDQ6VXNlcjM1NjA1MDkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/35605090?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hanbitmyths",
            "html_url": "https://github.com/hanbitmyths",
            "followers_url": "https://api.github.com/users/hanbitmyths/followers",
            "following_url": "https://api.github.com/users/hanbitmyths/following{/other_user}",
            "gists_url": "https://api.github.com/users/hanbitmyths/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hanbitmyths/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hanbitmyths/subscriptions",
            "organizations_url": "https://api.github.com/users/hanbitmyths/orgs",
            "repos_url": "https://api.github.com/users/hanbitmyths/repos",
            "events_url": "https://api.github.com/users/hanbitmyths/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hanbitmyths/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-14T17:15:34Z",
        "updated_at": "2021-06-14T17:15:34Z",
        "author_association": "MEMBER",
        "body": "@anadvsr, can you check time-based memory usage, i.e. does memory keep increasing every predict() call?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/860851667/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/860967688",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-860967688",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 860967688,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MDk2NzY4OA==",
        "user": {
            "login": "anandvsr",
            "id": 66105422,
            "node_id": "MDQ6VXNlcjY2MTA1NDIy",
            "avatar_url": "https://avatars.githubusercontent.com/u/66105422?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anandvsr",
            "html_url": "https://github.com/anandvsr",
            "followers_url": "https://api.github.com/users/anandvsr/followers",
            "following_url": "https://api.github.com/users/anandvsr/following{/other_user}",
            "gists_url": "https://api.github.com/users/anandvsr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anandvsr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anandvsr/subscriptions",
            "organizations_url": "https://api.github.com/users/anandvsr/orgs",
            "repos_url": "https://api.github.com/users/anandvsr/repos",
            "events_url": "https://api.github.com/users/anandvsr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anandvsr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-14T20:23:25Z",
        "updated_at": "2021-06-14T20:35:08Z",
        "author_association": "NONE",
        "body": "```\r\n127.0.0.1 - - [15/Jun/2021:01:45:56] \"POST /detect/ HTTP/1.1\" 200 934 \"\" \"curl/7.71.1\"\r\n[15/Jun/2021:01:45:56]  \r\nINFO [-36] : Used  memory (before request): 5.65GB\r\nINFO [-39] : Image shape : (4160, 3120, 3)\r\nINFO [-105] : Used  memory (before prediction): 5.69GB\r\nINFO [-114] : Used  memory (after prediction): 6.22GB\r\nINFO [-50] : Detection time - 2.3656 s,\r\nINFO [-51] : Total Object found - 9\r\nINFO [-99] : Total request time - 2.6114 s\r\nINFO [-43] : Used  memory (after request): 6.04GB\r\n127.0.0.1 - - [15/Jun/2021:01:45:58] \"POST /detect/ HTTP/1.1\" 200 934 \"\" \"curl/7.71.1\"\r\n[15/Jun/2021:01:45:58]  \r\nINFO [-36] : Used  memory (before request): 6.04GB\r\nINFO [-39] : Image shape : (4160, 3120, 3)\r\nINFO [-105] : Used  memory (before prediction): 6.08GB\r\nINFO [-114] : Used  memory (after prediction): 6.37GB\r\nINFO [-50] : Detection time - 2.2305 s,\r\nINFO [-51] : Total Object found - 9\r\nINFO [-99] : Total request time - 2.4692 s\r\nINFO [-43] : Used  memory (after request): 6.19GB\r\n```\r\nI have also attached the logs file. Hope this log will enough.@hanbitmyths \r\n\r\n\r\n[Log File (log.txt)](https://github.com/microsoft/onnxruntime/files/6651037/log.txt)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/860967688/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861208054",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-861208054",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 861208054,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTIwODA1NA==",
        "user": {
            "login": "hanbitmyths",
            "id": 35605090,
            "node_id": "MDQ6VXNlcjM1NjA1MDkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/35605090?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hanbitmyths",
            "html_url": "https://github.com/hanbitmyths",
            "followers_url": "https://api.github.com/users/hanbitmyths/followers",
            "following_url": "https://api.github.com/users/hanbitmyths/following{/other_user}",
            "gists_url": "https://api.github.com/users/hanbitmyths/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hanbitmyths/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hanbitmyths/subscriptions",
            "organizations_url": "https://api.github.com/users/hanbitmyths/orgs",
            "repos_url": "https://api.github.com/users/hanbitmyths/repos",
            "events_url": "https://api.github.com/users/hanbitmyths/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hanbitmyths/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-15T06:19:18Z",
        "updated_at": "2021-06-15T06:19:18Z",
        "author_association": "MEMBER",
        "body": "I tried to run a [faster-rcnn model](https://github.com/onnx/models/tree/master/vision/object_detection_segmentation/faster-rcnn)  using onnxruntime 1.8.0 python package. But, I couldn't repro memory leak.\r\n\r\n![faster-rcnn_memory](https://user-images.githubusercontent.com/35605090/122001929-eefed080-cd65-11eb-925a-1b9773b1a9d3.PNG)\r\n\r\nCan you share session options you're using?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861208054/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861272098",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-861272098",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 861272098,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTI3MjA5OA==",
        "user": {
            "login": "anandvsr",
            "id": 66105422,
            "node_id": "MDQ6VXNlcjY2MTA1NDIy",
            "avatar_url": "https://avatars.githubusercontent.com/u/66105422?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anandvsr",
            "html_url": "https://github.com/anandvsr",
            "followers_url": "https://api.github.com/users/anandvsr/followers",
            "following_url": "https://api.github.com/users/anandvsr/following{/other_user}",
            "gists_url": "https://api.github.com/users/anandvsr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anandvsr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anandvsr/subscriptions",
            "organizations_url": "https://api.github.com/users/anandvsr/orgs",
            "repos_url": "https://api.github.com/users/anandvsr/repos",
            "events_url": "https://api.github.com/users/anandvsr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anandvsr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-15T07:52:15Z",
        "updated_at": "2021-06-15T08:05:39Z",
        "author_association": "NONE",
        "body": "\r\n> Can you share session options you're using?\r\n\r\nI didn't give any session options\r\n\r\n---\r\n\r\nCan it be verified with parallel requests? I could not see the memory problem when it happened one by one. This happens when many requests come to the server. Finally now I got few things from your image too, I think memory  get stable after certain requests.\r\n\r\n![Screenshot from 2021-06-15 12-55-18](https://user-images.githubusercontent.com/66105422/122012577-f4e2c900-cdda-11eb-9c29-eab5eccd0395.png)\r\n\r\nWhen the next request is sent after one request is completed\r\n![Screenshot from 2021-06-15 12-40-15](https://user-images.githubusercontent.com/66105422/122014057-6b33fb00-cddc-11eb-9626-c1824c294d11.png)\r\n\r\n\r\nSo now the questions are, is this the nature?, It can be fix? I have no idea, please clearly!!\r\n\r\n```\r\nP.S:\r\nLast time, the shared logs were taken when I started..\r\nIn first pic I decrease the request per second, because of getting >5 requests/s, \r\nmemory get 100%, then the program will be killed.\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861272098/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861748468",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-861748468",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 861748468,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTc0ODQ2OA==",
        "user": {
            "login": "hanbitmyths",
            "id": 35605090,
            "node_id": "MDQ6VXNlcjM1NjA1MDkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/35605090?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hanbitmyths",
            "html_url": "https://github.com/hanbitmyths",
            "followers_url": "https://api.github.com/users/hanbitmyths/followers",
            "following_url": "https://api.github.com/users/hanbitmyths/following{/other_user}",
            "gists_url": "https://api.github.com/users/hanbitmyths/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hanbitmyths/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hanbitmyths/subscriptions",
            "organizations_url": "https://api.github.com/users/hanbitmyths/orgs",
            "repos_url": "https://api.github.com/users/hanbitmyths/repos",
            "events_url": "https://api.github.com/users/hanbitmyths/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hanbitmyths/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-15T18:48:44Z",
        "updated_at": "2021-06-15T18:48:44Z",
        "author_association": "MEMBER",
        "body": "It's a normal behavior when it gets more requests at the same time. It can abort due to memory allocation failure when there is no available memory on a system.\r\n\r\nIf your goal is to reduce memory footprint, you may try session options to disable cpu arena or memory pattern, but this is trade-off over performance.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861748468/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863293832",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8047#issuecomment-863293832",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8047",
        "id": 863293832,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzI5MzgzMg==",
        "user": {
            "login": "anandvsr",
            "id": 66105422,
            "node_id": "MDQ6VXNlcjY2MTA1NDIy",
            "avatar_url": "https://avatars.githubusercontent.com/u/66105422?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anandvsr",
            "html_url": "https://github.com/anandvsr",
            "followers_url": "https://api.github.com/users/anandvsr/followers",
            "following_url": "https://api.github.com/users/anandvsr/following{/other_user}",
            "gists_url": "https://api.github.com/users/anandvsr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anandvsr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anandvsr/subscriptions",
            "organizations_url": "https://api.github.com/users/anandvsr/orgs",
            "repos_url": "https://api.github.com/users/anandvsr/repos",
            "events_url": "https://api.github.com/users/anandvsr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anandvsr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-17T14:34:41Z",
        "updated_at": "2021-06-17T14:34:41Z",
        "author_association": "NONE",
        "body": "Thank you for response @hanbitmyths  üòåüëç",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863293832/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]