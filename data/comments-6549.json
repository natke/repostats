[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772799275",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-772799275",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 772799275,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3Mjc5OTI3NQ==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-03T20:25:53Z",
        "updated_at": "2021-02-03T20:25:53Z",
        "author_association": "MEMBER",
        "body": "Just to clarify, is performance an issue or it is just an accuracy?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772799275/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772969653",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-772969653",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 772969653,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3Mjk2OTY1Mw==",
        "user": {
            "login": "gurunathparasaram",
            "id": 24391028,
            "node_id": "MDQ6VXNlcjI0MzkxMDI4",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391028?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gurunathparasaram",
            "html_url": "https://github.com/gurunathparasaram",
            "followers_url": "https://api.github.com/users/gurunathparasaram/followers",
            "following_url": "https://api.github.com/users/gurunathparasaram/following{/other_user}",
            "gists_url": "https://api.github.com/users/gurunathparasaram/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gurunathparasaram/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gurunathparasaram/subscriptions",
            "organizations_url": "https://api.github.com/users/gurunathparasaram/orgs",
            "repos_url": "https://api.github.com/users/gurunathparasaram/repos",
            "events_url": "https://api.github.com/users/gurunathparasaram/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gurunathparasaram/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-04T02:07:36Z",
        "updated_at": "2021-02-04T02:07:36Z",
        "author_association": "NONE",
        "body": "It is an accuracy issue. Sorry for not being clear enough earlier. I should have phrased it better. Thanks.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772969653/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772972601",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-772972601",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 772972601,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3Mjk3MjYwMQ==",
        "user": {
            "login": "faxu",
            "id": 20780999,
            "node_id": "MDQ6VXNlcjIwNzgwOTk5",
            "avatar_url": "https://avatars.githubusercontent.com/u/20780999?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/faxu",
            "html_url": "https://github.com/faxu",
            "followers_url": "https://api.github.com/users/faxu/followers",
            "following_url": "https://api.github.com/users/faxu/following{/other_user}",
            "gists_url": "https://api.github.com/users/faxu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/faxu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/faxu/subscriptions",
            "organizations_url": "https://api.github.com/users/faxu/orgs",
            "repos_url": "https://api.github.com/users/faxu/repos",
            "events_url": "https://api.github.com/users/faxu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/faxu/received_events",
            "type": "User",
            "site_admin": true
        },
        "created_at": "2021-02-04T02:15:39Z",
        "updated_at": "2021-02-04T02:15:39Z",
        "author_association": "MEMBER",
        "body": "CC @tianleiwu ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/772972601/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773632990",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-773632990",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 773632990,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzYzMjk5MA==",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-04T22:03:34Z",
        "updated_at": "2021-02-04T22:05:26Z",
        "author_association": "MEMBER",
        "body": "For float32 models, GPT-2 usually generate same text (>99%) with OnnxRuntime vs PyTorch using greedy (or deterministic) method. \r\n\r\nIf you use float16 or int8 model, it is expected that there will be accuracy loss, and generated text is likely be quite different.\r\n\r\nPlease share a script that could reproduce the problem.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773632990/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/777253442",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-777253442",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 777253442,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzI1MzQ0Mg==",
        "user": {
            "login": "sai-prasanna",
            "id": 3595526,
            "node_id": "MDQ6VXNlcjM1OTU1MjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3595526?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sai-prasanna",
            "html_url": "https://github.com/sai-prasanna",
            "followers_url": "https://api.github.com/users/sai-prasanna/followers",
            "following_url": "https://api.github.com/users/sai-prasanna/following{/other_user}",
            "gists_url": "https://api.github.com/users/sai-prasanna/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sai-prasanna/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sai-prasanna/subscriptions",
            "organizations_url": "https://api.github.com/users/sai-prasanna/orgs",
            "repos_url": "https://api.github.com/users/sai-prasanna/repos",
            "events_url": "https://api.github.com/users/sai-prasanna/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sai-prasanna/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-11T07:36:38Z",
        "updated_at": "2021-02-11T07:36:38Z",
        "author_association": "NONE",
        "body": "@tianleiwu Is the difference in output between onnx and pytorch to be expected? I see a difference in 3rd decimal place on wards.\r\n I think the problem here is that for the outputs even 3rd decimal place difference impacts accuracy.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/777253442/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857419356",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-857419356",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 857419356,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzQxOTM1Ng==",
        "user": {
            "login": "collinarnett",
            "id": 38230482,
            "node_id": "MDQ6VXNlcjM4MjMwNDgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/38230482?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/collinarnett",
            "html_url": "https://github.com/collinarnett",
            "followers_url": "https://api.github.com/users/collinarnett/followers",
            "following_url": "https://api.github.com/users/collinarnett/following{/other_user}",
            "gists_url": "https://api.github.com/users/collinarnett/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/collinarnett/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/collinarnett/subscriptions",
            "organizations_url": "https://api.github.com/users/collinarnett/orgs",
            "repos_url": "https://api.github.com/users/collinarnett/repos",
            "events_url": "https://api.github.com/users/collinarnett/events{/privacy}",
            "received_events_url": "https://api.github.com/users/collinarnett/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-09T06:27:06Z",
        "updated_at": "2021-06-09T06:27:06Z",
        "author_association": "NONE",
        "body": "I wanted to add my 2 cents here since this issue seems to be the same that I'm facing.\r\nI have a finetuned GPT2-XL model from hf and I've quantized it using the workaround described in https://github.com/microsoft/onnxruntime/issues/7017 \r\n\r\nThis yeilds the following results when I do the logit diff in the https://github.com/microsoft/onnxruntime/blob/master/onnxruntime/python/tools/transformers/notebooks/Inference_GPT2_with_OnnxRuntime_on_CPU.ipynb on my model and the non-finetuned version of GPT2-XL\r\n\r\nMy Model:\r\nfloat32 model onnx vs pytorch:\r\n```\r\nmax logits diff (ignored padding) 2.86102294921875e-05\r\n```\r\nQuantized int8 onnx vs pytorch\r\n```\r\nmax logits diff (ignored padding) 1.972315788269043\r\n```\r\n\r\nBase GPT-XL:\r\nfloat32 model onnx vs pytorch:\r\n```\r\nmax logits diff (ignored padding) 3.62396240234375e-05\r\n```\r\nQuantized int8 onnx vs pytorch:\r\n```\r\nmax logits diff (ignored padding) 2.5597681999206543\r\n```\r\n\r\nThe thing is this doesn't happen with the smaller models in the notebook. Which makes me think that the `infer_shapes` function has something to do with it as mentioned in the other issue I linked.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857419356/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001062516",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-1001062516",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 1001062516,
        "node_id": "IC_kwDOCVq1mM47qwB0",
        "user": {
            "login": "isgursoy",
            "id": 2170245,
            "node_id": "MDQ6VXNlcjIxNzAyNDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2170245?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/isgursoy",
            "html_url": "https://github.com/isgursoy",
            "followers_url": "https://api.github.com/users/isgursoy/followers",
            "following_url": "https://api.github.com/users/isgursoy/following{/other_user}",
            "gists_url": "https://api.github.com/users/isgursoy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/isgursoy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/isgursoy/subscriptions",
            "organizations_url": "https://api.github.com/users/isgursoy/orgs",
            "repos_url": "https://api.github.com/users/isgursoy/repos",
            "events_url": "https://api.github.com/users/isgursoy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/isgursoy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-25T19:03:49Z",
        "updated_at": "2021-12-25T19:04:50Z",
        "author_association": "NONE",
        "body": "Observing bigger difference in the exact use case. fp32, distilgpt2.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001062516/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1016948837",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-1016948837",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 1016948837,
        "node_id": "IC_kwDOCVq1mM48nWhl",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-19T23:00:26Z",
        "updated_at": "2022-01-19T23:00:26Z",
        "author_association": "MEMBER",
        "body": "For anyone interested in GPT-2 parity, we have a tool:\r\nhttps://github.com/microsoft/onnxruntime/blob/master/onnxruntime/python/tools/transformers/gpt2_parity.py\r\nIt test the accuracy of generating one word and compare the result with PyTorch\r\n\r\nExample to run:\r\n   python -m onnxruntime.transformers.gpt2_parity -m gpt2-large --use_gpu -e\r\n\r\nFor GPT-2 model, we see 100% matched with PyTorch.  Mixed precision (Add, FastGelu and LayerNormalizaiton comptued in FP32, and other operators in FP16), top 1 accuracy of one word is 99.1~99.5% depending on the model, and the accuracy of whole sentence will drop with generating more words.\r\n\r\nint8 quantization are not recommended due to accuracy loss (shall be larger than mixed precision).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1016948837/reactions",
            "total_count": 2,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 2,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100599295",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6549#issuecomment-1100599295",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6549",
        "id": 1100599295,
        "node_id": "IC_kwDOCVq1mM5Bmc__",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-16T07:54:50Z",
        "updated_at": "2022-04-16T07:54:50Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100599295/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]