[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857207800",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7974#issuecomment-857207800",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7974",
        "id": 857207800,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzIwNzgwMA==",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-08T22:08:34Z",
        "updated_at": "2021-06-08T22:08:34Z",
        "author_association": "MEMBER",
        "body": "@CodyLDA , could you share the model or method to generate the model?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857207800/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857435422",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7974#issuecomment-857435422",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7974",
        "id": 857435422,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzQzNTQyMg==",
        "user": {
            "login": "DA-L3",
            "id": 33768245,
            "node_id": "MDQ6VXNlcjMzNzY4MjQ1",
            "avatar_url": "https://avatars.githubusercontent.com/u/33768245?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DA-L3",
            "html_url": "https://github.com/DA-L3",
            "followers_url": "https://api.github.com/users/DA-L3/followers",
            "following_url": "https://api.github.com/users/DA-L3/following{/other_user}",
            "gists_url": "https://api.github.com/users/DA-L3/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DA-L3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DA-L3/subscriptions",
            "organizations_url": "https://api.github.com/users/DA-L3/orgs",
            "repos_url": "https://api.github.com/users/DA-L3/repos",
            "events_url": "https://api.github.com/users/DA-L3/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DA-L3/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-09T06:53:30Z",
        "updated_at": "2021-06-09T06:53:30Z",
        "author_association": "NONE",
        "body": "The PyTorch model is the `t5-3b` from huggingface. \r\nTo export it to ONNX-Format, I am using\r\n```python\r\ntorch.onnx.export(model, args=(input_ids, attention_mask), f=model_path,  \r\n                              export_params=True, opset_version=12, do_constant_folding=True, \r\n                              input_names=[\"input_ids\", \"attention_mask\"], output_names=[\"hidden_states\"], \r\n                              dynamic_axes={\"input_ids\": {0: \"batch\", 1: \"sequence\"}, \"attention_mask\": {0: \"batch\", 1: \"sequence\"}, \r\n                              \"hidden_states\": {0: \"batch\", 1: \"sequence\"}}, \r\n                              use_external_data_format=True)\r\n```\r\nwhere `input_ids` and `attention_mask` are dummy inputs generated from a random text sequence and the T5Tokenizer.\r\n\r\nFor the actual quantization step:\r\n```python\r\nquantize_dynamic(model_input=onnx_model_name, model_output=output_model_name, \r\n                              per_channel=True, activation_type=QuantType.QUInt8, weight_type=QuantType.QUInt8,\r\n                              optimize_model=False, use_external_data_format=False)\r\n```\r\n\r\nThen I get the exceed maximum protobuf because `quantize dynamic` uses `ONNXQuantizer` which then calls `model = onnx.shape_inference.infer_shapes(model)`, that causes at least this shape inference issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857435422/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862447110",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7974#issuecomment-862447110",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7974",
        "id": 862447110,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ0NzExMA==",
        "user": {
            "login": "Riccorl",
            "id": 10062216,
            "node_id": "MDQ6VXNlcjEwMDYyMjE2",
            "avatar_url": "https://avatars.githubusercontent.com/u/10062216?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Riccorl",
            "html_url": "https://github.com/Riccorl",
            "followers_url": "https://api.github.com/users/Riccorl/followers",
            "following_url": "https://api.github.com/users/Riccorl/following{/other_user}",
            "gists_url": "https://api.github.com/users/Riccorl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Riccorl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Riccorl/subscriptions",
            "organizations_url": "https://api.github.com/users/Riccorl/orgs",
            "repos_url": "https://api.github.com/users/Riccorl/repos",
            "events_url": "https://api.github.com/users/Riccorl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Riccorl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-16T14:50:52Z",
        "updated_at": "2021-06-16T14:50:52Z",
        "author_association": "NONE",
        "body": "Did you find a solution for this? I have the same problem with `xlm-roberta-large`. Even setting `use_external_data_format=True` doesn't work.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862447110/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862452866",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7974#issuecomment-862452866",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7974",
        "id": 862452866,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ1Mjg2Ng==",
        "user": {
            "login": "DA-L3",
            "id": 33768245,
            "node_id": "MDQ6VXNlcjMzNzY4MjQ1",
            "avatar_url": "https://avatars.githubusercontent.com/u/33768245?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DA-L3",
            "html_url": "https://github.com/DA-L3",
            "followers_url": "https://api.github.com/users/DA-L3/followers",
            "following_url": "https://api.github.com/users/DA-L3/following{/other_user}",
            "gists_url": "https://api.github.com/users/DA-L3/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DA-L3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DA-L3/subscriptions",
            "organizations_url": "https://api.github.com/users/DA-L3/orgs",
            "repos_url": "https://api.github.com/users/DA-L3/repos",
            "events_url": "https://api.github.com/users/DA-L3/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DA-L3/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-16T14:57:45Z",
        "updated_at": "2021-06-16T14:57:45Z",
        "author_association": "NONE",
        "body": "Not yet, right now, I have to use the \"workaround\" mentioned in #7017, but I am not sure if this is the recommended way. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862452866/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862464596",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7974#issuecomment-862464596",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7974",
        "id": 862464596,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQ2NDU5Ng==",
        "user": {
            "login": "Riccorl",
            "id": 10062216,
            "node_id": "MDQ6VXNlcjEwMDYyMjE2",
            "avatar_url": "https://avatars.githubusercontent.com/u/10062216?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Riccorl",
            "html_url": "https://github.com/Riccorl",
            "followers_url": "https://api.github.com/users/Riccorl/followers",
            "following_url": "https://api.github.com/users/Riccorl/following{/other_user}",
            "gists_url": "https://api.github.com/users/Riccorl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Riccorl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Riccorl/subscriptions",
            "organizations_url": "https://api.github.com/users/Riccorl/orgs",
            "repos_url": "https://api.github.com/users/Riccorl/repos",
            "events_url": "https://api.github.com/users/Riccorl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Riccorl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-16T15:12:03Z",
        "updated_at": "2021-06-16T15:12:03Z",
        "author_association": "NONE",
        "body": "Thanks for the workaround!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862464596/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]