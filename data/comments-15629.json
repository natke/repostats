[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1521109675",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1521109675",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1521109675,
        "node_id": "IC_kwDOCVq1mM5aqkqr",
        "user": {
            "login": "wejoncy",
            "id": 9417365,
            "node_id": "MDQ6VXNlcjk0MTczNjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9417365?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wejoncy",
            "html_url": "https://github.com/wejoncy",
            "followers_url": "https://api.github.com/users/wejoncy/followers",
            "following_url": "https://api.github.com/users/wejoncy/following{/other_user}",
            "gists_url": "https://api.github.com/users/wejoncy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wejoncy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wejoncy/subscriptions",
            "organizations_url": "https://api.github.com/users/wejoncy/orgs",
            "repos_url": "https://api.github.com/users/wejoncy/repos",
            "events_url": "https://api.github.com/users/wejoncy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wejoncy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-25T03:30:35Z",
        "updated_at": "2023-04-25T03:33:01Z",
        "author_association": "MEMBER",
        "body": "Hi \r\nWould you mind pasting the error msg here?\r\n\r\nI guess the error comes from `options.addNnapi(EnumSet.of(NNAPIFlags.CPU_DISABLED));`.   NNAPI EP will automaticlly select the best device, say NPU DSP if possible, so you can remove it and try again.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1521109675/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1522450549",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1522450549",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1522450549,
        "node_id": "IC_kwDOCVq1mM5avsB1",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-25T21:33:46Z",
        "updated_at": "2023-04-25T21:34:41Z",
        "author_association": "MEMBER",
        "body": "I think NNAPI EP cannot run stable diffusion. For example, instance normalization is not supported in NNAPI EP according to the document (if it is up to date). See operators supported:\r\nhttps://onnxruntime.ai/docs/execution-providers/NNAPI-ExecutionProvider.html#supported-ops",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1522450549/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1522758046",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1522758046",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1522758046,
        "node_id": "IC_kwDOCVq1mM5aw3Ge",
        "user": {
            "login": "cherrerajobs",
            "id": 8894763,
            "node_id": "MDQ6VXNlcjg4OTQ3NjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8894763?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cherrerajobs",
            "html_url": "https://github.com/cherrerajobs",
            "followers_url": "https://api.github.com/users/cherrerajobs/followers",
            "following_url": "https://api.github.com/users/cherrerajobs/following{/other_user}",
            "gists_url": "https://api.github.com/users/cherrerajobs/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cherrerajobs/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cherrerajobs/subscriptions",
            "organizations_url": "https://api.github.com/users/cherrerajobs/orgs",
            "repos_url": "https://api.github.com/users/cherrerajobs/repos",
            "events_url": "https://api.github.com/users/cherrerajobs/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cherrerajobs/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-26T04:21:05Z",
        "updated_at": "2023-04-26T14:13:58Z",
        "author_association": "NONE",
        "body": "I would like to mention the following paper from Google regarding stable diffusion on Android devices:\r\nhttps://arxiv.org/abs/2304.11267\r\n\r\nThey claim being able to achieve 20 steps of a non 8bit quantized 512x512 generation in about 12 seconds on GPU equipped mobile phones. Android is just about ready to handle some of these bigger models but we need better GPU support. This is serious as I get the feeling other implementations are racing to implement SD support on mobile and I really enjoy the ONNX ecosystem and its professionalism.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1522758046/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1523897939",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1523897939",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1523897939,
        "node_id": "IC_kwDOCVq1mM5a1NZT",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-26T18:55:27Z",
        "updated_at": "2023-04-26T18:55:27Z",
        "author_association": "MEMBER",
        "body": "To support SD in NNAPI EP, it need add implementation for many operators like LayerNormalization, GroupNorm, Gelu, MultiHeadAttention (with flash attention) etc. \r\n\r\nContributions are welcome!\r\n\r\n@guschmue",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1523897939/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1523938665",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1523938665",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1523938665,
        "node_id": "IC_kwDOCVq1mM5a1XVp",
        "user": {
            "login": "guschmue",
            "id": 22941064,
            "node_id": "MDQ6VXNlcjIyOTQxMDY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/22941064?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guschmue",
            "html_url": "https://github.com/guschmue",
            "followers_url": "https://api.github.com/users/guschmue/followers",
            "following_url": "https://api.github.com/users/guschmue/following{/other_user}",
            "gists_url": "https://api.github.com/users/guschmue/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guschmue/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guschmue/subscriptions",
            "organizations_url": "https://api.github.com/users/guschmue/orgs",
            "repos_url": "https://api.github.com/users/guschmue/repos",
            "events_url": "https://api.github.com/users/guschmue/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guschmue/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-26T19:32:19Z",
        "updated_at": "2023-04-26T19:32:19Z",
        "author_association": "MEMBER",
        "body": "@skottmckay must have looked at this.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1523938665/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554203600",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1554203600",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1554203600,
        "node_id": "IC_kwDOCVq1mM5co0PQ",
        "user": {
            "login": "blueokanna",
            "id": 56761243,
            "node_id": "MDQ6VXNlcjU2NzYxMjQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/56761243?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/blueokanna",
            "html_url": "https://github.com/blueokanna",
            "followers_url": "https://api.github.com/users/blueokanna/followers",
            "following_url": "https://api.github.com/users/blueokanna/following{/other_user}",
            "gists_url": "https://api.github.com/users/blueokanna/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/blueokanna/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/blueokanna/subscriptions",
            "organizations_url": "https://api.github.com/users/blueokanna/orgs",
            "repos_url": "https://api.github.com/users/blueokanna/repos",
            "events_url": "https://api.github.com/users/blueokanna/events{/privacy}",
            "received_events_url": "https://api.github.com/users/blueokanna/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-19T08:07:33Z",
        "updated_at": "2023-05-19T08:07:33Z",
        "author_association": "NONE",
        "body": "It looks good on me, if there support another useful model and replace it it might good. In another way, I still find a way that use GPU to support it and let it run faster than CPU generation.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554203600/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554503678",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1554503678",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1554503678,
        "node_id": "IC_kwDOCVq1mM5cp9f-",
        "user": {
            "login": "ZTMIDGO",
            "id": 50280785,
            "node_id": "MDQ6VXNlcjUwMjgwNzg1",
            "avatar_url": "https://avatars.githubusercontent.com/u/50280785?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZTMIDGO",
            "html_url": "https://github.com/ZTMIDGO",
            "followers_url": "https://api.github.com/users/ZTMIDGO/followers",
            "following_url": "https://api.github.com/users/ZTMIDGO/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZTMIDGO/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZTMIDGO/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZTMIDGO/subscriptions",
            "organizations_url": "https://api.github.com/users/ZTMIDGO/orgs",
            "repos_url": "https://api.github.com/users/ZTMIDGO/repos",
            "events_url": "https://api.github.com/users/ZTMIDGO/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZTMIDGO/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-19T12:31:38Z",
        "updated_at": "2023-05-19T12:31:38Z",
        "author_association": "NONE",
        "body": "> It looks good on me, if there support another useful model and replace it it might good. In another way, I still find a way that use GPU to support it and let it run faster than CPU generation.\r\n\r\nThe ONNX model can be quantified using code\r\nhttps://github.com/LowinLi/stable-diffusion-streamlit/blob/main/src/stable-diffusion-streamlit/pages/model/quantization.py\r\n\r\nONNX model\r\nhttps://huggingface.co/runwayml/stable-diffusion-v1-5/tree/onnx\r\n\r\nORT model format\r\nhttps://onnxruntime.ai/docs/performance/model-optimizations/ort-format-models.html",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554503678/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1556571240",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15629#issuecomment-1556571240",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15629",
        "id": 1556571240,
        "node_id": "IC_kwDOCVq1mM5cx2Ro",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-22T05:45:01Z",
        "updated_at": "2023-05-22T05:45:01Z",
        "author_association": "MEMBER",
        "body": "A few notes.\r\n\r\nWe're limited by 2 things. First, by what NNAPI supports (reference is [here](https://developer.android.com/ndk/reference/group/neural-networks)), and second by which ONNX operators we have implemented conversion to the NNAPI equivalent for in the ORT NNAPI Execution Provider. \r\n\r\nWe can add conversion logic for gaps, but we can't change what NNAPI supports.\r\n\r\nFor a dynamically quantized model, AFAIK there's no NNAPI equivalent to DynamicQuantizeLinear and MatMulInteger. We could possibly implement DynamicQuantizeLinear using lower level ops, but the lack of MatMulInteger would be a blocker. And if you can't quantize the model, would mobile devices be able to load and execute the model due to its size?\r\n\r\nAs @tianleiwu mentioned there are other important operators required as well. Any gap in operator coverage results in a transition between NNAPI and the CPU EP when executing the model, and those transitions come with a significant performance hit. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1556571240/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]