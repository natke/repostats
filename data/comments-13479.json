[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294026017",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1294026017",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1294026017,
        "node_id": "IC_kwDOCVq1mM5NIUUh",
        "user": {
            "login": "jywu-msft",
            "id": 43355415,
            "node_id": "MDQ6VXNlcjQzMzU1NDE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/43355415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jywu-msft",
            "html_url": "https://github.com/jywu-msft",
            "followers_url": "https://api.github.com/users/jywu-msft/followers",
            "following_url": "https://api.github.com/users/jywu-msft/following{/other_user}",
            "gists_url": "https://api.github.com/users/jywu-msft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jywu-msft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jywu-msft/subscriptions",
            "organizations_url": "https://api.github.com/users/jywu-msft/orgs",
            "repos_url": "https://api.github.com/users/jywu-msft/repos",
            "events_url": "https://api.github.com/users/jywu-msft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jywu-msft/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T20:25:52Z",
        "updated_at": "2022-10-27T20:25:52Z",
        "author_association": "MEMBER",
        "body": "looks like you are using TensorRT 8.4.3.1\r\ncan  you try building without the --use_tensorrt_builtin_parser option?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294026017/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294107236",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1294107236",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1294107236,
        "node_id": "IC_kwDOCVq1mM5NIoJk",
        "user": {
            "login": "CanyonWind",
            "id": 8852730,
            "node_id": "MDQ6VXNlcjg4NTI3MzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8852730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/CanyonWind",
            "html_url": "https://github.com/CanyonWind",
            "followers_url": "https://api.github.com/users/CanyonWind/followers",
            "following_url": "https://api.github.com/users/CanyonWind/following{/other_user}",
            "gists_url": "https://api.github.com/users/CanyonWind/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/CanyonWind/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/CanyonWind/subscriptions",
            "organizations_url": "https://api.github.com/users/CanyonWind/orgs",
            "repos_url": "https://api.github.com/users/CanyonWind/repos",
            "events_url": "https://api.github.com/users/CanyonWind/events{/privacy}",
            "received_events_url": "https://api.github.com/users/CanyonWind/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T21:45:06Z",
        "updated_at": "2022-10-27T21:45:06Z",
        "author_association": "NONE",
        "body": "Thanks, will give it a try. \r\n\r\nSome more info â€” I built ORT with TensorRT 8.4.3.1 about one month ago and it worked well then. While I tried to checkout to an older commit and build that version, it throws an error now saying `1 - onnxruntime_test_all (Timeout)`. Any idea why it happened? Is it safe to add `--skip_tests` flag when build with TensorRT? thx\r\n\r\n```\r\n1: [       OK ] PadOpTest/0.Pad_Reflect_3D_Inner_No_Padding (8487 ms)                                                                                                                                        \r\n1: [ RUN      ] PadOpTest/0.Pad_Reflect_3D_Last_Pad_Slice_Inner_No_Padding                                                                                                                                   \r\n1/3 Test #1: onnxruntime_test_all .............***Timeout 10801.10 sec                                                                                                                                       \r\ntest 2                                                                                                                                                                                                       \r\n    Start 2: onnx_test_pytorch_converted                                                                                                                                                                     \r\n                                                                                                                                                                                                             \r\n2: Test command: /home/username/onnxruntime/build/Linux/Debug/onnx_test_runner \"/home/username/onnxruntime/cmake/external/onnx/onnx/backend/test/data/pytorch-converted\"                                       \r\n2: Working Directory: /home/username/onnxruntime/build/Linux/Debug                                                                                                                                            \r\n2: Test timeout computed to be: 10800                                                                                                                                                                        \r\n2: 2022-10-27 21:30:34.064282355 [E:onnxruntime:Default, testcase_driver.cc:39 RunParallel] Running tests in parallel: at most 59 models at any time                                                         \r\n2: 2022-10-27 21:30:36.554505833 [E:onnxruntime:Default, testcase_driver.cc:61 RunModelsAsync] Running tests finished. Generating report                                                                     \r\n2: result:                                                                                                                                                                                                   \r\n2:      Models: 59                                                                                                                                                                                           \r\n2:      Total test cases: 59                                                                                                                                                                                 \r\n2:              Succeeded: 59                                                                                                                                                                                \r\n2:              Not implemented: 0                                                                                                                                                                           \r\n2:              Failed: 0                                                                                                                                                                                    \r\n2:      Stats by Operator type:                                                                                                                                                                              \r\n2:              Not implemented(0):                                                                   \r\n2:              Failed:                                                                               \r\n2: Failed Test Cases:                                                                                 \r\n2/3 Test #2: onnx_test_pytorch_converted ......   Passed    5.63 sec           \r\ntest 3                                                                                                                                                                                                       \r\n    Start 3: onnx_test_pytorch_operator                                                   \r\n3: Test command: /home/username/onnxruntime/build/Linux/Debug/onnx_test_runner \"/home/username/onnxruntime/cmake/external/onnx/onnx/backend/test/data/pytorch-operator\"                                        \r\n3: Working Directory: /home/username/onnxruntime/build/Linux/Debug                                                                                                                                            \r\n3: Test timeout computed to be: 10800                                                                                                                                                                        \r\n3: 2022-10-27 21:30:36.642262844 [E:onnxruntime:Default, testcase_driver.cc:39 RunParallel] Running tests in parallel: at most 24 models at any time                                                         \r\n3: 2022-10-27 21:30:38.012276933 [E:onnxruntime:Default, testcase_driver.cc:61 RunModelsAsync] Running tests finished. Generating report                                                                     \r\n3: result:                                                                                                                                                                                                   \r\n3:      Models: 24                                                                                                                                                                                           \r\n3:      Total test cases: 24                                                                                                                                                                                 \r\n3:              Succeeded: 24                                                                                                                                                                                \r\n3:              Not implemented: 0                                                                                                                                                                           \r\n3:              Failed: 0                                                                                                                                                                                    \r\n3:      Stats by Operator type:                                                                                                                                                                              \r\n3:              Not implemented(0):                                                                                                                                                                          \r\n3:              Failed:                                                                                                                                                                                      \r\n3: Failed Test Cases:                                                                                                                                                                                        \r\n3/3 Test #3: onnx_test_pytorch_operator .......   Passed    1.45 sec                                                                                                                                         \r\n                                                                                                                                                                                                             \r\n67% tests passed, 1 tests failed out of 3                                                                                                                                                                    \r\n                                                                                                                                                                                                             \r\nTotal Test time (real) = 10808.26 sec                                                                                                                                                                        \r\n                                                                                                                                                                                                             \r\nThe following tests FAILED:                                                                                                                                                                                  \r\n          1 - onnxruntime_test_all (Timeout)                                                                                                                                                                 \r\nErrors while running CTest                                                                                                                                                                                   \r\nOutput from these tests are in: /home/username/onnxruntime/build/Linux/Debug/Testing/Temporary/LastTest.log                                                                                                   \r\nUse \"--rerun-failed --output-on-failure\" to re-run the failed cases verbosely.                                                                                                                               \r\nTraceback (most recent call last):                                                                                                                                                                           \r\n  File \"/home/username/onnxruntime/tools/ci_build/build.py\", line 2793, in <module>                                                                                                                           \r\n    sys.exit(main())                                                                                                                                                                                         \r\n  File \"/home/username/onnxruntime/tools/ci_build/build.py\", line 2711, in main                                                                                                                               \r\n    run_onnxruntime_tests(args, source_dir, ctest_path, build_dir, configs)                                                                                                                                  \r\n  File \"/home/username/onnxruntime/tools/ci_build/build.py\", line 1847, in run_onnxruntime_tests                                                                                                              \r\n    run_subprocess(ctest_cmd, cwd=cwd, dll_path=dll_path)                                                                                                                                                    \r\n  File \"/home/username/onnxruntime/tools/ci_build/build.py\", line 738, in run_subprocess                                                                                                                      \r\n    return run(*args, cwd=cwd, capture_stdout=capture_stdout, shell=shell, env=my_env)                                                                                                                       \r\n  File \"/home/username/onnxruntime/tools/python/util/run.py\", line 49, in run                                                                                                                                 \r\n    completed_process = subprocess.run(                                                                                                                                                                      \r\n  File \"/opt/conda/lib/python3.8/subprocess.py\", line 516, in run                                                                                                                                            \r\n    raise CalledProcessError(retcode, process.args,                                                                                                                                                          \r\nsubprocess.CalledProcessError: Command '['/sensei-fs/users/username/setup/trt_dependencies/cmake-3.24.2-linux-x86_64/bin/ctest', '--build-config', 'Debug', '--verbose', '--timeout', '10800']' returned non-z\r\nero exit status 8.                                                                 \r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294107236/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294531987",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1294531987",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1294531987,
        "node_id": "IC_kwDOCVq1mM5NKP2T",
        "user": {
            "login": "chilo-ms",
            "id": 54722500,
            "node_id": "MDQ6VXNlcjU0NzIyNTAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/54722500?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chilo-ms",
            "html_url": "https://github.com/chilo-ms",
            "followers_url": "https://api.github.com/users/chilo-ms/followers",
            "following_url": "https://api.github.com/users/chilo-ms/following{/other_user}",
            "gists_url": "https://api.github.com/users/chilo-ms/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chilo-ms/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chilo-ms/subscriptions",
            "organizations_url": "https://api.github.com/users/chilo-ms/orgs",
            "repos_url": "https://api.github.com/users/chilo-ms/repos",
            "events_url": "https://api.github.com/users/chilo-ms/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chilo-ms/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-28T06:42:14Z",
        "updated_at": "2022-10-28T06:43:15Z",
        "author_association": "MEMBER",
        "body": "I tried the build script you shared against main branch and the build was successful. One thing you can try is to remove the \"build\" folder and start a clean build since there might have some old cmake settings not being updated.\r\n\r\nRegarding the unit test failure, could you run the onnxruntime_test_all with `--gtest_filter` to only test the particular unit test to see does it still time out? The `--skip_tests` only skips unit tests and the ORT related binaries will still be built.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294531987/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1295233979",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1295233979",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1295233979,
        "node_id": "IC_kwDOCVq1mM5NM7O7",
        "user": {
            "login": "jywu-msft",
            "id": 43355415,
            "node_id": "MDQ6VXNlcjQzMzU1NDE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/43355415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jywu-msft",
            "html_url": "https://github.com/jywu-msft",
            "followers_url": "https://api.github.com/users/jywu-msft/followers",
            "following_url": "https://api.github.com/users/jywu-msft/following{/other_user}",
            "gists_url": "https://api.github.com/users/jywu-msft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jywu-msft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jywu-msft/subscriptions",
            "organizations_url": "https://api.github.com/users/jywu-msft/orgs",
            "repos_url": "https://api.github.com/users/jywu-msft/repos",
            "events_url": "https://api.github.com/users/jywu-msft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jywu-msft/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-28T16:55:34Z",
        "updated_at": "2022-10-28T16:55:34Z",
        "author_association": "MEMBER",
        "body": "yes, you can skip tests during build. \r\nit's possible there is test time variance between different GPU archs and also you are running Debug so that may explain the timeout. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1295233979/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463278557",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1463278557",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1463278557,
        "node_id": "IC_kwDOCVq1mM5XN9vd",
        "user": {
            "login": "yf711",
            "id": 109183385,
            "node_id": "U_kgDOBoIBmQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/109183385?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yf711",
            "html_url": "https://github.com/yf711",
            "followers_url": "https://api.github.com/users/yf711/followers",
            "following_url": "https://api.github.com/users/yf711/following{/other_user}",
            "gists_url": "https://api.github.com/users/yf711/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yf711/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yf711/subscriptions",
            "organizations_url": "https://api.github.com/users/yf711/orgs",
            "repos_url": "https://api.github.com/users/yf711/repos",
            "events_url": "https://api.github.com/users/yf711/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yf711/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T05:02:30Z",
        "updated_at": "2023-03-10T06:32:05Z",
        "author_association": "MEMBER",
        "body": "Hi @CanyonWind,  \r\nI have tested on building ORT with the `--use_tensorrt_builtin_parser` option and it has no issue on the latest ORT 1.14.1 version.\r\nPlease feel free to try on that (Note ORT 1.14 requires TRT 8.5)\r\n\r\n\r\n\r\n\r\nRoot cause:\r\n \r\nThere were two PR which could account on that:\r\nThe first [PR](https://github.com/microsoft/onnxruntime/pull/12602) introduced `use_tensorrt_builtin_parser` option, and later the second [PR](https://github.com/microsoft/onnxruntime/blame/9d1405fb33ddf58f9e97ad9e173ee92714ce344a/onnxruntime/core/providers/tensorrt/tensorrt_execution_provider_utils.h#L12) imported `NvInferVersion.h`) and made `tensorrt_basic_test.cc` dependent to `NvInferVersion`. \r\n\r\nHowever, `tensorrt_basic_test.cc` couldn't get access to `NvInferVersion.h` when `use_tensorrt_builtin_parser` was enabled. \r\nThat's because the 1st PR only granted the cmake [onnxruntime_providers_tensorrt_cc_srcs](https://github.com/microsoft/onnxruntime/blob/rel-1.13.1/cmake/onnxruntime_providers.cmake#L663) group with the access to TensorRT include-dir when built-in parser was enabled, but `tensorrt_basic_test.cc` wasn't belong to that group.\r\n\r\nThe issue wasn't found when testing on the 1st PR, because at that time, `tensorrt_basic_test.cc`  didn't depend on `NvInferVersion.h`;\r\nDuring the 2nd PR, since the build test didn't enable `use_tensorrt_builtin_parser` option, this issue wasn't emerge.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1463278557/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1509057322",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13479#issuecomment-1509057322",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13479",
        "id": 1509057322,
        "node_id": "IC_kwDOCVq1mM5Z8mMq",
        "user": {
            "login": "yf711",
            "id": 109183385,
            "node_id": "U_kgDOBoIBmQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/109183385?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yf711",
            "html_url": "https://github.com/yf711",
            "followers_url": "https://api.github.com/users/yf711/followers",
            "following_url": "https://api.github.com/users/yf711/following{/other_user}",
            "gists_url": "https://api.github.com/users/yf711/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yf711/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yf711/subscriptions",
            "organizations_url": "https://api.github.com/users/yf711/orgs",
            "repos_url": "https://api.github.com/users/yf711/repos",
            "events_url": "https://api.github.com/users/yf711/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yf711/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-14T18:26:35Z",
        "updated_at": "2023-04-14T18:26:35Z",
        "author_association": "MEMBER",
        "body": "Hi @CanyonWind I will close this issue for now. Feel free to reopen it if you have any questions.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1509057322/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]