[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469767030",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1469767030",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1469767030,
        "node_id": "IC_kwDOCVq1mM5Xmt12",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T10:41:32Z",
        "updated_at": "2023-03-15T10:41:32Z",
        "author_association": "MEMBER",
        "body": "This seems like it's either an onnxscript issue or an onnx issue given the error comes from onnx code here: https://github.com/onnx/onnx/blob/a1a07538126649528486e0afce8d6f9a6923d5b5/onnx/defs/schema.cc#L965-L971\r\n\r\nIs there a change you think could be made in onnxruntime?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469767030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470098408",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1470098408",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1470098408,
        "node_id": "IC_kwDOCVq1mM5Xn-vo",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T14:21:54Z",
        "updated_at": "2023-03-15T14:21:54Z",
        "author_association": "MEMBER",
        "body": "When an input in the function is unused, I assume it would still have a name but simply get ignored? Would it be reasonable to expect ort to proceed without errors?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470098408/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470099465",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1470099465",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1470099465,
        "node_id": "IC_kwDOCVq1mM5Xn_AJ",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T14:22:33Z",
        "updated_at": "2023-03-15T14:22:33Z",
        "author_association": "MEMBER",
        "body": "Ok I see what you are referring to. It does seem like an ONNX error. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470099465/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470101437",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1470101437",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1470101437,
        "node_id": "IC_kwDOCVq1mM5Xn_e9",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T14:23:46Z",
        "updated_at": "2023-03-15T14:23:46Z",
        "author_association": "MEMBER",
        "body": "I moved the issue to onnx instead. Thanks Scott!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470101437/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472828807",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1472828807",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1472828807,
        "node_id": "IC_kwDOCVq1mM5XyZWH",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-16T22:15:28Z",
        "updated_at": "2023-03-16T22:15:28Z",
        "author_association": "MEMBER",
        "body": "I do think it is a problem in onnxruntime. Specifically, it [creates a schema for the function](https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/core/graph/function_utils.cc#L251) and does not seem to handle this corner case ... it is creating a schema with an empty input name.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472828807/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472857693",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1472857693",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1472857693,
        "node_id": "IC_kwDOCVq1mM5XygZd",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-16T22:41:32Z",
        "updated_at": "2023-03-16T22:41:58Z",
        "author_association": "MEMBER",
        "body": "@gramalingam is it expected that someone would create an onnx::FunctionProto with an empty input name? \r\n\r\nWe could update the ORT code to skip those inputs, but isn't that just masking a misuse issue and maybe the user made a mistake by having an empty input name? \r\n\r\nAlso not clear how to handle it. What if input 2 out of 3 has an empty name? does input 3 now move to input 2 or do we have to create a fake name? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472857693/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472877286",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1472877286",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1472877286,
        "node_id": "IC_kwDOCVq1mM5XylLm",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-16T23:06:11Z",
        "updated_at": "2023-03-16T23:06:11Z",
        "author_association": "MEMBER",
        "body": "There is one example in the issue. To match the aten signature we take self as the first input. But it is not used in the function ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472877286/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472887069",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1472887069",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1472887069,
        "node_id": "IC_kwDOCVq1mM5Xynkd",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-16T23:19:45Z",
        "updated_at": "2023-03-16T23:19:45Z",
        "author_association": "MEMBER",
        "body": "What creates the FunctionProto with an empty string for an input name? If you need consistency with aten with the number of inputs doesn't that unused input need to be named, and assumably tagged as an optional input. \r\n\r\nIf you don't name it ORT either has to drop it (so you lose that consistency) or generate a name (which the user has no control over and may be a complete surprise to them).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472887069/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472898426",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1472898426",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1472898426,
        "node_id": "IC_kwDOCVq1mM5XyqV6",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-16T23:37:04Z",
        "updated_at": "2023-03-16T23:37:04Z",
        "author_association": "MEMBER",
        "body": "@gramalingam i wonder if the name was dropped during the translation process in onnxscript. I will experiment more",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1472898426/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1476868571",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15046#issuecomment-1476868571",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15046",
        "id": 1476868571,
        "node_id": "IC_kwDOCVq1mM5YBznb",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-20T20:13:07Z",
        "updated_at": "2023-03-20T20:19:08Z",
        "author_association": "MEMBER",
        "body": "The problem is not an input FunctionProto with a missing input name. The problem is an input FunctionProto with an input X that is not used inside the function-body (as in the example at top). It is ORT code that creates an erroneous schema from such a FunctionProto. While such FunctionProto may be uncommon, it is not invalid.\r\n\r\nSpecifically, ORT internally depends on creating a schema for all model-local functions. To do this, it creates type-constraints for all inputs of the function: for any input X, this logic looks at where X is used inside the function-body to figure out an appropriate type-constraint for X.\r\n\r\nSo, this logic ends up assuming that every input X will be used somewhere within the function-body. When this is not true, it ends up creating an erroneous input with no name in the generated schema.\r\n\r\nPlease see: https://github.com/microsoft/onnxruntime/pull/15130 for a proposed fix.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1476868571/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 1,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]