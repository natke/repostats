[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1087143008",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11095#issuecomment-1087143008",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11095",
        "id": 1087143008,
        "node_id": "IC_kwDOCVq1mM5AzHxg",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-04T05:51:55Z",
        "updated_at": "2022-04-04T05:51:55Z",
        "author_association": "MEMBER",
        "body": "Not sure what's going on. The javascript output seems to have additional '0's between each output value. If I output the index and value for all non-zero values that's a bit clearer. \r\n\r\n@fs-eire any idea why that is?\r\n\r\nJavascript |   | Python |  \r\n-- | -- | -- | --\r\nIndex | Value | Index | Value\r\n94 | 180 | 47 | 180\r\n102 | 255 | 51 | 255\r\n150 | 253 | 75 | 253\r\n152 | 95 | 76 | 95\r\n154 | 87 | 77 | 87\r\n156 | 67 | 78 | 67\r\n158 | 254 | 79 | 254\r\n166 | 254 | 83 | 254\r\n168 | 16 | 84 | 16\r\n170 | 10 | 85 | 10\r\n172 | 2 | 86 | 2\r\n174 | 255 | 87 | 255\r\n214 | 254 | 107 | 254\r\n216 | 171 | 108 | 171\r\n218 | 111 | 109 | 111\r\n220 | 73 | 110 | 73\r\n222 | 254 | 111 | 254\r\n224 | 163 | 112 | 163\r\n226 | 119 | 113 | 119\r\n228 | 80 | 114 | 80\r\n230 | 254 | 115 | 254\r\n232 | 156 | 116 | 156\r\n234 | 118 | 117 | 118\r\n236 | 72 | 118 | 72\r\n238 | 255 | 119 | 255\r\n  |   | 136 | 160\r\n  |   | 137 | 114\r\n  |   | 138 | 81\r\n  |   | 139 | 254\r\n  |   | 140 | 154\r\n  |   | 141 | 113\r\n  |   | 142 | 72\r\n  |   | 143 | 254\r\n  |   | 144 | 160\r\n  |   | 145 | 115\r\n  |   | 146 | 81\r\n  |   | 147 | 254\r\n  |   | 148 | 157\r\n  |   | 149 | 108\r\n  |   | 150 | 67\r\n  |   | 151 | 254\r\n  |   | 171 | 254\r\n  |   | 172 | 158\r\n  |   | 173 | 117\r\n  |   | 174 | 76\r\n  |   | 175 | 254\r\n  |   | 176 | 152\r\n  |   | 177 | 120\r\n  |   | 178 | 85\r\n  |   | 179 | 254\r\n  |   | 180 | 152\r\n  |   | 181 | 104\r\n  |   | 182 | 63\r\n  |   | 183 | 254\r\n  |   | 200 | 1\r\n  |   | 203 | 254\r\n  |   | 204 | 157\r\n  |   | 205 | 119\r\n  |   | 206 | 75\r\n  |   | 207 | 254\r\n  |   | 208 | 161\r\n  |   | 209 | 113\r\n  |   | 210 | 75\r\n  |   | 211 | 254\r\n  |   | 212 | 154\r\n  |   | 213 | 120\r\n  |   | 214 | 80\r\n  |   | 215 | 255\r\n  |   | 235 | 254\r\n  |   | 236 | 155\r\n  |   | 237 | 117\r\n  |   | 238 | 75\r\n  |   | 239 | 255\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1087143008/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1087172877",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11095#issuecomment-1087172877",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11095",
        "id": 1087172877,
        "node_id": "IC_kwDOCVq1mM5AzPEN",
        "user": {
            "login": "kheyer",
            "id": 38166299,
            "node_id": "MDQ6VXNlcjM4MTY2Mjk5",
            "avatar_url": "https://avatars.githubusercontent.com/u/38166299?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kheyer",
            "html_url": "https://github.com/kheyer",
            "followers_url": "https://api.github.com/users/kheyer/followers",
            "following_url": "https://api.github.com/users/kheyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/kheyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kheyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kheyer/subscriptions",
            "organizations_url": "https://api.github.com/users/kheyer/orgs",
            "repos_url": "https://api.github.com/users/kheyer/repos",
            "events_url": "https://api.github.com/users/kheyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kheyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-04T06:38:44Z",
        "updated_at": "2022-04-04T06:38:44Z",
        "author_association": "NONE",
        "body": "I found that removing the cast to Long and reshaping at the end of the pytorch model fixed the issue. ie changing \r\n\r\n```python\r\nclass InferenceModel(nn.Module):\r\n    def __init__(self, layers):\r\n        super().__init__()\r\n        self.layers = layers\r\n        \r\n    def forward(self, input):\r\n        input = input.unsqueeze(0)\r\n        output = (self.layers(input).clamp(0,1) * 255).type(torch.LongTensor)\r\n        output = output.view((8,8,4))\r\n        return output\r\n```\r\n\r\nto\r\n\r\n```python\r\nclass InferenceModel(nn.Module):\r\n    def __init__(self, layers):\r\n        super().__init__()\r\n        self.layers = layers\r\n        \r\n    def forward(self, input):\r\n        input = input.unsqueeze(0)\r\n        output = self.layers(input).clamp(0,1) * 255\r\n        return output\r\n```\r\n\r\nwas able to fix the issue. Not sure if the problem was caused by the type change or the reshaping",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1087172877/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1088035965",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11095#issuecomment-1088035965",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11095",
        "id": 1088035965,
        "node_id": "IC_kwDOCVq1mM5A2hx9",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-04T21:35:25Z",
        "updated_at": "2022-04-04T21:35:25Z",
        "author_association": "MEMBER",
        "body": "This is a known issue (int32/int64 mismatch for output) which is fixed in master but not yet in latest release. link to the PR: https://github.com/microsoft/onnxruntime/pull/11049",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1088035965/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1088070605",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11095#issuecomment-1088070605",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11095",
        "id": 1088070605,
        "node_id": "IC_kwDOCVq1mM5A2qPN",
        "user": {
            "login": "kheyer",
            "id": 38166299,
            "node_id": "MDQ6VXNlcjM4MTY2Mjk5",
            "avatar_url": "https://avatars.githubusercontent.com/u/38166299?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kheyer",
            "html_url": "https://github.com/kheyer",
            "followers_url": "https://api.github.com/users/kheyer/followers",
            "following_url": "https://api.github.com/users/kheyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/kheyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kheyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kheyer/subscriptions",
            "organizations_url": "https://api.github.com/users/kheyer/orgs",
            "repos_url": "https://api.github.com/users/kheyer/repos",
            "events_url": "https://api.github.com/users/kheyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kheyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-04T22:22:45Z",
        "updated_at": "2022-04-04T22:22:45Z",
        "author_association": "NONE",
        "body": "Loos like the core issue is known and I'm able to fix my code by removing the cast to long. Going to close the issue",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1088070605/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]