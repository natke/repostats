[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407124575",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1407124575",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1407124575,
        "node_id": "IC_kwDOCVq1mM5T3wRf",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-27T22:07:18Z",
        "updated_at": "2023-01-27T22:07:18Z",
        "author_association": "MEMBER",
        "body": "thank you for the feedback. it looks like `URL.createObjectURL()` cannot be used in a service worker. we are trying to find a way to fix this.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407124575/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407132381",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1407132381",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1407132381,
        "node_id": "IC_kwDOCVq1mM5T3yLd",
        "user": {
            "login": "jonathanpeppers",
            "id": 840039,
            "node_id": "MDQ6VXNlcjg0MDAzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/840039?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonathanpeppers",
            "html_url": "https://github.com/jonathanpeppers",
            "followers_url": "https://api.github.com/users/jonathanpeppers/followers",
            "following_url": "https://api.github.com/users/jonathanpeppers/following{/other_user}",
            "gists_url": "https://api.github.com/users/jonathanpeppers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jonathanpeppers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jonathanpeppers/subscriptions",
            "organizations_url": "https://api.github.com/users/jonathanpeppers/orgs",
            "repos_url": "https://api.github.com/users/jonathanpeppers/repos",
            "events_url": "https://api.github.com/users/jonathanpeppers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jonathanpeppers/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-27T22:17:36Z",
        "updated_at": "2023-01-27T22:17:36Z",
        "author_association": "MEMBER",
        "body": "Thanks! It appears I can workaround with `ort.env.wasm.numThreads = 1;`, but I'm not sure exactly what the setting does:\r\n\r\nhttps://github.com/jonathanpeppers/inclusive-code-reviews-browser/pull/195\r\n\r\nIs there a doc/readme that explains what the 4 different `*.wasm` files do?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407132381/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414044365",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1414044365",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1414044365,
        "node_id": "IC_kwDOCVq1mM5USJrN",
        "user": {
            "login": "guschmue",
            "id": 22941064,
            "node_id": "MDQ6VXNlcjIyOTQxMDY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/22941064?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guschmue",
            "html_url": "https://github.com/guschmue",
            "followers_url": "https://api.github.com/users/guschmue/followers",
            "following_url": "https://api.github.com/users/guschmue/following{/other_user}",
            "gists_url": "https://api.github.com/users/guschmue/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guschmue/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guschmue/subscriptions",
            "organizations_url": "https://api.github.com/users/guschmue/orgs",
            "repos_url": "https://api.github.com/users/guschmue/repos",
            "events_url": "https://api.github.com/users/guschmue/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guschmue/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-02T16:44:45Z",
        "updated_at": "2023-02-02T16:44:45Z",
        "author_association": "MEMBER",
        "body": "One thing is that you might want to use chrome.runtime.getURL(\"asserts/model.onnx\") to fetch the model. \r\nThat has been working well for me. \r\nI can't explain why ort.env.wasm.numThreads=1 helps, need to debug it a little.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414044365/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414444749",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1414444749",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1414444749,
        "node_id": "IC_kwDOCVq1mM5UTrbN",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-02T22:13:07Z",
        "updated_at": "2023-02-02T22:13:07Z",
        "author_association": "MEMBER",
        "body": "The error does not happen in loading the model, it happens when initializing the web assembly.\r\n\r\nThe reason why `ort.env.wasm.numThreads=1` works is because the function `URL.createObjectURL()` will only be called when initializing multi-threaded version web assembly. The function is used to create a blob for 'ort-wasm-threaded.worker.js'. So setting to load the single-threaded version is a workaround.\r\n\r\nhttps://github.com/microsoft/onnxruntime/blob/main/js/web/lib/wasm/wasm-factory.ts#L124-L128",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414444749/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414855477",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1414855477",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1414855477,
        "node_id": "IC_kwDOCVq1mM5UVPs1",
        "user": {
            "login": "jonathanpeppers",
            "id": 840039,
            "node_id": "MDQ6VXNlcjg0MDAzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/840039?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonathanpeppers",
            "html_url": "https://github.com/jonathanpeppers",
            "followers_url": "https://api.github.com/users/jonathanpeppers/followers",
            "following_url": "https://api.github.com/users/jonathanpeppers/following{/other_user}",
            "gists_url": "https://api.github.com/users/jonathanpeppers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jonathanpeppers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jonathanpeppers/subscriptions",
            "organizations_url": "https://api.github.com/users/jonathanpeppers/orgs",
            "repos_url": "https://api.github.com/users/jonathanpeppers/repos",
            "events_url": "https://api.github.com/users/jonathanpeppers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jonathanpeppers/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-03T04:02:36Z",
        "updated_at": "2023-02-03T04:02:36Z",
        "author_association": "MEMBER",
        "body": "@fs-eire do you know any drawbacks to the single-threaded version?\r\n\r\nWe're not trying to call our model multiple times in parallel, really just sending 1 request at a time.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1414855477/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1416312141",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1416312141",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1416312141,
        "node_id": "IC_kwDOCVq1mM5UazVN",
        "user": {
            "login": "guschmue",
            "id": 22941064,
            "node_id": "MDQ6VXNlcjIyOTQxMDY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/22941064?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guschmue",
            "html_url": "https://github.com/guschmue",
            "followers_url": "https://api.github.com/users/guschmue/followers",
            "following_url": "https://api.github.com/users/guschmue/following{/other_user}",
            "gists_url": "https://api.github.com/users/guschmue/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guschmue/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guschmue/subscriptions",
            "organizations_url": "https://api.github.com/users/guschmue/orgs",
            "repos_url": "https://api.github.com/users/guschmue/repos",
            "events_url": "https://api.github.com/users/guschmue/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guschmue/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-03T19:29:54Z",
        "updated_at": "2023-02-03T19:29:54Z",
        "author_association": "MEMBER",
        "body": "@fs-eire - got it. \r\nIt is this code here: https://github.com/microsoft/onnxruntime/blob/main/js/web/lib/wasm/wasm-factory.ts#L124.\r\nAand it sounds you cannot use URL.createObjectURL with manifest v3 (ie \r\nhttps://groups.google.com/a/chromium.org/g/chromium-extensions/c/u0NH7L3v9L4).\r\nIf I understand the code correctly, we do this to avoid distributing the js files for simd.\r\nWe might want to find a different way of doing this.\r\n\r\n@jonathanpeppers, the disadvantage for single threaded is only performance. Your model looked not very compute intensive so you might not notice.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1416312141/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1625861446",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1625861446",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1625861446,
        "node_id": "IC_kwDOCVq1mM5g6K1G",
        "user": {
            "login": "lizozom",
            "id": 3016806,
            "node_id": "MDQ6VXNlcjMwMTY4MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3016806?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lizozom",
            "html_url": "https://github.com/lizozom",
            "followers_url": "https://api.github.com/users/lizozom/followers",
            "following_url": "https://api.github.com/users/lizozom/following{/other_user}",
            "gists_url": "https://api.github.com/users/lizozom/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lizozom/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lizozom/subscriptions",
            "organizations_url": "https://api.github.com/users/lizozom/orgs",
            "repos_url": "https://api.github.com/users/lizozom/repos",
            "events_url": "https://api.github.com/users/lizozom/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lizozom/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-07T18:39:25Z",
        "updated_at": "2023-07-07T18:39:45Z",
        "author_association": "NONE",
        "body": "I got this error, specifically working with `@xenova/transformers` in a chrome extension.\r\nI had this code throwing the same error:\r\n\r\n```\r\nimport { env, pipeline } from '@xenova/transformers';\r\nenv.localModelPath = 'models/';\r\nenv.allowRemoteModels = false;\r\nthis.embedder = await pipeline(\"embeddings\", EMBEDDING_MODEL_NAME);\r\n```\r\n\r\nI added `env.backends.onnx.wasm.numThreads = 1;` and it resolved the error.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1625861446/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1627759711",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1627759711",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1627759711,
        "node_id": "IC_kwDOCVq1mM5hBaRf",
        "user": {
            "login": "lizozom",
            "id": 3016806,
            "node_id": "MDQ6VXNlcjMwMTY4MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3016806?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lizozom",
            "html_url": "https://github.com/lizozom",
            "followers_url": "https://api.github.com/users/lizozom/followers",
            "following_url": "https://api.github.com/users/lizozom/following{/other_user}",
            "gists_url": "https://api.github.com/users/lizozom/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lizozom/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lizozom/subscriptions",
            "organizations_url": "https://api.github.com/users/lizozom/orgs",
            "repos_url": "https://api.github.com/users/lizozom/repos",
            "events_url": "https://api.github.com/users/lizozom/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lizozom/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-09T16:05:42Z",
        "updated_at": "2023-07-09T16:05:42Z",
        "author_association": "NONE",
        "body": "However, running single threaded slows everything down. I'd love to work on this if anyone points me in the right direction :-) ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1627759711/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1636292002",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1636292002",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1636292002,
        "node_id": "IC_kwDOCVq1mM5hh9Wi",
        "user": {
            "login": "xenova",
            "id": 26504141,
            "node_id": "MDQ6VXNlcjI2NTA0MTQx",
            "avatar_url": "https://avatars.githubusercontent.com/u/26504141?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xenova",
            "html_url": "https://github.com/xenova",
            "followers_url": "https://api.github.com/users/xenova/followers",
            "following_url": "https://api.github.com/users/xenova/following{/other_user}",
            "gists_url": "https://api.github.com/users/xenova/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xenova/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xenova/subscriptions",
            "organizations_url": "https://api.github.com/users/xenova/orgs",
            "repos_url": "https://api.github.com/users/xenova/repos",
            "events_url": "https://api.github.com/users/xenova/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xenova/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-14T19:05:49Z",
        "updated_at": "2023-07-14T19:05:49Z",
        "author_association": "NONE",
        "body": "@fs-eire @guschmue any updates on this? 😇 I've been working on improving my chrome extension demo for transformers.js, and being able to get this working would be great!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1636292002/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1636301844",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14445#issuecomment-1636301844",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14445",
        "id": 1636301844,
        "node_id": "IC_kwDOCVq1mM5hh_wU",
        "user": {
            "login": "guschmue",
            "id": 22941064,
            "node_id": "MDQ6VXNlcjIyOTQxMDY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/22941064?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guschmue",
            "html_url": "https://github.com/guschmue",
            "followers_url": "https://api.github.com/users/guschmue/followers",
            "following_url": "https://api.github.com/users/guschmue/following{/other_user}",
            "gists_url": "https://api.github.com/users/guschmue/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guschmue/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guschmue/subscriptions",
            "organizations_url": "https://api.github.com/users/guschmue/orgs",
            "repos_url": "https://api.github.com/users/guschmue/repos",
            "events_url": "https://api.github.com/users/guschmue/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guschmue/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-14T19:14:48Z",
        "updated_at": "2023-07-14T19:14:48Z",
        "author_association": "MEMBER",
        "body": "I can look at it - might be a little complicated to fix.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1636301844/reactions",
            "total_count": 2,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 2,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]