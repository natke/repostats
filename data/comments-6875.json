[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790144948",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-790144948",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 790144948,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDE0NDk0OA==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-03T23:21:31Z",
        "updated_at": "2021-03-03T23:21:31Z",
        "author_association": "MEMBER",
        "body": "This is the corresponding C++ API: https://github.com/microsoft/onnxruntime/blob/299ace0759192557e97e14d03c08f0334c84e9d5/include/onnxruntime/core/session/onnxruntime_cxx_api.h#L253. After this call https://github.com/microsoft/onnxruntime/blob/299ace0759192557e97e14d03c08f0334c84e9d5/include/onnxruntime/core/session/onnxruntime_cxx_api.h#L322.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790144948/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790257197",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-790257197",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 790257197,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDI1NzE5Nw==",
        "user": {
            "login": "ZacheryGuan",
            "id": 19270716,
            "node_id": "MDQ6VXNlcjE5MjcwNzE2",
            "avatar_url": "https://avatars.githubusercontent.com/u/19270716?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZacheryGuan",
            "html_url": "https://github.com/ZacheryGuan",
            "followers_url": "https://api.github.com/users/ZacheryGuan/followers",
            "following_url": "https://api.github.com/users/ZacheryGuan/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZacheryGuan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZacheryGuan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZacheryGuan/subscriptions",
            "organizations_url": "https://api.github.com/users/ZacheryGuan/orgs",
            "repos_url": "https://api.github.com/users/ZacheryGuan/repos",
            "events_url": "https://api.github.com/users/ZacheryGuan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZacheryGuan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-04T03:20:11Z",
        "updated_at": "2021-03-04T03:20:11Z",
        "author_association": "NONE",
        "body": "Thank you. But how to initialize an OrtThreadingOptions object?\r\n\r\nI write a piece of test code as following\r\n```\r\nOrtThreadingOptions *threadingOptions;\r\nOrt::SessionOptions sessionOptions;\r\nsessionOptions.DisablePerSessionThreads();\r\nOrt::Env env(threadingOptions, ORT_LOGGING_LEVEL_WARNING, \"test\");\r\n\r\nconst char *modelPath = \"model.onnx\";\r\nOrt::Session session(env, modelPath, sessionOptions);\r\n```\r\nand get a RuntimeError \r\n`libc++abi.dylib: terminating with uncaught exception of type Ort::Exception: onnxruntime/core/session/inference_session.cc:267 void onnxruntime::InferenceSession::ConstructorCommon(const onnxruntime::SessionOptions &, const onnxruntime::Environment &) session_env.EnvCreatedWithGlobalThreadPools() was false. When the session is not configured to use per session threadpools, the env must be created with the the CreateEnvWithGlobalThreadPools API.\r\n`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790257197/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790978305",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-790978305",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 790978305,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDk3ODMwNQ==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-04T22:05:41Z",
        "updated_at": "2021-03-04T22:05:41Z",
        "author_association": "MEMBER",
        "body": "It doesn't look like we wrote a C++ wrapper for OrtThreadingOptions. You can however use the C APIs for now.\r\n\r\n  ORT_API2_STATUS(CreateThreadingOptions, _Outptr_ OrtThreadingOptions** out);\r\n  ORT_API2_STATUS(SetGlobalIntraOpNumThreads, _Inout_ OrtThreadingOptions* tp_options, int intra_op_num_threads);\r\n  ORT_API2_STATUS(SetGlobalInterOpNumThreads, _Inout_ OrtThreadingOptions* tp_options, int inter_op_num_threads);\r\n  ORT_API2_STATUS(SetGlobalSpinControl, _Inout_ OrtThreadingOptions* tp_options, int allow_spinning);\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/790978305/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/906761271",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-906761271",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 906761271,
        "node_id": "IC_kwDOCVq1mM42DBQ3",
        "user": {
            "login": "jatinsha",
            "id": 2323342,
            "node_id": "MDQ6VXNlcjIzMjMzNDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2323342?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jatinsha",
            "html_url": "https://github.com/jatinsha",
            "followers_url": "https://api.github.com/users/jatinsha/followers",
            "following_url": "https://api.github.com/users/jatinsha/following{/other_user}",
            "gists_url": "https://api.github.com/users/jatinsha/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jatinsha/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jatinsha/subscriptions",
            "organizations_url": "https://api.github.com/users/jatinsha/orgs",
            "repos_url": "https://api.github.com/users/jatinsha/repos",
            "events_url": "https://api.github.com/users/jatinsha/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jatinsha/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-26T21:38:39Z",
        "updated_at": "2021-08-27T00:11:42Z",
        "author_association": "NONE",
        "body": " I am using the C-api to accomplish this but I still see an error.\r\n```\r\nsession_env.CreateEnvWithGlobalThreadPools() was false. When the session is not configured to use per session threadpools, the env must be creted with the CreateEnvWithGlobalThreadPools API.\r\n```\r\n\r\nI use the following code-\r\n```\r\n        /* C-API */\r\n        OrtEnv* environment;\r\n        OrtThreadingOptions* envOpts = nullptr;\r\n        Ort::GetApi().CreateThreadingOptions(&envOpts);\r\n        Ort::GetApi().SetGlobalIntraOpNumThreads(envOpts, numIntraOpsThreads);\r\n        Ort::GetApi().SetGlobalInterOpNumThreads(envOpts, numInterOpsThreads);\r\n        Ort::GetApi().SetGlobalSpinControl(envOpts, 1);\r\n        Ort::GetApi().CreateEnvWithGlobalThreadPools(ORT_LOGGING_LEVEL_WARNING, \"test\", envOpts, &environment);\r\n        env = Ort::Env(environment);\r\n        . . .\r\n        session_options = get_sessionOptions();\r\n        session_options.DisablePerSessionThreads();\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/906761271/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907506011",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-907506011",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 907506011,
        "node_id": "IC_kwDOCVq1mM42F3Fb",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-27T22:22:03Z",
        "updated_at": "2021-08-27T22:22:03Z",
        "author_association": "MEMBER",
        "body": "Can you please check https://github.com/microsoft/onnxruntime/tree/master/onnxruntime/test/global_thread_pools to see if you're missing something? This test runs in our CI env.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907506011/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1157197233",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6875#issuecomment-1157197233",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6875",
        "id": 1157197233,
        "node_id": "IC_kwDOCVq1mM5E-W2x",
        "user": {
            "login": "mmxuan18",
            "id": 6283983,
            "node_id": "MDQ6VXNlcjYyODM5ODM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6283983?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mmxuan18",
            "html_url": "https://github.com/mmxuan18",
            "followers_url": "https://api.github.com/users/mmxuan18/followers",
            "following_url": "https://api.github.com/users/mmxuan18/following{/other_user}",
            "gists_url": "https://api.github.com/users/mmxuan18/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mmxuan18/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mmxuan18/subscriptions",
            "organizations_url": "https://api.github.com/users/mmxuan18/orgs",
            "repos_url": "https://api.github.com/users/mmxuan18/repos",
            "events_url": "https://api.github.com/users/mmxuan18/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mmxuan18/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-16T03:39:44Z",
        "updated_at": "2022-06-16T03:39:44Z",
        "author_association": "NONE",
        "body": "i test this global thread option, the same model if i use global thread the time cost of model run is much than not use global, the thread intera=2 and inter=1 set the same, why have this performance differents? @[pranavsharma](https://github.com/pranavsharma)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1157197233/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]