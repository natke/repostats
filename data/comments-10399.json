[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1024588996",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10399#issuecomment-1024588996",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10399",
        "id": 1024588996,
        "node_id": "IC_kwDOCVq1mM49EfzE",
        "user": {
            "login": "garymm",
            "id": 421339,
            "node_id": "MDQ6VXNlcjQyMTMzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/421339?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/garymm",
            "html_url": "https://github.com/garymm",
            "followers_url": "https://api.github.com/users/garymm/followers",
            "following_url": "https://api.github.com/users/garymm/following{/other_user}",
            "gists_url": "https://api.github.com/users/garymm/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/garymm/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/garymm/subscriptions",
            "organizations_url": "https://api.github.com/users/garymm/orgs",
            "repos_url": "https://api.github.com/users/garymm/repos",
            "events_url": "https://api.github.com/users/garymm/events{/privacy}",
            "received_events_url": "https://api.github.com/users/garymm/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-28T19:56:18Z",
        "updated_at": "2022-01-28T19:56:18Z",
        "author_association": "MEMBER",
        "body": "This is probably a bug in torch.onnx.export, so if you can repro this on the latest PyTorch nightly you can file a bug in github.com/pytorch/pytorch.\r\n\r\nHowever I think you can probably work around this by exporting with op set version 12.\r\n\r\nI guess edit this line:\r\nhttps://github.com/facebookresearch/detectron2/blob/main/tools/deploy/export_model.py#L127\r\n\r\nWhy I think this could work:\r\nint64 support for Clip was added in op set 12.\r\nCompare [Clip-12](https://github.com/onnx/onnx/blob/main/docs/Changelog.md#Clip-12) with [Clip-11](https://github.com/onnx/onnx/blob/main/docs/Changelog.md#Clip-11).\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1024588996/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1025119420",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10399#issuecomment-1025119420",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10399",
        "id": 1025119420,
        "node_id": "IC_kwDOCVq1mM49GhS8",
        "user": {
            "login": "quanliu1991",
            "id": 33453350,
            "node_id": "MDQ6VXNlcjMzNDUzMzUw",
            "avatar_url": "https://avatars.githubusercontent.com/u/33453350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/quanliu1991",
            "html_url": "https://github.com/quanliu1991",
            "followers_url": "https://api.github.com/users/quanliu1991/followers",
            "following_url": "https://api.github.com/users/quanliu1991/following{/other_user}",
            "gists_url": "https://api.github.com/users/quanliu1991/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/quanliu1991/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/quanliu1991/subscriptions",
            "organizations_url": "https://api.github.com/users/quanliu1991/orgs",
            "repos_url": "https://api.github.com/users/quanliu1991/repos",
            "events_url": "https://api.github.com/users/quanliu1991/events{/privacy}",
            "received_events_url": "https://api.github.com/users/quanliu1991/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-30T11:06:51Z",
        "updated_at": "2022-01-30T11:06:51Z",
        "author_association": "NONE",
        "body": "@garymm \r\nFirst , thank you very much, after I re-exported onnx named `model2with12.onnx` with op set version 12, it works on CUDA.\r\n\r\nHowever, I try to use the same onnx when ep is Tensorrt a new error occurs: `TensorRT input: 717 has no shape specified.`\r\ncode show as below:\r\n```\r\nproviders = [\r\n                ('TensorrtExecutionProvider', {\r\n                    'device_id': 0,\r\n                })]\r\nsess_opt = onnxruntime.SessionOptions()\r\nsess = onnxruntime.InferenceSession(model_path, sess_options=sess_opt, providers=providers)\r\n\r\nimage=np.random.randint(1, 255, size=(3, 800, 1202), dtype=np.nint8)\r\nsess.run([sess.get_outputs()[0].name], {sess.get_inputs()[0].name: image})\r\n```\r\nThe following error occurs in `onnxruntime.InferenceSession`:\r\n> 2022-01-30 19:02:16.145065205 [E:onnxruntime:, inference_session.cc:1448 operator()] Exception during initialization: /onnxruntime_src/onnxruntime/core/providers/tensorrt/tensorrt_execution_provider.cc:925 SubGraphCollection_t onnxruntime::TensorrtExecutionProvider::GetSupportedList(SubGraphCollection_t, int, int, const onnxruntime::GraphViewer&, bool*) const [ONNXRuntimeError] : 1 : FAIL : TensorRT input: 717 has no shape specified. Please run shape inference on the onnx model first. Details can be found in https://www.onnxruntime.ai/docs/reference/execution-providers/TensorRT-ExecutionProvider.html#shape-inference-for-tensorrt-subgraphs\r\n\r\nrun `symbolic_shape_infer` have an error occurred.\r\n```\r\npython symbolic_shape_infer.py --input ./model2with12.onnx  --output ./out_model2with12.onnx --auto_merge --verbose 3\r\n```\r\nI don't know how to solve this kind of problemï¼ŒI expected the onnx model to work on ep:Tensorrt.\r\n\r\nmodel2with12.onnx download link:\r\nhttps://drive.google.com/file/d/1_egymUZukkjzNfNDSVYIzLGpGRBfuIRQ/view?usp=sharing\r\ninput image ndarray info:\r\nshape is [3,800,1202]\r\ndtype is unit8\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1025119420/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026078231",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10399#issuecomment-1026078231",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10399",
        "id": 1026078231,
        "node_id": "IC_kwDOCVq1mM49KLYX",
        "user": {
            "login": "garymm",
            "id": 421339,
            "node_id": "MDQ6VXNlcjQyMTMzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/421339?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/garymm",
            "html_url": "https://github.com/garymm",
            "followers_url": "https://api.github.com/users/garymm/followers",
            "following_url": "https://api.github.com/users/garymm/following{/other_user}",
            "gists_url": "https://api.github.com/users/garymm/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/garymm/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/garymm/subscriptions",
            "organizations_url": "https://api.github.com/users/garymm/orgs",
            "repos_url": "https://api.github.com/users/garymm/repos",
            "events_url": "https://api.github.com/users/garymm/events{/privacy}",
            "received_events_url": "https://api.github.com/users/garymm/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-31T18:26:24Z",
        "updated_at": "2022-01-31T18:26:24Z",
        "author_association": "MEMBER",
        "body": "@quanliu1991 please open a new issue for that.\r\nClosing this since you worked around the original issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026078231/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026528323",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10399#issuecomment-1026528323",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10399",
        "id": 1026528323,
        "node_id": "IC_kwDOCVq1mM49L5RD",
        "user": {
            "login": "quanliu1991",
            "id": 33453350,
            "node_id": "MDQ6VXNlcjMzNDUzMzUw",
            "avatar_url": "https://avatars.githubusercontent.com/u/33453350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/quanliu1991",
            "html_url": "https://github.com/quanliu1991",
            "followers_url": "https://api.github.com/users/quanliu1991/followers",
            "following_url": "https://api.github.com/users/quanliu1991/following{/other_user}",
            "gists_url": "https://api.github.com/users/quanliu1991/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/quanliu1991/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/quanliu1991/subscriptions",
            "organizations_url": "https://api.github.com/users/quanliu1991/orgs",
            "repos_url": "https://api.github.com/users/quanliu1991/repos",
            "events_url": "https://api.github.com/users/quanliu1991/events{/privacy}",
            "received_events_url": "https://api.github.com/users/quanliu1991/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-01T06:54:55Z",
        "updated_at": "2022-02-01T06:54:55Z",
        "author_association": "NONE",
        "body": "@garymm thank you, I had open a new issue #10443 #. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026528323/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]