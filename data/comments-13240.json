[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272244804",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13240#issuecomment-1272244804",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13240",
        "id": 1272244804,
        "node_id": "IC_kwDOCVq1mM5L1OpE",
        "user": {
            "login": "mszhanyi",
            "id": 16190118,
            "node_id": "MDQ6VXNlcjE2MTkwMTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/16190118?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mszhanyi",
            "html_url": "https://github.com/mszhanyi",
            "followers_url": "https://api.github.com/users/mszhanyi/followers",
            "following_url": "https://api.github.com/users/mszhanyi/following{/other_user}",
            "gists_url": "https://api.github.com/users/mszhanyi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mszhanyi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mszhanyi/subscriptions",
            "organizations_url": "https://api.github.com/users/mszhanyi/orgs",
            "repos_url": "https://api.github.com/users/mszhanyi/repos",
            "events_url": "https://api.github.com/users/mszhanyi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mszhanyi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-08T06:41:15Z",
        "updated_at": "2022-10-08T06:41:15Z",
        "author_association": "MEMBER",
        "body": "Hi, did you run it in GPU machine?\r\nIs there big difference between first call and the second?\r\n```\r\n // first call\r\n gettimeofday(&startTime, NULL);\r\n session = new Ort::Experimental::Session(env, content, length, session_options);\r\n gettimeofday(&endTime, NULL);\r\n printf(\"create session  takes:%fs\\n\", TIMEDIFF(startTime, endTime));\r\n// second call\r\n gettimeofday(&startTime, NULL);\r\n session = new Ort::Experimental::Session(env, content, length, session_options);\r\n gettimeofday(&endTime, NULL);\r\n printf(\"create session  takes:%fs\\n\", TIMEDIFF(startTime, endTime));\r\n```\r\n\r\nHope this post helps.\r\nhttps://forums.developer.nvidia.com/t/cuda-initialization-takes-too-much-time/52913/2\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272244804/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272249536",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13240#issuecomment-1272249536",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13240",
        "id": 1272249536,
        "node_id": "IC_kwDOCVq1mM5L1PzA",
        "user": {
            "login": "xyh523078979",
            "id": 26214173,
            "node_id": "MDQ6VXNlcjI2MjE0MTcz",
            "avatar_url": "https://avatars.githubusercontent.com/u/26214173?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xyh523078979",
            "html_url": "https://github.com/xyh523078979",
            "followers_url": "https://api.github.com/users/xyh523078979/followers",
            "following_url": "https://api.github.com/users/xyh523078979/following{/other_user}",
            "gists_url": "https://api.github.com/users/xyh523078979/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xyh523078979/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xyh523078979/subscriptions",
            "organizations_url": "https://api.github.com/users/xyh523078979/orgs",
            "repos_url": "https://api.github.com/users/xyh523078979/repos",
            "events_url": "https://api.github.com/users/xyh523078979/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xyh523078979/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-08T07:08:16Z",
        "updated_at": "2022-10-08T07:08:16Z",
        "author_association": "NONE",
        "body": "we run it in CPU, the difference between first call and second  is not big:\r\nfirst call:\r\ncreate session  takes:0.376377s\r\nsecond call:\r\ncreate session  takes:0.356377s",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272249536/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272782379",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13240#issuecomment-1272782379",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13240",
        "id": 1272782379,
        "node_id": "IC_kwDOCVq1mM5L3R4r",
        "user": {
            "login": "cloudhan",
            "id": 1279292,
            "node_id": "MDQ6VXNlcjEyNzkyOTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1279292?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhan",
            "html_url": "https://github.com/cloudhan",
            "followers_url": "https://api.github.com/users/cloudhan/followers",
            "following_url": "https://api.github.com/users/cloudhan/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhan/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhan/orgs",
            "repos_url": "https://api.github.com/users/cloudhan/repos",
            "events_url": "https://api.github.com/users/cloudhan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-10T04:46:01Z",
        "updated_at": "2022-10-10T04:46:01Z",
        "author_association": "MEMBER",
        "body": "If you merely want to improve the session creation time and only run the model with CPU EP, then there is some rough idea, ort will do some graph optimization on session creation, and it can also dump the optimized graph into a new `.onnx` file. Then you can use the new onnx file with all optimization disabled to initialize the session. This might potentially improve the init time. But there is so many APIs there so I cannot remember what to call...",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1272782379/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274089656",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13240#issuecomment-1274089656",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13240",
        "id": 1274089656,
        "node_id": "IC_kwDOCVq1mM5L8RC4",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-11T04:59:00Z",
        "updated_at": "2022-10-11T04:59:25Z",
        "author_association": "MEMBER",
        "body": "The session needs to be created only once in the lifecycle of the process. Assuming it's graph optimizations that is causing the delay, as @cloudhan has suggested you can call SetOptimizedModelFilePath to serialize the session to another onnx file and then henceforth use the serialized onnx file to create the session after calling SetSessionGraphOptimizationLevel with graph_optimization_level = ORT_DISABLE_ALL.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1274089656/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]