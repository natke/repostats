[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273895720",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13198#issuecomment-1273895720",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13198",
        "id": 1273895720,
        "node_id": "IC_kwDOCVq1mM5L7hso",
        "user": {
            "login": "ytaous",
            "id": 4484531,
            "node_id": "MDQ6VXNlcjQ0ODQ1MzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4484531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ytaous",
            "html_url": "https://github.com/ytaous",
            "followers_url": "https://api.github.com/users/ytaous/followers",
            "following_url": "https://api.github.com/users/ytaous/following{/other_user}",
            "gists_url": "https://api.github.com/users/ytaous/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ytaous/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ytaous/subscriptions",
            "organizations_url": "https://api.github.com/users/ytaous/orgs",
            "repos_url": "https://api.github.com/users/ytaous/repos",
            "events_url": "https://api.github.com/users/ytaous/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ytaous/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-10T23:06:44Z",
        "updated_at": "2022-10-10T23:06:44Z",
        "author_association": "MEMBER",
        "body": "You can try to run the same shape 10 times and discard the time from the first run.  Your number should be comparable to the static ones. \r\nIf you keep changing the shape for each run, a lot of cached data will be invalidated and rebuilt. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1273895720/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554180044",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13198#issuecomment-1554180044",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13198",
        "id": 1554180044,
        "node_id": "IC_kwDOCVq1mM5coufM",
        "user": {
            "login": "ruhyadi",
            "id": 39303602,
            "node_id": "MDQ6VXNlcjM5MzAzNjAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/39303602?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ruhyadi",
            "html_url": "https://github.com/ruhyadi",
            "followers_url": "https://api.github.com/users/ruhyadi/followers",
            "following_url": "https://api.github.com/users/ruhyadi/following{/other_user}",
            "gists_url": "https://api.github.com/users/ruhyadi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ruhyadi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ruhyadi/subscriptions",
            "organizations_url": "https://api.github.com/users/ruhyadi/orgs",
            "repos_url": "https://api.github.com/users/ruhyadi/repos",
            "events_url": "https://api.github.com/users/ruhyadi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ruhyadi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-19T07:46:34Z",
        "updated_at": "2023-05-19T07:46:34Z",
        "author_association": "NONE",
        "body": "I have the same problems when dealing with recognition model of PaddleOCR, due to dynamic shapes [-1, 3, 48, -1].\r\nMy suggestion is to warmup the model before doing inference, here snippet of model warmups\r\n```python\r\n    ...\r\n    def model_warmup(self, batch_size: int = 1, min_size: int = 300, max_size: int = 1500):\r\n        \"\"\"\r\n        Recognition model have input size: [-1, 3, 48, -1]\r\n        ONNXRuntime with CUDA support is not performing well with arbitrary input size\r\n        So we need to warmup the model with arbitrary input size\r\n        \"\"\"\r\n        log.info(\"Warming up model...\")\r\n        for i in tqdm(range(min_size, max_size), desc=\"Warming up model\"):\r\n            dummy_input = np.random.randn(batch_size, 3, 48, i).astype(np.float32)\r\n            self.recog_session.run([self.recog_output_name], {self.recog_input_name: dummy_input})\r\n        log.info(\"Model warmup completed\")\r\n    ...\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1554180044/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]