[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1404013817",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14420#issuecomment-1404013817",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14420",
        "id": 1404013817,
        "node_id": "IC_kwDOCVq1mM5Tr4z5",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-25T17:57:15Z",
        "updated_at": "2023-01-25T18:21:30Z",
        "author_association": "MEMBER",
        "body": "The input tensors do not allocate memory and do not copy data (both would be expensive) . They simply read the buffers that you supplied. Therefore, after the inference is done you can de-allocate your own buffers. They are needed during inference though.\r\n\r\nThe actual memory needed by internal C OrtValue objects is miniscule.\r\n\r\nOrt::Value objects automatically release any resources that they own and that's their purpose.\r\n\r\nThe output tensors are allocated and ref-counted.  You can reduce the refcount by destroying the output `Ort::Value` objects by either of the following methods:\r\n\r\n- They go out of scope if you create that scope\r\n- If `Run()` overload returns `std::vector<Ort::Value>` you can call `clear()` method of the vector which would call destructors on all of the contained objects. It is also true for your input tensors.\r\n- In case of the standalone object you can just say, which is just C++\r\n ```.cpp\r\n Ort::Value ort_value; // existing value\r\nort_value = Ort::Value(nullptr);\r\n```\r\nHowever, internally, the system would still hold those allocated by default.\r\n\r\nYou can pre-allocate output Ort::Values and hold them in the vector, pass them to one of the `Run()` overloads. Once they are no longer needed, clear the vector.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1404013817/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1427485300",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14420#issuecomment-1427485300",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14420",
        "id": 1427485300,
        "node_id": "IC_kwDOCVq1mM5VFbJ0",
        "user": {
            "login": "lucasjinreal",
            "id": 21303438,
            "node_id": "MDQ6VXNlcjIxMzAzNDM4",
            "avatar_url": "https://avatars.githubusercontent.com/u/21303438?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lucasjinreal",
            "html_url": "https://github.com/lucasjinreal",
            "followers_url": "https://api.github.com/users/lucasjinreal/followers",
            "following_url": "https://api.github.com/users/lucasjinreal/following{/other_user}",
            "gists_url": "https://api.github.com/users/lucasjinreal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lucasjinreal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lucasjinreal/subscriptions",
            "organizations_url": "https://api.github.com/users/lucasjinreal/orgs",
            "repos_url": "https://api.github.com/users/lucasjinreal/repos",
            "events_url": "https://api.github.com/users/lucasjinreal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lucasjinreal/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-13T07:45:11Z",
        "updated_at": "2023-02-13T07:45:11Z",
        "author_association": "NONE",
        "body": "@yuslepukhin  hello, I got problems when using Ort::Value on multiple inputs model. the code simple:\r\n\r\n```\r\n  for (int i = 0; i < inputNames.size(); ++i) {\r\n    // override inputShapes batch dim with inputs\r\n    inputShapes[i][0] = inputs[i].shape[0];\r\n    auto input_tensor = Ort::Value::CreateTensor<float>(\r\n        memoryInfo, static_cast<float *>(inputs[i].data), inputs[i].get_size(),\r\n        inputShapes[i].data(), inputShapes[i].size());\r\n    assert(input_tensor.IsTensor());\r\n    ort_inputs.emplace_back(input_tensor);\r\n  }\r\n```\r\n\r\nI got compile time error when build on windows MSVC2019\r\n\r\n```\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\include\\xmemory(681,47): error C2280: “Ort::Value::Value(const Ort::Value &)”: 尝试引用已删除的函数 \r\n```\r\n\r\nany idea?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1427485300/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]