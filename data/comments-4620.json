[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/664177964",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4620#issuecomment-664177964",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4620",
        "id": 664177964,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDE3Nzk2NA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-27T07:44:27Z",
        "updated_at": "2020-07-27T07:44:27Z",
        "author_association": "MEMBER",
        "body": "Not sure if you're specifying all the output names correctly. It may be easier to try the new experimental Run method where you provide those as a vector of strings.\r\n\r\nhttps://github.com/microsoft/onnxruntime/blob/222fd08f20765103e3bfbaf5de07b7f25373d516/include/onnxruntime/core/session/experimental_onnxruntime_cxx_api.h#L31-L34\r\n\r\nFor the second output it's actually a sequence (i.e. vector) of map instances. As such I'd expect GetONNXType to return ONNX_TYPE_SEQUENCE. I don't think there are any operators that return an output of just a map. CastMap and DictVectorizer take a map as input though.\r\n\r\n![image](https://user-images.githubusercontent.com/979079/88516007-f3c47400-d02f-11ea-96f6-792a9baf8fb7.png)\r\n\r\nThe vector returned by Run will be one value per requested output. The first output value (output_label) will be a tensor containing more or more int values (based on the model looks like only one int). The second output value, assuming you provide the output name correctly, will be a sequence containing one or more map<int64, float32> instances. The size of this sequence will match the number of entries in the output_label tensor.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/664177964/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/665599521",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4620#issuecomment-665599521",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4620",
        "id": 665599521,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTU5OTUyMQ==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-29T11:06:22Z",
        "updated_at": "2020-07-29T11:06:22Z",
        "author_association": "NONE",
        "body": "@skottmckay the second output is a Value, not a map. GetONNXType() for second layer returns 2.\r\ncout << typeid(output_tensor[1]).name() << endl; returns struct Ort::Value.\r\nI am in a misunderstanding how to extract the output values from the second output.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/665599521/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/665993610",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4620#issuecomment-665993610",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4620",
        "id": 665993610,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTk5MzYxMA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-30T00:07:48Z",
        "updated_at": "2020-07-30T00:07:48Z",
        "author_association": "MEMBER",
        "body": "Ort::Value is the generic type that wraps the different possibilities (Tensor, Sequence, Map)\r\nIf GetONNXType returns 2 that equates to ONNX_TYPE_SEQUENCE, which would match the expected type of `sequence<map<int64,float32>>`.\r\n\r\nUsage is sadly a bit obtuse currently. Example code here:\r\nhttps://github.com/microsoft/onnxruntime/blob/d8f3e46d458397b3fb335477d3efc91e22e160d8/onnxruntime/test/shared_lib/test_nontensor_types.cc#L67-L86\r\n\r\nThere are a few layers of Ort::Value. \r\nFirst is for the sequence. Use Ort::Value::GetCount() to find the number of elements. Call GetValue to extract each entry, which will return another Ort::Value for the map in that slot. \r\nThe map itself has 2 Ort::Value instances - one for the keys, one for the values. You can call GetTensorMutableData to access the data here. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/665993610/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/666228582",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4620#issuecomment-666228582",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4620",
        "id": 666228582,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjIyODU4Mg==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-30T08:35:42Z",
        "updated_at": "2020-07-30T08:35:42Z",
        "author_association": "NONE",
        "body": "@skottmckay, Thanks for reply. The situation becomes clear.\r\nIn my case the internal tensor structure was a bit more complex.\r\nThe output tensor was:\r\n[ [Value for output layer 1], [ Value [ Value[Value{keys}, Value{data}]]]]",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/666228582/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]