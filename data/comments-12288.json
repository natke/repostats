[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1192976872",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12288#issuecomment-1192976872",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12288",
        "id": 1192976872,
        "node_id": "IC_kwDOCVq1mM5HG2Ho",
        "user": {
            "login": "zhanghuanrong",
            "id": 5163183,
            "node_id": "MDQ6VXNlcjUxNjMxODM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5163183?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhanghuanrong",
            "html_url": "https://github.com/zhanghuanrong",
            "followers_url": "https://api.github.com/users/zhanghuanrong/followers",
            "following_url": "https://api.github.com/users/zhanghuanrong/following{/other_user}",
            "gists_url": "https://api.github.com/users/zhanghuanrong/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zhanghuanrong/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zhanghuanrong/subscriptions",
            "organizations_url": "https://api.github.com/users/zhanghuanrong/orgs",
            "repos_url": "https://api.github.com/users/zhanghuanrong/repos",
            "events_url": "https://api.github.com/users/zhanghuanrong/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zhanghuanrong/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-22T22:21:45Z",
        "updated_at": "2022-07-22T22:21:45Z",
        "author_association": "MEMBER",
        "body": "Thanks for reporting. Yet we need more information to start investigating.\r\nCould you please give more details ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1192976872/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1192977456",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12288#issuecomment-1192977456",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12288",
        "id": 1192977456,
        "node_id": "IC_kwDOCVq1mM5HG2Qw",
        "user": {
            "login": "dboshardy",
            "id": 2131537,
            "node_id": "MDQ6VXNlcjIxMzE1Mzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2131537?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dboshardy",
            "html_url": "https://github.com/dboshardy",
            "followers_url": "https://api.github.com/users/dboshardy/followers",
            "following_url": "https://api.github.com/users/dboshardy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dboshardy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dboshardy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dboshardy/subscriptions",
            "organizations_url": "https://api.github.com/users/dboshardy/orgs",
            "repos_url": "https://api.github.com/users/dboshardy/repos",
            "events_url": "https://api.github.com/users/dboshardy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dboshardy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-22T22:23:08Z",
        "updated_at": "2022-07-22T22:23:08Z",
        "author_association": "NONE",
        "body": "> Thanks for reporting. Yet we need more information to start investigating. Could you please give more details ?\r\n\r\nI'm happy to help, but you'll have to be more specific.  What details would you need?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1192977456/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1195102153",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12288#issuecomment-1195102153",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12288",
        "id": 1195102153,
        "node_id": "IC_kwDOCVq1mM5HO8_J",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-26T07:19:09Z",
        "updated_at": "2022-07-26T07:19:09Z",
        "author_association": "MEMBER",
        "body": "InferenceSession supports concurrent Run calls as the operator kernels used to execute the model are stateless. There's no internal waiting for existing requests to complete before starting the next one.\r\n\r\nFWIW the execution should be deterministic. Are you able to capture the input used in a failed request to see if it fails every time?\r\n\r\nAccording to the error it's coming from an InstanceNormalization node and not a Conv node. There's not much use of SafeInt in the InstanceNormalization kernel. Only places I could see were around checking the total size of the input tensor. Without seeing the model it's hard to say what else could be off.\r\n\r\nAny chance the InferenceNormalization node is early in the model and is consuming a model input that is perhaps being overwritten outside of ORT? We treat model inputs as constant and do NOT copy them. Due to that, if you modify the buffer externally whilst the request is running you could affect nodes that consume model inputs.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1195102153/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1205775412",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12288#issuecomment-1205775412",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12288",
        "id": 1205775412,
        "node_id": "IC_kwDOCVq1mM5H3qw0",
        "user": {
            "login": "dboshardy",
            "id": 2131537,
            "node_id": "MDQ6VXNlcjIxMzE1Mzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2131537?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dboshardy",
            "html_url": "https://github.com/dboshardy",
            "followers_url": "https://api.github.com/users/dboshardy/followers",
            "following_url": "https://api.github.com/users/dboshardy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dboshardy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dboshardy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dboshardy/subscriptions",
            "organizations_url": "https://api.github.com/users/dboshardy/orgs",
            "repos_url": "https://api.github.com/users/dboshardy/repos",
            "events_url": "https://api.github.com/users/dboshardy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dboshardy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-04T21:14:36Z",
        "updated_at": "2022-08-04T21:16:19Z",
        "author_association": "NONE",
        "body": "@scottmckay Apologies for the late reply.  Yes, I have capture inputs that error and there is no determinism when it comes to these errors.  The same image put through the same model will error under heavy load but under little load, no error.  \r\n\r\nI've also noticed the behavior where, once the model errors in this manner, reloading the model by deleting the inference session (`del` in python in this instance) and creating a new one all subsequent requests, at least that I can tell, seem to error in the same manner.\r\n\r\nThe error happens in different nodes each time it initially pops up. It typically occurs in one of the many Conv nodes. This instance was a bit unusual.\r\n\r\nIt's definitely possible this is a weird interaction under heavy load with the inference session and how uvicorn or FastAPI are handling the concurrency in the docker container.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1205775412/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]