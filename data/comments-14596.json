[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1419221790",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1419221790",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1419221790,
        "node_id": "IC_kwDOCVq1mM5Ul5se",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-06T15:01:02Z",
        "updated_at": "2023-02-06T15:01:02Z",
        "author_association": "NONE",
        "body": "Update: `conv.cc` in `providers/cuda/nn` does have `cached_benchmark_results` which works. I've verified that after the first run, the execution plan is always found in `cached_benchmark_results`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1419221790/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1420226082",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1420226082",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1420226082,
        "node_id": "IC_kwDOCVq1mM5Upu4i",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-07T05:35:08Z",
        "updated_at": "2023-02-07T05:35:08Z",
        "author_association": "MEMBER",
        "body": "@SimonRelu, could you please profile the model and see if all nodes are running on GPU? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1420226082/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1422610482",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1422610482",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1422610482,
        "node_id": "IC_kwDOCVq1mM5Uy1Ay",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-08T13:35:19Z",
        "updated_at": "2023-02-08T13:35:19Z",
        "author_association": "NONE",
        "body": "I've verified that all models are running on CUDA.\r\n\r\nI've also profiled the model and the execution stack looks like this: \r\n<img width=\"969\" alt=\"Screenshot 2023-02-08 at 14 33 24\" src=\"https://user-images.githubusercontent.com/110388884/217544835-96baba83-f5cc-4995-b0cb-ae33d3471c58.png\">\r\n\r\nI'm viewing it with chrome://tracing/ . Does this look normal or should I use another tool?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1422610482/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424043628",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1424043628",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1424043628,
        "node_id": "IC_kwDOCVq1mM5U4S5s",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-09T11:33:04Z",
        "updated_at": "2023-02-09T11:33:04Z",
        "author_association": "NONE",
        "body": "So I have to set `CUDA_LAUNCH_BLOCKING=1` since otherwise the profiler doesn't properly track CUDA execution times. With that I get this:\r\n<img width=\"976\" alt=\"Screenshot 2023-02-09 at 12 30 56\" src=\"https://user-images.githubusercontent.com/110388884/217801122-a0976652-4480-4dd2-8e76-54c871b71c48.png\">\r\nThe slow performance thus comes from the `Resize` op. which originally was `aten::upsample_nearest3d` in pytorch. Any idea why this is so much slower in onnxruntime?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424043628/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424502302",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1424502302",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1424502302,
        "node_id": "IC_kwDOCVq1mM5U6C4e",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-09T16:50:57Z",
        "updated_at": "2023-02-09T16:50:57Z",
        "author_association": "MEMBER",
        "body": "Thanks for sharing the profiling result. What's the input shape and upsample scale?\r\nI'll investigate the cuda kernel. If it need improvement, we can probably update the kernel soon.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424502302/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424523450",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1424523450",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1424523450,
        "node_id": "IC_kwDOCVq1mM5U6IC6",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-09T17:04:57Z",
        "updated_at": "2023-02-09T17:04:57Z",
        "author_association": "NONE",
        "body": "Yes, the input is:\r\n\r\ndata: Tensor[1, 128, 48, 48, 48]\r\nscale: [1, 1, 2, 2, 2]\r\nroi: empty\r\nmode: \"nearest\"\r\nnearest_mode: \"floor\"\r\n\r\nThank you for looking into this",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1424523450/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1434296280",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1434296280",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1434296280,
        "node_id": "IC_kwDOCVq1mM5VfZ_Y",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-17T08:32:40Z",
        "updated_at": "2023-02-17T08:32:40Z",
        "author_association": "NONE",
        "body": "Hey @tianleiwu , I was wondering if you managed to reproduce the issue and if there is still anything you need from me?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1434296280/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1440522599",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1440522599",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1440522599,
        "node_id": "IC_kwDOCVq1mM5V3KFn",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-22T18:03:38Z",
        "updated_at": "2023-02-22T18:03:38Z",
        "author_association": "NONE",
        "body": "Hey, I understand that this might not be the highest priority but I was wondering when you'd be able to look into this. This issue is currently blocking us from releasing with onnxruntime. If it isn't possible to fix this in the near future I'd look into including `aten::upsample_nearest3d` as a custom op so we can move forward with the release. Thank you for the info :) ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1440522599/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1440620968",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1440620968",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1440620968,
        "node_id": "IC_kwDOCVq1mM5V3iGo",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-22T18:52:46Z",
        "updated_at": "2023-02-22T18:55:44Z",
        "author_association": "MEMBER",
        "body": "@SimonRelu, sorry for late response. I am looking into the issue and will let you know once there is progress.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1440620968/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1441097391",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1441097391",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1441097391,
        "node_id": "IC_kwDOCVq1mM5V5Wav",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-23T01:08:41Z",
        "updated_at": "2023-02-24T23:40:59Z",
        "author_association": "MEMBER",
        "body": "I did some debugging; it uses block=14 and threads=32 for the input, which seems not enough. Let me check aten::upsample_nearest3d to see whether we can leverage similar partition logic. \r\n\r\nUpdate: The partitions of 14 * 32 are for mapping only. For resize, it uses 442368 * 256 threads, so it is reasonable.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1441097391/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1443262298",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1443262298",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1443262298,
        "node_id": "IC_kwDOCVq1mM5WBm9a",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-24T09:10:59Z",
        "updated_at": "2023-02-24T09:10:59Z",
        "author_association": "NONE",
        "body": "That sounds good. Thank you for looking into this :)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1443262298/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444580963",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1444580963",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1444580963,
        "node_id": "IC_kwDOCVq1mM5WGo5j",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-24T22:03:12Z",
        "updated_at": "2023-02-24T22:03:12Z",
        "author_association": "MEMBER",
        "body": "@zhanghuanrong, please help take a look at the resize cuda kernel since you implemented that part. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444580963/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444610217",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1444610217",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1444610217,
        "node_id": "IC_kwDOCVq1mM5WGwCp",
        "user": {
            "login": "zhanghuanrong",
            "id": 5163183,
            "node_id": "MDQ6VXNlcjUxNjMxODM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5163183?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhanghuanrong",
            "html_url": "https://github.com/zhanghuanrong",
            "followers_url": "https://api.github.com/users/zhanghuanrong/followers",
            "following_url": "https://api.github.com/users/zhanghuanrong/following{/other_user}",
            "gists_url": "https://api.github.com/users/zhanghuanrong/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zhanghuanrong/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zhanghuanrong/subscriptions",
            "organizations_url": "https://api.github.com/users/zhanghuanrong/orgs",
            "repos_url": "https://api.github.com/users/zhanghuanrong/repos",
            "events_url": "https://api.github.com/users/zhanghuanrong/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zhanghuanrong/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-24T22:44:43Z",
        "updated_at": "2023-02-24T22:44:43Z",
        "author_association": "MEMBER",
        "body": "Hi, SimonRelu, could you please also using nsys profile and show us the kernel name for it, and how long each kernel runs?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444610217/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445995861",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1445995861",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1445995861,
        "node_id": "IC_kwDOCVq1mM5WMCVV",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-27T09:31:20Z",
        "updated_at": "2023-02-27T09:33:45Z",
        "author_association": "NONE",
        "body": "Hey zhanghuanrong, the kernel is called _ResizeNearestKernel and it spend 58ms seconds there (after having several warmup inference runs) when resizing the `Tensor[1, 128, 48, 48, 48]`.\r\n\r\nI also resize a kernel of shape `Tensor[1, 256, 24, 24, 24]` and `Tensor[1, 512, 12, 12, 12]` which spend 13.5 ms and 3.399 ms in the  _ResizeNearestKernel kernel respectively (both also with scale [1, 1, 2, 2, 2]).\r\n\r\n\r\n<img width=\"778\" alt=\"Screenshot 2023-02-27 at 10 15 07\" src=\"https://user-images.githubusercontent.com/110388884/221522500-4384aa5d-6f52-40e1-957d-32151ede317b.png\">\r\n\r\nHere are the kernel times cropped to one inference run (after warmup): \r\n[onnx-profile.ods](https://github.com/microsoft/onnxruntime/files/10838117/onnx-profile.ods)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445995861/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1451682497",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1451682497",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1451682497,
        "node_id": "IC_kwDOCVq1mM5WhurB",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-02T11:00:26Z",
        "updated_at": "2023-03-02T11:00:26Z",
        "author_association": "NONE",
        "body": "hi @zhanghuanrong , thank you for looking into this. I was just wondering if you could provide an update on this. It'd be great if you could give an estimate on how long this would take since we're currently blocked by this for our release. Thanks a lot!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1451682497/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1460190311",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1460190311",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1460190311,
        "node_id": "IC_kwDOCVq1mM5XCLxn",
        "user": {
            "login": "a3VonG",
            "id": 32267348,
            "node_id": "MDQ6VXNlcjMyMjY3MzQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32267348?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/a3VonG",
            "html_url": "https://github.com/a3VonG",
            "followers_url": "https://api.github.com/users/a3VonG/followers",
            "following_url": "https://api.github.com/users/a3VonG/following{/other_user}",
            "gists_url": "https://api.github.com/users/a3VonG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/a3VonG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/a3VonG/subscriptions",
            "organizations_url": "https://api.github.com/users/a3VonG/orgs",
            "repos_url": "https://api.github.com/users/a3VonG/repos",
            "events_url": "https://api.github.com/users/a3VonG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/a3VonG/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-08T13:55:19Z",
        "updated_at": "2023-03-08T13:55:19Z",
        "author_association": "NONE",
        "body": "Hi! Any updates on this?\r\nI ran into a similar issue when using ONNX for a network with 3D convolutions and resizings coming from pytorch. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1460190311/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468076874",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1468076874",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1468076874,
        "node_id": "IC_kwDOCVq1mM5XgRNK",
        "user": {
            "login": "SimonRelu",
            "id": 110388884,
            "node_id": "U_kgDOBpRmlA",
            "avatar_url": "https://avatars.githubusercontent.com/u/110388884?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimonRelu",
            "html_url": "https://github.com/SimonRelu",
            "followers_url": "https://api.github.com/users/SimonRelu/followers",
            "following_url": "https://api.github.com/users/SimonRelu/following{/other_user}",
            "gists_url": "https://api.github.com/users/SimonRelu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SimonRelu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SimonRelu/subscriptions",
            "organizations_url": "https://api.github.com/users/SimonRelu/orgs",
            "repos_url": "https://api.github.com/users/SimonRelu/repos",
            "events_url": "https://api.github.com/users/SimonRelu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SimonRelu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-14T13:09:52Z",
        "updated_at": "2023-03-14T13:09:52Z",
        "author_association": "NONE",
        "body": "Hey, \r\nI was wondering if there is any news on this. We'd like to move foreward with our release soon so if it's not possible to fix this, I'd like to know so I can look into an alternative solution. If there is anything you still need for me to better reproduce the issue please let me know. Thank you for all the info so far.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468076874/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469508841",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14596#issuecomment-1469508841",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14596",
        "id": 1469508841,
        "node_id": "IC_kwDOCVq1mM5Xluzp",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T07:48:59Z",
        "updated_at": "2023-03-15T07:48:59Z",
        "author_association": "MEMBER",
        "body": "@zhanghuanrong, is there update on this? ORT is about 6x slower based on the profiling in T4 GPU:\r\n\r\nProfiling of Torch:\r\n```\r\n            Type  Time(%)      Time     Calls       Avg       Min       Max  Name\r\n GPU activities:   74.59%  1.44478s       103  14.027ms  8.2769ms  14.859ms  void at::native::_GLOBAL__N__1f4b89ac_20_UpSampleNearest3d_cu_9b21834e::upsample_nearest3d_out_frame<float, __operator_&__(at::native:                        :nearest_neighbor_compute_source_index(float, int, int))>(float const *, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, at::native::neares                        t_neighbor_compute_source_index*, float, float, float)\r\n                   25.41%  492.06ms       101  4.8719ms  4.6421ms  5.4845ms  [CUDA memcpy HtoD]\r\n      API calls:   86.11%  1.53290s       101  15.177ms  4.6994ms  1.03680s  cudaMemcpyAsync\r\n                   12.66%  225.30ms         4  56.325ms  2.7260us  225.29ms  cudaStreamIsCapturing\r\n                    0.46%  8.1186ms       101  80.382us  77.680us  84.393us  cudaStreamSynchronize\r\n```\r\nProfiling result of ORT:                    \r\n```\r\n            Type  Time(%)      Time     Calls       Avg       Min       Max  Name\r\n GPU activities:   94.60%  8.79115s       103  85.351ms  84.858ms  96.348ms  void onnxruntime::cuda::_ResizeNearestKernel<float>(int, onnxruntime::cuda::TArray<long, int=8>, onnxruntime::cuda::_ResizeNearestKernel<float, onnxruntime::cuda::fast_divmod, int=8>, float const *, onnxruntime::cuda::_ResizeNearestKernel<float, onnxruntime::cuda::fast_divmod, int=8>*, unsigned long, onnxruntime::cuda::_ResizeNearestKernel<float, onnxruntime::cuda::fast_divmod, int=8>, long const *, onnxruntime::cuda::NearestMappingInfo const *)\r\n                    5.30%  492.96ms       102  4.8329ms  4.6511ms  5.2684ms  [CUDA memcpy HtoD]\r\n                    0.00%  388.48us         1  388.48us  388.48us  388.48us  [CUDA memcpy DtoD]\r\n                    0.00%  349.34us       103  3.3910us  3.2320us  7.2640us  void onnxruntime::cuda::_ResizeNearestMappingKernel<float, onnxruntime::cuda::TransformCoordinate_ASYMMETRIC, onnxruntime::cuda::NearestPixel_FLOOR>(unsigned long, onnxruntime::cuda::TArray<long, int=8>, onnxruntime::cuda::TArray, onnxruntime::cuda::_ResizeNearestMappingKernel<float, onnxruntime::cuda::TransformCoordinate_ASYMMETRIC<float, int                        =8>, onnxruntime::cuda::NearestPixel_FLOOR>, onnxruntime::cuda::_ResizeNearestMappingKernel<float, onnxruntime::cuda::TransformCoordinate_ASYMMETRIC<float, int=10>, onnxruntime::cuda::NearestPixel_FLOOR>, unsign                        ed long, bool, onnxruntime::cuda::TransformCoordinate_ASYMMETRIC const &, onnxruntime::cuda::NearestPixel_FLOOR const &, long*, onnxruntime::cuda::NearestMappingInfo*)\r\n```\r\nExample script for profiling:\r\n```\r\nimport torch\r\nimport time\r\n\r\ndef test_torch():\r\n    input = torch.rand(1, 128, 48, 48, 48, dtype=torch.float32, requires_grad=False).to('cuda')\r\n    model = torch.nn.Upsample(scale_factor=2, mode='nearest').cuda()\r\n\r\n    torch.set_grad_enabled(False)\r\n\r\n    for _ in range(3): # warm up\r\n        model(input)\r\n    \r\n    latency = []\r\n    for _ in range(100):\r\n        input = torch.rand(1, 128, 48, 48, 48, dtype=torch.float32, requires_grad=False).to('cuda') # input is in GPU\r\n        torch.cuda.synchronize()\r\n        start = time.time()\r\n        output = model(input)\r\n        torch.cuda.synchronize()\r\n        end = time.time()\r\n        latency.append(end-start)\r\n    average_latency_in_ms = 1000 * sum(latency) / len(latency)\r\n    print(f\"Torch latency: {average_latency_in_ms:.2f} ms\")\r\n\r\ndef export_onnx():\r\n    input = torch.rand(1, 128, 48, 48, 48, dtype=torch.float32, requires_grad=False).to('cuda')\r\n    model = torch.nn.Upsample(scale_factor=2, mode='nearest').cuda()\r\n    torch.onnx.export(model, input, \"upsample.onnx\", input_names=[\"input\"], output_names=[\"output\"], opset_version=11)\r\n\r\ndef test_onnx():\r\n    import onnxruntime\r\n    import numpy as np\r\n    options = onnxruntime.SessionOptions()\r\n    session = onnxruntime.InferenceSession(\"upsample.onnx\", options, providers=[\"CUDAExecutionProvider\", \"CPUExecutionProvider\"])\r\n\r\n    input = torch.rand(1, 128, 48, 48, 48, dtype=torch.float32, requires_grad=False).to('cuda')\r\n    input_tensor = input.contiguous()\r\n    output_tensor = torch.empty((1, 128, 96, 96, 96), dtype=torch.float32, device='cuda:0').contiguous()\r\n\r\n    binding = session.io_binding()\r\n    binding.bind_input(\r\n        name='input',\r\n        device_type='cuda',\r\n        device_id=0,\r\n        element_type=np.float32,\r\n        shape=tuple(input_tensor.shape),\r\n        buffer_ptr=input_tensor.data_ptr(),\r\n        )\r\n    binding.bind_output(\r\n        name='output',\r\n        device_type='cuda',\r\n        device_id=0,\r\n        element_type=np.float32,\r\n        shape=tuple(output_tensor.shape),\r\n        buffer_ptr=output_tensor.data_ptr(),\r\n    )\r\n\r\n    for _ in range(3): # warm up\r\n        session.run_with_iobinding(binding)\r\n\r\n    ort_latency = []\r\n    for _ in range(100):\r\n        input = torch.rand(1, 128, 48, 48, 48, dtype=torch.float32, requires_grad=False).to('cuda') # input is in GPU\r\n        input_tensor = input.contiguous()\r\n        start = time.time()\r\n        binding.bind_input(\r\n                name='input',\r\n                device_type='cuda',\r\n                device_id=0,\r\n                element_type=np.float32,\r\n                shape=tuple(input_tensor.shape),\r\n                buffer_ptr=input_tensor.data_ptr(),\r\n                )\r\n        session.run_with_iobinding(binding)\r\n        end = time.time()\r\n        ort_latency.append(end - start)\r\n\r\n    average_latency_in_ms = 1000 * sum(ort_latency) / len(ort_latency)\r\n    print(f\"Ort Latency: {average_latency_in_ms:.2f} ms\")\r\n    \r\n#test_torch()\r\n#export_onnx()\r\ntest_onnx()\r\n```\r\nI think one solution is to use the aten kernel for 3d upsample. @yufenglee to track this work.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469508841/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 1,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]