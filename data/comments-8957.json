[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912218989",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8957#issuecomment-912218989",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8957",
        "id": 912218989,
        "node_id": "IC_kwDOCVq1mM42X1tt",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-03T03:07:24Z",
        "updated_at": "2021-09-03T03:15:28Z",
        "author_association": "MEMBER",
        "body": "@Hap-Zhang, could you try model optimization like\r\n\r\n```\r\n...\r\nfrom onnxruntime.transformers.optimizer import optimize_model\r\nonnx_model = optimize_model(onnx_model_path)\r\nnew_onnx_path = \"ner_opt_model.onnx\"\r\nonnx_model.save_model_to_file(new_onnx_path)\r\noptions = SessionOptions()\r\nsession = InferenceSession(new_onnx_path, options, providers=['CPUExecutionProvider'])\r\n...\r\n```\r\nCheck whether there is \"Attention\" nodes in the new onnx file. The performance might be impacted if \"Attention\" is not fused.\r\n\r\nFor more information, please refer to the notebook: https://github.com/microsoft/onnxruntime/blob/master/onnxruntime/python/tools/transformers/notebooks/PyTorch_Bert-Squad_OnnxRuntime_CPU.ipynb",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912218989/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912444680",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8957#issuecomment-912444680",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8957",
        "id": 912444680,
        "node_id": "IC_kwDOCVq1mM42Ys0I",
        "user": {
            "login": "Hap-Zhang",
            "id": 32810063,
            "node_id": "MDQ6VXNlcjMyODEwMDYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/32810063?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Hap-Zhang",
            "html_url": "https://github.com/Hap-Zhang",
            "followers_url": "https://api.github.com/users/Hap-Zhang/followers",
            "following_url": "https://api.github.com/users/Hap-Zhang/following{/other_user}",
            "gists_url": "https://api.github.com/users/Hap-Zhang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Hap-Zhang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Hap-Zhang/subscriptions",
            "organizations_url": "https://api.github.com/users/Hap-Zhang/orgs",
            "repos_url": "https://api.github.com/users/Hap-Zhang/repos",
            "events_url": "https://api.github.com/users/Hap-Zhang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Hap-Zhang/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-03T10:46:09Z",
        "updated_at": "2021-09-03T10:46:09Z",
        "author_association": "NONE",
        "body": "@tianleiwu \r\nThank you for your quickly reply.\r\nI try the model optimization as you said, and the inference time from 505ms to 359ms. However, the inference time of original pytorch model reduces to 337ms by export MKL_CBWR=AVX2, but nothing changed in onnx model whether using AVX2 or not. The backend of onnx is MKL or something else?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912444680/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912629390",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8957#issuecomment-912629390",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8957",
        "id": 912629390,
        "node_id": "IC_kwDOCVq1mM42ZZ6O",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-03T15:39:10Z",
        "updated_at": "2021-09-03T15:39:10Z",
        "author_association": "MEMBER",
        "body": "The CPU execution provider does not use MKL. It uses MLAS. As far as I know, MLAS could leverage AVX2 in some situation (Like Windows, x64 and quantized model):\r\nhttps://github.com/microsoft/onnxruntime/blob/0cc29095733cecc55efe0b8e0d8ff7cd2a9e427a/cmake/onnxruntime_mlas.cmake#L113-L114",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/912629390/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/934080036",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8957#issuecomment-934080036",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8957",
        "id": 934080036,
        "node_id": "IC_kwDOCVq1mM43rO4k",
        "user": {
            "login": "zakki",
            "id": 162515,
            "node_id": "MDQ6VXNlcjE2MjUxNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/162515?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zakki",
            "html_url": "https://github.com/zakki",
            "followers_url": "https://api.github.com/users/zakki/followers",
            "following_url": "https://api.github.com/users/zakki/following{/other_user}",
            "gists_url": "https://api.github.com/users/zakki/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zakki/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zakki/subscriptions",
            "organizations_url": "https://api.github.com/users/zakki/orgs",
            "repos_url": "https://api.github.com/users/zakki/repos",
            "events_url": "https://api.github.com/users/zakki/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zakki/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-05T05:31:12Z",
        "updated_at": "2021-10-05T05:31:12Z",
        "author_association": "NONE",
        "body": "I'm using ResNet & CPU execution provider & C++. ONNX runtime's default setting is 6x slower than PyTorch.\r\n`options.AddConfigEntry(kOrtSessionOptionsConfigSetDenormalAsZero, \"1\");` solved that.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/934080036/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1101941445",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8957#issuecomment-1101941445",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8957",
        "id": 1101941445,
        "node_id": "IC_kwDOCVq1mM5BrkrF",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-19T02:53:48Z",
        "updated_at": "2022-04-19T02:53:48Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1101941445/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]