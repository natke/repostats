[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902285929",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902285929",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902285929,
        "node_id": "IC_kwDOCVq1mM41x8pp",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-19T22:13:16Z",
        "updated_at": "2021-08-19T22:13:16Z",
        "author_association": "MEMBER",
        "body": "If it works for CPU I would expect it's possible for it to work for CUDA given the setup you've created and that you were able to add the CUDA execution provider to the session options.\r\n\r\nIs the error occurring when creating the InferenceSession or when running it? If during creation it looks like we have a mismatch in the ordering of the entry points. Unfortunately those have to be manually maintained in a 1:1 order with code in the onnxruntime library.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902285929/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902459833",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902459833",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902459833,
        "node_id": "IC_kwDOCVq1mM41ynG5",
        "user": {
            "login": "keesschollaart81",
            "id": 6755359,
            "node_id": "MDQ6VXNlcjY3NTUzNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6755359?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/keesschollaart81",
            "html_url": "https://github.com/keesschollaart81",
            "followers_url": "https://api.github.com/users/keesschollaart81/followers",
            "following_url": "https://api.github.com/users/keesschollaart81/following{/other_user}",
            "gists_url": "https://api.github.com/users/keesschollaart81/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/keesschollaart81/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/keesschollaart81/subscriptions",
            "organizations_url": "https://api.github.com/users/keesschollaart81/orgs",
            "repos_url": "https://api.github.com/users/keesschollaart81/repos",
            "events_url": "https://api.github.com/users/keesschollaart81/events{/privacy}",
            "received_events_url": "https://api.github.com/users/keesschollaart81/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-20T06:16:59Z",
        "updated_at": "2021-08-20T06:16:59Z",
        "author_association": "NONE",
        "body": "The exception occurs at this line:\r\n```cs\r\nvar inference = new InferenceSession(\"yolov3-10.onnx\", SessionOptions.MakeSessionOptionWithCudaProvider());\r\n```\r\nSo at creating the InferenceSession. I'm not sure if at that point the CUDA execution provider has already been found/loaded?\r\n\r\nHow would I be able to verify/dig-into your guess about the ordering of the entry points?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902459833/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902474452",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902474452",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902474452,
        "node_id": "IC_kwDOCVq1mM41yqrU",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-20T06:51:26Z",
        "updated_at": "2021-08-20T06:51:26Z",
        "author_association": "MEMBER",
        "body": "Did you try using the pre-built nuget package with CUDA included? Microsoft.ML.OnnxRuntime.Gpu",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902474452/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902475174",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902475174",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902475174,
        "node_id": "IC_kwDOCVq1mM41yq2m",
        "user": {
            "login": "keesschollaart81",
            "id": 6755359,
            "node_id": "MDQ6VXNlcjY3NTUzNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6755359?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/keesschollaart81",
            "html_url": "https://github.com/keesschollaart81",
            "followers_url": "https://api.github.com/users/keesschollaart81/followers",
            "following_url": "https://api.github.com/users/keesschollaart81/following{/other_user}",
            "gists_url": "https://api.github.com/users/keesschollaart81/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/keesschollaart81/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/keesschollaart81/subscriptions",
            "organizations_url": "https://api.github.com/users/keesschollaart81/orgs",
            "repos_url": "https://api.github.com/users/keesschollaart81/repos",
            "events_url": "https://api.github.com/users/keesschollaart81/events{/privacy}",
            "received_events_url": "https://api.github.com/users/keesschollaart81/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-20T06:52:55Z",
        "updated_at": "2021-08-20T06:52:55Z",
        "author_association": "NONE",
        "body": "I dont think there is an ARM64 version of the onnxruntime.so in there, right?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902475174/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902478615",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902478615",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902478615,
        "node_id": "IC_kwDOCVq1mM41yrsX",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-20T07:00:04Z",
        "updated_at": "2021-08-20T07:00:21Z",
        "author_association": "MEMBER",
        "body": "Ahh right - sorry - overlooked the ARM64 aspect.\r\n\r\nCan you run it in a debugger and set it to break on throw to get the callstack from where the onnxruntime::NotImplementedException is thrown? That should show which entry point it comes into the onnxruntime dll via. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902478615/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902622555",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-902622555",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 902622555,
        "node_id": "IC_kwDOCVq1mM41zO1b",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-20T11:18:41Z",
        "updated_at": "2021-08-20T11:18:41Z",
        "author_association": "MEMBER",
        "body": "I don't think it's an ordering issue as MakeSessionOptionWithCudaProvider calls OrtSessionOptionsAppendExecutionProvider_CUDA which is looked up by name (vs. entries in the OrtApi structure which have to be in sync). \r\n\r\nWhen you build with CUDA enabled the onnxruntime library should have a dependency on the onnxruntime_providers_shared library. That should provide the `OrtSessionOptionsAppendExecutionProvider_CUDA` entry point, and calling that will result in onnxruntime_providers_cuda and the cuda libraries being loaded.\r\n\r\nI tested on a raspberry pi 4 (arm64 but no CUDA) with the DNNL EP as that has same setup as the CUDA EP in that it's a separate library accessed via onnxruntime_providers_shared, and the call to add the EP to the session options involves lookup by name. That was successful. \r\n\r\nI don't see anything else obvious in the setup that is off/different with adding the CUDA EP to the session options, so a callstack may be the best chance to get an idea of where things are going wrong.\r\n\r\nAdditionally you could separate the line into two pieces to narrow it down a little more. i.e.:\r\n```\r\nvar so = SessionOptions.MakeSessionOptionWithCudaProvider();\r\nvar inference = new InferenceSession(\"mnist.onnx\", so);\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/902622555/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/903075854",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-903075854",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 903075854,
        "node_id": "IC_kwDOCVq1mM4109gO",
        "user": {
            "login": "keesschollaart81",
            "id": 6755359,
            "node_id": "MDQ6VXNlcjY3NTUzNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6755359?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/keesschollaart81",
            "html_url": "https://github.com/keesschollaart81",
            "followers_url": "https://api.github.com/users/keesschollaart81/followers",
            "following_url": "https://api.github.com/users/keesschollaart81/following{/other_user}",
            "gists_url": "https://api.github.com/users/keesschollaart81/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/keesschollaart81/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/keesschollaart81/subscriptions",
            "organizations_url": "https://api.github.com/users/keesschollaart81/orgs",
            "repos_url": "https://api.github.com/users/keesschollaart81/repos",
            "events_url": "https://api.github.com/users/keesschollaart81/events{/privacy}",
            "received_events_url": "https://api.github.com/users/keesschollaart81/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-21T07:35:32Z",
        "updated_at": "2021-08-21T07:35:58Z",
        "author_association": "NONE",
        "body": "Ok, I got it to work! (with .NET 5, ML.NET 1.8.0 from NuGe, my Yolov5s ONNX model on my ARM64 Jetson Nano, Â±5 FPS @ 512x512 input via CUDA provider) \r\n\r\nI'm not sure what I did differently compared to the code/steps mentioned in my OP. Your guess about the entrypoint made me start over from a clean Jetson/Image. My guess is that there was some kind of version mismatch in one of the .so files and the NuGet packages as I tried multiple versions in all my experiments. Now I made really sure everything was 1.8.0. \r\n\r\nI'll report back her after the weekend with an update / clear steps / repro for others on how to get it to work. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/903075854/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/903387179",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-903387179",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 903387179,
        "node_id": "IC_kwDOCVq1mM412Jgr",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-23T02:03:33Z",
        "updated_at": "2021-08-23T02:03:33Z",
        "author_association": "MEMBER",
        "body": "Awesome! Great to hear.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/903387179/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/914431304",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8767#issuecomment-914431304",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8767",
        "id": 914431304,
        "node_id": "IC_kwDOCVq1mM42gR1I",
        "user": {
            "login": "keesschollaart81",
            "id": 6755359,
            "node_id": "MDQ6VXNlcjY3NTUzNTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6755359?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/keesschollaart81",
            "html_url": "https://github.com/keesschollaart81",
            "followers_url": "https://api.github.com/users/keesschollaart81/followers",
            "following_url": "https://api.github.com/users/keesschollaart81/following{/other_user}",
            "gists_url": "https://api.github.com/users/keesschollaart81/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/keesschollaart81/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/keesschollaart81/subscriptions",
            "organizations_url": "https://api.github.com/users/keesschollaart81/orgs",
            "repos_url": "https://api.github.com/users/keesschollaart81/repos",
            "events_url": "https://api.github.com/users/keesschollaart81/events{/privacy}",
            "received_events_url": "https://api.github.com/users/keesschollaart81/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-07T16:00:59Z",
        "updated_at": "2021-09-07T16:00:59Z",
        "author_association": "NONE",
        "body": "Not much more to add. Just compile the onnx runtime like mentioned in the OP and then make sure that the .so can be found. It really was me messing it up somewhere. Would be great to have a ARM64 onnxruntime available on NuGet. But that is something easier said than done, I guess.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/914431304/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]