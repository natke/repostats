[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1603443592",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16438#issuecomment-1603443592",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16438",
        "id": 1603443592,
        "node_id": "IC_kwDOCVq1mM5fkpuI",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-22T23:45:06Z",
        "updated_at": "2023-06-22T23:45:06Z",
        "author_association": "MEMBER",
        "body": "Looks like https://github.com/microsoft/onnxruntime/blob/04dbdc96bf47518a7058f18ff64b027759071995/onnxruntime/core/graph/graph.cc#L599 is missing an argument `requested_opset_version` https://github.com/onnx/onnx/blob/e9871305d4421ac9836e5fd2be2dc89bc0bb9dcf/onnx/defs/schema.cc#L729",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1603443592/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609966092",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16438#issuecomment-1609966092",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16438",
        "id": 1609966092,
        "node_id": "IC_kwDOCVq1mM5f9iIM",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-27T17:48:48Z",
        "updated_at": "2023-06-27T17:50:00Z",
        "author_association": "MEMBER",
        "body": "Good catch. There are some related issues, listed below.\r\n\r\n(i) Since ONNX now allows specifying the target ONNX opset for any function body, we need to add this target opset version to all function-ops regsitered in onnxruntime (usually in the MSDOMAIN). For example, this [Gelu function def](https://github.com/microsoft/onnxruntime/blob/892b1b19eab91c780f4014d21d78d629fa0cee02/onnxruntime/core/graph/contrib_ops/contrib_defs.cc#L560) should specify the target opset 13. (It is partially buried [here](https://github.com/microsoft/onnxruntime/blob/892b1b19eab91c780f4014d21d78d629fa0cee02/onnxruntime/core/graph/contrib_ops/contrib_defs.cc#L569), but we need to pass this as an explicit parameter to SetContextDependentFunctionBodyBuilder).\r\n\r\n(ii) SetContextDependentFunctionBodyBuilder has a default value for the opset. But [the default behavior](https://github.com/onnx/onnx/blob/8a980683df9acbcb82dc3385fc7eb8cce4ed840f/onnx/defs/schema.cc#L719), which is to use the op's own opset-version,  works only for ops in ONNX standard domain. For an op in MSDOMAIN opset version 1, using ONNX opset version 1 as the default value doesn't make sense. So, we should either eliminate the use of the default-value, or use it only for ONNX standard domain, throwing an error/warning for other domains.\r\n\r\n(iii) We should do something similar for [context-independent functions](https://github.com/onnx/onnx/blob/8a980683df9acbcb82dc3385fc7eb8cce4ed840f/onnx/defs/schema.cc#L814)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609966092/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609972340",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16438#issuecomment-1609972340",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16438",
        "id": 1609972340,
        "node_id": "IC_kwDOCVq1mM5f9jp0",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-27T17:54:03Z",
        "updated_at": "2023-06-27T17:54:03Z",
        "author_association": "MEMBER",
        "body": "> Looks like\r\n> \r\n> https://github.com/microsoft/onnxruntime/blob/04dbdc96bf47518a7058f18ff64b027759071995/onnxruntime/core/graph/graph.cc#L599\r\n> \r\n> is missing an argument `requested_opset_version` https://github.com/onnx/onnx/blob/e9871305d4421ac9836e5fd2be2dc89bc0bb9dcf/onnx/defs/schema.cc#L729\r\n\r\nThat's correct. And the fix should be similar to that used for context-independent functions a few lines below https://github.com/microsoft/onnxruntime/blob/04dbdc96bf47518a7058f18ff64b027759071995/onnxruntime/core/graph/graph.cc#L602\r\nwhich requires the fixes discussed above",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609972340/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609976188",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16438#issuecomment-1609976188",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16438",
        "id": 1609976188,
        "node_id": "IC_kwDOCVq1mM5f9kl8",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-27T17:57:00Z",
        "updated_at": "2023-06-27T17:57:00Z",
        "author_association": "MEMBER",
        "body": "Yet another fix required in ONNX is that [BuildContextDependentFunction](https://github.com/onnx/onnx/blob/e9871305d4421ac9836e5fd2be2dc89bc0bb9dcf/onnx/defs/schema.cc#L748) invokes validation, but returns true even if validation fails.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1609976188/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1664903789",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16438#issuecomment-1664903789",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16438",
        "id": 1664903789,
        "node_id": "IC_kwDOCVq1mM5jPGpt",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-04T02:59:07Z",
        "updated_at": "2023-08-04T02:59:07Z",
        "author_association": "MEMBER",
        "body": "\r\n### Summary\r\n\r\nONNX Runtime raises `[ONNXRuntimeError] : 10 : INVALID_GRAPH : This is an invalid model. In Node, (\"\", ReduceMax, \"\", -1) : (\"_0x2928d00_self_4\": tensor(float16),) -> (\"_0x87d3010_X_ReduceMax\",) , Error Unrecognized attribute: axes for operator ReduceMax` when executing test `ops_test.TestOutputConsistencyFullGraphCPU.test_output_match_opinfo__log_softmax_with_dtype_cpu_float16` in ONNX Script `TorchLib`.\r\n\r\nTo recreate this report, use\r\n\r\n```bash\r\nCREATE_REPRODUCTION_REPORT=1 python -m pytest onnxscript/tests/function_libs/torch_lib/ops_test.py -k test_output_match_opinfo__log_softmax_with_dtype_cpu_float16\r\n```\r\n\r\n### To reproduce\r\n\r\n```python\r\nimport google.protobuf.text_format\r\nimport numpy as np\r\nfrom numpy import array, float16, float32, float64, int32, int64\r\nimport onnx\r\nimport onnxruntime as ort\r\n\r\n# Run n times\r\nN = 1\r\n\r\nonnx_model_text = \"\"\"\r\nir_version: 8\r\nproducer_name: \"pytorch\"\r\nproducer_version: \"2.1.0\"\r\ngraph {\r\n  node {\r\n    input: \"input_0\"\r\n    output: \"_val_1\"\r\n    name: \"aten_special_log_softmax_0\"\r\n    op_type: \"aten_special_log_softmax\"\r\n    attribute {\r\n      name: \"dim\"\r\n      i: 2\r\n      type: INT\r\n    }\r\n    attribute {\r\n      name: \"dtype\"\r\n      i: 11\r\n      type: INT\r\n    }\r\n    doc_string: \"\"\r\n    domain: \"pkg.onnxscript.torch_lib\"\r\n  }\r\n  name: \"torch_jit\"\r\n  input {\r\n    name: \"input_0\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 10\r\n        shape {\r\n          dim {\r\n            dim_value: 5\r\n          }\r\n          dim {\r\n            dim_value: 10\r\n          }\r\n          dim {\r\n            dim_value: 5\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  output {\r\n    name: \"_val_1\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 11\r\n        shape {\r\n          dim {\r\n            dim_value: 5\r\n          }\r\n          dim {\r\n            dim_value: 10\r\n          }\r\n          dim {\r\n            dim_value: 5\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nopset_import {\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n  version: 1\r\n}\r\nopset_import {\r\n  domain: \"\"\r\n  version: 18\r\n}\r\nfunctions {\r\n  name: \"aten_special_log_softmax\"\r\n  input: \"self\"\r\n  output: \"result_8\"\r\n  attribute: \"dim\"\r\n  node {\r\n    input: \"self\"\r\n    output: \"tmp\"\r\n    name: \"n0\"\r\n    op_type: \"Shape\"\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"tmp\"\r\n    output: \"tmp_0\"\r\n    name: \"n1\"\r\n    op_type: \"Size\"\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    output: \"int64_0\"\r\n    name: \"n2\"\r\n    op_type: \"Constant\"\r\n    attribute {\r\n      name: \"value\"\r\n      t {\r\n        data_type: 7\r\n        int64_data: 0\r\n        name: \"int64_0\"\r\n      }\r\n      type: TENSOR\r\n    }\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"int64_0\"\r\n    input: \"tmp_0\"\r\n    output: \"int64_0_cast\"\r\n    name: \"n3\"\r\n    op_type: \"CastLike\"\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"tmp_0\"\r\n    input: \"int64_0_cast\"\r\n    output: \"self_is_scalar\"\r\n    name: \"n4\"\r\n    op_type: \"Equal\"\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"self_is_scalar\"\r\n    output: \"self_4\"\r\n    name: \"n5\"\r\n    op_type: \"If\"\r\n    attribute {\r\n      name: \"then_branch\"\r\n      g {\r\n        node {\r\n          output: \"tmp_1\"\r\n          name: \"n0\"\r\n          op_type: \"Constant\"\r\n          attribute {\r\n            name: \"value_ints\"\r\n            ints: 0\r\n            type: INTS\r\n          }\r\n          domain: \"\"\r\n        }\r\n        node {\r\n          input: \"self\"\r\n          input: \"tmp_1\"\r\n          output: \"self_2\"\r\n          name: \"n1\"\r\n          op_type: \"Unsqueeze\"\r\n          domain: \"\"\r\n        }\r\n        name: \"thenGraph_8\"\r\n        output {\r\n          name: \"self_2\"\r\n          type {\r\n          }\r\n        }\r\n      }\r\n      type: GRAPH\r\n    }\r\n    attribute {\r\n      name: \"else_branch\"\r\n      g {\r\n        node {\r\n          input: \"self\"\r\n          output: \"self_3\"\r\n          name: \"n0\"\r\n          op_type: \"Identity\"\r\n          domain: \"\"\r\n        }\r\n        name: \"elseGraph_8\"\r\n        output {\r\n          name: \"self_3\"\r\n          type {\r\n          }\r\n        }\r\n      }\r\n      type: GRAPH\r\n    }\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"self_4\"\r\n    output: \"result\"\r\n    name: \"n6\"\r\n    op_type: \"LogSoftmax\"\r\n    attribute {\r\n      name: \"axis\"\r\n      type: INT\r\n      ref_attr_name: \"dim\"\r\n    }\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"result\"\r\n    output: \"result_5\"\r\n    name: \"n7\"\r\n    op_type: \"Cast\"\r\n    attribute {\r\n      name: \"to\"\r\n      type: INT\r\n      ref_attr_name: \"dtype\"\r\n    }\r\n    domain: \"\"\r\n  }\r\n  node {\r\n    input: \"self_is_scalar\"\r\n    output: \"result_8\"\r\n    name: \"n8\"\r\n    op_type: \"If\"\r\n    attribute {\r\n      name: \"then_branch\"\r\n      g {\r\n        node {\r\n          input: \"result_5\"\r\n          output: \"result_6\"\r\n          name: \"n0\"\r\n          op_type: \"Squeeze\"\r\n          domain: \"\"\r\n        }\r\n        name: \"thenGraph_12\"\r\n        output {\r\n          name: \"result_6\"\r\n          type {\r\n          }\r\n        }\r\n      }\r\n      type: GRAPH\r\n    }\r\n    attribute {\r\n      name: \"else_branch\"\r\n      g {\r\n        node {\r\n          input: \"result_5\"\r\n          output: \"result_7\"\r\n          name: \"n0\"\r\n          op_type: \"Identity\"\r\n          domain: \"\"\r\n        }\r\n        name: \"elseGraph_12\"\r\n        output {\r\n          name: \"result_7\"\r\n          type {\r\n          }\r\n        }\r\n      }\r\n      type: GRAPH\r\n    }\r\n    domain: \"\"\r\n  }\r\n  doc_string: \"special_log_softmax(Tensor self, int dim, *, ScalarType? dtype=None) -> Tensor\"\r\n  opset_import {\r\n    domain: \"\"\r\n    version: 18\r\n  }\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n  attribute_proto {\r\n    name: \"dtype\"\r\n    i: 1\r\n    type: INT\r\n  }\r\n}\r\n\r\n\"\"\"\r\n\r\nort_inputs = {'input_0': array([[[ 3.9902e+00,  3.7539e+00, -4.5352e+00, -2.1875e+00,\r\n          8.2812e+00],\r\n        [-8.7031e+00, -7.1992e+00,  7.0312e-01,  8.1797e+00,\r\n          4.9297e+00],\r\n        [ 7.6562e+00,  3.4023e+00,  8.7891e-03, -2.6367e-02,\r\n          3.4180e+00],\r\n        [-4.0352e+00,  9.2285e-01,  6.7773e+00,  7.2148e+00,\r\n          4.1836e+00],\r\n        [-2.8301e+00, -5.4766e+00, -2.5938e+00,  4.8789e+00,\r\n         -7.5859e+00],\r\n        [-7.2344e+00,  8.4141e+00, -2.5488e-01, -6.6367e+00,\r\n          7.5781e+00],\r\n        [-1.8369e+00,  2.3730e+00, -5.0000e+00,  4.0508e+00,\r\n          6.3828e+00],\r\n        [ 2.2070e+00, -7.0312e-02,  6.1602e+00, -6.4062e+00,\r\n          6.3633e+00],\r\n        [-2.6797e+00,  6.5742e+00, -6.0391e+00, -1.2832e+00,\r\n          4.5703e-01],\r\n        [-2.0469e+00,  8.0938e+00, -7.1016e+00, -2.2930e+00,\r\n         -7.3555e+00]],\r\n\r\n       [[-5.6680e+00, -4.6758e+00,  3.5156e-01,  1.3711e+00,\r\n         -8.8750e+00],\r\n        [ 7.1367e+00, -8.4375e+00,  7.5234e+00,  7.3672e+00,\r\n         -4.4297e+00],\r\n        [ 3.0156e+00,  1.1250e+00,  8.8125e+00, -3.3125e+00,\r\n          4.1406e+00],\r\n        [ 5.4492e-01,  1.2129e+00,  4.3750e+00, -3.7969e+00,\r\n         -5.5625e+00],\r\n        [ 5.9219e+00, -5.3281e+00, -6.4688e+00, -5.6797e+00,\r\n          6.7852e+00],\r\n        [ 4.2969e+00, -6.9766e+00, -6.1523e-02, -8.6484e+00,\r\n          2.3730e-01],\r\n        [-7.8203e+00, -7.2422e+00,  7.3750e+00, -2.1523e+00,\r\n         -8.3496e-01],\r\n        [ 2.8125e-01,  4.1309e-01, -4.5859e+00, -5.4297e+00,\r\n          5.0352e+00],\r\n        [ 6.3906e+00, -1.9336e+00, -8.1406e+00, -2.9961e+00,\r\n          7.6562e+00],\r\n        [-2.6289e+00,  8.6641e+00,  4.7969e+00, -5.6250e-01,\r\n          6.4844e+00]],\r\n\r\n       [[-3.6211e+00,  8.2812e+00,  4.0508e+00, -3.3574e+00,\r\n          6.7500e+00],\r\n        [ 3.5156e-02,  1.9072e+00, -4.5859e+00, -2.2676e+00,\r\n         -5.5117e+00],\r\n        [-1.3535e+00, -2.0215e+00, -5.5547e+00, -7.1875e+00,\r\n          1.2305e-01],\r\n        [ 7.5312e+00,  4.8594e+00, -1.1689e+00,  4.0430e+00,\r\n          6.0625e+00],\r\n        [ 5.0469e+00, -1.4150e+00, -2.4785e+00,  2.1094e+00,\r\n         -4.0508e+00],\r\n        [-3.5156e-02, -8.1641e+00,  7.9023e+00,  6.4414e+00,\r\n         -4.7461e+00],\r\n        [ 3.5684e+00, -6.9766e+00, -2.4258e+00,  5.7500e+00,\r\n          1.4941e+00],\r\n        [-4.2539e+00,  3.0762e-01, -4.3945e+00,  1.3975e+00,\r\n          7.3672e+00],\r\n        [ 6.1328e+00,  2.1270e+00,  7.4707e-01,  6.9883e+00,\r\n         -3.9297e+00],\r\n        [-3.0156e+00, -4.1133e+00,  5.0352e+00,  8.3672e+00,\r\n         -1.0547e-01]],\r\n\r\n       [[-3.3320e+00, -2.0117e+00,  2.3730e-01,  5.4414e+00,\r\n          4.8789e+00],\r\n        [ 2.9805e+00,  7.0039e+00,  8.4141e+00,  2.9004e+00,\r\n          5.6172e+00],\r\n        [ 4.4375e+00,  8.9141e+00,  3.0508e+00,  4.1484e+00,\r\n          2.0215e+00],\r\n        [-7.3398e+00,  1.9688e+00,  3.3750e+00,  3.3047e+00,\r\n          2.4785e+00],\r\n        [ 8.4141e+00, -3.4453e+00, -3.4883e+00, -4.5703e-01,\r\n          6.5391e+00],\r\n        [ 2.2676e+00,  3.1465e+00, -2.7695e+00,  4.0000e+00,\r\n          3.6035e+00],\r\n        [-3.3047e+00, -6.2148e+00,  5.9414e+00,  1.9688e+00,\r\n          7.1875e+00],\r\n        [ 2.0469e+00, -2.9961e+00, -3.1719e+00,  8.5625e+00,\r\n          7.2578e+00],\r\n        [ 3.2773e+00,  5.8984e+00,  5.3359e+00,  4.1406e+00,\r\n          2.0391e+00],\r\n        [ 6.0742e+00,  9.8438e-01,  7.2852e+00,  4.3594e+00,\r\n         -5.1250e+00]],\r\n\r\n       [[-4.0508e+00,  2.3477e+00,  4.4727e+00,  7.0859e+00,\r\n          3.3828e+00],\r\n        [ 3.3926e+00,  9.8438e-01,  5.3789e+00,  5.4844e+00,\r\n         -6.4160e-01],\r\n        [ 7.0312e-01, -2.8652e+00, -8.0156e+00, -8.9922e+00,\r\n         -3.3672e+00],\r\n        [-7.0742e+00,  4.9648e+00, -1.4941e+00,  8.7500e+00,\r\n          6.4609e+00],\r\n        [ 1.9688e+00, -5.6250e+00,  3.5332e+00,  5.5977e+00,\r\n          1.1338e+00],\r\n        [ 4.5703e-01,  6.0039e+00, -2.5938e+00,  5.8984e+00,\r\n          6.2305e+00],\r\n        [ 3.6484e+00, -6.8359e+00, -1.6611e+00,  3.8496e+00,\r\n         -7.2266e+00],\r\n        [ 1.6084e+00, -7.9297e+00, -5.4844e+00, -2.2676e+00,\r\n         -6.4258e+00],\r\n        [-6.5469e+00,  7.3477e+00, -1.2393e+00,  5.3516e+00,\r\n         -7.2695e+00],\r\n        [-3.7793e-01,  7.9609e+00,  4.4844e+00, -2.3984e+00,\r\n         -7.7422e+00]]], dtype=float16)}\r\n\r\n# Set up the inference session\r\nsession_options = ort.SessionOptions()\r\nsession_options.graph_optimization_level = ort.GraphOptimizationLevel.ORT_DISABLE_ALL\r\nonnx_model = onnx.ModelProto()\r\ngoogle.protobuf.text_format.Parse(onnx_model_text, onnx_model)\r\n\r\n# Uncomment this line to save the model to a file for examination\r\n# onnx.save_model(onnx_model, \"test_output_match_opinfo__log_softmax_with_dtype_cpu_float16.onnx\")\r\n\r\nonnx.checker.check_model(onnx_model)\r\nsession = ort.InferenceSession(onnx_model.SerializeToString(), session_options, providers=(\"CPUExecutionProvider\",))\r\n\r\n# Run the model\r\nfor _ in range(N):\r\n    ort_outputs = session.run(None, ort_inputs)\r\n\r\n```\r\n\r\n### Full error stack\r\n\r\n```\r\n[ONNXRuntimeError] : 10 : INVALID_GRAPH : This is an invalid model. In Node, (\"\", ReduceMax, \"\", -1) : (\"_0x2928d00_self_4\": tensor(float16),) -> (\"_0x87d3010_X_ReduceMax\",) , Error Unrecognized attribute: axes for operator ReduceMax\r\n  File \"/home/justinchu/dev/onnx-script/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 533, in _capture_graph_and_evaluate_torch_script_evaluator\r\n    return _safe_ort_session_run(onnx_model.SerializeToString(), ort_inputs)\r\n  File \"/home/justinchu/dev/onnx-script/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 349, in _safe_ort_session_run\r\n    raise return_dict[\"error\"]\r\n\r\n```\r\n\r\n### Environment\r\n\r\n```\r\nOS: Linux-5.15.0-1042-azure-x86_64-with-glibc2.35\r\nPython version: 3.10.9 (main, Jan 11 2023, 15:21:40) [GCC 11.2.0]\r\nonnx==1.15.0.dev20230731\r\nonnxruntime==1.15.1\r\nnumpy==1.25.1\r\ntorch==2.1.0.dev20230622+cpu\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1664903789/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]