[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/616894383",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-616894383",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 616894383,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjg5NDM4Mw==",
        "user": {
            "login": "huang229",
            "id": 29627190,
            "node_id": "MDQ6VXNlcjI5NjI3MTkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29627190?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/huang229",
            "html_url": "https://github.com/huang229",
            "followers_url": "https://api.github.com/users/huang229/followers",
            "following_url": "https://api.github.com/users/huang229/following{/other_user}",
            "gists_url": "https://api.github.com/users/huang229/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/huang229/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/huang229/subscriptions",
            "organizations_url": "https://api.github.com/users/huang229/orgs",
            "repos_url": "https://api.github.com/users/huang229/repos",
            "events_url": "https://api.github.com/users/huang229/events{/privacy}",
            "received_events_url": "https://api.github.com/users/huang229/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-21T01:22:43Z",
        "updated_at": "2020-04-21T01:22:43Z",
        "author_association": "NONE",
        "body": "I also tested the example you provided. The CPU is faster than GPU, and I don't know why. I refer to the examples and steps provided by you. The examples are as follows:\r\nhttps://github.com/microsoft/onnxruntime/blob/master/samples/c_cxx/fns_candy_style_transfer/fns_candy_style_transfer.c",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/616894383/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/616903667",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-616903667",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 616903667,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjkwMzY2Nw==",
        "user": {
            "login": "huang229",
            "id": 29627190,
            "node_id": "MDQ6VXNlcjI5NjI3MTkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29627190?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/huang229",
            "html_url": "https://github.com/huang229",
            "followers_url": "https://api.github.com/users/huang229/followers",
            "following_url": "https://api.github.com/users/huang229/following{/other_user}",
            "gists_url": "https://api.github.com/users/huang229/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/huang229/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/huang229/subscriptions",
            "organizations_url": "https://api.github.com/users/huang229/orgs",
            "repos_url": "https://api.github.com/users/huang229/repos",
            "events_url": "https://api.github.com/users/huang229/events{/privacy}",
            "received_events_url": "https://api.github.com/users/huang229/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-21T01:56:00Z",
        "updated_at": "2020-04-21T01:56:00Z",
        "author_association": "NONE",
        "body": "@jdhuntington ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/616903667/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/618791580",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-618791580",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 618791580,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYxODc5MTU4MA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-24T04:14:07Z",
        "updated_at": "2020-04-24T04:14:07Z",
        "author_association": "MEMBER",
        "body": "Can you please fill out the issue template to provide a bit more context?\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Urgency**\r\nIf there are particular important use cases blocked by this or strict project-related timelines, please share more information and dates. If there are no hard deadlines, please specify none.\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- ONNX Runtime installed from (source or binary):\r\n- ONNX Runtime version:\r\n- Python version:\r\n- Visual Studio version (if applicable):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**To Reproduce**\r\n- Describe steps/code to reproduce the behavior.\r\n- Attach the ONNX model to the issue (where applicable) to expedite investigation.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Additional context**\r\nAdd any other context about the problem here. If the issue is about a particular model, please share the model details as well to facilitate debugging.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/618791580/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620365656",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-620365656",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 620365656,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDM2NTY1Ng==",
        "user": {
            "login": "huang229",
            "id": 29627190,
            "node_id": "MDQ6VXNlcjI5NjI3MTkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29627190?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/huang229",
            "html_url": "https://github.com/huang229",
            "followers_url": "https://api.github.com/users/huang229/followers",
            "following_url": "https://api.github.com/users/huang229/following{/other_user}",
            "gists_url": "https://api.github.com/users/huang229/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/huang229/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/huang229/subscriptions",
            "organizations_url": "https://api.github.com/users/huang229/orgs",
            "repos_url": "https://api.github.com/users/huang229/repos",
            "events_url": "https://api.github.com/users/huang229/events{/privacy}",
            "received_events_url": "https://api.github.com/users/huang229/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-28T03:55:54Z",
        "updated_at": "2020-04-28T03:55:54Z",
        "author_association": "NONE",
        "body": "@skottmckay  Thank you very much for your reply. I'm sorry, because I'm busy in the near future and I can't give you feedback in time.\r\nThe two problems I encountered above are essentially the same. Now let's just talk about the second one, because this is an example you provide, which is convenient to explain.\r\nLet me repeat the question:\r\nI also tested the example you provided. The CPU is faster than GPU, and I don't know why. I refer to the examples and steps provided by you. The examples are as follows:\r\nhttps://github.com/microsoft/onnxruntime/blob/master/samples/c_cxx/fns_candy_style_transfer/fns_candy_style_transfer.c\r\n\r\nSystem information\r\nOS Platform and Distribution (e.g., win10):\r\nONNX Runtime installed from (source):\r\nONNX Runtime version: 1.1.0\r\nPython version:  python3.6.7\r\nVisual Studio version (if applicable):  vs2017\r\nGCC/Compiler version (if compiling from source):  vs compiler\r\nCUDA/cuDNN version: cuda10.0 /cudnn7.5.1\r\nGPU model and memory:  8G\r\nCompile the executable completely according to the links and instructions you provided.\r\nIn the code, only the print model forwarding time is added here.\r\nclock_t start,ends;\r\nstart=clock();\r\n  ORT_ABORT_ON_ERROR(\r\n      g_ort->Run(session, NULL, input_names, (const OrtValue* const*)&input_tensor, 1, output_names, 1, &output_tensor));\r\nends=clock();\r\ncout<<ends-start<<endl;\r\n\r\nThen, prepare an image:\r\nPNG format\r\nDimension of 720x720\r\nRun\r\nCommand to run the application:\r\nfns_candy_style_transfer.exe <model_path> <input_image_path> <output_image_path> [cpu|cuda|dml]",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620365656/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620435683",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-620435683",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 620435683,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDQzNTY4Mw==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-28T07:37:19Z",
        "updated_at": "2020-04-28T07:37:19Z",
        "author_association": "MEMBER",
        "body": "IIRC the exception can happen if the per thread context was not freed prior to the application shutting down as the cuda library may have been unloaded before PerThreadContext::~PerThreadContext runs. There's at least a catch for the exception in the latest code and I think the issue was resolved so things are freed correctly.\r\n\r\nRegarding the speed it may simply be that to run the model on GPU the inputs and outputs need to be copied between CPU and GPU. You could enable profiling by calling g_ort->EnableProfiling(...) to see. Note that this adds overhead so it will just give a better idea of how long executing the model takes with the device copy excluded by looking at the time taken by the sequential executor. See [here](https://github.com/microsoft/onnxruntime/blob/master/docs/ONNX_Runtime_Perf_Tuning.md#profiling-and-performance-report) for some more details on viewing the profiling output. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620435683/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620452781",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3592#issuecomment-620452781",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3592",
        "id": 620452781,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDQ1Mjc4MQ==",
        "user": {
            "login": "huang229",
            "id": 29627190,
            "node_id": "MDQ6VXNlcjI5NjI3MTkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29627190?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/huang229",
            "html_url": "https://github.com/huang229",
            "followers_url": "https://api.github.com/users/huang229/followers",
            "following_url": "https://api.github.com/users/huang229/following{/other_user}",
            "gists_url": "https://api.github.com/users/huang229/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/huang229/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/huang229/subscriptions",
            "organizations_url": "https://api.github.com/users/huang229/orgs",
            "repos_url": "https://api.github.com/users/huang229/repos",
            "events_url": "https://api.github.com/users/huang229/events{/privacy}",
            "received_events_url": "https://api.github.com/users/huang229/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-28T08:13:34Z",
        "updated_at": "2020-04-28T08:13:34Z",
        "author_association": "NONE",
        "body": "I'm very sorry. I found the reason. It's a very low-level error. CUDA will initialize many things from CPU to GPU in the first pass, so it's wrong to test a pass.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620452781/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]