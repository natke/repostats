[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820381803",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7085#issuecomment-820381803",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7085",
        "id": 820381803,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDM4MTgwMw==",
        "user": {
            "login": "wangxiong172086864",
            "id": 17899344,
            "node_id": "MDQ6VXNlcjE3ODk5MzQ0",
            "avatar_url": "https://avatars.githubusercontent.com/u/17899344?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wangxiong172086864",
            "html_url": "https://github.com/wangxiong172086864",
            "followers_url": "https://api.github.com/users/wangxiong172086864/followers",
            "following_url": "https://api.github.com/users/wangxiong172086864/following{/other_user}",
            "gists_url": "https://api.github.com/users/wangxiong172086864/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wangxiong172086864/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wangxiong172086864/subscriptions",
            "organizations_url": "https://api.github.com/users/wangxiong172086864/orgs",
            "repos_url": "https://api.github.com/users/wangxiong172086864/repos",
            "events_url": "https://api.github.com/users/wangxiong172086864/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wangxiong172086864/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T12:25:00Z",
        "updated_at": "2021-04-15T12:25:00Z",
        "author_association": "NONE",
        "body": "I came across the same problem recently, can you let me know how did you fix it?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820381803/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/904614082",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7085#issuecomment-904614082",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7085",
        "id": 904614082,
        "node_id": "IC_kwDOCVq1mM4161DC",
        "user": {
            "login": "ArtyZe",
            "id": 32027268,
            "node_id": "MDQ6VXNlcjMyMDI3MjY4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32027268?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ArtyZe",
            "html_url": "https://github.com/ArtyZe",
            "followers_url": "https://api.github.com/users/ArtyZe/followers",
            "following_url": "https://api.github.com/users/ArtyZe/following{/other_user}",
            "gists_url": "https://api.github.com/users/ArtyZe/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ArtyZe/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ArtyZe/subscriptions",
            "organizations_url": "https://api.github.com/users/ArtyZe/orgs",
            "repos_url": "https://api.github.com/users/ArtyZe/repos",
            "events_url": "https://api.github.com/users/ArtyZe/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ArtyZe/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-24T12:53:59Z",
        "updated_at": "2021-08-24T12:53:59Z",
        "author_association": "NONE",
        "body": "> hello, I refer to this code\r\n> https://github.com/microsoft/onnxruntime/blob/v1.6.0/onnxruntime/test/testdata/custom_op_library/custom_op_library.cc, it can be compiled and run on python on cpu, but I want it can be run on cuda, I refer to test_inferenvce.cc and add code:\r\n> `\r\n> struct CustomopOne : Ort::CustomOpBase<QuantizeOut, CustomopOne_Compute> {\r\n> explicit CustomopOne(const char* provider, void* compute_stream) : provider_(provider), compute_stream_(compute_stream){}\r\n> void* CreateKernel(OrtApi api, const OrtKernelInfo* info) const {\r\n> return new CustomopOne_Compute(api, info, compute_stream_);\r\n> };\r\n> const char* GetName() const { return \"CustomopOne\"; };\r\n> \r\n> const char* GetExecutionProviderType() const { return provider_;};\r\n> \r\n> size_t GetInputTypeCount() const { return 1; };\r\n> ONNXTensorElementDataType GetInputType(size_t /_index_/) const { return ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT; };\r\n> \r\n> size_t GetOutputTypeCount() const { return 1; };\r\n> ONNXTensorElementDataType GetOutputType(size_t /_index_/) const { return ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT; };\r\n> private:\r\n> const char* provider_;\r\n> void* compute_stream_;\r\n> };\r\n> ` `OrtStatus* ORT_API_CALL RegisterCustomOps(OrtSessionOptions* options, const OrtApiBase* api) {\r\n> OrtCustomOpDomain* domain = nullptr;\r\n> const OrtApi* ortApi = api->GetApi(ORT_API_VERSION);\r\n> \r\n> if (auto status = ortApi->CreateCustomOpDomain(c_OpDomain, &domain)) {\r\n> return status;\r\n> }\r\n> \r\n> AddOrtCustomOpDomainToContainer(domain, ortApi);\r\n> \r\n> #ifdef USE_CUDA\r\n> cudaStream_t compute_stream = nullptr;\r\n> cudaStreamCreateWithFlags(&compute_stream, cudaStreamNonBlocking);\r\n> CustomopOne c_CustomopOne{onnxruntime::kCudaExecutionProvider, compute_stream};\r\n> #else\r\n> CustomopOne c_CustomopOne{onnxruntime::kCpuExecutionProvider, nullptr};\r\n> #endif\r\n> \r\n> if (auto status = ortApi->CustomOpDomain_Add(domain, &c_CustomopOne)) {\r\n> return status;\r\n> }\r\n> return ortApi->AddCustomOpDomain(options, domain);\r\n> }`\r\n> it can be compiled, but when python calls the shared lib, it will give reportes Segmentation fault (core dumped)\r\n\r\n@helloworld13138 @wangxiong172086864 hello, same error occurs, have you guys solved this problem ? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/904614082/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]