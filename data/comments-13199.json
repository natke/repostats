[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1264867030",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1264867030",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1264867030,
        "node_id": "IC_kwDOCVq1mM5LZFbW",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T02:56:50Z",
        "updated_at": "2022-10-03T02:56:50Z",
        "author_association": "MEMBER",
        "body": "Could you try upgrade onnxruntime to latest version 1.12.1 0(need upgrade CUDA to 11.* as well)?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1264867030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1264966498",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1264966498",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1264966498,
        "node_id": "IC_kwDOCVq1mM5LZdti",
        "user": {
            "login": "fpgdubost",
            "id": 29502297,
            "node_id": "MDQ6VXNlcjI5NTAyMjk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/29502297?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fpgdubost",
            "html_url": "https://github.com/fpgdubost",
            "followers_url": "https://api.github.com/users/fpgdubost/followers",
            "following_url": "https://api.github.com/users/fpgdubost/following{/other_user}",
            "gists_url": "https://api.github.com/users/fpgdubost/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fpgdubost/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fpgdubost/subscriptions",
            "organizations_url": "https://api.github.com/users/fpgdubost/orgs",
            "repos_url": "https://api.github.com/users/fpgdubost/repos",
            "events_url": "https://api.github.com/users/fpgdubost/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fpgdubost/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T05:51:50Z",
        "updated_at": "2022-10-03T05:51:50Z",
        "author_association": "NONE",
        "body": "I can't. I need to keep CUDA v10.2. Maybe I could try the 1.8.0 build?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1264966498/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1265730998",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1265730998",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1265730998,
        "node_id": "IC_kwDOCVq1mM5LcYW2",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T16:38:11Z",
        "updated_at": "2022-10-03T16:38:11Z",
        "author_association": "MEMBER",
        "body": "Please do not measure the running time of the first run. Skip it and run the same inference a couple of times and take the average. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1265730998/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1265758716",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1265758716",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1265758716,
        "node_id": "IC_kwDOCVq1mM5LcfH8",
        "user": {
            "login": "fpgdubost",
            "id": 29502297,
            "node_id": "MDQ6VXNlcjI5NTAyMjk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/29502297?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fpgdubost",
            "html_url": "https://github.com/fpgdubost",
            "followers_url": "https://api.github.com/users/fpgdubost/followers",
            "following_url": "https://api.github.com/users/fpgdubost/following{/other_user}",
            "gists_url": "https://api.github.com/users/fpgdubost/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fpgdubost/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fpgdubost/subscriptions",
            "organizations_url": "https://api.github.com/users/fpgdubost/orgs",
            "repos_url": "https://api.github.com/users/fpgdubost/repos",
            "events_url": "https://api.github.com/users/fpgdubost/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fpgdubost/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T17:03:38Z",
        "updated_at": "2022-10-03T17:03:38Z",
        "author_association": "NONE",
        "body": "That's right! Thanks @snnn, that definitely helped! I am still getting something that's more than twice slower with GPU. The first config below runs at over 40ms, while the second config runs at 17ms. (I tried playing with the OrtCUDAProviderOptions parameters but it did not really affect runtime).\r\n\r\nFirst config: > 40 ms\r\n```\r\nOrt::SessionOptions session_options;\r\nOrtCUDAProviderOptions cuda_options;\r\ncuda_options.device_id = 0; \r\n\r\ncuda_options.cudnn_conv_algo_search = OrtCudnnConvAlgoSearch();\r\ncuda_options.arena_extend_strategy = 1; \r\nsession_options.AppendExecutionProvider_CUDA(cuda_options);\r\n```\r\n\r\nSecond config: 17 ms\r\n```\r\nOrt::SessionOptions session_options;\r\nOrtCUDAProviderOptions cuda_options;\r\ncuda_options.device_id = 0; \r\n\r\ncuda_options.cudnn_conv_algo_search = OrtCudnnConvAlgoSearch();\r\ncuda_options.arena_extend_strategy = 1; \r\n// session_options.AppendExecutionProvider_CUDA(cuda_options);\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1265758716/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1266113895",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1266113895",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1266113895,
        "node_id": "IC_kwDOCVq1mM5Ld11n",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T22:03:24Z",
        "updated_at": "2022-10-03T22:03:24Z",
        "author_association": "MEMBER",
        "body": "Unfortunately DepthToSpace was added to the CUDA EP in v1.9. Due to that you are unlikely to get good performance with earlier versions due to it switching between CPU and CUDA for the DepthToSpace/SpaceToDepth nodes. \r\n\r\n1.9 was the first version where the pre-built package used CUDA 11, but IIRC it is possible to do a custom build using CUDA 10. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1266113895/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1266118392",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13199#issuecomment-1266118392",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13199",
        "id": 1266118392,
        "node_id": "IC_kwDOCVq1mM5Ld274",
        "user": {
            "login": "fpgdubost",
            "id": 29502297,
            "node_id": "MDQ6VXNlcjI5NTAyMjk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/29502297?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fpgdubost",
            "html_url": "https://github.com/fpgdubost",
            "followers_url": "https://api.github.com/users/fpgdubost/followers",
            "following_url": "https://api.github.com/users/fpgdubost/following{/other_user}",
            "gists_url": "https://api.github.com/users/fpgdubost/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fpgdubost/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fpgdubost/subscriptions",
            "organizations_url": "https://api.github.com/users/fpgdubost/orgs",
            "repos_url": "https://api.github.com/users/fpgdubost/repos",
            "events_url": "https://api.github.com/users/fpgdubost/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fpgdubost/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-03T22:08:21Z",
        "updated_at": "2022-10-03T22:08:21Z",
        "author_association": "NONE",
        "body": "Got it makes sense, @skottmckay, thanks. I will try v1.9.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1266118392/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]