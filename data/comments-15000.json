[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464237542",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15000#issuecomment-1464237542",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15000",
        "id": 1464237542,
        "node_id": "IC_kwDOCVq1mM5XRn3m",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T18:45:04Z",
        "updated_at": "2023-03-10T18:50:49Z",
        "author_association": "MEMBER",
        "body": "Run `onnxruntime_perf_test -h`, there are a few parameters can help without extra tools:\r\n```\r\n        -I: Generate tensor input binding (Free dimensions are treated as 1.)\r\n        -f [free_dimension_override]: Specifies a free dimension by name to override to a specific value for performance optimization. Syntax is [dimension_name:override_value]. override_value must > 0\r\n        -F [free_dimension_override]: Specifies a free dimension by denotation to override to a specific value for performance optimization. Syntax is [dimension_denotation:override_value]. override_value must > 0        \r\n```\r\nFor example, I have a BERT model with input_ids dynamic shape as ['batch_size', 'sequence_length']. I could use the following to test:\r\n```\r\nonnxruntime_perf_test -I -f batch_size:1 -F sequence_length:128  bert.onnx\r\n```\r\n\r\nYou can also use some tools like [this](https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/python/tools/transformers/bert_test_data.py) to create test data before running onnxruntime_perf_test. Run `python -m onnxruntime.transformers.bert_test_data --help` to see usage. Example command line:\r\n```\r\npython -m onnxruntime.transformers.bert_test_data --model bert.onnx --output_dir . --batch_size 1 --sequence_length 128 --input_ids_name input_id --segment_ids_name token_type_ids --input_mask_name attention_mask --samples 1 --only_input_tensors\r\n```\r\nThen you can run onnxruntime_perf_test.\r\n\r\nBTW, you can also try tools like [this](https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/python/tools/transformers/bert_perf_test.py) for performance test. Run `python -m onnxruntime.transformers.bert_perf_test --help` to see usage. It could help run combinations of batch_sizes, sequence lengths and number of threads in one command line, and outputs a CSV file that can load into Excel to view easily.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464237542/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464290667",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15000#issuecomment-1464290667",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15000",
        "id": 1464290667,
        "node_id": "IC_kwDOCVq1mM5XR01r",
        "user": {
            "login": "azsh1725",
            "id": 24797544,
            "node_id": "MDQ6VXNlcjI0Nzk3NTQ0",
            "avatar_url": "https://avatars.githubusercontent.com/u/24797544?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/azsh1725",
            "html_url": "https://github.com/azsh1725",
            "followers_url": "https://api.github.com/users/azsh1725/followers",
            "following_url": "https://api.github.com/users/azsh1725/following{/other_user}",
            "gists_url": "https://api.github.com/users/azsh1725/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/azsh1725/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/azsh1725/subscriptions",
            "organizations_url": "https://api.github.com/users/azsh1725/orgs",
            "repos_url": "https://api.github.com/users/azsh1725/repos",
            "events_url": "https://api.github.com/users/azsh1725/events{/privacy}",
            "received_events_url": "https://api.github.com/users/azsh1725/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T19:23:12Z",
        "updated_at": "2023-03-10T19:23:12Z",
        "author_association": "NONE",
        "body": "Thanks for the quick reply, i'll try this tools",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464290667/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464308160",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15000#issuecomment-1464308160",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15000",
        "id": 1464308160,
        "node_id": "IC_kwDOCVq1mM5XR5HA",
        "user": {
            "login": "azsh1725",
            "id": 24797544,
            "node_id": "MDQ6VXNlcjI0Nzk3NTQ0",
            "avatar_url": "https://avatars.githubusercontent.com/u/24797544?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/azsh1725",
            "html_url": "https://github.com/azsh1725",
            "followers_url": "https://api.github.com/users/azsh1725/followers",
            "following_url": "https://api.github.com/users/azsh1725/following{/other_user}",
            "gists_url": "https://api.github.com/users/azsh1725/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/azsh1725/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/azsh1725/subscriptions",
            "organizations_url": "https://api.github.com/users/azsh1725/orgs",
            "repos_url": "https://api.github.com/users/azsh1725/repos",
            "events_url": "https://api.github.com/users/azsh1725/events{/privacy}",
            "received_events_url": "https://api.github.com/users/azsh1725/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T19:31:42Z",
        "updated_at": "2023-03-10T19:31:42Z",
        "author_association": "NONE",
        "body": "btw, I think that bert_perf_test is not suitable, because i want to run test with tensorrt ep, but the instructions for onnxruntime_perf_test helped, I don’t know why I didn’t immediately notice this in the help.\r\n\r\nThank you very much again",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464308160/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]