[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1065668158",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1065668158",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1065668158,
        "node_id": "IC_kwDOCVq1mM4_hM4-",
        "user": {
            "login": "RyanUnderhill",
            "id": 38674843,
            "node_id": "MDQ6VXNlcjM4Njc0ODQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/38674843?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RyanUnderhill",
            "html_url": "https://github.com/RyanUnderhill",
            "followers_url": "https://api.github.com/users/RyanUnderhill/followers",
            "following_url": "https://api.github.com/users/RyanUnderhill/following{/other_user}",
            "gists_url": "https://api.github.com/users/RyanUnderhill/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RyanUnderhill/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RyanUnderhill/subscriptions",
            "organizations_url": "https://api.github.com/users/RyanUnderhill/orgs",
            "repos_url": "https://api.github.com/users/RyanUnderhill/repos",
            "events_url": "https://api.github.com/users/RyanUnderhill/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RyanUnderhill/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-11T23:53:41Z",
        "updated_at": "2022-03-11T23:53:41Z",
        "author_association": "MEMBER",
        "body": "Yes, that is strange as the Python wrapper uses the same code as the C++ API so it should pretty much be the same.\r\n\r\nJust to double check things, since you built from source are you sure you weren't using the debug version of the onnxruntime.dll library?\r\n\r\nAlso looks like you're only using the CPU provider, and didn't build any extras like CUDA/etc..\r\n\r\nIf you can, what were your build commands and steps to run each case?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1065668158/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1065899755",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1065899755",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1065899755,
        "node_id": "IC_kwDOCVq1mM4_iFbr",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-12T15:12:01Z",
        "updated_at": "2022-03-12T15:12:01Z",
        "author_association": "NONE",
        "body": "So, for Python I didn't use nothing fancy. Just:\r\n```\r\npip install onnxruntime-gpu\r\nconda install -c conda-forge onnx\r\n```\r\n\r\nFor C++, considering only the CPU:\r\n`build.bat --skip_submodule_sync --build_shared_lib --parallel --config Release`\r\n\r\nor with GPU:\r\n`build.bat --skip_submodule_sync --build_shared_lib --parallel --config Release --cuda_version <cuda_version> --use_cuda --cuda_home <path_to_cuda> --cudnn_home <path_to_cudnn>`\r\n\r\nWhen I tried with the GPU in C++, I had to add the following extra settings:\r\n```\r\nif (is_cuda_available())\r\n{\r\n    OrtCUDAProviderOptions cuda_options;\r\n    memset(&cuda_options, 0, sizeof(cuda_options));\r\n    cuda_options.cudnn_conv_algo_search = OrtCudnnConvAlgoSearchExhaustive;\r\n    cuda_options.gpu_mem_limit = SIZE_MAX;\r\n    session_options.AppendExecutionProvider_CUDA(cuda_options);\r\n}\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1065899755/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066118135",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1066118135",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1066118135,
        "node_id": "IC_kwDOCVq1mM4_i6v3",
        "user": {
            "login": "ZiyueWangUoB",
            "id": 33383959,
            "node_id": "MDQ6VXNlcjMzMzgzOTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/33383959?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZiyueWangUoB",
            "html_url": "https://github.com/ZiyueWangUoB",
            "followers_url": "https://api.github.com/users/ZiyueWangUoB/followers",
            "following_url": "https://api.github.com/users/ZiyueWangUoB/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZiyueWangUoB/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZiyueWangUoB/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZiyueWangUoB/subscriptions",
            "organizations_url": "https://api.github.com/users/ZiyueWangUoB/orgs",
            "repos_url": "https://api.github.com/users/ZiyueWangUoB/repos",
            "events_url": "https://api.github.com/users/ZiyueWangUoB/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZiyueWangUoB/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-13T14:51:20Z",
        "updated_at": "2022-03-13T14:51:34Z",
        "author_association": "NONE",
        "body": "I have a similar problem, but the speed difference was due to x86 runtime vs x64. With Python and C++ x64, the speeds are about equal. But x86 in C++ is much slower. Could you be compiling as X86 in Visual Studio? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066118135/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066516847",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1066516847",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1066516847,
        "node_id": "IC_kwDOCVq1mM4_kcFv",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-14T08:42:06Z",
        "updated_at": "2022-03-14T08:42:06Z",
        "author_association": "NONE",
        "body": "I doubled check and no, the x86 vs x64 is not my problem. I'm using always x64",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066516847/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066572653",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1066572653",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1066572653,
        "node_id": "IC_kwDOCVq1mM4_kptt",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-14T09:42:58Z",
        "updated_at": "2022-03-14T09:42:58Z",
        "author_association": "NONE",
        "body": "I tried the binaries and now in C++ I get the same performance as Python.\r\n\r\nFor me, this confirms that is really a bad configuration from my side but I can't figure out what.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1066572653/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067800673",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1067800673",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1067800673,
        "node_id": "IC_kwDOCVq1mM4_pVhh",
        "user": {
            "login": "ZachL1",
            "id": 57339063,
            "node_id": "MDQ6VXNlcjU3MzM5MDYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/57339063?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZachL1",
            "html_url": "https://github.com/ZachL1",
            "followers_url": "https://api.github.com/users/ZachL1/followers",
            "following_url": "https://api.github.com/users/ZachL1/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZachL1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZachL1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZachL1/subscriptions",
            "organizations_url": "https://api.github.com/users/ZachL1/orgs",
            "repos_url": "https://api.github.com/users/ZachL1/repos",
            "events_url": "https://api.github.com/users/ZachL1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZachL1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T10:15:51Z",
        "updated_at": "2022-03-15T10:15:51Z",
        "author_association": "NONE",
        "body": "> I tried the binaries and now in C++ I get the same performance as Python.\r\n> \r\n> For me, this confirms that is really a bad configuration from my side but I can't figure out what.\r\n\r\n\r\nI had the same problem, can you describe in detail how you solved it?\r\nI don't quite understand what 'the binaries' refers to.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067800673/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067978198",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1067978198",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1067978198,
        "node_id": "IC_kwDOCVq1mM4_qA3W",
        "user": {
            "login": "heliqi",
            "id": 34152981,
            "node_id": "MDQ6VXNlcjM0MTUyOTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/34152981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/heliqi",
            "html_url": "https://github.com/heliqi",
            "followers_url": "https://api.github.com/users/heliqi/followers",
            "following_url": "https://api.github.com/users/heliqi/following{/other_user}",
            "gists_url": "https://api.github.com/users/heliqi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/heliqi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/heliqi/subscriptions",
            "organizations_url": "https://api.github.com/users/heliqi/orgs",
            "repos_url": "https://api.github.com/users/heliqi/repos",
            "events_url": "https://api.github.com/users/heliqi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/heliqi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T13:18:05Z",
        "updated_at": "2022-03-15T13:18:36Z",
        "author_association": "NONE",
        "body": "I have a similar problem.  My OS Platform is Linux(ubuntu)\r\ninstall python:\r\n```\r\npip install onnxruntime\r\n```\r\nc++ use pre-compile package(from https://github.com/microsoft/onnxruntime/releases):  \r\n[onnxruntime-linux-x64-1.10.0.tgz](https://github.com/microsoft/onnxruntime/releases/download/v1.10.0/onnxruntime-linux-x64-1.10.0.tgz)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067978198/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067997600",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1067997600",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1067997600,
        "node_id": "IC_kwDOCVq1mM4_qFmg",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T13:36:39Z",
        "updated_at": "2022-03-15T13:36:39Z",
        "author_association": "NONE",
        "body": "> > I tried the binaries and now in C++ I get the same performance as Python.\r\n> > For me, this confirms that is really a bad configuration from my side but I can't figure out what.\r\n> \r\n> I had the same problem, can you describe in detail how you solved it? I don't quite understand what 'the binaries' refers to.\r\n\r\n@19PDP\r\nYou can build onnxruntime by yourself or you can download the release packages from here:\r\nhttps://github.com/microsoft/onnxruntime/releases\r\n\r\n@heliqi\r\nYou can use the release packages indeed, but I want to be able to build from source.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1067997600/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068000448",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1068000448",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1068000448,
        "node_id": "IC_kwDOCVq1mM4_qGTA",
        "user": {
            "login": "heliqi",
            "id": 34152981,
            "node_id": "MDQ6VXNlcjM0MTUyOTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/34152981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/heliqi",
            "html_url": "https://github.com/heliqi",
            "followers_url": "https://api.github.com/users/heliqi/followers",
            "following_url": "https://api.github.com/users/heliqi/following{/other_user}",
            "gists_url": "https://api.github.com/users/heliqi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/heliqi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/heliqi/subscriptions",
            "organizations_url": "https://api.github.com/users/heliqi/orgs",
            "repos_url": "https://api.github.com/users/heliqi/repos",
            "events_url": "https://api.github.com/users/heliqi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/heliqi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T13:39:24Z",
        "updated_at": "2022-03-15T13:39:24Z",
        "author_association": "NONE",
        "body": "@Roios  But the c++ release packages slower python ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068000448/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068005002",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1068005002",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1068005002,
        "node_id": "IC_kwDOCVq1mM4_qHaK",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T13:43:45Z",
        "updated_at": "2022-03-15T13:43:45Z",
        "author_association": "NONE",
        "body": "@heliqi\r\nYou are saying that the release packages are slower than the python package?\r\nOn my machine, they are not. They have the same performance (+- 2/3 ms).\r\n\r\nIt is my C++ local build that is slower than the python package. So maybe your problem is something else. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068005002/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068035316",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1068035316",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1068035316,
        "node_id": "IC_kwDOCVq1mM4_qOz0",
        "user": {
            "login": "ZiyueWangUoB",
            "id": 33383959,
            "node_id": "MDQ6VXNlcjMzMzgzOTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/33383959?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZiyueWangUoB",
            "html_url": "https://github.com/ZiyueWangUoB",
            "followers_url": "https://api.github.com/users/ZiyueWangUoB/followers",
            "following_url": "https://api.github.com/users/ZiyueWangUoB/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZiyueWangUoB/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZiyueWangUoB/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZiyueWangUoB/subscriptions",
            "organizations_url": "https://api.github.com/users/ZiyueWangUoB/orgs",
            "repos_url": "https://api.github.com/users/ZiyueWangUoB/repos",
            "events_url": "https://api.github.com/users/ZiyueWangUoB/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZiyueWangUoB/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T14:12:33Z",
        "updated_at": "2022-03-15T14:12:33Z",
        "author_association": "NONE",
        "body": "@heliqi \r\nPython goes through the same core code, there's just an additional wrapper around the same binaries. It's probably your C++ configuration, perhaps multithreading is disabled? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068035316/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068038822",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1068038822",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1068038822,
        "node_id": "IC_kwDOCVq1mM4_qPqm",
        "user": {
            "login": "Roios",
            "id": 22634709,
            "node_id": "MDQ6VXNlcjIyNjM0NzA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22634709?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Roios",
            "html_url": "https://github.com/Roios",
            "followers_url": "https://api.github.com/users/Roios/followers",
            "following_url": "https://api.github.com/users/Roios/following{/other_user}",
            "gists_url": "https://api.github.com/users/Roios/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Roios/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Roios/subscriptions",
            "organizations_url": "https://api.github.com/users/Roios/orgs",
            "repos_url": "https://api.github.com/users/Roios/repos",
            "events_url": "https://api.github.com/users/Roios/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Roios/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-15T14:15:50Z",
        "updated_at": "2022-03-15T14:15:50Z",
        "author_association": "NONE",
        "body": "@ZiyueWangUoB\r\nIn my case, it is not a matter of multithreading because I set the setting in the code.\r\nFor my problem needs to be something in the build (what, that is the mystery here).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1068038822/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1069114836",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1069114836",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1069114836,
        "node_id": "IC_kwDOCVq1mM4_uWXU",
        "user": {
            "login": "ZachL1",
            "id": 57339063,
            "node_id": "MDQ6VXNlcjU3MzM5MDYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/57339063?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZachL1",
            "html_url": "https://github.com/ZachL1",
            "followers_url": "https://api.github.com/users/ZachL1/followers",
            "following_url": "https://api.github.com/users/ZachL1/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZachL1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZachL1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZachL1/subscriptions",
            "organizations_url": "https://api.github.com/users/ZachL1/orgs",
            "repos_url": "https://api.github.com/users/ZachL1/repos",
            "events_url": "https://api.github.com/users/ZachL1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZachL1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-16T13:14:06Z",
        "updated_at": "2022-03-16T13:14:06Z",
        "author_association": "NONE",
        "body": "@Roios \r\nThanks for your help, I have solved it.\r\n\r\nIt seems that \"multithreading\" and \"graph optimization\" are causing the C++ to be very slow. At first I initialize `session` like this:\r\n\r\n```cpp\r\nOrt::SessionOptions session_options;\r\nsession_options.SetIntraOpNumThreads(num_threads); // num_threads = 16\r\nsession_options.SetGraphOptimizationLevel(GraphOptimizationLevel::ORT_ENABLE_EXTENDED);\r\nsession_options.SetLogSeverityLevel(4);\r\n\r\nOrt::Session* ort_session = new Ort::Session(ort_env, onnx_path, session_options);\r\n```\r\n\r\nit's very very slow in inference, about 900ms.\r\n\r\n\r\n\r\nThen I removed any optimizations:\r\n\r\n```cpp\r\nOrt::Session* ort_session = new Ort::Session(ort_env, onnx_path, Ort::SessionOptions{ nullptr });\r\n```\r\n\r\nThe speed reached around 160ms, which is comparable to Python. I tried different `num_threads` , all slowed down inference to some extent.\r\n\r\nI'm not very familiar with onnx, this is confusing me. \r\n\r\nI'm hoping to make it faster with optimizations, 160ms is what Python can do.\r\n\r\n<br>\r\n\r\nMy model is inferring on video sequences. There is LSTM in the model, which means that each inference needs to use the results of the previous inference. Is this why multithreading is causing the slower?\r\n\r\nBut I used the same configuration in Python, why didn't it slow down the inference? The Python version looks like this:\r\n\r\n```python\r\noptions = ort.SessionOptions()\r\noptions.inter_op_num_threads = 16\r\noptions.graph_optimization_level = ort.GraphOptimizationLevel.ORT_ENABLE_EXTENDED\r\noptions.log_severity_level = 4\r\nsess1 = ort.InferenceSession(f'./{weight}', options)\r\nsess2 = ort.InferenceSession(f'./{weight}')\r\n# sess1 and sess2 are almost the same speed\r\n```\r\n\r\n\r\nI've tried release packages and Nuget packages, but they have the same result. I'm trying to build from source to see if there are better results.\r\n\r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1069114836/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1082398898",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1082398898",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1082398898,
        "node_id": "IC_kwDOCVq1mM5AhBiy",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-29T21:39:55Z",
        "updated_at": "2022-03-29T21:40:30Z",
        "author_association": "MEMBER",
        "body": "> @ZiyueWangUoB In my case, it is not a matter of multithreading because I set the setting in the code. For my problem needs to be something in the build (what, that is the mystery here).\r\n\r\nIf I recall correctly, the release binaries on Windows are built with the config `RelWithDebInfo`. I notice that you are build with the config set to `Release`. Not sure if this should make a huge a difference though... ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1082398898/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407256393",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10849#issuecomment-1407256393",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10849",
        "id": 1407256393,
        "node_id": "IC_kwDOCVq1mM5T4QdJ",
        "user": {
            "login": "aziesemer",
            "id": 11475314,
            "node_id": "MDQ6VXNlcjExNDc1MzE0",
            "avatar_url": "https://avatars.githubusercontent.com/u/11475314?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aziesemer",
            "html_url": "https://github.com/aziesemer",
            "followers_url": "https://api.github.com/users/aziesemer/followers",
            "following_url": "https://api.github.com/users/aziesemer/following{/other_user}",
            "gists_url": "https://api.github.com/users/aziesemer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/aziesemer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/aziesemer/subscriptions",
            "organizations_url": "https://api.github.com/users/aziesemer/orgs",
            "repos_url": "https://api.github.com/users/aziesemer/repos",
            "events_url": "https://api.github.com/users/aziesemer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/aziesemer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-28T02:09:27Z",
        "updated_at": "2023-01-28T02:15:21Z",
        "author_association": "NONE",
        "body": "I was able to improve the performance significantly on C++ by tweaking the threads, as explained here: https://stackoverflow.com/questions/75241204/why-onnxruntime-runs-2-3x-slower-in-c-than-python#comment132771477_75241204\r\nWith the default settings it was about 2X slower in some platforms (Windows PC). I suspect it was using more threads than the number of cores and excess intra thread communication was the bottle neck.\r\nI also tried to recompile, as suggested here, but it did not help.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1407256393/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]