[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444633556",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444633556",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444633556,
        "node_id": "IC_kwDOCVq1mM5WG1vU",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-24T23:04:56Z",
        "updated_at": "2023-02-24T23:04:56Z",
        "author_association": "MEMBER",
        "body": "@Looong01 from the error it seems like the torch version might not be rocm. Is that possible?\r\n\r\nWould you please share the output of this command?\r\n`python -c \"import torch; print(torch.version.cuda); print(torch.version.hip)\"`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444633556/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444860654",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444860654",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444860654,
        "node_id": "IC_kwDOCVq1mM5WHtLu",
        "user": {
            "login": "Looong01",
            "id": 69568351,
            "node_id": "MDQ6VXNlcjY5NTY4MzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/69568351?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Looong01",
            "html_url": "https://github.com/Looong01",
            "followers_url": "https://api.github.com/users/Looong01/followers",
            "following_url": "https://api.github.com/users/Looong01/following{/other_user}",
            "gists_url": "https://api.github.com/users/Looong01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Looong01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Looong01/subscriptions",
            "organizations_url": "https://api.github.com/users/Looong01/orgs",
            "repos_url": "https://api.github.com/users/Looong01/repos",
            "events_url": "https://api.github.com/users/Looong01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Looong01/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T01:18:31Z",
        "updated_at": "2023-02-25T01:18:31Z",
        "author_association": "NONE",
        "body": "> @Looong01 from the error it seems like the torch version might not be rocm. Is that possible?\r\n> \r\n> Would you please share the output of this command? `python -c \"import torch; print(torch.version.cuda); print(torch.version.hip)\"`\r\n\r\n(ONNX) loong@home:~$ python -c \"import torch; print(torch.version.cuda); print(torch.version.hip)\"\r\n11.7\r\nNone",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444860654/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444870164",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444870164",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444870164,
        "node_id": "IC_kwDOCVq1mM5WHvgU",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T01:26:19Z",
        "updated_at": "2023-02-25T01:26:19Z",
        "author_association": "MEMBER",
        "body": "Ok, so that confirms my hypothesis. You have torch cuda installed.\r\n\r\nIn order to use ORTModule (onnxruntime-training) with rocm, you also need torch with rocm installed since ORTModule takes a dependency on torch.\r\n\r\nYou could install it by following the PyTorch instructions here: https://pytorch.org/\r\n\r\n`pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/rocm5.2`\r\n\r\nOr alternatively, use the rocm docker image to run ORTModule: https://hub.docker.com/r/rocm/pytorch/tags\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444870164/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444871924",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444871924",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444871924,
        "node_id": "IC_kwDOCVq1mM5WHv70",
        "user": {
            "login": "Looong01",
            "id": 69568351,
            "node_id": "MDQ6VXNlcjY5NTY4MzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/69568351?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Looong01",
            "html_url": "https://github.com/Looong01",
            "followers_url": "https://api.github.com/users/Looong01/followers",
            "following_url": "https://api.github.com/users/Looong01/following{/other_user}",
            "gists_url": "https://api.github.com/users/Looong01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Looong01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Looong01/subscriptions",
            "organizations_url": "https://api.github.com/users/Looong01/orgs",
            "repos_url": "https://api.github.com/users/Looong01/repos",
            "events_url": "https://api.github.com/users/Looong01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Looong01/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T01:27:46Z",
        "updated_at": "2023-02-25T01:27:46Z",
        "author_association": "NONE",
        "body": "> @Looong01 from the error it seems like the torch version might not be rocm. Is that possible?\r\n> \r\n> Would you please share the output of this command? `python -c \"import torch; print(torch.version.cuda); print(torch.version.hip)\"`\r\n\r\nAnd when I take the 4th step, ```pip install torch-ort```, of \"To reproduce\", it shows that pip tried to install ```nvidia-cuda-nvrtc-cu11```, ```nvidia_cudnn_cu11```, ```nvidia-cuda-runtime-cu11``` and ```nvidia-cublas-cu11```. And at that time, I started feeling something wrong would be made. Then, it comes true.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444871924/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444887030",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444887030",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444887030,
        "node_id": "IC_kwDOCVq1mM5WHzn2",
        "user": {
            "login": "Looong01",
            "id": 69568351,
            "node_id": "MDQ6VXNlcjY5NTY4MzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/69568351?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Looong01",
            "html_url": "https://github.com/Looong01",
            "followers_url": "https://api.github.com/users/Looong01/followers",
            "following_url": "https://api.github.com/users/Looong01/following{/other_user}",
            "gists_url": "https://api.github.com/users/Looong01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Looong01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Looong01/subscriptions",
            "organizations_url": "https://api.github.com/users/Looong01/orgs",
            "repos_url": "https://api.github.com/users/Looong01/repos",
            "events_url": "https://api.github.com/users/Looong01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Looong01/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T01:40:27Z",
        "updated_at": "2023-02-25T01:41:11Z",
        "author_association": "NONE",
        "body": "> Ok, so that confirms my hypothesis. You have torch cuda installed.\r\n> \r\n> In order to use ORTModule (onnxruntime-training) with rocm, you also need torch with rocm installed since ORTModule takes a dependency on torch.\r\n> \r\n> You could install it by following the PyTorch instructions here: https://pytorch.org/\r\n> \r\n> `pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/rocm5.2`\r\n> \r\n> Or alternatively, use the rocm docker image to run ORTModule: https://hub.docker.com/r/rocm/pytorch/tags\r\n\r\nIt works.\r\n\r\nBut actually, I know how to solve this problem before I put up this issue.\r\n\r\nThe purpose of my post is to remind you ONNX runtime team that the installing procedure of Ort-training version of ROCm on your [official website](https://onnxruntime.ai/) are wrong. And you should make it correct.\r\n\r\nWhen the users use ```pip install torch-ort```, it should detect whether it should install ROCm version of torch or CUDA version. But now, it installs the CUDA version by default, even if the previous installation ```onnxruntime-training``` is the version of ROCm.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444887030/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444903354",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1444903354",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1444903354,
        "node_id": "IC_kwDOCVq1mM5WH3m6",
        "user": {
            "login": "Looong01",
            "id": 69568351,
            "node_id": "MDQ6VXNlcjY5NTY4MzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/69568351?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Looong01",
            "html_url": "https://github.com/Looong01",
            "followers_url": "https://api.github.com/users/Looong01/followers",
            "following_url": "https://api.github.com/users/Looong01/following{/other_user}",
            "gists_url": "https://api.github.com/users/Looong01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Looong01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Looong01/subscriptions",
            "organizations_url": "https://api.github.com/users/Looong01/orgs",
            "repos_url": "https://api.github.com/users/Looong01/repos",
            "events_url": "https://api.github.com/users/Looong01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Looong01/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T01:54:05Z",
        "updated_at": "2023-02-25T01:54:05Z",
        "author_association": "NONE",
        "body": "> Ok, so that confirms my hypothesis. You have torch cuda installed.\r\n> \r\n> In order to use ORTModule (onnxruntime-training) with rocm, you also need torch with rocm installed since ORTModule takes a dependency on torch.\r\n> \r\n> You could install it by following the PyTorch instructions here: https://pytorch.org/\r\n> \r\n> `pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/rocm5.2`\r\n> \r\n> Or alternatively, use the rocm docker image to run ORTModule: https://hub.docker.com/r/rocm/pytorch/tags\r\n\r\nPlus:\r\n\r\nWhen I try to install the Active Nightly Packages of Ort-training version of ROCm, it will install CUDA version of ```onnxruntime-training``` (```onnxruntime-training-1.15.0.dev20230201002```, but it should be onnxruntime-training-1.15.0.dev20230201002+rocm54), with ```pip install onnxruntime-training -f https://download.onnxruntime.ai/onnxruntime_nightly_rocm54.html```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1444903354/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445001436",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1445001436",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1445001436,
        "node_id": "IC_kwDOCVq1mM5WIPjc",
        "user": {
            "login": "ytaous",
            "id": 4484531,
            "node_id": "MDQ6VXNlcjQ0ODQ1MzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4484531?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ytaous",
            "html_url": "https://github.com/ytaous",
            "followers_url": "https://api.github.com/users/ytaous/followers",
            "following_url": "https://api.github.com/users/ytaous/following{/other_user}",
            "gists_url": "https://api.github.com/users/ytaous/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ytaous/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ytaous/subscriptions",
            "organizations_url": "https://api.github.com/users/ytaous/orgs",
            "repos_url": "https://api.github.com/users/ytaous/repos",
            "events_url": "https://api.github.com/users/ytaous/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ytaous/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T05:39:53Z",
        "updated_at": "2023-02-25T05:45:55Z",
        "author_association": "MEMBER",
        "body": "@baijumeswani  - thanks for answering the issue.\r\n@Looong01 - thanks for bring in this up. Per https://github.com/pytorch/ort/blob/main/torch_ort/requirements.txt , torch_ort would perform default installation if one of them is missing. So I am gonna tag this as doc issue to be fixed in future release.\r\n@natke - can we please add more instruction here to clarify for rocm users? https://github.com/pytorch/ort#pre-requisites (would be even better if we can detect it's in rocm env, thus it won't pull cuda as default)\r\nthx !!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445001436/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445029238",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1445029238",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1445029238,
        "node_id": "IC_kwDOCVq1mM5WIWV2",
        "user": {
            "login": "Looong01",
            "id": 69568351,
            "node_id": "MDQ6VXNlcjY5NTY4MzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/69568351?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Looong01",
            "html_url": "https://github.com/Looong01",
            "followers_url": "https://api.github.com/users/Looong01/followers",
            "following_url": "https://api.github.com/users/Looong01/following{/other_user}",
            "gists_url": "https://api.github.com/users/Looong01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Looong01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Looong01/subscriptions",
            "organizations_url": "https://api.github.com/users/Looong01/orgs",
            "repos_url": "https://api.github.com/users/Looong01/repos",
            "events_url": "https://api.github.com/users/Looong01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Looong01/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-25T08:25:44Z",
        "updated_at": "2023-03-18T16:24:37Z",
        "author_association": "NONE",
        "body": "> @baijumeswani - thanks for answering the issue. @Looong01 - thanks for bring in this up. Per https://github.com/pytorch/ort/blob/main/torch_ort/requirements.txt , torch_ort would perform default installation if one of them is missing. So I am gonna tag this as doc issue to be fixed in future release. @natke - can we please add more instruction here to clarify for rocm users? https://github.com/pytorch/ort#pre-requisites (would be even better if we can detect it's in rocm env, thus it won't pull cuda as default) thx !!\r\n\r\nYeah, both Stable Packages and Activate Nightly Packages have problems. And theirs are not the same. The former is of the installation step for \"python -m torch_ort.configure\", the latter is of ```pip install onnxruntime-training -f https://download.onnxruntime.ai/onnxruntime_nightly_rocm54.html```.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1445029238/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1448709822",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14821#issuecomment-1448709822",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14821",
        "id": 1448709822,
        "node_id": "IC_kwDOCVq1mM5WWY6-",
        "user": {
            "login": "natke",
            "id": 3302433,
            "node_id": "MDQ6VXNlcjMzMDI0MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3302433?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/natke",
            "html_url": "https://github.com/natke",
            "followers_url": "https://api.github.com/users/natke/followers",
            "following_url": "https://api.github.com/users/natke/following{/other_user}",
            "gists_url": "https://api.github.com/users/natke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/natke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/natke/subscriptions",
            "organizations_url": "https://api.github.com/users/natke/orgs",
            "repos_url": "https://api.github.com/users/natke/repos",
            "events_url": "https://api.github.com/users/natke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/natke/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-28T19:05:08Z",
        "updated_at": "2023-02-28T19:05:08Z",
        "author_association": "MEMBER",
        "body": "Thanks @ytaous. I have created an issue for this in the pytorch/ort repo: https://github.com/pytorch/ort/issues/171\r\n\r\nCan this issue otherwise be closed?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1448709822/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]