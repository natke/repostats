[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600286422",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-600286422",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 600286422,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYwMDI4NjQyMg==",
        "user": {
            "login": "anmour90",
            "id": 39926350,
            "node_id": "MDQ6VXNlcjM5OTI2MzUw",
            "avatar_url": "https://avatars.githubusercontent.com/u/39926350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anmour90",
            "html_url": "https://github.com/anmour90",
            "followers_url": "https://api.github.com/users/anmour90/followers",
            "following_url": "https://api.github.com/users/anmour90/following{/other_user}",
            "gists_url": "https://api.github.com/users/anmour90/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anmour90/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anmour90/subscriptions",
            "organizations_url": "https://api.github.com/users/anmour90/orgs",
            "repos_url": "https://api.github.com/users/anmour90/repos",
            "events_url": "https://api.github.com/users/anmour90/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anmour90/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-17T20:40:51Z",
        "updated_at": "2020-03-17T20:40:51Z",
        "author_association": "NONE",
        "body": "I tried with my own LSTM model converted from Pytorch: \r\n[mylstm.onnx.zip](https://github.com/microsoft/onnxruntime/files/4345723/mylstm.onnx.zip)\r\nand made some changes in `sharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/C_Api_Sample.cpp`:\r\n```diff\r\ndiff --git a/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/C_Api_Sample.cpp b/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/C_Api_Sample.cpp\r\nindex 93aec5d0..de6c2aa0 100644\r\n--- a/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/C_Api_Sample.cpp\r\n+++ b/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/C_Api_Sample.cpp\r\n@@ -50,7 +50,7 @@ int main(int argc, char* argv[]) {\r\n #ifdef _WIN32\r\n   const wchar_t* model_path = L\"squeezenet.onnx\";\r\n #else\r\n-  const char* model_path = \"squeezenet.onnx\";\r\n+  const char* model_path = \"mylstm.onnx\";\r\n #endif\r\n \r\n   printf(\"Using Onnxruntime C API\\n\");\r\n@@ -118,11 +118,11 @@ int main(int argc, char* argv[]) {\r\n   //*************************************************************************\r\n   // Score the model using sample data, and inspect values\r\n \r\n-  size_t input_tensor_size = 224 * 224 * 3;  // simplify ... using known dim values to calculate size\r\n+  size_t input_tensor_size = 28 * 28;  // simplify ... using known dim values to calculate size\r\n                                              // use OrtGetTensorShapeElementCount() to get official size!\r\n \r\n   std::vector<float> input_tensor_values(input_tensor_size);\r\n-  std::vector<const char*> output_node_names = {\"softmaxout_1\"};\r\n+  std::vector<const char*> output_node_names = {\"output\"};\r\n \r\n   // initialize input data with values in [0.0, 1.0]\r\n   for (size_t i = 0; i < input_tensor_size; i++)\r\n@@ -147,11 +147,11 @@ int main(int argc, char* argv[]) {\r\n   // Get pointer to output tensor float values\r\n   float* floatarr;\r\n   CheckStatus(g_ort->GetTensorMutableData(output_tensor, (void**)&floatarr));\r\n-  assert(std::abs(floatarr[0] - 0.000045) < 1e-6);\r\n+  // assert(std::abs(floatarr[0] - 0.000045) < 1e-6);\r\n \r\n   // score the model, and print scores for first 5 classes\r\n-  for (int i = 0; i < 5; i++)\r\n-    printf(\"Score for class [%d] =  %f\\n\", i, floatarr[i]);\r\n+  // for (int i = 0; i < 5; i++)\r\n+  //   printf(\"Score for class [%d] =  %f\\n\", i, floatarr[i]);\r\n \r\n   // Results should be as below...\r\n   // Score for class[0] = 0.000045\r\n```\r\nBut had the same error:\r\n```\r\nNumber of inputs = 1\r\nInput 0 : name=input\r\nInput 0 : type=1\r\nInput 0 : num_dims=3\r\nInput 0 : dim 0=1\r\nInput 0 : dim 1=28\r\nInput 0 : dim 2=28\r\nnot enough space: expected 2159856865918044160, got 3136\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600286422/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600519818",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-600519818",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 600519818,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYwMDUxOTgxOA==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-18T09:40:49Z",
        "updated_at": "2020-03-18T09:40:49Z",
        "author_association": "MEMBER",
        "body": "-1 isn't a valid dim_value for a dimension. If you want to have a dynamic value you either need to leave the dimension unset, or use a dim_param with a name. There may be a pytorch setting or approach you need to take to export a dynamic dimension correctly.\r\n\r\nYou could possibly manually fix the model if that's an option. Example python from hint on  https://github.com/onnx/onnx/issues/654 (may also be info on exporting correctly from pytorch in that issue) to make the first dimension dynamic.\r\n\r\n```\r\nimport onnx\r\nmodel = onnx.load_model(<path to model>)\r\nmodel.graph.input[0].type.tensor_type.shape.dim[0].dim_param = '?'\r\n# m.graph.input[0].type.tensor_type.shape.dim[0].Clear() should also work\r\nonnx.save_model(<path to updated model>)\r\n```\r\n\r\nI'm guessing the 'not enough space' error is because you're trying to create a tensor (probably a call to CreateTensorAsOrtValue or CreateTensorWithDataAsOrtValue) with input shape info that is invalid because it either has negative values in the shape, or you're providing an invalid length for the shape (length should be number of dimensions). The latter seems more likely given the 'expected' value seems fairly random. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600519818/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600806989",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-600806989",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 600806989,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYwMDgwNjk4OQ==",
        "user": {
            "login": "anmour90",
            "id": 39926350,
            "node_id": "MDQ6VXNlcjM5OTI2MzUw",
            "avatar_url": "https://avatars.githubusercontent.com/u/39926350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anmour90",
            "html_url": "https://github.com/anmour90",
            "followers_url": "https://api.github.com/users/anmour90/followers",
            "following_url": "https://api.github.com/users/anmour90/following{/other_user}",
            "gists_url": "https://api.github.com/users/anmour90/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anmour90/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anmour90/subscriptions",
            "organizations_url": "https://api.github.com/users/anmour90/orgs",
            "repos_url": "https://api.github.com/users/anmour90/repos",
            "events_url": "https://api.github.com/users/anmour90/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anmour90/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-18T19:01:52Z",
        "updated_at": "2020-03-18T19:01:52Z",
        "author_association": "NONE",
        "body": "@skottmckay Thank you for the suggestion. When looking into the sample code, I found the input shape for my model is invalid. After changing the input shape, I was able to run the inference on my LSTM model. Closing now.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/600806989/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669214267",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669214267",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669214267,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTIxNDI2Nw==",
        "user": {
            "login": "jobpasin",
            "id": 28859267,
            "node_id": "MDQ6VXNlcjI4ODU5MjY3",
            "avatar_url": "https://avatars.githubusercontent.com/u/28859267?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jobpasin",
            "html_url": "https://github.com/jobpasin",
            "followers_url": "https://api.github.com/users/jobpasin/followers",
            "following_url": "https://api.github.com/users/jobpasin/following{/other_user}",
            "gists_url": "https://api.github.com/users/jobpasin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jobpasin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jobpasin/subscriptions",
            "organizations_url": "https://api.github.com/users/jobpasin/orgs",
            "repos_url": "https://api.github.com/users/jobpasin/repos",
            "events_url": "https://api.github.com/users/jobpasin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jobpasin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-05T14:07:01Z",
        "updated_at": "2020-08-05T14:07:01Z",
        "author_association": "NONE",
        "body": "> @anmour90 Thank you for the suggestion. When looking into the sample code, I found the input shape for my model is invalid. After changing the input shape, I was able to run the inference on my LSTM model. Closing now.\r\n\r\nI also facing a similar problem to yours. Could you clarify how you change the input shape and how does the input shape invalid (is it because the dynamic axes has a dimension size of -1)? Did you change it during exporting PyTorch model process or did you set a new input shape in c++ onnxruntime?\r\n\r\nI tried the approach by @skottmckay but the dimension size still is -1 when loading in c++. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669214267/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669525996",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669525996",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669525996,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTUyNTk5Ng==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-05T21:38:33Z",
        "updated_at": "2020-08-05T21:38:33Z",
        "author_association": "MEMBER",
        "body": "> I tried the approach by @skottmckay but the dimension size still is -1 when loading in c++.\r\n\r\nCan you clarify what 'when loading in c++' means? Where did you see the -1 value? In something returned from onnxruntime or in something you were going to pass in to onnxruntime?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669525996/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669652244",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669652244",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669652244,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTY1MjI0NA==",
        "user": {
            "login": "jobpasin",
            "id": 28859267,
            "node_id": "MDQ6VXNlcjI4ODU5MjY3",
            "avatar_url": "https://avatars.githubusercontent.com/u/28859267?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jobpasin",
            "html_url": "https://github.com/jobpasin",
            "followers_url": "https://api.github.com/users/jobpasin/followers",
            "following_url": "https://api.github.com/users/jobpasin/following{/other_user}",
            "gists_url": "https://api.github.com/users/jobpasin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jobpasin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jobpasin/subscriptions",
            "organizations_url": "https://api.github.com/users/jobpasin/orgs",
            "repos_url": "https://api.github.com/users/jobpasin/repos",
            "events_url": "https://api.github.com/users/jobpasin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jobpasin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-06T02:52:15Z",
        "updated_at": "2020-08-06T02:52:29Z",
        "author_association": "NONE",
        "body": "@skottmckay\r\n\r\nUsing the code from [this example](https://github.com/microsoft/onnxruntime/blob/master/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp), and change the model to mine instead. \r\n\r\nThe part where the code prints dimensions of input are shown as follows:\r\n```\r\nNumber of inputs = 1\r\nInput 0 : name=input\r\nInput 0 : type=1\r\nInput 0 : num_dims=3\r\nInput 0 : dim 0=-1\r\nInput 0 : dim 1=1\r\nInput 0 : dim 2=161\r\n```\r\n\r\nI tried using a model with and without your code but the result is the same, dim 0 is still -1.\r\n```\r\nimport onnx\r\nmodel = onnx.load_model(<path to model>)\r\nmodel.graph.input[0].type.tensor_type.shape.dim[0].dim_param = '?'\r\n# m.graph.input[0].type.tensor_type.shape.dim[0].Clear() should also work\r\nonnx.save_model(<path to updated model>)\r\n```\r\n\r\nFYI: the way I export onnx model is using `torch.onnx.export` as follows:\r\n\r\n```\r\ntorch.onnx.export(model,  \r\n                          dummy_input, \r\n                          export_name,\r\n                          opset_version=10,  \r\n                          input_names=input_names, \r\n                          output_names=output_names,  \r\n                          dynamic_axes={'input': {0: 'sequential'},  # Set dynamic axes here\r\n                                        'output': {0: 'sequential'}},\r\n                          )\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669652244/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669745481",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669745481",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669745481,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTc0NTQ4MQ==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-06T07:01:04Z",
        "updated_at": "2020-08-06T07:01:04Z",
        "author_association": "MEMBER",
        "body": "There are two different representations, and in the original issue (IIRC) the issue I mentioned was with the value set for the dimension in the model.\r\n\r\nThe value in the model can be one of 3 things. A dim_value (int), a dim_param (symbolic name) or unknown (neither dim_value nor dim_param). -1 is not a valid value for dim_value. In the model a symbolic dimension should either have a name in dim_param (e.g. 'batch') or be unknown.\r\n\r\nInternally in ORT we process the model and handle cases where there is not a dim_value. We internally represent the dim_value as -1 in some data structures. That is what you're seeing returned in the example code as input_node_dims is a vector of int64.\r\n\r\nIf you were to look at the model in Netron you should be able to see the original values. Or you could print them out using python\r\n\r\n```\r\nfor input in model.graph.input:\r\n    print(input.name)\r\n    for dim in input.type.tensor_type.shape.dim:\r\n        if dim.HasField('dim_param'):\r\n            print(dim.dim_param)\r\n        elif dim.HasField('dim_value'):\r\n            print(dim.dim_value)\r\n        else:\r\n            print('unknown')\r\n\r\n```\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669745481/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669840763",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669840763",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669840763,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTg0MDc2Mw==",
        "user": {
            "login": "jobpasin",
            "id": 28859267,
            "node_id": "MDQ6VXNlcjI4ODU5MjY3",
            "avatar_url": "https://avatars.githubusercontent.com/u/28859267?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jobpasin",
            "html_url": "https://github.com/jobpasin",
            "followers_url": "https://api.github.com/users/jobpasin/followers",
            "following_url": "https://api.github.com/users/jobpasin/following{/other_user}",
            "gists_url": "https://api.github.com/users/jobpasin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jobpasin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jobpasin/subscriptions",
            "organizations_url": "https://api.github.com/users/jobpasin/orgs",
            "repos_url": "https://api.github.com/users/jobpasin/repos",
            "events_url": "https://api.github.com/users/jobpasin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jobpasin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-06T10:12:31Z",
        "updated_at": "2020-08-06T10:24:44Z",
        "author_association": "NONE",
        "body": "Thanks for the info. I used the code you provide in python and the dimension I got is (sequential, 1, 161). 'sequential' is the name given in the dynamic axes parameter while exporting the model, which should be symbolic name I suppose? \r\n\r\nIn c++, however, the dimension is shown as (-1, 1, 161) regardless (as shown in the comment above). Is this normal? If so, maybe the problem might be somewhere else instead and I'll try to look for other possible reason.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669840763/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669851715",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-669851715",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 669851715,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTg1MTcxNQ==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-06T10:37:48Z",
        "updated_at": "2020-08-06T10:37:48Z",
        "author_association": "MEMBER",
        "body": "It is normal for ORT to report that as the input shape. When creating the input you need to replace the -1 with a valid value though. \r\n\r\nIn the example the dimensions are all concrete values, so the values in input_node_dims can be passed in directly.\r\n\r\nhttps://github.com/microsoft/onnxruntime/blob/9a73c8f448612ca7c5f0635f3f128c3809f63b86/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp#L108\r\n\r\nWith a symbolic dimension you can't do that. ORT needs to know the actual dimensions to know how much data it is being given. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/669851715/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745850438",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-745850438",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 745850438,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTg1MDQzOA==",
        "user": {
            "login": "DuckJ",
            "id": 22610833,
            "node_id": "MDQ6VXNlcjIyNjEwODMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/22610833?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DuckJ",
            "html_url": "https://github.com/DuckJ",
            "followers_url": "https://api.github.com/users/DuckJ/followers",
            "following_url": "https://api.github.com/users/DuckJ/following{/other_user}",
            "gists_url": "https://api.github.com/users/DuckJ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DuckJ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DuckJ/subscriptions",
            "organizations_url": "https://api.github.com/users/DuckJ/orgs",
            "repos_url": "https://api.github.com/users/DuckJ/repos",
            "events_url": "https://api.github.com/users/DuckJ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DuckJ/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-16T07:46:03Z",
        "updated_at": "2020-12-16T07:48:40Z",
        "author_association": "NONE",
        "body": "Have you solved this problem？ I also set the dynamic dimensions (width and height) when pytorch model into onnx, when I run [this sample](https://github.com/microsoft/onnxruntime/blob/master/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp), the error is\r\n```\r\n terminate called after throwing an instance of 'Ort::Exception,\r\nwhat()   tried creating tensor with negative value in shape\r\nAborted (core dumped)\r\n```\r\nThe input is \r\n```\r\nNumber of inputs = 1\r\nInput 0 : name=input\r\nInput 0 : type=1\r\nInput 0 : num_dims=4\r\nInput 0 : dim 0=-1\r\nInput 0 : dim 1=3\r\nInput 0 : dim 2=-1\r\nInput 0 : dim 3=-1\r\n```\r\nSo, I used the code below to change the shape in onnx, Netron seems shape has changed, but in [this sample](https://github.com/microsoft/onnxruntime/blob/master/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp), input dims still is -1. I cannot modify the onnx by pytorch exporting, is there any other way? Anyone can help me,thanks.\r\n```\r\n import onnx\r\nmodel = onnx.load_model(<path to model>)\r\nmodel.graph.input[0].type.tensor_type.shape.dim[2].dim_param = 1120\r\nmodel.graph.input[0].type.tensor_type.shape.dim[3].dim_param = 860\r\n# m.graph.input[0].type.tensor_type.shape.dim[0].Clear() should also work\r\nonnx.save_model(<path to updated model>)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745850438/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745857967",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-745857967",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 745857967,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTg1Nzk2Nw==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-16T07:51:51Z",
        "updated_at": "2020-12-16T07:51:51Z",
        "author_association": "MEMBER",
        "body": "The error is from attempting to create input with a negative value for a dimension. When you create the input tensor you have to provide the actual values for all dimensions - i.e. dims 0, 2 and 3 need real values when calling the create tensor API so we know how big it is. This is separate to the model supporting symbolic values for those dimensions. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745857967/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745878113",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-745878113",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 745878113,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTg3ODExMw==",
        "user": {
            "login": "DuckJ",
            "id": 22610833,
            "node_id": "MDQ6VXNlcjIyNjEwODMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/22610833?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DuckJ",
            "html_url": "https://github.com/DuckJ",
            "followers_url": "https://api.github.com/users/DuckJ/followers",
            "following_url": "https://api.github.com/users/DuckJ/following{/other_user}",
            "gists_url": "https://api.github.com/users/DuckJ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DuckJ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DuckJ/subscriptions",
            "organizations_url": "https://api.github.com/users/DuckJ/orgs",
            "repos_url": "https://api.github.com/users/DuckJ/repos",
            "events_url": "https://api.github.com/users/DuckJ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DuckJ/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-16T08:06:34Z",
        "updated_at": "2020-12-16T08:06:34Z",
        "author_association": "NONE",
        "body": "if I set the dynamic dimension in onnx, is there any way to run the sample in c++?\r\nif i add the code before [this](https://github.com/microsoft/onnxruntime/blob/master/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp#L108)， is it work?\r\n```\r\ninput_node_dims[0] = 1\r\ninput_node_dims[1] = 3\r\ninput_node_dims[2] =1120\r\ninput_node_dims[3] =860\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/745878113/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747157543",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-747157543",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 747157543,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzE1NzU0Mw==",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-17T02:09:01Z",
        "updated_at": "2020-12-17T02:09:01Z",
        "author_association": "MEMBER",
        "body": "Yes.\r\n\r\nIn the example you referenced it's asking the model what the expected dimensions are for an input that does **not** have dynamic dimensions, so there are no -1 values in input_node_dims from this call: https://github.com/microsoft/onnxruntime/blob/0fa04bdc50a0dfbd3a3c99ced03aa824457516ae/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp#L72\r\n\r\nIf the input has dynamic dimensions like in your case you will get -1 when asking the **model** what dimensions the input has. You can attempt to execute the model with any non-zero value for those dimensions.\r\n\r\nWhen you create the actual data for the input, it needs to have a concrete size, so any -1 value in input_node_dims needs to be replaced with the real value. We don't know how much memory to allocate for the input data without this information. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747157543/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747280297",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3242#issuecomment-747280297",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3242",
        "id": 747280297,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzI4MDI5Nw==",
        "user": {
            "login": "DuckJ",
            "id": 22610833,
            "node_id": "MDQ6VXNlcjIyNjEwODMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/22610833?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DuckJ",
            "html_url": "https://github.com/DuckJ",
            "followers_url": "https://api.github.com/users/DuckJ/followers",
            "following_url": "https://api.github.com/users/DuckJ/following{/other_user}",
            "gists_url": "https://api.github.com/users/DuckJ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/DuckJ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/DuckJ/subscriptions",
            "organizations_url": "https://api.github.com/users/DuckJ/orgs",
            "repos_url": "https://api.github.com/users/DuckJ/repos",
            "events_url": "https://api.github.com/users/DuckJ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/DuckJ/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-17T08:04:58Z",
        "updated_at": "2020-12-17T08:04:58Z",
        "author_association": "NONE",
        "body": "thanks，the problem has sloved",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747280297/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]