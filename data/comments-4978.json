[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/684102751",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4978#issuecomment-684102751",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4978",
        "id": 684102751,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDEwMjc1MQ==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-31T23:36:17Z",
        "updated_at": "2020-08-31T23:36:17Z",
        "author_association": "MEMBER",
        "body": "The warning itself indicates that some initializers are not being used by any node and hence they are being removed. This should not affect results and should not be the cause of the mis-match.\r\n\r\nThe result mis-match might be due to a PyTorch to ONNX export issue or due to a bug in ORT. Can you share the ONNX model with inputs and provided outputs to start the investigation ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/684102751/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/684146714",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4978#issuecomment-684146714",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4978",
        "id": 684146714,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4NDE0NjcxNA==",
        "user": {
            "login": "dengfenglai321",
            "id": 50360389,
            "node_id": "MDQ6VXNlcjUwMzYwMzg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/50360389?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dengfenglai321",
            "html_url": "https://github.com/dengfenglai321",
            "followers_url": "https://api.github.com/users/dengfenglai321/followers",
            "following_url": "https://api.github.com/users/dengfenglai321/following{/other_user}",
            "gists_url": "https://api.github.com/users/dengfenglai321/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dengfenglai321/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dengfenglai321/subscriptions",
            "organizations_url": "https://api.github.com/users/dengfenglai321/orgs",
            "repos_url": "https://api.github.com/users/dengfenglai321/repos",
            "events_url": "https://api.github.com/users/dengfenglai321/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dengfenglai321/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-01T02:02:47Z",
        "updated_at": "2020-09-01T02:50:48Z",
        "author_association": "NONE",
        "body": "> The warning itself indicates that some initializers are not being used by any node and hence they are being removed. This should not affect results and should not be the cause of the mis-match.\r\n> The result mis-match might be due to a PyTorch to ONNX export issue or due to a bug in ORT. Can you share the ONNX model with inputs and provided outputs to start the investigation ?\r\n\r\nhi, hariharans29, thanks for your reply, I will give you ennough information.\r\n\r\n**pytorch -> onnx** as below:\r\n\r\n**code:** \r\n```\r\ndef rexnet_onnx():\r\n\r\n    model = rexnetv1.ReXNetV1(width_mult=1.0)\r\n    model.output = nn.Sequential(\r\n        nn.Dropout(0.2),\r\n        nn.Conv2d(1280, 3, 1, bias=True))\r\n\r\n    input_img_size = 224\r\n    pthfile = 'ckpt/labelsmooth_rexnetV1_wupan_baseon_22w.pt'\r\n\r\n    input_names = [\"image\"]\r\n    output_names = [\"class\"]\r\n    model.load_state_dict(torch.load(pthfile, map_location='cpu'))\r\n    model.eval()\r\n\r\n    dummy_input = torch.randn(1, 3, input_img_size, input_img_size)\r\n    torch.onnx.export(model, dummy_input, \"labelsmooth_rexnetV1_wupan_baseon_22w.onnx\", verbose=True, input_names=input_names,\r\n                      output_names=output_names)\r\n\r\n```\r\n\r\n\r\nand onnx model is :\r\n[链接：https://pan.baidu.com/s/1lftt4t9MfyhnbmYc5RrNng \r\n提取码：1111](url)\r\n\r\nand onnxruntime code as below:\r\n```\r\nclass ONNXModel():\r\n    def __init__(self, onnx_path):\r\n\r\n        self.onnx_session = onnxruntime.InferenceSession(onnx_path)\r\n        self.input_name = self.get_input_name(self.onnx_session)\r\n        self.output_name = self.get_output_name(self.onnx_session)\r\n        print(\"input_name:{}\".format(self.input_name))\r\n        print(\"output_name:{}\".format(self.output_name))\r\n\r\n    def get_output_name(self, onnx_session):\r\n\r\n        output_name = []\r\n        for node in onnx_session.get_outputs():\r\n            output_name.append(node.name)\r\n        return output_name\r\n\r\n    def get_input_name(self, onnx_session):\r\n\r\n        input_name = []\r\n        for node in onnx_session.get_inputs():\r\n            input_name.append(node.name)\r\n        return input_name\r\n\r\n    def get_input_feed(self, input_name, image_numpy):\r\n\r\n        input_feed = {}\r\n        for name in input_name:\r\n            input_feed[name] = image_numpy\r\n        return input_feed\r\n\r\n    def forward(self, image_numpy):\r\n        input_feed = self.get_input_feed(self.input_name, image_numpy)\r\n        scores = self.onnx_session.run(self.output_name, input_feed=input_feed)\r\n        return scores\r\n\r\n\r\ndef to_numpy(tensor):\r\n    return tensor.detach().cpu().numpy() if tensor.requires_grad else tensor.cpu().numpy()\r\n\r\n\r\nr_model_path = \"labelsmooth_rexnetV1_wupan_baseon_22w.onnx\"\r\n\r\nimg = cv2.imread(\"./predict_image/111.jpg\")\r\nimg = cv2.resize(img, (224, 224), interpolation=cv2.INTER_LINEAR)\r\nprint('img type11 is {}'.format(type(img)))\r\nimg = cv2.cvtColor(img ,cv2.COLOR_BGR2RGB)\r\nimg = img.astype(np.float32)\r\n\r\nprint('img type22 is {}'.format(type(img)))\r\nto_tensor = transforms.Compose([\r\n            transforms.ToTensor(),\r\n            transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])\r\n\r\n        ])\r\n\r\nimg = to_tensor(img)\r\nprint('img shape is {}'.format(img.shape))\r\nimg = img.unsqueeze_(0)\r\n\r\n\r\nrnet1 = ONNXModel(r_model_path)\r\nout = rnet1.forward(to_numpy(img))\r\nprint(out)\r\n```\r\n\r\n\r\n\r\nthe onnx reslut is \r\n**input_name:['image']\r\noutput_name:['class']\r\n[array([-1.0429933, -0.8967751,  1.878135 ], dtype=float32)]**\r\n\r\n\r\n\r\nbut pytorch predict result is \r\n**net output is tensor([-0.9798,  1.6599, -1.0679])**\r\n\r\n\r\n\r\n**could you help me? anything is wrong?\r\nand I use resnet101 , pytorch -> onnx, they are also different in result..............................**\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/684146714/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689085103",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4978#issuecomment-689085103",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4978",
        "id": 689085103,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTA4NTEwMw==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-08T19:22:11Z",
        "updated_at": "2020-09-08T19:22:11Z",
        "author_association": "MEMBER",
        "body": "Are you using the GPU package or the CPU package ? If you get consistent results between the CPU and GPU package (different from PyTorch), it most likely means that there was something wrong from the export from PyTorch.\r\n\r\nBut if one of the two packages give the expected results, please let me know - I ll investigate the diff in the other package.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689085103/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/723522851",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4978#issuecomment-723522851",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4978",
        "id": 723522851,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzUyMjg1MQ==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-11-08T02:48:35Z",
        "updated_at": "2020-11-08T02:48:35Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/723522851/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/727718237",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4978#issuecomment-727718237",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4978",
        "id": 727718237,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcyNzcxODIzNw==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-11-16T03:47:44Z",
        "updated_at": "2020-11-16T03:47:44Z",
        "author_association": "NONE",
        "body": "This issue has been automatically closed due to inactivity. Please reactivate if further support is needed.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/727718237/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]