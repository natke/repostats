[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1455969166",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1455969166",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1455969166,
        "node_id": "IC_kwDOCVq1mM5WyFOO",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-06T11:34:44Z",
        "updated_at": "2023-03-06T11:34:44Z",
        "author_association": "MEMBER",
        "body": "It sounds off for it to be trying to load a DLL for the native ORT code on iOS as usually when you link against the xcframework which has static libraries they would be included as part of the app. Not sure if Unity is throwing something off, but here is where we set the library name to call the native ORT code (Microsoft.ML.OnnxRuntime) from the C# managed bindings (Microsoft.ML.OnnxRuntime.Managed). For iOS that should be `__Internal` not `onnxruntime`.\r\n\r\nhttps://github.com/microsoft/onnxruntime/blob/f88b97ede272e54d67e7f4da165359df4b534a4a/csharp/src/Microsoft.ML.OnnxRuntime/NativeMethods.shared.cs#L451-L465\r\n\r\nWhich managed library from Microsoft.ML.OnnxRuntime.Managed is being included in your app? It should either be net6.0-ios16.1 or xamarinios10. The various libraries that the nuget package contains are shown here:\r\n\r\n<img width=\"534\" alt=\"image\" src=\"https://user-images.githubusercontent.com/979079/223098897-7d2b6810-28d7-4fe3-b827-46ca7606151a.png\">\r\n\r\nYou can possibly check by looking at the managed dll being used by your app in ILSpy. Here's what NativeMethods.NativeLib.DLLName is set to in microsoft.ml.onnxruntime.managed.1.14.1\\lib\\net6.0-ios16.1\\Microsoft.ML.OnnxRuntime.dll:\r\n\r\n<img width=\"592\" alt=\"image\" src=\"https://user-images.githubusercontent.com/979079/223099197-19f829f8-edd6-431f-9fb9-ba4d9f2cb0f6.png\">\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1455969166/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1456672364",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1456672364",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1456672364,
        "node_id": "IC_kwDOCVq1mM5W0w5s",
        "user": {
            "login": "digitalmonkey",
            "id": 757286,
            "node_id": "MDQ6VXNlcjc1NzI4Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/757286?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/digitalmonkey",
            "html_url": "https://github.com/digitalmonkey",
            "followers_url": "https://api.github.com/users/digitalmonkey/followers",
            "following_url": "https://api.github.com/users/digitalmonkey/following{/other_user}",
            "gists_url": "https://api.github.com/users/digitalmonkey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/digitalmonkey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/digitalmonkey/subscriptions",
            "organizations_url": "https://api.github.com/users/digitalmonkey/orgs",
            "repos_url": "https://api.github.com/users/digitalmonkey/repos",
            "events_url": "https://api.github.com/users/digitalmonkey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/digitalmonkey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-06T18:06:31Z",
        "updated_at": "2023-03-06T18:06:31Z",
        "author_association": "NONE",
        "body": "Thank you! I'll take a look at these. In the meantime, I have a workaround - I ended up writing a native iOS plugin for Unity that links to onnxruntime directly with Cocoapods. It works. However, I will try to get the managed version of Onnxruntime working with your suggestions too.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1456672364/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590611559",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1590611559",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1590611559,
        "node_id": "IC_kwDOCVq1mM5ezs5n",
        "user": {
            "login": "supnaobed",
            "id": 6361146,
            "node_id": "MDQ6VXNlcjYzNjExNDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6361146?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/supnaobed",
            "html_url": "https://github.com/supnaobed",
            "followers_url": "https://api.github.com/users/supnaobed/followers",
            "following_url": "https://api.github.com/users/supnaobed/following{/other_user}",
            "gists_url": "https://api.github.com/users/supnaobed/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/supnaobed/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/supnaobed/subscriptions",
            "organizations_url": "https://api.github.com/users/supnaobed/orgs",
            "repos_url": "https://api.github.com/users/supnaobed/repos",
            "events_url": "https://api.github.com/users/supnaobed/events{/privacy}",
            "received_events_url": "https://api.github.com/users/supnaobed/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-14T07:14:47Z",
        "updated_at": "2023-06-14T07:14:47Z",
        "author_association": "NONE",
        "body": "@digitalmonkey \n\nHi there,\n\nI've run into the same issue you've described here and it's been stalling my progress for weeks now. Could you please share the solution you've found or the plugin you used to overcome this problem? Any help would be greatly appreciated.\n\nThank you in advance for your time and assistance.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590611559/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590752165",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1590752165",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1590752165,
        "node_id": "IC_kwDOCVq1mM5e0POl",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-14T08:45:34Z",
        "updated_at": "2023-06-14T08:45:34Z",
        "author_association": "MEMBER",
        "body": "IIUC Unity is C# based so I would expect you'd need to use the Microsoft.ML.OnnxRuntime.Managed nuget package for the C# bindings, and the Microsoft.ML.OnnxRuntime native package for the native library. \r\n\r\nThe native package contains an xcframework for iOS with static libraries. Due to that the onnxruntime native code should be built into the app as there's no dynamic library to load. Any error about failing to load onnxruntime.dll would indicate something is incorrect with the setup and it's choosing the wrong option for iOS.\r\n\r\nWhich library from the Microsoft.ML.OnnxRuntime.Managed package is being included in your app?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590752165/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1631692263",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1631692263",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1631692263,
        "node_id": "IC_kwDOCVq1mM5hQaXn",
        "user": {
            "login": "natke",
            "id": 3302433,
            "node_id": "MDQ6VXNlcjMzMDI0MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3302433?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/natke",
            "html_url": "https://github.com/natke",
            "followers_url": "https://api.github.com/users/natke/followers",
            "following_url": "https://api.github.com/users/natke/following{/other_user}",
            "gists_url": "https://api.github.com/users/natke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/natke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/natke/subscriptions",
            "organizations_url": "https://api.github.com/users/natke/orgs",
            "repos_url": "https://api.github.com/users/natke/repos",
            "events_url": "https://api.github.com/users/natke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/natke/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-12T00:49:53Z",
        "updated_at": "2023-07-12T00:49:53Z",
        "author_association": "MEMBER",
        "body": "@digitalmonkey Did you manage to get this working? Let us know how you went!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1631692263/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1631890110",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1631890110",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1631890110,
        "node_id": "IC_kwDOCVq1mM5hRKq-",
        "user": {
            "login": "digitalmonkey",
            "id": 757286,
            "node_id": "MDQ6VXNlcjc1NzI4Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/757286?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/digitalmonkey",
            "html_url": "https://github.com/digitalmonkey",
            "followers_url": "https://api.github.com/users/digitalmonkey/followers",
            "following_url": "https://api.github.com/users/digitalmonkey/following{/other_user}",
            "gists_url": "https://api.github.com/users/digitalmonkey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/digitalmonkey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/digitalmonkey/subscriptions",
            "organizations_url": "https://api.github.com/users/digitalmonkey/orgs",
            "repos_url": "https://api.github.com/users/digitalmonkey/repos",
            "events_url": "https://api.github.com/users/digitalmonkey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/digitalmonkey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-12T05:50:37Z",
        "updated_at": "2023-07-12T05:50:37Z",
        "author_association": "NONE",
        "body": "@natke I eventually got things to work by implementing my own C-based native iOS plugin using the Onnx C runtime libraries. I used Cocoapods to add the onyx runtime libraries to the Xcode project produced by Unity. My Podfile looked like this:\r\n`platform :ios, '13.0'\r\n\r\ntarget 'UnityFramework' do\r\n  # Comment the next line if you don't want to use dynamic frameworks\r\n  use_frameworks!\r\n\r\n  # Pods for UnityFramework\r\n  pod 'onnxruntime-c'\r\n  \r\n  pod 'onnxruntime-extensions-c'\r\n  \r\nend\r\n\r\npost_install do |installer|\r\n  installer.pods_project.targets.each do |target|\r\n    target.build_configurations.each do |config|\r\n      config.build_settings['CODE_SIGNING_ALLOWED'] = 'NO'\r\n    end\r\n  end\r\nend`\r\n\r\nI also had to include my .onnx file in the resource bundle of my Unity-iPhone project. \r\n\r\nHowever, I hope with the new Unity Sentis coming out, they apparently can support LSTM networks better than the Barracuda version, so if I can get that to work, there hopefully will not be the need to do this nasty workaround.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1631890110/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1645403440",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14914#issuecomment-1645403440",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14914",
        "id": 1645403440,
        "node_id": "IC_kwDOCVq1mM5iEt0w",
        "user": {
            "login": "blueyred",
            "id": 84193813,
            "node_id": "MDQ6VXNlcjg0MTkzODEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/84193813?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/blueyred",
            "html_url": "https://github.com/blueyred",
            "followers_url": "https://api.github.com/users/blueyred/followers",
            "following_url": "https://api.github.com/users/blueyred/following{/other_user}",
            "gists_url": "https://api.github.com/users/blueyred/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/blueyred/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/blueyred/subscriptions",
            "organizations_url": "https://api.github.com/users/blueyred/orgs",
            "repos_url": "https://api.github.com/users/blueyred/repos",
            "events_url": "https://api.github.com/users/blueyred/events{/privacy}",
            "received_events_url": "https://api.github.com/users/blueyred/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-21T11:04:30Z",
        "updated_at": "2023-07-21T11:04:30Z",
        "author_association": "NONE",
        "body": "One of the issues here is that Unity supports upto .Net4 not .Net6, so using the libraries from the nuget \"net6.0-ios16.1\" will be problematic. Is it possible to use the \"netstandard2.0\" to build the IOS managed code?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1645403440/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]