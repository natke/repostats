[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1634684024",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16492#issuecomment-1634684024",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16492",
        "id": 1634684024,
        "node_id": "IC_kwDOCVq1mM5hb0x4",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-07-13T18:10:23Z",
        "updated_at": "2023-07-13T18:10:23Z",
        "author_association": "MEMBER",
        "body": "Also affected seem to be ArgMax/ArgMin/Max/Min.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1634684024/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1662857163",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16492#issuecomment-1662857163",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16492",
        "id": 1662857163,
        "node_id": "IC_kwDOCVq1mM5jHS_L",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-02T19:28:58Z",
        "updated_at": "2023-08-02T19:38:23Z",
        "author_association": "MEMBER",
        "body": "1. Can you attach a model here for repro?\r\n2. What are you observing? Does ORT crash because it consumes a lot of memory?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1662857163/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1662924250",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16492#issuecomment-1662924250",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16492",
        "id": 1662924250,
        "node_id": "IC_kwDOCVq1mM5jHjXa",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-02T20:27:25Z",
        "updated_at": "2023-08-02T20:27:25Z",
        "author_association": "MEMBER",
        "body": "From the references above I am seeing the following. Please, give me a pointer to the repo with those scripts.\r\n\r\n> [gw0] [ 81%] FAILED onnxscript/tests/function_libs/torch_lib/ops_test.py::TestOutputConsistencyEagerCPU::test_output_match_opinfo__clamp_max_cpu_float16 \r\n\r\n> [gw0] [ 38%] FAILED onnxscript/tests/function_libs/torch_lib/ops_test.py::TestOutputConsistencyFullGraphCPU::test_output_match_opinfo__min_other_binary_cpu_float16 \r\n\r\n> [gw0] [ 36%] FAILED onnxscript/tests/function_libs/torch_lib/ops_test.py::TestOutputConsistencyFullGraphCPU::test_output_match_opinfo__min_other_binary_cpu_float16 \r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1662924250/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1664844868",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16492#issuecomment-1664844868",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16492",
        "id": 1664844868,
        "node_id": "IC_kwDOCVq1mM5jO4RE",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-04T01:27:58Z",
        "updated_at": "2023-08-04T01:28:28Z",
        "author_association": "MEMBER",
        "body": "### Summary\r\n\r\nONNX Runtime raises when executing test `ops_test.TestOutputConsistencyFullGraphCPU.test_output_match_opinfo__amin_cpu_float32` in ONNX Script `TorchLib`.\r\n\r\nTo recreate this report, use\r\n\r\n```bash\r\nCREATE_REPRODUCTION_REPORT=1 python -m pytest onnxscript/tests/function_libs/torch_lib/ops_test.py -k test_output_match_opinfo__amin_cpu_float32\r\n```\r\n\r\n### To reproduce\r\n\r\n```python\r\nimport google.protobuf.text_format\r\nimport numpy as np\r\nfrom numpy import array, float16, float32, float64, int32, int64\r\nimport onnx\r\nimport onnxruntime as ort\r\n\r\n# Run n times\r\nN = 1\r\n\r\nonnx_model_text = \"\"\"\r\nir_version: 8\r\nopset_import {\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n  version: 1\r\n}\r\nopset_import {\r\n  domain: \"\"\r\n  version: 18\r\n}\r\nproducer_name: \"pytorch\"\r\nproducer_version: \"2.0.1\"\r\ngraph {\r\n  node {\r\n    input: \"input_0\"\r\n    input: \"dim\"\r\n    output: \"_val_2\"\r\n    name: \"aten_amin_0\"\r\n    op_type: \"aten_amin\"\r\n    domain: \"pkg.onnxscript.torch_lib\"\r\n    attribute {\r\n      name: \"keepdim\"\r\n      type: INT\r\n      i: 1\r\n    }\r\n    doc_string: \"\"\r\n  }\r\n  name: \"torch_jit\"\r\n  input {\r\n    name: \"input_0\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 1\r\n        shape {\r\n        }\r\n      }\r\n    }\r\n  }\r\n  input {\r\n    name: \"dim\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 7\r\n        shape {\r\n          dim {\r\n            dim_value: 1\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  output {\r\n    name: \"_val_2\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 1\r\n        shape {\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nfunctions {\r\n  name: \"aten_amin\"\r\n  input: \"self\"\r\n  input: \"dim\"\r\n  output: \"return_val\"\r\n  node {\r\n    input: \"self\"\r\n    input: \"dim\"\r\n    output: \"return_val\"\r\n    name: \"n0\"\r\n    op_type: \"ReduceMin\"\r\n    domain: \"\"\r\n    attribute {\r\n      name: \"keepdims\"\r\n      ref_attr_name: \"keepdim\"\r\n      type: INT\r\n    }\r\n  }\r\n  doc_string: \"amin(Tensor self, int[1] dim=[], bool keepdim=False) -> Tensor\"\r\n  opset_import {\r\n    domain: \"\"\r\n    version: 18\r\n  }\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n}\r\n\r\n\"\"\"\r\n\r\nort_inputs = {'input_0': array(6.880847, dtype=float32), 'dim': array([0])}\r\n\r\n# Set up the inference session\r\nsession_options = ort.SessionOptions()\r\nsession_options.graph_optimization_level = ort.GraphOptimizationLevel.ORT_DISABLE_ALL\r\nonnx_model = onnx.ModelProto()\r\ngoogle.protobuf.text_format.Parse(onnx_model_text, onnx_model)\r\n\r\n# Uncomment this line to save the model to a file for examination\r\n# onnx.save_model(onnx_model, \"test_output_match_opinfo__amin_cpu_float32.onnx\")\r\n\r\nonnx.checker.check_model(onnx_model)\r\nprint(\"checker passed\")\r\nsession = ort.InferenceSession(onnx_model.SerializeToString(), session_options, providers=(\"CPUExecutionProvider\",))\r\nprint(\"inference session created\")\r\n\r\n# Run the model\r\nfor _ in range(N):\r\n    ort_outputs = session.run(None, ort_inputs)\r\n\r\n```\r\n\r\n### Full error stack\r\n\r\n```\r\n\r\n  File \"/home/runner/work/onnxscript/onnxscript/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 533, in _capture_graph_and_evaluate_torch_script_evaluator\r\n    return _safe_ort_session_run(onnx_model.SerializeToString(), ort_inputs)\r\n  File \"/home/runner/work/onnxscript/onnxscript/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 347, in _safe_ort_session_run\r\n    raise OrtAbortedError()\r\n\r\n```\r\n\r\n### Environment\r\n\r\n```\r\nOS: Linux-5.15.0-1042-azure-x86_64-with-glibc2.35\r\nPython version: 3.10.12 (main, Jun  7 2023, 13:43:11) [GCC 11.3.0]\r\nonnx==1.15.0.dev20230731\r\nonnxruntime==1.15.0\r\nnumpy==1.23.5\r\ntorch==2.0.1+cu117\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1664844868/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]