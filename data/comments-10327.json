[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1018980020",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1018980020",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1018980020,
        "node_id": "IC_kwDOCVq1mM48vGa0",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-22T00:03:08Z",
        "updated_at": "2022-01-22T00:03:08Z",
        "author_association": "MEMBER",
        "body": "Since you can not pre-allocate tensor on GPU ahead of time, you will need to deal with GPU memory that ORT allocates on output. To gain access to that memory, call `data_ptr()` on the corresponding output OrtValue which would be a pointer to that buffer on a GPU device.  You can obtain the shape by calling `shape()`. You can then decide what to do with it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1018980020/reactions",
            "total_count": 5,
            "+1": 5,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026716566",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1026716566",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1026716566,
        "node_id": "IC_kwDOCVq1mM49MnOW",
        "user": {
            "login": "Ki6an",
            "id": 63173962,
            "node_id": "MDQ6VXNlcjYzMTczOTYy",
            "avatar_url": "https://avatars.githubusercontent.com/u/63173962?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ki6an",
            "html_url": "https://github.com/Ki6an",
            "followers_url": "https://api.github.com/users/Ki6an/followers",
            "following_url": "https://api.github.com/users/Ki6an/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ki6an/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Ki6an/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ki6an/subscriptions",
            "organizations_url": "https://api.github.com/users/Ki6an/orgs",
            "repos_url": "https://api.github.com/users/Ki6an/repos",
            "events_url": "https://api.github.com/users/Ki6an/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Ki6an/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-02-01T10:58:34Z",
        "updated_at": "2022-02-01T10:58:55Z",
        "author_association": "NONE",
        "body": "thank you for the response, ik this is not related to onnxruntime but do you know how to create a torch tensor from a data pointer? \r\n\r\nafter some searching, I found that using [dlpack ](https://github.com/microsoft/onnxruntime/issues/4162) is a plausible workaround.\r\n\r\nhttps://github.com/microsoft/onnxruntime/blob/50ae97a8bd5184915f2bb2e81727f05770d74d9f/orttraining/orttraining/python/training/ortmodule/_utils.py#L13-L18\r\n\r\nI think it is available only in the `onnxruntime-training` library. are there any plans on including it in the `onnxruntime-gpu`?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1026716566/reactions",
            "total_count": 3,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100581297",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1100581297",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1100581297,
        "node_id": "IC_kwDOCVq1mM5BmYmx",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-16T05:55:03Z",
        "updated_at": "2022-04-16T05:55:03Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100581297/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129412854",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1129412854",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1129412854,
        "node_id": "IC_kwDOCVq1mM5DUXj2",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-17T23:22:35Z",
        "updated_at": "2022-05-17T23:24:28Z",
        "author_association": "NONE",
        "body": "Hi @Ki6an, thanks for the question & answer. I am facing the same issue (`torch.from_numpy(ort_output.numpy()` is too slow) and wonder whether the dlpack workaround above still works. I'm using Onnxruntime 1.11.1 and it seems that `OrtValue` does not have the `to_dlpack` API. Thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129412854/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129440077",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1129440077",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1129440077,
        "node_id": "IC_kwDOCVq1mM5DUeNN",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-18T00:20:08Z",
        "updated_at": "2022-05-18T00:20:27Z",
        "author_association": "NONE",
        "body": "\r\n\r\n> Hi @Ki6an, thanks for the question & answer. I am facing the same issue (`torch.from_numpy(ort_output.numpy()` is too slow) and wonder whether the dlpack workaround above still works. I'm using Onnxruntime 1.11.1 and it seems that `OrtValue` does not have the `to_dlpack` API. Thanks!\r\n\r\nI was able to use the following code:\r\nInstall the package: `pip install onnxruntime-training==1.11.1` \r\n\r\n```from onnxruntime.training.ortmodule._utils import _ortvalue_to_torch_tensor\r\n# x is an ortvalue\r\ndevice=torch.device('cuda')\r\na =_ortvalue_to_torch_tensor( x._ortvalue,  device)\r\n```\r\nIs that the way you used it?\r\n\r\nHowever, in my case the running/conversion time ratio seems not as big as yours, the running time/conversion time is 1000:1 in my case (when using `torch.from_numpy`. using the _ortvalue_to_torch_tensor reduces the conversion time to 1/5).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129440077/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129493902",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1129493902",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1129493902,
        "node_id": "IC_kwDOCVq1mM5DUrWO",
        "user": {
            "login": "Ki6an",
            "id": 63173962,
            "node_id": "MDQ6VXNlcjYzMTczOTYy",
            "avatar_url": "https://avatars.githubusercontent.com/u/63173962?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ki6an",
            "html_url": "https://github.com/Ki6an",
            "followers_url": "https://api.github.com/users/Ki6an/followers",
            "following_url": "https://api.github.com/users/Ki6an/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ki6an/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Ki6an/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ki6an/subscriptions",
            "organizations_url": "https://api.github.com/users/Ki6an/orgs",
            "repos_url": "https://api.github.com/users/Ki6an/repos",
            "events_url": "https://api.github.com/users/Ki6an/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Ki6an/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-18T02:11:15Z",
        "updated_at": "2022-05-18T02:12:32Z",
        "author_association": "NONE",
        "body": "@brevity2021  if you are able to use both `onnxruntime-gpu` and `onnxruntime-training` libraries at the same time after installing them from pip.  \r\nthen yes, import it as `from onnxruntime.training.ortmodule._utils import _ortvalue_to_torch_tensor` and use it as you've shown.\r\n\r\n> However, in my case the running/conversion time ratio seems not as big as yours, the running time/conversion time is 1000:1 in my case (when using torch.from_numpy. using the _ortvalue_to_torch_tensor reduces the conversion time to 1/5).\r\n\r\nglad you were able to reduce the conversion time,\r\nre: running/conversion ratio: I think it depends on the model you are running. the above numbers were for the t5 model, and  I was converting the pkvs (around 24 large tensors) to torch.tensors.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1129493902/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1130315674",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1130315674",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1130315674,
        "node_id": "IC_kwDOCVq1mM5DXz-a",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-18T17:51:49Z",
        "updated_at": "2022-05-18T17:51:49Z",
        "author_association": "NONE",
        "body": "> @brevity2021 if you are able to use both `onnxruntime-gpu` and `onnxruntime-training` libraries at the same time after installing them from pip. then yes, import it as `from onnxruntime.training.ortmodule._utils import _ortvalue_to_torch_tensor` and use it as you've shown.\r\n> \r\n> > However, in my case the running/conversion time ratio seems not as big as yours, the running time/conversion time is 1000:1 in my case (when using torch.from_numpy. using the _ortvalue_to_torch_tensor reduces the conversion time to 1/5).\r\n> \r\n> glad you were able to reduce the conversion time, re: running/conversion ratio: I think it depends on the model you are running. the above numbers were for the t5 model, and I was converting the pkvs (around 24 large tensors) to torch.tensors.\r\n\r\nThank you for your prompt reply! I was using a different seq2seq model, and I didn't use pkvs (per my previous experiment that didn't help much on gpu), so that explains the conversion difference. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1130315674/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1205657944",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1205657944",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1205657944,
        "node_id": "IC_kwDOCVq1mM5H3OFY",
        "user": {
            "login": "rajhans",
            "id": 4219011,
            "node_id": "MDQ6VXNlcjQyMTkwMTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4219011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rajhans",
            "html_url": "https://github.com/rajhans",
            "followers_url": "https://api.github.com/users/rajhans/followers",
            "following_url": "https://api.github.com/users/rajhans/following{/other_user}",
            "gists_url": "https://api.github.com/users/rajhans/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rajhans/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rajhans/subscriptions",
            "organizations_url": "https://api.github.com/users/rajhans/orgs",
            "repos_url": "https://api.github.com/users/rajhans/repos",
            "events_url": "https://api.github.com/users/rajhans/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rajhans/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-04T19:00:38Z",
        "updated_at": "2022-08-04T19:00:38Z",
        "author_association": "NONE",
        "body": "Are there any updates on the ability to convert from OrtValue to torch.Tensor (presumably via dlpack) during inference? I am running into the same issue when running a T5 model while trying to avoid a copy to the CPU. Using ONNXRuntime with conversion to numpy (using HF's optimum since [this PR](https://github.com/huggingface/optimum/pull/199) is merged) is 2x slower than just vanilla HF transformer on a v100 gpu.\r\n\r\nI tried the suggestion here, but installing from source is not an ideal experience for deployment and is brittle: https://github.com/microsoft/onnxruntime/issues/10286#issuecomment-1013477686",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1205657944/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284615410",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284615410",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284615410,
        "node_id": "IC_kwDOCVq1mM5Mkazy",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-19T21:56:53Z",
        "updated_at": "2022-10-19T21:56:53Z",
        "author_association": "NONE",
        "body": "Unfortunately, even the `_ortvalue_to_torch_tensor` is no longer in the onnxruntime-training package. This has been moved to OnnxRuntime but `to_dlpack` is only exposed when training is enabled.[[link](https://github.com/microsoft/onnxruntime/blob/86c5c07ea419b935541d0abd2a16bf204e19c6ed/onnxruntime/python/onnxruntime_pybind_ortvalue.cc#L282)]. Is there any plan to expose this at the inference time also?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284615410/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284629112",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284629112",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284629112,
        "node_id": "IC_kwDOCVq1mM5MkeJ4",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-19T22:16:04Z",
        "updated_at": "2022-10-19T22:16:17Z",
        "author_association": "MEMBER",
        "body": "`_ortvalues_to_torch_tensor` is still [available in `onnxruntime-training`](https://github.com/microsoft/onnxruntime/blob/86c5c07ea419b935541d0abd2a16bf204e19c6ed/orttraining/orttraining/python/training/ortmodule/_utils.py#L66).\r\n\r\nExample on how to use it can be found [here](https://github.com/microsoft/onnxruntime/blob/86c5c07ea419b935541d0abd2a16bf204e19c6ed/orttraining/orttraining/python/training/ortmodule/_training_manager.py#L166). ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284629112/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284641521",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284641521",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284641521,
        "node_id": "IC_kwDOCVq1mM5MkhLx",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-19T22:34:13Z",
        "updated_at": "2022-10-19T22:34:22Z",
        "author_association": "NONE",
        "body": "thanks @baijumeswani! But the above requires `OrtValueVector` instead of `OrtValue`. They seem very similar, wonder why we can only use `OrtValueVector`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284641521/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284647429",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284647429",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284647429,
        "node_id": "IC_kwDOCVq1mM5MkioF",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-19T22:43:24Z",
        "updated_at": "2022-10-19T22:43:24Z",
        "author_association": "MEMBER",
        "body": "`OrtValueVector` is a vector of `OrtValue`s. Definition can be found here: https://github.com/microsoft/onnxruntime/blob/86c5c07ea419b935541d0abd2a16bf204e19c6ed/onnxruntime/python/onnxruntime_pybind_ortvalue.cc#L307.\r\n\r\nIf you only care about single `OrtValue`, just add a single value to the vector, and call `_ortvalues_to_torch_tensor` above.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284647429/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284690237",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284690237",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284690237,
        "node_id": "IC_kwDOCVq1mM5MktE9",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-19T23:16:06Z",
        "updated_at": "2022-10-19T23:16:06Z",
        "author_association": "NONE",
        "body": "Thank you @baijumeswani ! I know we can create a vector, but am just trying to understand the reason of not being able to use `OrtValue`. It sounds like just an additional API exposure.\r\nI have this need to convert the IOBinding output (which is an `OrtValue`) to tensor for speeding up the inference, so hopefully, I can have as few additional steps as possible. \r\nSo just trying to understand whether this is intentional (some reason behind it), or this is something we could expect to fix in the future. Thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284690237/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284719426",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284719426",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284719426,
        "node_id": "IC_kwDOCVq1mM5Mk0NC",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-20T00:02:29Z",
        "updated_at": "2022-10-24T18:08:39Z",
        "author_association": "MEMBER",
        "body": "@brevity2021 for training purposes, we never had the explicit requirement to convert a single ortvalue to tensor. We had to work with converting an unknown number of torch tensors to and from ortvalues. We initially performed this conversion one tensor at a time by looping over the torch tensors and calling `_ortvalue_to_torch_tensor` on them.\r\n\r\nBut after PR #11176, we removed this function and started using `_ortvalues_to_torch_tensor`. This is intentional.\r\n\r\nFor the functionality you're looking for (to convert a single `OrtValue`), I am not sure if that is in the works. In his PR, @xadupre asks this question:\r\n> Second item which I leave open for discussion: should we also enable the implementation of DLPack protocol in onnxruntime and not only in onnxruntime-training? Since November last year, numpy implements DLPack protocol. It was introduced in 0.22.\r\n\r\nI am not sure if he found any answer to this question yet.\r\n\r\nFor the time being, please use `_ortvalues_to_torch_tensor`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284719426/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284918411",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1284918411",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1284918411,
        "node_id": "IC_kwDOCVq1mM5MlkyL",
        "user": {
            "login": "brevity2021",
            "id": 88120581,
            "node_id": "MDQ6VXNlcjg4MTIwNTgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/88120581?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brevity2021",
            "html_url": "https://github.com/brevity2021",
            "followers_url": "https://api.github.com/users/brevity2021/followers",
            "following_url": "https://api.github.com/users/brevity2021/following{/other_user}",
            "gists_url": "https://api.github.com/users/brevity2021/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brevity2021/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brevity2021/subscriptions",
            "organizations_url": "https://api.github.com/users/brevity2021/orgs",
            "repos_url": "https://api.github.com/users/brevity2021/repos",
            "events_url": "https://api.github.com/users/brevity2021/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brevity2021/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-20T04:46:45Z",
        "updated_at": "2022-10-20T04:46:45Z",
        "author_association": "NONE",
        "body": "Thank you for the explanation. I believe for the original [post](https://github.com/microsoft/onnxruntime/issues/10327#issue-1108641603) and this [reply](https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1205657944) we are all more interested in the use case that converts the IOBinding output OrtValue to tensor, not training.\r\n\r\nThe reason we need this: especially for text generation models, we need to call onnxruntime inference multiple times for the autoregressive decoding process. This is typically run on GPU and we would like the tensor to stay there. Generally the previous call's output will be the next call's input. If OrtValue needs to be converted to CPU then converted back for the next inference call (for the next step of generation), it will be very slow. We need a way to convert to the tensor on GPU, without copying to CPU due to numpy.\r\n\r\nInstalling both `onnxruntime-gpu` and `onnxruntime-training` can have issues. I've seen the same error as described in this [issue](https://github.com/microsoft/onnxruntime/issues/9754), after installing both `onnxruntime-gpu` and `onnxruntime-training` by pip. (these two replies [1](https://github.com/microsoft/onnxruntime/issues/9754#issuecomment-978198118) [2](https://github.com/microsoft/onnxruntime/issues/9754#issuecomment-1098097912) report the same thing). Plus for the inference we don't really need `onnxruntime-training` except for this function. This creates concerns when using onnxruntime in production for this instability. Ideally, we only want one library for our inference code.\r\n\r\nI believe moving OrtValue->torch.Tensor to Onnxruntime will benefit people with such use cases and save people time to seek workarounds or alternatives. @baijumeswani @xadupre can we consider that? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1284918411/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285539066",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1285539066",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1285539066,
        "node_id": "IC_kwDOCVq1mM5Mn8T6",
        "user": {
            "login": "xadupre",
            "id": 22452781,
            "node_id": "MDQ6VXNlcjIyNDUyNzgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22452781?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xadupre",
            "html_url": "https://github.com/xadupre",
            "followers_url": "https://api.github.com/users/xadupre/followers",
            "following_url": "https://api.github.com/users/xadupre/following{/other_user}",
            "gists_url": "https://api.github.com/users/xadupre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xadupre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xadupre/subscriptions",
            "organizations_url": "https://api.github.com/users/xadupre/orgs",
            "repos_url": "https://api.github.com/users/xadupre/repos",
            "events_url": "https://api.github.com/users/xadupre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xadupre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-20T13:27:16Z",
        "updated_at": "2022-10-20T13:27:16Z",
        "author_association": "MEMBER",
        "body": "numpy implemented the dlpack protocol: https://numpy.org/devdocs/reference/generated/numpy.from_dlpack.html#numpy.from_dlpack. It will be released in 1.24, probably at the end of this year. I guess it makes sense to enable it in onnxruntime.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285539066/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285821164",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1285821164",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1285821164,
        "node_id": "IC_kwDOCVq1mM5MpBLs",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-20T16:13:50Z",
        "updated_at": "2022-10-20T16:13:50Z",
        "author_association": "MEMBER",
        "body": "There's no reason to do any conversion. Please look for \"You can also bind inputs and outputs directly to a PyTorch tensor.\" on this page https://onnxruntime.ai/docs/api/python/api_summary.html.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285821164/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285864687",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1285864687",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1285864687,
        "node_id": "IC_kwDOCVq1mM5MpLzv",
        "user": {
            "login": "xadupre",
            "id": 22452781,
            "node_id": "MDQ6VXNlcjIyNDUyNzgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22452781?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xadupre",
            "html_url": "https://github.com/xadupre",
            "followers_url": "https://api.github.com/users/xadupre/followers",
            "following_url": "https://api.github.com/users/xadupre/following{/other_user}",
            "gists_url": "https://api.github.com/users/xadupre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xadupre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xadupre/subscriptions",
            "organizations_url": "https://api.github.com/users/xadupre/orgs",
            "repos_url": "https://api.github.com/users/xadupre/repos",
            "events_url": "https://api.github.com/users/xadupre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xadupre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-20T16:49:22Z",
        "updated_at": "2022-10-20T16:49:22Z",
        "author_association": "MEMBER",
        "body": "We could but dlpack is also about transferring the ownership of the data. So when a torch tensor is created through the dlpack protocol, torch becomes responsible for its deletion as well. Without the protocol, the buffer hosting the data needs to remain alive. The user has to be aware of that. The data may stay in memory longer than needed.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1285864687/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1289403108",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10327#issuecomment-1289403108",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10327",
        "id": 1289403108,
        "node_id": "IC_kwDOCVq1mM5M2rrk",
        "user": {
            "login": "baijumeswani",
            "id": 12852605,
            "node_id": "MDQ6VXNlcjEyODUyNjA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/12852605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baijumeswani",
            "html_url": "https://github.com/baijumeswani",
            "followers_url": "https://api.github.com/users/baijumeswani/followers",
            "following_url": "https://api.github.com/users/baijumeswani/following{/other_user}",
            "gists_url": "https://api.github.com/users/baijumeswani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baijumeswani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baijumeswani/subscriptions",
            "organizations_url": "https://api.github.com/users/baijumeswani/orgs",
            "repos_url": "https://api.github.com/users/baijumeswani/repos",
            "events_url": "https://api.github.com/users/baijumeswani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baijumeswani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-24T18:08:45Z",
        "updated_at": "2022-10-24T18:08:45Z",
        "author_association": "MEMBER",
        "body": "Closing this issue now. Thanks for the inputs @pranavsharma, @xadupre, @brevity2021 ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1289403108/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]