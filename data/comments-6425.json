[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/778514039",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-778514039",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 778514039,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3ODUxNDAzOQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-12T23:38:05Z",
        "updated_at": "2021-02-12T23:38:05Z",
        "author_association": "MEMBER",
        "body": "\"error: Access to the path '/home/user/.nuget/packages/microsoft.ml.onnxruntime.gpu/1.5.2-dev-20210113-0851-ad7cc541f/runtimes/linux-x64/native' is denied. error: Permission denied\"\r\n\r\nI think it is because the /home/user/.nuget is not owned by you. Please check the folder's permissions.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/778514039/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/778589649",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-778589649",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 778589649,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3ODU4OTY0OQ==",
        "user": {
            "login": "rligocki",
            "id": 9701384,
            "node_id": "MDQ6VXNlcjk3MDEzODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9701384?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rligocki",
            "html_url": "https://github.com/rligocki",
            "followers_url": "https://api.github.com/users/rligocki/followers",
            "following_url": "https://api.github.com/users/rligocki/following{/other_user}",
            "gists_url": "https://api.github.com/users/rligocki/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rligocki/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rligocki/subscriptions",
            "organizations_url": "https://api.github.com/users/rligocki/orgs",
            "repos_url": "https://api.github.com/users/rligocki/repos",
            "events_url": "https://api.github.com/users/rligocki/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rligocki/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-13T09:26:55Z",
        "updated_at": "2021-02-13T09:26:55Z",
        "author_association": "NONE",
        "body": "I already checked permission. Whole folder was owned by my profile. Also tried to remove whole folder. At last I tried to run dotnet and nuget as root. Still the same error.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/778589649/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/779572881",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-779572881",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 779572881,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTU3Mjg4MQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-16T04:27:51Z",
        "updated_at": "2021-02-16T04:27:51Z",
        "author_association": "MEMBER",
        "body": "I'll try to see if I can reproduce the same error on Ubuntu x64 Linux.  I don't have access to Jetson . ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/779572881/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/815251033",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-815251033",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 815251033,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxNTI1MTAzMw==",
        "user": {
            "login": "mrry",
            "id": 192142,
            "node_id": "MDQ6VXNlcjE5MjE0Mg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/192142?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrry",
            "html_url": "https://github.com/mrry",
            "followers_url": "https://api.github.com/users/mrry/followers",
            "following_url": "https://api.github.com/users/mrry/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrry/subscriptions",
            "organizations_url": "https://api.github.com/users/mrry/orgs",
            "repos_url": "https://api.github.com/users/mrry/repos",
            "events_url": "https://api.github.com/users/mrry/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrry/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-07T20:45:43Z",
        "updated_at": "2021-04-07T20:45:43Z",
        "author_association": "CONTRIBUTOR",
        "body": "@sarah-widder and I have been investigating a similar problem with a custom NuGet package. **TL;DR**: It was not a permissions error. The (temporary) solution involved commenting out the following lines in the nuspec generation script: https://github.com/microsoft/onnxruntime/blob/844361bc67dcd149987290ec326dc492376190fb/tools/nuget/generate_nuspec_for_native_nuget.py#L383-L395\r\n\r\nFrom what we could tell, the `dotnet add package` command was failing when it processed these lines in the nuspec file:\r\n\r\n```\r\n<file src=\"/repo/build/Release/onnxruntime_perf_test\" target=\"runtimes\\linux-x64\\native\" />\r\n<file src=\"/repo/build/Release/onnx_test_runner\" target=\"runtimes\\linux-x64\\native\" />\r\n```\r\n\r\nLooking at `strace -f` output, we discovered that (for some unknown reason), the process was trying to `creat` a file at the \"runtimes/linux-x64/native\" path, which already existed as a directory:\r\n\r\n```\r\n[pid  9017] creat(\"/.../.nuget/packages/microsoft.ml.onnxruntime.gpu/1.6.0-dev-20210406-1148-9317f75a1/runtimes/linux-x64/native\", 0766 <unfinished ...>\r\n[pid  9017] <... creat resumed>)        = -1 EISDIR (Is a directory)\r\n```\r\n\r\nAt a guess, this could be a NuGet bug when attempting to install a file that doesn't exist in the source package, and the EISDIR is transformed into a permission error somewhere in dotnet? It seems to affect a lot of people, based on a search for the error, although there doesn't seem to be a standard solution.\r\n\r\nThinking this through, there are a couple of possibly-better alternative approaches to fixing your problem:\r\n\r\n* Ensure that the build doesn't create `onnxruntime_perf_test` and `onnx_test_runner` in the expected place. Judging by the logic in generate_nuspec_for_native_nuget.py, it looks like these files *are* present in our environment (due to `os.path.exists()` in the condition), and it looks like the CMake build defaults to building all unit tests (including the `onnxruntime_perf_test` code). Passing `--cmake_extra_defines=onnxruntime_BUILD_UNIT_TESTS=OFF` to build.py would prevent them from being built, I think.\r\n* Figuring out what exactly is invalid about the generated package. I haven't actually looked at the generated ZIP archive to see if the files are in there, for example. Maybe there is something we should do in https://github.com/microsoft/onnxruntime/blob/master/tools/nuget/validate_nuget.py to ensure that the package will install (e.g. cross-checking the files in the nuspec with the files in the ZIP?)\r\n\r\nIn addition, we should probably see what we can to do improve the error message in NuGet once the root cause is understood.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/815251033/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/815311015",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-815311015",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 815311015,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxNTMxMTAxNQ==",
        "user": {
            "login": "mrry",
            "id": 192142,
            "node_id": "MDQ6VXNlcjE5MjE0Mg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/192142?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrry",
            "html_url": "https://github.com/mrry",
            "followers_url": "https://api.github.com/users/mrry/followers",
            "following_url": "https://api.github.com/users/mrry/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrry/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrry/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrry/subscriptions",
            "organizations_url": "https://api.github.com/users/mrry/orgs",
            "repos_url": "https://api.github.com/users/mrry/repos",
            "events_url": "https://api.github.com/users/mrry/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrry/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-07T22:49:55Z",
        "updated_at": "2021-04-07T22:49:55Z",
        "author_association": "CONTRIBUTOR",
        "body": "@snnn Is it possible that the problem stems from these lines in the csproj? https://github.com/microsoft/onnxruntime/blob/8d737f977056444a307f1b7f0bcd402fba62d790/csharp/src/Microsoft.ML.OnnxRuntime/Microsoft.ML.OnnxRuntime.csproj#L155-L168\r\n\r\nIf I'm understanding correctly (and I'm not an expert in this area, so could be wrong!), it looks like the csproj is testing for the existence of files ending in a \".exe\" extension (so will match on Windows only), but the `nuget_dependencies` for a Linux build in generate_nuspec_for_native_nuget.py is testing for the existence of binaries without the \".exe\" extension: https://github.com/microsoft/onnxruntime/blob/8d737f977056444a307f1b7f0bcd402fba62d790/tools/nuget/generate_nuspec_for_native_nuget.py#L204-L214\r\n\r\nPerhaps this inconsistency leads to a nuspec file that refers to files that are expected to be in the package, but not actually copied by the directives in the csproj? And then NuGet itself gets confused if the files aren't there?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/815311015/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/816296828",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6425#issuecomment-816296828",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6425",
        "id": 816296828,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjI5NjgyOA==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-08T23:22:07Z",
        "updated_at": "2021-04-08T23:22:07Z",
        "author_association": "MEMBER",
        "body": "I feel you are right. Let me try to understand this script... ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/816296828/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]