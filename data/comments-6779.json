[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/809972040",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-809972040",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 809972040,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTk3MjA0MA==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-30T07:09:38Z",
        "updated_at": "2021-03-30T07:09:38Z",
        "author_association": "MEMBER",
        "body": "Did you take a look at onnxruntime\\test\\shared_lib\\custom_op_utils.h? There are several examples of writing custom ops. onnxruntime\\test\\shared_lib\\test_inference.cc shows how to register them. You should be able to wrap the ATen functionality in your custom op DLL and register it with ORT.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/809972040/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/845798480",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-845798480",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 845798480,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0NTc5ODQ4MA==",
        "user": {
            "login": "mrljwlm",
            "id": 23266835,
            "node_id": "MDQ6VXNlcjIzMjY2ODM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23266835?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrljwlm",
            "html_url": "https://github.com/mrljwlm",
            "followers_url": "https://api.github.com/users/mrljwlm/followers",
            "following_url": "https://api.github.com/users/mrljwlm/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrljwlm/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrljwlm/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrljwlm/subscriptions",
            "organizations_url": "https://api.github.com/users/mrljwlm/orgs",
            "repos_url": "https://api.github.com/users/mrljwlm/repos",
            "events_url": "https://api.github.com/users/mrljwlm/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrljwlm/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-21T08:56:38Z",
        "updated_at": "2021-05-21T08:56:38Z",
        "author_association": "NONE",
        "body": "hellow, i want to use yolact++ with onnxruntime too, have you solve you problem??",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/845798480/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/846331435",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-846331435",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 846331435,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0NjMzMTQzNQ==",
        "user": {
            "login": "gsxab",
            "id": 20609510,
            "node_id": "MDQ6VXNlcjIwNjA5NTEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/20609510?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gsxab",
            "html_url": "https://github.com/gsxab",
            "followers_url": "https://api.github.com/users/gsxab/followers",
            "following_url": "https://api.github.com/users/gsxab/following{/other_user}",
            "gists_url": "https://api.github.com/users/gsxab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gsxab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gsxab/subscriptions",
            "organizations_url": "https://api.github.com/users/gsxab/orgs",
            "repos_url": "https://api.github.com/users/gsxab/repos",
            "events_url": "https://api.github.com/users/gsxab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gsxab/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-22T01:54:33Z",
        "updated_at": "2021-05-27T11:54:37Z",
        "author_association": "NONE",
        "body": "@mrljwlm\r\nUpdate:\r\n\r\nFor the scalars (except `kernel_h` and `kernel_w`), some extra attributes should be dumped when exporting the network to onnxruntime, \r\n```python\r\n# add below class _DCNv2(Function):\r\n@staticmethod\r\ndef symbolic(g, input, offset, mask, weight, bias, stride, padding, dilation, deformable_groups):\r\n  return g.op(\"yolact::DCNv2\", input, offset, mask, weight, bias, name_s=\"DCNv2\", \r\n    dilation_h_s=str(dilation[0]), dilation_w_s=str(dilation[1]),\r\n    # other attributes\r\n  )\r\n```\r\nand\r\n```c++\r\nxxx = std::stoi(ort_.KernelInfoGetAttribute<std::string>(info, \"xxx\"));\r\n```\r\ncan be applied to extract attributes from onnx model in constructors.\r\n(in my version, it seems that only strings are supported when dumping.)\r\n\r\nKernel size params `kernel_h` and `kernel_w` are extracted from `weight.shape[2:4]` in `forward` function where `weight` is a Tensor, while in `symbolic`, `weight` is a `torch._C.value`, where there appears to be no attribute named `shape`.\r\nLuckily all kernel sizes are 3-by-3 in YOLACT++, so you can just use 3 directly.\r\n\r\nThen you can pass them all into the function `dcn_v2_forward`.\r\n\r\nBut for the matrices I haven't found a correct way. \r\n```c++\r\nconst OrtValue* input_##name = ort_.KernelContext_GetInput(context, /* order */);\r\nat::Tensor ATen_##name = at::from_blob((void*) ort_.GetTensorData<float>(name), ort_.GetTensorTypeAndShape(name)));\r\n```\r\ncompiles, but due to incorrent alignment, SIGSEGV will be raised by `at::native::(anonymous namespace)::vectorized_loop<...>` in a thread started by `dcn_v2_cpu.cpp:89`, a call to `at::mul`...",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/846331435/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/850772961",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-850772961",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 850772961,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDc3Mjk2MQ==",
        "user": {
            "login": "gsxab",
            "id": 20609510,
            "node_id": "MDQ6VXNlcjIwNjA5NTEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/20609510?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gsxab",
            "html_url": "https://github.com/gsxab",
            "followers_url": "https://api.github.com/users/gsxab/followers",
            "following_url": "https://api.github.com/users/gsxab/following{/other_user}",
            "gists_url": "https://api.github.com/users/gsxab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gsxab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gsxab/subscriptions",
            "organizations_url": "https://api.github.com/users/gsxab/orgs",
            "repos_url": "https://api.github.com/users/gsxab/repos",
            "events_url": "https://api.github.com/users/gsxab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gsxab/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-29T05:21:27Z",
        "updated_at": "2021-05-29T05:21:27Z",
        "author_association": "NONE",
        "body": "@mrljwlm\r\nI think I 've made it on CUDA. For my implementation, please see:\r\nhttps://github.com/gsxab/YolactDeploymentORTCpp",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/850772961/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017070659",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-1017070659",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 1017070659,
        "node_id": "IC_kwDOCVq1mM48n0RD",
        "user": {
            "login": "zengjie617789",
            "id": 25050291,
            "node_id": "MDQ6VXNlcjI1MDUwMjkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25050291?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zengjie617789",
            "html_url": "https://github.com/zengjie617789",
            "followers_url": "https://api.github.com/users/zengjie617789/followers",
            "following_url": "https://api.github.com/users/zengjie617789/following{/other_user}",
            "gists_url": "https://api.github.com/users/zengjie617789/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/zengjie617789/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zengjie617789/subscriptions",
            "organizations_url": "https://api.github.com/users/zengjie617789/orgs",
            "repos_url": "https://api.github.com/users/zengjie617789/repos",
            "events_url": "https://api.github.com/users/zengjie617789/events{/privacy}",
            "received_events_url": "https://api.github.com/users/zengjie617789/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-20T02:57:33Z",
        "updated_at": "2022-01-20T02:57:33Z",
        "author_association": "NONE",
        "body": "@gsxab thank you for your advice. I used the register code from you and it can export onnx model successfully but cannot use onnxruntime to inference. \r\n```\r\nfrom torch.onnx import register_custom_op_symbolic\r\nregister_custom_op_symbolic('yolact::DCNv2', _DCNv2.symbolic, 11)\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017070659/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017589047",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6779#issuecomment-1017589047",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6779",
        "id": 1017589047,
        "node_id": "IC_kwDOCVq1mM48py03",
        "user": {
            "login": "gsxab",
            "id": 20609510,
            "node_id": "MDQ6VXNlcjIwNjA5NTEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/20609510?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gsxab",
            "html_url": "https://github.com/gsxab",
            "followers_url": "https://api.github.com/users/gsxab/followers",
            "following_url": "https://api.github.com/users/gsxab/following{/other_user}",
            "gists_url": "https://api.github.com/users/gsxab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gsxab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gsxab/subscriptions",
            "organizations_url": "https://api.github.com/users/gsxab/orgs",
            "repos_url": "https://api.github.com/users/gsxab/repos",
            "events_url": "https://api.github.com/users/gsxab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gsxab/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-20T14:52:44Z",
        "updated_at": "2022-01-20T14:52:44Z",
        "author_association": "NONE",
        "body": "@zengjie617789\r\nI guess the importer/inference program also requires registering to recognize the user-defined operator. Please refer to my comments just above.\r\nhttps://github.com/microsoft/onnxruntime/issues/6779#issuecomment-846331435",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017589047/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]