[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659588978",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-659588978",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 659588978,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTU4ODk3OA==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-16T18:23:53Z",
        "updated_at": "2020-07-16T18:23:53Z",
        "author_association": "MEMBER",
        "body": "You can do ```vector<float> init_data{1.5, 30.0, 2.0, 3.0, 4.0, 5.0};``` for 2 rows and 3 cols (row major format) and then pass it to CreateTensor as init_data.data(). You can also take a look at csharp\\test\\Microsoft.ML.OnnxRuntime.EndToEndTests.Capi\\CXX_Api_Sample.cpp for examples.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659588978/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659894713",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-659894713",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 659894713,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTg5NDcxMw==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T06:37:06Z",
        "updated_at": "2020-07-17T06:37:06Z",
        "author_association": "NONE",
        "body": "> You can do `vector<float> init_data{1.5, 30.0, 2.0, 3.0, 4.0, 5.0};` for 2 rows and 3 cols (row major format) and then pass it to CreateTensor as init_data.data(). You can also take a look at csharp\\test\\Microsoft.ML.OnnxRuntime.EndToEndTests.Capi\\CXX_Api_Sample.cpp for examples.\r\n\r\n@pranavsharma Thank you. I am using one of  the examples as template. \r\n\r\nin \r\n\r\n> inline Value Value::CreateTensor(const OrtMemoryInfo* info, T* p_data, size_t p_data_element_count, const int64_t* shape, size_t shape_len)\r\n\r\nwhat is the difference between _const int64_t* shape, size_t shape_len_? \r\nIn https://github.com/microsoft/onnxruntime/blob/master/csharp/test/Microsoft.ML.OnnxRuntime.EndToEndTests.Capi/CXX_Api_Sample.cpp the _const int64_t* shape_ correspond to the vector which is collect data about structure (1,3,244,244), while 4 is a vector size ()? Or what does mean 4 in this case? Why should we also send the vector size if its size can be calculated automatically inside the CreateTensor?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659894713/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659900723",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-659900723",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 659900723,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTkwMDcyMw==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T06:49:07Z",
        "updated_at": "2020-07-17T07:27:46Z",
        "author_association": "NONE",
        "body": "How can I check the data in created Tensor ? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659900723/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659938767",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-659938767",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 659938767,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTkzODc2Nw==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T07:54:08Z",
        "updated_at": "2020-07-17T07:54:08Z",
        "author_association": "MEMBER",
        "body": "4 is the number of elements (dimensions) in the shape array pointed to by the 'shape' ptr. Given that CreateTensor is a C API and accepts just a ptr to the shape, it has no idea how many elements (dimensions) the shape array contains. This is why it accepts shape_len as well.\r\nYou can use GetTensorMutableData to get a ptr to the data contained in the tensor.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659938767/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659961529",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-659961529",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 659961529,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1OTk2MTUyOQ==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T08:34:44Z",
        "updated_at": "2020-07-17T08:41:31Z",
        "author_association": "NONE",
        "body": "@pranavsharma, Thank you.\r\nA few comments. \r\n\r\nMy model has input shape {1, 2}.\r\nI creates tensor with corresponding code:\r\n\r\n> Value input_tensor = Value::CreateTensor<float>(memory_info, inp_data.data(), mdp.TensorSize[i], mdp.DimShape[i].data(), mdp.DimShape[i].size());\r\n\r\nwhere _inp_data_ is array {a, b} (a and b are float, not 2D), _mdp.TensorSize[i]_ = 2; \r\n_mdp.DimShape[i]_ = {1, 2},  _mdp.DimShape[i].size()_  = 2.\r\n\r\non the next step I am checking the input_tensor shape with respect to the model input:\r\n\r\n> assert(input_tensor.IsTensor() && input_tensor.GetTensorTypeAndShapeInfo().GetShape() == mdp.DimShape[i]);\r\n> cout << \"\\ninput_tensor shape: \" << input_tensor.GetTensorTypeAndShapeInfo().GetShape()[0] << input_tensor.GetTensorTypeAndShapeInfo().GetShape()[1] << endl;\r\n\r\noutput is: \r\n\r\n> 1 2 //As I understand, it is corresponding to the  {{a, b}}\r\n\r\non the next step I am converting the Tensor to the vector:\r\n\r\n> float* floatarr = input_tensor.GetTensorMutableData<float>();\r\n\r\nfloatarr shape is {0, 2}. It is match with _inp_data_.\r\n\r\nfinally, I am trying to run the model:\r\n\r\n> auto output_tensors = ses.Run(RunOptions{ nullptr }, mdp.InputLayerName.data(), &input_tensor, mdp.Ninp, mdp.OututLayerName.data(), mdp.OututLayerName.size());\r\n\r\nwhere _mdp.InputLayerName.data()_ - array with input names {\"data_in\"}; _mdp.Ninp_ - number of inputs (1); _mdp.OututLayerName.data()_ - array with output names {\"label\", \"label_prob\"}; _mdp.OututLayerName.size()_ - number of outputs (2);\r\n\r\nThe code passes the compilation but throw Exception related with access to the memory when run.\r\n\r\n> Вызвано исключение по адресу 0x00007FFEF1E5A839 в ClassificatorCaller.exe: исключение Microsoft C++: std::logic_error по адресу памяти 0x0000009B356FBDA0.\r\n\r\nDebugger refers to this line\r\n\r\n> ThrowOnError(Global<void>::api_.Run(p_, run_options, input_names, ort_input_values, input_count, output_names, output_count, ort_output_values));\r\n\r\nI suppose that main problem can be related with both: tensor structure or creating output tensor. Or I am doing in general something wrong?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/659961529/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660275969",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-660275969",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 660275969,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDI3NTk2OQ==",
        "user": {
            "login": "jgbradley1",
            "id": 654554,
            "node_id": "MDQ6VXNlcjY1NDU1NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/654554?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jgbradley1",
            "html_url": "https://github.com/jgbradley1",
            "followers_url": "https://api.github.com/users/jgbradley1/followers",
            "following_url": "https://api.github.com/users/jgbradley1/following{/other_user}",
            "gists_url": "https://api.github.com/users/jgbradley1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jgbradley1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jgbradley1/subscriptions",
            "organizations_url": "https://api.github.com/users/jgbradley1/orgs",
            "repos_url": "https://api.github.com/users/jgbradley1/repos",
            "events_url": "https://api.github.com/users/jgbradley1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jgbradley1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T18:38:12Z",
        "updated_at": "2020-07-17T18:38:12Z",
        "author_association": "MEMBER",
        "body": "@TratsiakY I have submitted a PR [here](https://github.com/microsoft/onnxruntime/pull/4457) that will make it easier to check data in a tensor. I had the same challenges as you. It will allow you to access tensor data similar to how OpenCV Mat's `At()` functionality works (if you're familiar with that library) by passing in a specific location of the tensor data blob (i.e. `[1,128,250]` in a 3-dimensional blob).\r\n\r\nNot sure why but in my experience, it does seem to take an exceptional amount of time for PRs to get reviewed and merged into master. @pranavsharma is there someone dedicated to working on the C++ API that I should ping when requesting a review?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660275969/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660283327",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-660283327",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 660283327,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDI4MzMyNw==",
        "user": {
            "login": "jgbradley1",
            "id": 654554,
            "node_id": "MDQ6VXNlcjY1NDU1NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/654554?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jgbradley1",
            "html_url": "https://github.com/jgbradley1",
            "followers_url": "https://api.github.com/users/jgbradley1/followers",
            "following_url": "https://api.github.com/users/jgbradley1/following{/other_user}",
            "gists_url": "https://api.github.com/users/jgbradley1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jgbradley1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jgbradley1/subscriptions",
            "organizations_url": "https://api.github.com/users/jgbradley1/orgs",
            "repos_url": "https://api.github.com/users/jgbradley1/repos",
            "events_url": "https://api.github.com/users/jgbradley1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jgbradley1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T18:54:24Z",
        "updated_at": "2020-07-17T18:56:02Z",
        "author_association": "MEMBER",
        "body": "@TratsiakY A couple other things that are not very apparent in the C++ documentation.\r\n\r\n1. onnxruntime (ORT) tensors assume a row-major order of the data\r\n2. ORT tensors do not copy data. They are only a thin wrapper around a block of data owned by another object (in your example, that would be the std::vector `init_data`).\r\n\r\nIf you changed the values of `init_data` directly after creating the ORT tensor, you would see those changes reflected in the ORT tensor when you tried to access the data via the ORT tensor API.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660283327/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660316405",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-660316405",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 660316405,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDMxNjQwNQ==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-17T20:12:02Z",
        "updated_at": "2020-07-17T20:12:02Z",
        "author_association": "MEMBER",
        "body": "Looks ok. What status message is returned? I can't follow this \"Вызвано исключение по адресу 0x00007FFEF1E5A839 в ClassificatorCaller.exe: исключение Microsoft C++: std::logic_error по адресу памяти 0x0000009B356FBDA0.\"",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660316405/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660890270",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-660890270",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 660890270,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDg5MDI3MA==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-20T08:41:15Z",
        "updated_at": "2020-07-20T08:41:15Z",
        "author_association": "NONE",
        "body": "@jgbradley1, @pranavsharma thank you. Seems thatwe have a bug, probably .\r\nI used skl2onnx library for convert my model to onnx. skl2onnx create two output layers: label_output (0 or 1 value) and label_probability (type: sequence<map<int64,float32>>). Thus, I was trying to receive both outputs, that was noted in previous post. \r\nThe main problem relates with creation of output tensor. \r\n\r\nI used the squeezenet example with minor modification for my model (input and output layers quantity and names).  The error was the same, as was mentioned before :\r\n\r\nThe exception on adress 0x00007FFEF1E5A839 was called in MyProject.exe: exception Microsoft C++: std::logic_error on memory address 0x0000009B356FBDA0 (the memory cells addresses for different runs were different)\r\n\r\nfinally, I tryed to get the prediction only for one output layer. I was surprised, because the code was passed the compilation and worked properly.\r\nthe code is listed below:\r\n\r\n> // Copyright(c) Microsoft Corporation.All rights reserved.\r\n> // Licensed under the MIT License.\r\n> //\r\n> #include <assert.h>\r\n> #include <vector>\r\n> #include <onnxruntime_cxx_api.h>\r\n> #include <iostream>\r\n> #include <cstdlib>\r\n> using namespace std;\r\n> int main(int argc, char* argv[]) {\r\n>     Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"test\");\r\n> \r\n>     Ort::SessionOptions session_options;\r\n>     session_options.SetIntraOpNumThreads(1);\r\n> \r\n>     session_options.SetGraphOptimizationLevel(GraphOptimizationLevel::ORT_ENABLE_EXTENDED);\r\n> #ifdef _WIN32\r\n>     const wchar_t* model_path = L\"test.onnx\";\r\n> #else\r\n>     const char* model_path = \"test.onnx\";\r\n> #endif\r\n>     printf(\"Using Onnxruntime C++ API\\n\");\r\n>     Ort::Session session(env, model_path, session_options);\r\n> \r\n>     Ort::AllocatorWithDefaultOptions allocator;\r\n> \r\n>     size_t num_input_nodes = session.GetInputCount();\r\n>     std::vector<const char*> input_node_names(num_input_nodes);\r\n>     std::vector<int64_t> input_node_dims;  // simplify... this model has only 1 input node {1, 3, 224, 224}.\r\n> \r\n>     printf(\"Number of inputs = %zu\\n\", num_input_nodes);\r\n> \r\n>     for (int i = 0; i < num_input_nodes; i++) {\r\n>         // print input node names\r\n>         char* input_name = session.GetInputName(i, allocator);\r\n>         printf(\"Input %d : name=%s\\n\", i, input_name);\r\n>         input_node_names[i] = input_name;\r\n> \r\n>         // print input node types\r\n>         Ort::TypeInfo type_info = session.GetInputTypeInfo(i);\r\n>         auto tensor_info = type_info.GetTensorTypeAndShapeInfo();\r\n> \r\n>         ONNXTensorElementDataType type = tensor_info.GetElementType();\r\n>         printf(\"Input %d : type=%d\\n\", i, type);\r\n> \r\n>         // print input shapes/dims\r\n>         input_node_dims = tensor_info.GetShape();\r\n>         printf(\"Input %d : num_dims=%zu\\n\", i, input_node_dims.size());\r\n>         for (int j = 0; j < input_node_dims.size(); j++)\r\n>             printf(\"Input %d : dim %d=%jd\\n\", i, j, input_node_dims[j]);\r\n>     }\r\n> \r\n>     size_t input_tensor_size = 2;  // simplify ... using known dim values to calculate size\r\n>                                                // use OrtGetTensorShapeElementCount() to get official size!\r\n> \r\n>     std::vector<float> input_tensor_values(input_tensor_size);\r\n>     std::vector<const char*> output_node_names = { \"output_label\"};\r\n> \r\n>     // initialize input data with values in [0.0, 1.0]\r\n>     \r\n>     input_tensor_values = {1.5, 1};\r\n> \r\n>     // create input tensor object from data values\r\n>     auto memory_info = Ort::MemoryInfo::CreateCpu(OrtArenaAllocator, OrtMemTypeDefault);\r\n>     Ort::Value input_tensor = Ort::Value::CreateTensor<float>(memory_info, input_tensor_values.data(), input_tensor_size, input_node_dims.data(), 2);\r\n>     assert(input_tensor.IsTensor());\r\n> \r\n>     // score model & input tensor, get back output tensor\r\n>     auto output_tensors = session.Run(Ort::RunOptions{ nullptr }, input_node_names.data(), &input_tensor, 1, output_node_names.data(), 1);\r\n>     assert(output_tensors.size() == 1 && output_tensors.front().IsTensor());\r\n> \r\n>     // Get pointer to output tensor float values\r\n>     int* floatarr = output_tensors[0].GetTensorMutableData<int>();\r\n>     \r\n>     cout << floatarr[0] << endl;\r\n> \r\n>     printf(\"Done!\\n\");\r\n>     return 0;\r\n> }\r\n\r\nMeanwhile, the code pass the compilation but fall at run if I try to get the array with predictions output. \r\n\r\nThe error occurs in place where the output tensor is created:\r\n\r\n> auto output_tensors = session.Run(Ort::RunOptions{ nullptr }, input_node_names.data(), &input_tensor, 1, output_node_names.data(), 2);\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/660890270/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/661037546",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-661037546",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 661037546,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MTAzNzU0Ng==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-20T13:24:47Z",
        "updated_at": "2020-07-20T13:24:47Z",
        "author_association": "NONE",
        "body": "I've found yet one strange moment.\r\nI've formatted my code to a class for exclude the requirence in  reading of the onnx file everytime. The class is very simple and consist of only two methods, one of them is constructor, while the second one is predictor. \r\nFor correct work I should run the prediction once in constructor with any data, otherwise I will have got the error message related with acces to memory. After that method with prediction works well. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/661037546/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/661736788",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-661736788",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 661736788,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MTczNjc4OA==",
        "user": {
            "login": "TratsiakY",
            "id": 56832989,
            "node_id": "MDQ6VXNlcjU2ODMyOTg5",
            "avatar_url": "https://avatars.githubusercontent.com/u/56832989?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TratsiakY",
            "html_url": "https://github.com/TratsiakY",
            "followers_url": "https://api.github.com/users/TratsiakY/followers",
            "following_url": "https://api.github.com/users/TratsiakY/following{/other_user}",
            "gists_url": "https://api.github.com/users/TratsiakY/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TratsiakY/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TratsiakY/subscriptions",
            "organizations_url": "https://api.github.com/users/TratsiakY/orgs",
            "repos_url": "https://api.github.com/users/TratsiakY/repos",
            "events_url": "https://api.github.com/users/TratsiakY/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TratsiakY/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-21T09:12:00Z",
        "updated_at": "2020-07-21T09:12:11Z",
        "author_association": "NONE",
        "body": "@pranavsharma, @jgbradley1, Please, find attached .cpp files and onnx model for play and repeat the error.\r\n[time.zip](https://github.com/microsoft/onnxruntime/files/4952416/time.zip)\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/661736788/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/662213907",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-662213907",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 662213907,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MjIxMzkwNw==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-22T03:01:30Z",
        "updated_at": "2020-07-22T06:26:59Z",
        "author_association": "MEMBER",
        "body": "@TratsiakY you must ensure the environment instance outlives the session. In your example, the env instance gets destructed at the end of the PredictWithONNXModel constructor. If you move the environment to a class member, it should work just fine.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/662213907/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/663407143",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4528#issuecomment-663407143",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4528",
        "id": 663407143,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzQwNzE0Mw==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-07-24T08:25:50Z",
        "updated_at": "2020-07-24T08:25:50Z",
        "author_association": "NONE",
        "body": "> @TratsiakY you must ensure the environment instance outlives the session. In your example, the env instance gets destructed at the end of the PredictWithONNXModel constructor. If you move the environment to a class member, it should work just fine.\r\n\r\nWill making env a static variable work? I have a similar issue in which the prediction for the same data for the very first time is not correct but it works fine for second time and further.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/663407143/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]