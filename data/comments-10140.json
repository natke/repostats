[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001778380",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1001778380",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1001778380,
        "node_id": "IC_kwDOCVq1mM47tezM",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-27T22:09:15Z",
        "updated_at": "2021-12-27T22:09:15Z",
        "author_association": "MEMBER",
        "body": "Hi @lincolnneu did you try to use multi-threading in browsers? Those lines ( that uses `require()` ) are in an if-clause that will only run in Node.js (condition is `process.versions.node` is not undefined). This is by-design and expected. If it fails in browser environment, please let me know the reproduce steps and I will take a further investigation.\r\n\r\nThe stackoverflow link is about how to preserve \"require()\" in the source code, which is what we have now.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001778380/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001877478",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1001877478",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1001877478,
        "node_id": "IC_kwDOCVq1mM47t2_m",
        "user": {
            "login": "lincolnneu",
            "id": 39422558,
            "node_id": "MDQ6VXNlcjM5NDIyNTU4",
            "avatar_url": "https://avatars.githubusercontent.com/u/39422558?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lincolnneu",
            "html_url": "https://github.com/lincolnneu",
            "followers_url": "https://api.github.com/users/lincolnneu/followers",
            "following_url": "https://api.github.com/users/lincolnneu/following{/other_user}",
            "gists_url": "https://api.github.com/users/lincolnneu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lincolnneu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lincolnneu/subscriptions",
            "organizations_url": "https://api.github.com/users/lincolnneu/orgs",
            "repos_url": "https://api.github.com/users/lincolnneu/repos",
            "events_url": "https://api.github.com/users/lincolnneu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lincolnneu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-28T05:30:27Z",
        "updated_at": "2021-12-28T05:30:27Z",
        "author_association": "NONE",
        "body": "@fs-eire  thanks for explanation. This is confusing our linter system. Is it possible to separate node.js version from browser version? e.g. instead of having one npm package onnxruntime-web for both node.js and browser, create two npm packages, maybe onnxruntime-web-node and onnxruntime-web-browser?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1001877478/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1002321066",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1002321066",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1002321066,
        "node_id": "IC_kwDOCVq1mM47vjSq",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-28T23:28:12Z",
        "updated_at": "2021-12-28T23:28:12Z",
        "author_association": "MEMBER",
        "body": "I am not sure how do you configure your repository for linter, but usually we don't enable linter for dependencies (eg. exclude /node_modules folder). Specifically, you should skip those build tools for the dist files (.js) of all your dependencies ( This is also the default behavior of bundlers eg. webpack)\r\n\r\nThere are different properties inside the package's package.json ( \"main\" and \"browser\" ) to indicate tools to behave as expected. For example, we have different main file for browsers (ort.min.js) and node.js (ort-web.node.js) for ONNX Runtime. To simplify the distribution process, we use single file **ort-wasm-threaded.js** for both web and node.js\r\n\r\nIf this linter error is generated by webpack, that is another story. We do not expect webpack to process file ort-wasm-threaded.worker.js if onnxruntime-web is consumed as a dependency library. If this is the case, please share the reproduce steps and I will take a look into it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1002321066/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100834432",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1100834432",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1100834432,
        "node_id": "IC_kwDOCVq1mM5BnWaA",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-17T08:53:56Z",
        "updated_at": "2022-04-17T08:53:56Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100834432/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1104021618",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1104021618",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1104021618,
        "node_id": "IC_kwDOCVq1mM5Bzghy",
        "user": {
            "login": "sonovice",
            "id": 8217108,
            "node_id": "MDQ6VXNlcjgyMTcxMDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8217108?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sonovice",
            "html_url": "https://github.com/sonovice",
            "followers_url": "https://api.github.com/users/sonovice/followers",
            "following_url": "https://api.github.com/users/sonovice/following{/other_user}",
            "gists_url": "https://api.github.com/users/sonovice/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sonovice/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sonovice/subscriptions",
            "organizations_url": "https://api.github.com/users/sonovice/orgs",
            "repos_url": "https://api.github.com/users/sonovice/repos",
            "events_url": "https://api.github.com/users/sonovice/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sonovice/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-20T14:47:29Z",
        "updated_at": "2022-04-20T15:31:15Z",
        "author_association": "NONE",
        "body": "I believe this is directly related to https://github.com/microsoft/onnxruntime-web-demo/issues/15\r\n\r\nEDIT: More detail - The code expects webpack to be used. Other bundlers such as vite do not necessarily use objects like `process`. Checking whether the code is running on node.js/deno or in browser should therefore be done slightly more elaborated like shown [here](https://github.com/flexdinesh/browser-or-node/blob/master/src/index.js).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1104021618/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1105878551",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10140#issuecomment-1105878551",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10140",
        "id": 1105878551,
        "node_id": "IC_kwDOCVq1mM5B6l4X",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-22T00:21:45Z",
        "updated_at": "2022-04-22T00:21:45Z",
        "author_association": "MEMBER",
        "body": "@sonovice, Thank you for sharing the information.\r\n\r\nI didn't use Vite as a bundler before. ORT Web always use webpack as its bundler. But this is not the problem. The problem is, we didn't expect users (webapp developers who consume onnxruntime-web) to run bundlers on source code of onnxruntime-web.\r\n\r\nAs mentioned in https://github.com/microsoft/onnxruntime-web-demo/issues/15, Vite actually run into scan file 'onnxruntime-web/lib/wasm/proxy-wrapper.js'. This is not what I expected; my expectation is the bundler picks up the single file 'dist/ort-web.min.js' directly, skipping the building phrase and ignores anything under folder 'onnxruntime-web/lib'.\r\n\r\n[the \"browser\" field](https://github.com/microsoft/onnxruntime/blob/master/js/web/package.json#L3)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1105878551/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]