[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1241389638",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1241389638",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1241389638,
        "node_id": "IC_kwDOCVq1mM5J_hpG",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-09T01:10:55Z",
        "updated_at": "2022-09-09T01:10:55Z",
        "author_association": "MEMBER",
        "body": "> The built directory is not generating any shared object which can be loaded by register_custom_ops_library(<path_to_object_file>) of SessionOptions\r\n\r\nIs there a specific error message you're getting? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1241389638/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1242029368",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1242029368",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1242029368,
        "node_id": "IC_kwDOCVq1mM5KB904",
        "user": {
            "login": "debda018",
            "id": 95337130,
            "node_id": "U_kgDOBa66qg",
            "avatar_url": "https://avatars.githubusercontent.com/u/95337130?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debda018",
            "html_url": "https://github.com/debda018",
            "followers_url": "https://api.github.com/users/debda018/followers",
            "following_url": "https://api.github.com/users/debda018/following{/other_user}",
            "gists_url": "https://api.github.com/users/debda018/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debda018/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debda018/subscriptions",
            "organizations_url": "https://api.github.com/users/debda018/orgs",
            "repos_url": "https://api.github.com/users/debda018/repos",
            "events_url": "https://api.github.com/users/debda018/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debda018/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-09T14:15:12Z",
        "updated_at": "2022-09-09T14:15:12Z",
        "author_association": "NONE",
        "body": "> > The built directory is not generating any shared object which can be loaded by register_custom_ops_library(<path_to_object_file>) of SessionOptions\r\n> \r\n> Is there a specific error message you're getting?\r\n\r\nAs the shared object is not being generated I can't post any error message regarding that but I have posted an error message when i am trying to run the inference of the custom operator in python's onnxruntime. Do you have any idea on how to register a custom operator written in C++ Api in python's onnxruntime?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1242029368/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1243082717",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1243082717",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1243082717,
        "node_id": "IC_kwDOCVq1mM5KF-_d",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-12T00:31:53Z",
        "updated_at": "2022-09-12T00:31:53Z",
        "author_association": "MEMBER",
        "body": "The tutorial seems to be setup so with the custom op implementation being built into an executable along with ORT, so it's used directly instead of by registering a separate library. To create a standalone library the cmake setup would need to be changed, and you'd need to call RegisterCustomOpsLibrary like [this](https://github.com/microsoft/onnxruntime/blob/1e34440c370d40085fad5fd1b1002b4a04c5991d/onnxruntime/test/shared_lib/test_inference.cc#L122-L125 ) example.\r\n\r\nThat probably won't fix anything if you're currently adding an Ort::CustomOpDomain instance to the SessionOptions.\r\n\r\n> com.microsoft:Reduction_dd\r\n\r\nMake sure the domain string and op name match exactly. I would not recommend using the existing 'com.microsoft' domain though - for a custom op it's safer to use a custom domain name so there's no potential clash with existing things. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1243082717/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1243666894",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1243666894",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1243666894,
        "node_id": "IC_kwDOCVq1mM5KINnO",
        "user": {
            "login": "debda018",
            "id": 95337130,
            "node_id": "U_kgDOBa66qg",
            "avatar_url": "https://avatars.githubusercontent.com/u/95337130?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debda018",
            "html_url": "https://github.com/debda018",
            "followers_url": "https://api.github.com/users/debda018/followers",
            "following_url": "https://api.github.com/users/debda018/following{/other_user}",
            "gists_url": "https://api.github.com/users/debda018/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debda018/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debda018/subscriptions",
            "organizations_url": "https://api.github.com/users/debda018/orgs",
            "repos_url": "https://api.github.com/users/debda018/repos",
            "events_url": "https://api.github.com/users/debda018/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debda018/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-12T12:26:56Z",
        "updated_at": "2022-09-12T12:26:56Z",
        "author_association": "NONE",
        "body": "@skottmckay \r\nYes I have made sure the domain string and op name match exactly and I have already tried with different domain name than \"com.microsoft\" and still I get the same error. As per the link you have provided i have followed the 1st approach and already have tested the inference. \r\nAs you have mentioned to make changes in the cmake file. I am able to generate an .so file by add_library() in CMakeList.txt.\r\nNow when I am trying to load this shared object in  Python's onnxruntime via ```session_options = ort.SessionOptions()\r\nsession_options.register_custom_ops_library(\"libcustomop.so\")```.\r\ni get the following error:\r\n```\r\nFail: [ONNXRuntimeError] : 1 : FAIL : Failed to get symbol RegisterCustomOps with error: .../bin/python: undefined symbol: RegisterCustomOps\r\n```\r\nEven if I pass an empty string in sessions.options.register_custom_ops_library(\"\") the same error persists.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1243666894/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1246020882",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1246020882",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1246020882,
        "node_id": "IC_kwDOCVq1mM5KRMUS",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-13T22:43:52Z",
        "updated_at": "2022-09-13T22:43:52Z",
        "author_association": "MEMBER",
        "body": "If it fails to get the symbol that would imply the library is not exporting it correctly. ORT will load the shared library and do symbol lookup using `dlsym`. Can you check what is exported? e.g. https://www.baeldung.com/linux/shared-library-exported-functions\r\n\r\nI believe an empty string is doing the same due to how linux behaves. dlopen with an empty string returns the handle for the main program, which also won't have a RegisterCustomOps symbol exported. We could explicitly check for an empty string and provide a better error though. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1246020882/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 1
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1247353561",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12896#issuecomment-1247353561",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12896",
        "id": 1247353561,
        "node_id": "IC_kwDOCVq1mM5KWRrZ",
        "user": {
            "login": "debda018",
            "id": 95337130,
            "node_id": "U_kgDOBa66qg",
            "avatar_url": "https://avatars.githubusercontent.com/u/95337130?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/debda018",
            "html_url": "https://github.com/debda018",
            "followers_url": "https://api.github.com/users/debda018/followers",
            "following_url": "https://api.github.com/users/debda018/following{/other_user}",
            "gists_url": "https://api.github.com/users/debda018/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/debda018/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/debda018/subscriptions",
            "organizations_url": "https://api.github.com/users/debda018/orgs",
            "repos_url": "https://api.github.com/users/debda018/repos",
            "events_url": "https://api.github.com/users/debda018/events{/privacy}",
            "received_events_url": "https://api.github.com/users/debda018/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-14T22:13:33Z",
        "updated_at": "2022-09-14T22:13:33Z",
        "author_association": "NONE",
        "body": "@skottmckay Thank you for your help. I realized I was not exporting anything in my code and that was the root cause of the problem. Everything works now and I can successfully run the session in python's onnxruntime.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1247353561/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]