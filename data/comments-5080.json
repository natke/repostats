[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689022781",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-689022781",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 689022781,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTAyMjc4MQ==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-08T17:20:53Z",
        "updated_at": "2020-09-08T17:20:53Z",
        "author_association": "MEMBER",
        "body": "@Karnav123 \r\nWould u mind share the model along with the inferencing script used?\r\nIn the meantime maybe you want to try onnxruntime 1.4.0.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689022781/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689030888",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-689030888",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 689030888,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTAzMDg4OA==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-08T17:36:32Z",
        "updated_at": "2020-09-11T12:04:39Z",
        "author_association": "NONE",
        "body": "@RandySheriffH  The model can be accessed from https://github.com/Karnav123/onnx_model/blob/master/Model_XGB.onnx\r\n\r\nTo infer this Model I am using the following script. Although I can not give the whole script here because it is written in a OOPs way spanning across multiple file. To load the model: \r\n\r\n`\r\nvoid Model::SetModel(const string& modelPath)\r\n{\r\n    const ORTCHAR_T* onnxModelPath = nullptr;\r\n#ifdef WNT\r\n    onnxModelPath = ToUnicode(modelPath);\r\n#else\r\n    onnxModelPath = modelPath.utf8_str();\r\n#endif\r\n    \r\n    // ONNX runtime specific logging level. Should be static\r\n    static Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"onnx_loader\");\r\n\r\n    Ort::SessionOptions sessionOptions;\r\n    sessionOptions.SetIntraOpNumThreads(8);\r\n\r\n      // Fixed crash when the prediction data is too big\r\n    // Fixed inconsistent behavior in first prediction in session\r\n    sessionOptions.DisableCpuMemArena();\r\n    sessionOptions.DisableMemPattern();\r\n\r\n    sessionOptions.SetGraphOptimizationLevel(GraphOptimizationLevel::ORT_ENABLE_EXTENDED);\r\n\r\n    try\r\n    {\r\n        this->m_onnxModel = new Ort::Session(env, onnxModelPath, sessionOptions);\r\n    }\r\n    catch (const Ort::Exception& exception)\r\n    {\r\n      // Print error\r\n    }\r\n}`\r\n\r\nTo convert the data to tensor:\r\n`\r\nOrt::Value input = Ort::Value::CreateTensor<double>(memoryInfo, inputDataBatch[i].data(),\r\n                inputDataBatch[i].size(), inputBatchDims[i].data(), inputBatchDims[i].size());\r\n            assert(input.IsTensor());\r\n`\r\nTo Run the model:\r\n`\r\nauto predictedValues = onnxModel->Run(Ort::RunOptions{ nullptr }, inputNodeNames.data(),\r\n                inputTensorRow, inputNodeNames.size(), outputNodeNames.data(), outputNodeNames.size());\r\n            assert(predictedValues.size() == 2 && predictedValues.front().IsTensor());\r\n`\r\n\r\nThe error occurs when Run is called.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689030888/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/691054576",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-691054576",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 691054576,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5MTA1NDU3Ng==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-11T12:07:03Z",
        "updated_at": "2020-09-11T12:07:03Z",
        "author_association": "NONE",
        "body": "@RandySheriffH I tried 1.4.0 but it still has the above-mentioned issue. However, if I set `sessionOptions.SetIntraOpNumThreads(1);`  to one then the frequency of this error is rare. Please, share any suggestions to fix the issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/691054576/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/695889060",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-695889060",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 695889060,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NTg4OTA2MA==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-21T03:53:50Z",
        "updated_at": "2020-09-21T03:53:50Z",
        "author_association": "NONE",
        "body": "@RandySheriffH Is there any update on this issue?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/695889060/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696995448",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-696995448",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 696995448,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5Njk5NTQ0OA==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T21:36:31Z",
        "updated_at": "2020-09-22T21:36:31Z",
        "author_association": "MEMBER",
        "body": "I will take a look at it",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696995448/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697043940",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697043940",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697043940,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzA0Mzk0MA==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T00:01:55Z",
        "updated_at": "2020-09-23T00:01:55Z",
        "author_association": "MEMBER",
        "body": "I quickly run it using released version 1.4 and the latest tip of the master using the following script and I have not found any issues. But I will check the C++ API that you are using as well. Can you, please, verify where onnxruntime.dll is being loaded from? I am asking bc there might be one present in the system folder on windows but you probably want the one that comes with a package.\r\n\r\nimport numpy as np\r\nimport timeit\r\nfrom timeit import default_timer as timer\r\n\r\nimport onnxruntime as ort\r\nimport onnx\r\nimport os\r\n\r\nn_features = 22\r\nrun = 10000\r\ntest_data = np.random.rand(run, n_features).astype(np.float64)\r\n\r\nsess_options.log_severity_level = 0\r\niters = 2\r\n\r\nsess_options.graph_optimization_level = ort.GraphOptimizationLevel.ORT_ENABLE_ALL\r\n\r\nonnx_model_path = 'Model_XGB.onnx'\r\nsession = ort.InferenceSession(onnx_model_path, sess_options)\r\n\r\nfetches_names = [session.get_outputs()[1].name]\r\nfeeds = {session.get_inputs()[0].name: test_data}\r\n\r\nstart = timer()\r\nfor i in range(iters):\r\n    session.run(fetches_names, feeds)\r\nend = timer()\r\n\r\nprint(\"iterations: {}\".format(iters))\r\nprint(\"ORT avg latency: {}\".format((end - start)/iters))\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697043940/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697055560",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697055560",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697055560,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzA1NTU2MA==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T00:43:40Z",
        "updated_at": "2020-09-23T00:43:40Z",
        "author_association": "MEMBER",
        "body": "> \r\n> \r\n> @RandySheriffH I tried 1.4.0 but it still has the above-mentioned issue. However, if I set `sessionOptions.SetIntraOpNumThreads(1);` to one then the frequency of this error is rare. Please, share any suggestions to fix the issue.\r\n\r\nHow big is your input?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697055560/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697062462",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697062462",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697062462,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzA2MjQ2Mg==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T01:09:19Z",
        "updated_at": "2020-09-23T01:09:19Z",
        "author_association": "MEMBER",
        "body": "The attached program runs fine to completion on Windows 10. You mentioned something about input size. Please, let me know.\r\n\r\n[TreeEn.pdf](https://github.com/microsoft/onnxruntime/files/5264903/TreeEn.pdf)\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697062462/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697114689",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697114689",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697114689,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzExNDY4OQ==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T03:37:28Z",
        "updated_at": "2020-09-23T05:05:51Z",
        "author_association": "NONE",
        "body": "> The attached program runs fine to completion on Windows 10. You mentioned something about input size. Please, let me know.\r\n> \r\n> [TreeEn.pdf](https://github.com/microsoft/onnxruntime/files/5264903/TreeEn.pdf)\r\n> \r\n> \r\n\r\nThanks for your response.\r\n I get this issue sometimes on an input size of 1000 also. The error occurs randomly. I think on a standalone code this is working fine but I am loading this as a third party DLL (downloaded from onnxruntime repo) within another application that I am working. In that case for some dataset, I get this error which is random. \r\nAdding the following \r\n`\r\nsessionOptions.DisableCpuMemArena();\r\nsessionOptions.DisableMemPattern();\r\n`\r\ncode resolved some other issues but this crash still appears.\r\nI am not able to exactly figure out why. Because, if the data has been converted to tensor correctly without any error then why it gives error while run.\r\nPlease provide me some insights that I am not able to see.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697114689/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697732813",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697732813",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697732813,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzczMjgxMw==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T17:20:00Z",
        "updated_at": "2020-09-23T17:51:02Z",
        "author_association": "MEMBER",
        "body": "> I get this issue sometimes on an input size of 1000 also. The error occurs randomly. I think on a standalone code this is working fine but I am loading this as a third party DLL (downloaded from onnxruntime repo) within another application that I am working. In that case for some dataset, I get this error which is random.\r\n\r\nIt is a long shot to provide insights into some unknown application with 3rd party libraries across the continents. Why don't you just debug it and in the debugger you get all the insights you need including where all the DLLs are loaded from?\r\n\r\n> I am not able to exactly figure out why. Because, if the data has been converted to tensor correctly without any error then why it gives error while run.\r\n\r\nSure, my insights are based solely on the information presented on this thread. ReadAccessViolation is a Structure Windows Exception (not to be confused with C++ exceptions) that is raised when you attempt to read memory that is not accessible to you (not even mapped to address space). The reason it is random, is bc we use arenas and when one attempts to go beyond the buffer it often lands into mapped memory that belongs to another allocated buffer. DisablingArena and MemPattern is a good first step in debugging such things because the allocation requests would go straight to the OS. Those calls can be sanitized by memory tools such as Application Verifier. that would tell you which code tries to read unmmaped memory.\r\n\r\nThe problem may be simple to solve. You say, it converted to Tensor Successfully. There is not a way it can fail. There is not any conversion taking place. It simply wraps the supplied buffer and trusts you that the buffer length matches the supplied shape bc we do not want to copy any data. If the shape indicates that the buffer is bigger than it actually  is, we would attempt to read beyond it and the OS would raise the above exception. For example, for a buffer that contains double with a shape of [10,000, 22] the buffer size should be at least 10,000 * 22 * sizeof(double) bytes. Which on a 64-bit platform comes down to 1,760,000 bytes. The memory allocation for the buffer should be driven off the shape + type.\r\n\r\nThere is also a possibility that a 3rd party code randomly corrupts data structures pertaining to onnxruntime. I think it can also be clarified by using App Verifier.\r\n\r\nYou may also want to avoid allocating Ort::Session dynamically. It is simply a container for another pointer.\r\n\r\nFinally, we have option to use onnxruntime via languages other than C++ and C. That includes Python, Java and C#.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697732813/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697786814",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697786814",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697786814,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5Nzc4NjgxNA==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T17:52:35Z",
        "updated_at": "2020-09-23T17:52:35Z",
        "author_association": "NONE",
        "body": "> > I get this issue sometimes on an input size of 1000 also. The error occurs randomly. I think on a standalone code this is working fine but I am loading this as a third party DLL (downloaded from onnxruntime repo) within another application that I am working. In that case for some dataset, I get this error which is random.\n> \n> It is a long shot to provide insights into some unknown application with 3rd party libraries across the continents. Why don't you just debug it and in the debugger you get all the insights you need including where all the DLLs are loaded from?\n> \n> > I am not able to exactly figure out why. Because, if the data has been converted to tensor correctly without any error then why it gives error while run.\n> \n> Sure, my insights are based solely on the information presented on this thread. ReadAccessViolation is a Structure Windows Exception (not to be confused with C++ exceptions) that is raised when you attempt to read memory that is not accessible to you (not even mapped to address space). The reason it is random, is bc we use arenas and when one attempts to go beyond the buffer it often lands into mapped memory that belongs to another allocated buffer. DisablingArena and MemPattern is a good first step in debugging such things because the allocation requests would go straight to the OS. Those calls can be sanitized by memory tools such as Application Verifier. that would tell you which code tries to read unmmaped memory.\n> \n> The problem may be simple to solve. You say, it converted to Tensor Successfully. There is not a way it can fail. There is not any conversion taking place. It simply wraps the supplied buffer and trusts you that the buffer length matches the supplied shape bc we do not want to copy any data. If the shape indicates that the buffer is bigger than it actually  is, we would attempt to read beyond it and the OS would raise the above exception. For example, for a buffer that contains double with a shape of [10,000, 22] the buffer size should be at least 10,000 * 22 * sizeof(double) bytes. Which on a 64-bit platform comes down to 1,760,000 bytes. The memory allocation for the buffer should be driven off the shape + type.\n> \n> You may also want to avoid allocating Ort::Session dynamically. It is simply a container for another pointer.\n> \n\nDo you mean that we should not load the model using new().\n\n> Finally, we have option to use onnxruntime via languages other than C++ and C. That includes Python, Java and C#.\n\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697786814/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697804634",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-697804634",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 697804634,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzgwNDYzNA==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-23T18:03:27Z",
        "updated_at": "2020-09-23T18:03:27Z",
        "author_association": "MEMBER",
        "body": "Loading of the model has nothing to do with new/delete. It happens in the constructor.\r\nFor every new there should be a corresponding delete. Ort::Session was created with a sole purpose to destroy the \r\nunderlying session object from its destructor automatically w/.o explicit calls. Now it has to be deleted itself. I gave you an example how to load a model in the code that I presented. It is exception safe and the cleanup is automatic. Just declare a class member \r\nOrt::Session session_{nullptr};\r\nThen instantiate another Ort::Session object in a function. After it succeeds, std::move it to the member of the class.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/697804634/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/720446347",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-720446347",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 720446347,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDQ0NjM0Nw==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-02T12:37:48Z",
        "updated_at": "2020-11-03T10:37:10Z",
        "author_association": "NONE",
        "body": "> Loading of the model has nothing to do with new/delete. It happens in the constructor.\r\n> For every new there should be a corresponding delete. Ort::Session was created with a sole purpose to destroy the\r\n> underlying session object from its destructor automatically w/.o explicit calls. Now it has to be deleted itself. I gave you an example how to load a model in the code that I presented. It is exception safe and the cleanup is automatic. Just declare a class member\r\n> Ort::Session session_{nullptr};\r\n> Then instantiate another Ort::Session object in a function. After it succeeds, std::move it to the member of the class.\r\n\r\n@yuslepukhin I did some debugging of the onnxruntime source code to reproduce the issue. This access violation is because of the fact that the x_data variable in the following method \r\n```\r\nvoid TreeEnsembleCommon<ITYPE, OTYPE>::ComputeAgg(concurrency::ThreadPool* ttp, const Tensor* X, Tensor* Z,\r\n                                                  Tensor* label, const AGG& agg) const \r\n{\r\n      int64_t stride = X->Shape().NumDimensions() == 1 ? X->Shape()[0] : X->Shape()[1];\r\n      int64_t N = X->Shape().NumDimensions() == 1 ? 1 : X->Shape()[0];\r\n\r\n      const ITYPE* x_data = X->template Data<ITYPE>();   // This is NULL or sometimes all zeros\r\n\r\n      // remaining code\r\n}\r\n```\r\nin the file onnxruntime\\core\\providers\\cpu\\ml\\tree_ensemble_common.h. I think there is some inconsistency in the behaviour is going on there.\r\n\r\nThis issue is reproducible in latest version also.\r\n\r\nI am adding some images of the debug values for more clarity of my explanation.\r\n\r\n- Call Stack\r\n![call_stack](https://user-images.githubusercontent.com/36244620/97868313-76e31d80-1d35-11eb-8e63-5b7197937c6b.PNG)\r\n\r\n- Code and the value of x_data\r\n![ss](https://user-images.githubusercontent.com/36244620/97975108-9ab66a00-1dee-11eb-9345-7f1ffaafa857.PNG)\r\n\r\n- The disassembly of the related code.\r\n![image](https://user-images.githubusercontent.com/36244620/97868487-c590b780-1d35-11eb-98b7-12542e5fa9b6.png)\r\n\r\nPlease let me know if more reference is needed.\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/720446347/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/731926188",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-731926188",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 731926188,
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMTkyNjE4OA==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-23T04:57:30Z",
        "updated_at": "2020-11-23T04:57:30Z",
        "author_association": "NONE",
        "body": "@yuslepukhin If you could look into the above observation, it would be helpful.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/731926188/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747468999",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-747468999",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 747468999,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzQ2ODk5OQ==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-17T14:24:35Z",
        "updated_at": "2020-12-17T14:24:35Z",
        "author_association": "NONE",
        "body": "@yuslepukhin Any update please.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/747468999/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/781708349",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-781708349",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 781708349,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTcwODM0OQ==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-18T23:42:54Z",
        "updated_at": "2021-02-18T23:42:54Z",
        "author_association": "MEMBER",
        "body": "@Karnav123 Are you able to reproduce the issue using any of the code samples above that I mentioned before, either C++ or Python? If you do not wish to use them, then please, create your own concise example where the issue is reproducible.\r\n\r\nCc: @xadupre ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/781708349/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/781815748",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5080#issuecomment-781815748",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5080",
        "id": 781815748,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTgxNTc0OA==",
        "user": {
            "login": "Karnav123",
            "id": 36244620,
            "node_id": "MDQ6VXNlcjM2MjQ0NjIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/36244620?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Karnav123",
            "html_url": "https://github.com/Karnav123",
            "followers_url": "https://api.github.com/users/Karnav123/followers",
            "following_url": "https://api.github.com/users/Karnav123/following{/other_user}",
            "gists_url": "https://api.github.com/users/Karnav123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Karnav123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Karnav123/subscriptions",
            "organizations_url": "https://api.github.com/users/Karnav123/orgs",
            "repos_url": "https://api.github.com/users/Karnav123/repos",
            "events_url": "https://api.github.com/users/Karnav123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Karnav123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-19T04:49:02Z",
        "updated_at": "2021-02-19T04:49:02Z",
        "author_association": "NONE",
        "body": "> @Karnav123 Are you able to reproduce the issue using any of the code samples above that I mentioned before, either C++ or Python? If you do not wish to use them, then please, create your own concise example where the issue is reproducible.\r\n> \r\n> Cc: @xadupre\r\n\r\nI think there was an issue in my code which I corrected and the bug is gone now. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/781815748/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]