[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693505956",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-693505956",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 693505956,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzUwNTk1Ng==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-16T16:05:11Z",
        "updated_at": "2020-09-16T16:05:11Z",
        "author_association": "MEMBER",
        "body": "Depends on how much it increased.  For thread pool, the more threads you have, the higher scheduling cost is. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693505956/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693511698",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-693511698",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 693511698,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzUxMTY5OA==",
        "user": {
            "login": "maxime-louis",
            "id": 24551320,
            "node_id": "MDQ6VXNlcjI0NTUxMzIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24551320?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maxime-louis",
            "html_url": "https://github.com/maxime-louis",
            "followers_url": "https://api.github.com/users/maxime-louis/followers",
            "following_url": "https://api.github.com/users/maxime-louis/following{/other_user}",
            "gists_url": "https://api.github.com/users/maxime-louis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/maxime-louis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/maxime-louis/subscriptions",
            "organizations_url": "https://api.github.com/users/maxime-louis/orgs",
            "repos_url": "https://api.github.com/users/maxime-louis/repos",
            "events_url": "https://api.github.com/users/maxime-louis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/maxime-louis/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-16T16:15:17Z",
        "updated_at": "2020-09-16T16:15:17Z",
        "author_association": "NONE",
        "body": "I am doing batched inferences, batch_size=64.\r\n\r\nUsing plain torch on 12 cpus takes 6s, and this time increases when using less cpus (which is expected)\r\n\r\nWith onnxruntime, computation takes 5s on a single cpu, but 12s on 12 cpus. If it's overhead I find it strange that torch does not suffer from it.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693511698/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693518336",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-693518336",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 693518336,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzUxODMzNg==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-16T16:27:02Z",
        "updated_at": "2020-09-16T16:27:02Z",
        "author_association": "MEMBER",
        "body": "Oh I see, then probably we paralleled some code that shouldn't be paralleled",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/693518336/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696560583",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-696560583",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 696560583,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjU2MDU4Mw==",
        "user": {
            "login": "maxime-louis",
            "id": 24551320,
            "node_id": "MDQ6VXNlcjI0NTUxMzIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24551320?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maxime-louis",
            "html_url": "https://github.com/maxime-louis",
            "followers_url": "https://api.github.com/users/maxime-louis/followers",
            "following_url": "https://api.github.com/users/maxime-louis/following{/other_user}",
            "gists_url": "https://api.github.com/users/maxime-louis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/maxime-louis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/maxime-louis/subscriptions",
            "organizations_url": "https://api.github.com/users/maxime-louis/orgs",
            "repos_url": "https://api.github.com/users/maxime-louis/repos",
            "events_url": "https://api.github.com/users/maxime-louis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/maxime-louis/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T07:40:33Z",
        "updated_at": "2020-09-22T07:40:33Z",
        "author_association": "NONE",
        "body": "Do you have an update on this ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696560583/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696567813",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-696567813",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 696567813,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjU2NzgxMw==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T07:57:29Z",
        "updated_at": "2020-09-22T07:57:29Z",
        "author_association": "MEMBER",
        "body": "How many threads do you have in total? It sounds you created many more threads than the CPU cores, you can make 24 parallel calls to 'run' on separate threads, but you need to disable the multiple threading code in onnxruntime first. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696567813/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696716394",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-696716394",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 696716394,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjcxNjM5NA==",
        "user": {
            "login": "maxime-louis",
            "id": 24551320,
            "node_id": "MDQ6VXNlcjI0NTUxMzIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24551320?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maxime-louis",
            "html_url": "https://github.com/maxime-louis",
            "followers_url": "https://api.github.com/users/maxime-louis/followers",
            "following_url": "https://api.github.com/users/maxime-louis/following{/other_user}",
            "gists_url": "https://api.github.com/users/maxime-louis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/maxime-louis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/maxime-louis/subscriptions",
            "organizations_url": "https://api.github.com/users/maxime-louis/orgs",
            "repos_url": "https://api.github.com/users/maxime-louis/repos",
            "events_url": "https://api.github.com/users/maxime-louis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/maxime-louis/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T13:19:31Z",
        "updated_at": "2020-09-22T13:22:06Z",
        "author_association": "NONE",
        "body": "I have 24 threads on my machine. I am not using any multiprocessing outside of onnx. I am doing a batched inference on a single model using onnxruntime. The odd behaviour is that using taskset to restrict the number of threads used by the python process decreases the inference time ! The less threads, the faster the inference. That is without touching at any point the onnxruntime configuration.\r\n\r\nI did a second experiment where I do use a multithreading library to run inferences in parallel: each separate process uses onnxruntime on a small batch of images. Doing this yield the best performances for the inference on my 64 images. (In this configuration, I set omp_num_threads to (total_number_of_threads / number_of_parallel_threads) to prevent an overuse of the cpus.)\r\n\r\nIt seems to me that batching the inference within a single inference using onnxruntime should be faster than this manual parallelization. That's what I'm used to with pytorch.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696716394/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696846334",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-696846334",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 696846334,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5Njg0NjMzNA==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T16:51:31Z",
        "updated_at": "2020-09-22T16:51:31Z",
        "author_association": "MEMBER",
        "body": "Could you please share me information to allow me reproduce your experiment?  For example, the model, a full python script. So that I can debug what happened inside. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/696846334/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/748439642",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-748439642",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 748439642,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODQzOTY0Mg==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-12-19T08:13:07Z",
        "updated_at": "2020-12-19T08:13:07Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/748439642/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1260579780",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5193#issuecomment-1260579780",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5193",
        "id": 1260579780,
        "node_id": "IC_kwDOCVq1mM5LIuvE",
        "user": {
            "login": "SaleemAkhtarAngstrom",
            "id": 97107675,
            "node_id": "U_kgDOBcm-2w",
            "avatar_url": "https://avatars.githubusercontent.com/u/97107675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SaleemAkhtarAngstrom",
            "html_url": "https://github.com/SaleemAkhtarAngstrom",
            "followers_url": "https://api.github.com/users/SaleemAkhtarAngstrom/followers",
            "following_url": "https://api.github.com/users/SaleemAkhtarAngstrom/following{/other_user}",
            "gists_url": "https://api.github.com/users/SaleemAkhtarAngstrom/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SaleemAkhtarAngstrom/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SaleemAkhtarAngstrom/subscriptions",
            "organizations_url": "https://api.github.com/users/SaleemAkhtarAngstrom/orgs",
            "repos_url": "https://api.github.com/users/SaleemAkhtarAngstrom/repos",
            "events_url": "https://api.github.com/users/SaleemAkhtarAngstrom/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SaleemAkhtarAngstrom/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-28T08:41:04Z",
        "updated_at": "2022-09-28T08:41:04Z",
        "author_association": "NONE",
        "body": "Hi, I'm also noticing that sess.run() is using multiple threads in the python API. Is there any way to disable this? I'd similarly like to call sess.run() in parallel (i.e. call it in different threads as I'm trying to run parallel simulations for monte-carlo analysis)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1260579780/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]