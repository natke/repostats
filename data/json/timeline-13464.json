[
    {
        "id": 7671337514,
        "node_id": "MEE_lADOCVq1mM5U3R1QzwAAAAHJP1Iq",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7671337514",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-10-26T10:13:39Z",
        "performed_via_github_app": null
    },
    {
        "id": 7671337524,
        "node_id": "SE_lADOCVq1mM5U3R1QzwAAAAHJP1I0",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7671337524",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-10-26T10:13:39Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1291808828",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13464#issuecomment-1291808828",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13464",
        "id": 1291808828,
        "node_id": "IC_kwDOCVq1mM5M_3A8",
        "user": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-26T10:14:18Z",
        "updated_at": "2022-10-26T10:14:18Z",
        "author_association": "NONE",
        "body": "CPU usage 100%, GPU usage 0%.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1291808828/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 7676385239,
        "node_id": "LE_lADOCVq1mM5U3R1QzwAAAAHJjFfX",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7676385239",
        "actor": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-10-26T20:35:35Z",
        "label": {
            "name": "ep:CUDA",
            "color": "0052CC"
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292628755",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13464#issuecomment-1292628755",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13464",
        "id": 1292628755,
        "node_id": "IC_kwDOCVq1mM5NC_MT",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-26T20:40:47Z",
        "updated_at": "2022-10-26T20:40:47Z",
        "author_association": "MEMBER",
        "body": "Can you please share some repro steps? (Please see the GH issue template to see what needs to be provided - model, code, etc.) ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292628755/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292823837",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13464#issuecomment-1292823837",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13464",
        "id": 1292823837,
        "node_id": "IC_kwDOCVq1mM5NDu0d",
        "user": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T00:51:04Z",
        "updated_at": "2022-10-27T00:51:04Z",
        "author_association": "NONE",
        "body": "the following codes was built with onnxruntime-linux-gpu-1.12.1 , run on A5000.\r\n\r\n```C++\r\n   static const char* const kOrtSessionOptionsUseDeviceAllocatorForInitializers = \"session.use_device_allocator_for_initializers\";\r\n   static const char* const kOrtRunOptionsConfigEnableMemoryArenaShrinkage = \"memory.enable_memory_arena_shrinkage\";\r\n   // release GPU memory: https://github.com/microsoft/onnxruntime/issues/9509#issuecomment-951546580\r\n    // 1. Not allocate weights memory through the arena\r\n    session_options_.AddConfigEntry(kOrtSessionOptionsUseDeviceAllocatorForInitializers, \"1\");\r\n    // 2. Configure the arena to have high enough initial chunk to support most Run() calls. See \"initial_chunk_size_bytes\"\r\n    const char* keys[] = {\"max_mem\", \"arena_extend_strategy\", \"initial_chunk_size_bytes\", \"max_dead_bytes_per_chunk\", \"initial_growth_chunk_size_bytes\"};\r\n    const size_t values[] = {0 /*let ort pick default max memory*/, 0, 1024, 0, 256};\r\n  \r\n    OrtArenaCfg* arena_cfg = nullptr;\r\n    const auto& api = Ort::GetApi();\r\n    auto zz = api.CreateArenaCfgV2(keys, values, 5, &arena_cfg);\r\n    VLOG(1) << \"CreateArenaCfgV2: \" << zz << \", arena_cfg: \" << arena_cfg;\r\n    std::unique_ptr<OrtArenaCfg, decltype(api.ReleaseArenaCfg)> rel_arena_cfg(arena_cfg, api.ReleaseArenaCfg);\r\n  \r\n    OrtCUDAProviderOptions cuda_options{};\r\n\r\n    cuda_options.device_id = 0;\r\n    cuda_options.cudnn_conv_algo_search = OrtCudnnConvAlgoSearch::OrtCudnnConvAlgoSearchExhaustive;\r\n    cuda_options.gpu_mem_limit = 16 * 1024 * 1024 * 1024ul;\r\n    cuda_options.arena_extend_strategy = 0;\r\n    cuda_options.do_copy_in_default_stream = true;\r\n    cuda_options.has_user_compute_stream = 0;\r\n    cuda_options.user_compute_stream = nullptr;\r\n    cuda_options.default_memory_arena_cfg = arena_cfg;\r\n  \r\n    session_options_.AppendExecutionProvider_CUDA(cuda_options);\r\n    encoder_session_ = std::make_shared<Ort::Session>(\r\n          env_, encoder_onnx_path.c_str(), session_options_);\r\n    ...\r\n\r\n   Ort::RunOptions ro;                                                                                                                                                                                                              \r\n   ro.AddConfigEntry(kOrtRunOptionsConfigEnableMemoryArenaShrinkage, \"gpu:0\");\r\n  // the running was blocked here, CPU 100%, GPU 0%\r\n   std::vector<Ort::Value> ort_outputs = encoder_session_->Run(\r\n        ro, encoder_in_names_.data(), inputs.data(),\r\n        inputs.size(), encoder_out_names_.data(), encoder_out_names_.size());\r\n   VLOG(1) << \"encoder done\" ; // this wouldnot be printed\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292823837/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1296439244",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13464#issuecomment-1296439244",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13464",
        "id": 1296439244,
        "node_id": "IC_kwDOCVq1mM5NRhfM",
        "user": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-31T01:54:58Z",
        "updated_at": "2022-10-31T01:54:58Z",
        "author_association": "NONE",
        "body": "comenting out this line run well\r\n```\r\ncuda_options.default_memory_arena_cfg = arena_cfg;\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1296439244/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "veelion",
            "id": 714675,
            "node_id": "MDQ6VXNlcjcxNDY3NQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/714675?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/veelion",
            "html_url": "https://github.com/veelion",
            "followers_url": "https://api.github.com/users/veelion/followers",
            "following_url": "https://api.github.com/users/veelion/following{/other_user}",
            "gists_url": "https://api.github.com/users/veelion/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/veelion/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/veelion/subscriptions",
            "organizations_url": "https://api.github.com/users/veelion/orgs",
            "repos_url": "https://api.github.com/users/veelion/repos",
            "events_url": "https://api.github.com/users/veelion/events{/privacy}",
            "received_events_url": "https://api.github.com/users/veelion/received_events",
            "type": "User",
            "site_admin": false
        }
    }
]