[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1196155441",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12332#issuecomment-1196155441",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12332",
        "id": 1196155441,
        "node_id": "IC_kwDOCVq1mM5HS-Ix",
        "user": {
            "login": "taoisu",
            "id": 30015018,
            "node_id": "MDQ6VXNlcjMwMDE1MDE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/30015018?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/taoisu",
            "html_url": "https://github.com/taoisu",
            "followers_url": "https://api.github.com/users/taoisu/followers",
            "following_url": "https://api.github.com/users/taoisu/following{/other_user}",
            "gists_url": "https://api.github.com/users/taoisu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/taoisu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/taoisu/subscriptions",
            "organizations_url": "https://api.github.com/users/taoisu/orgs",
            "repos_url": "https://api.github.com/users/taoisu/repos",
            "events_url": "https://api.github.com/users/taoisu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/taoisu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-27T01:03:10Z",
        "updated_at": "2022-07-27T01:03:10Z",
        "author_association": "MEMBER",
        "body": "![image](https://user-images.githubusercontent.com/30015018/181138078-61ce0b10-7d99-4dd2-8f53-0feb4d10012d.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1196155441/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "taoisu",
            "id": 30015018,
            "node_id": "MDQ6VXNlcjMwMDE1MDE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/30015018?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/taoisu",
            "html_url": "https://github.com/taoisu",
            "followers_url": "https://api.github.com/users/taoisu/followers",
            "following_url": "https://api.github.com/users/taoisu/following{/other_user}",
            "gists_url": "https://api.github.com/users/taoisu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/taoisu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/taoisu/subscriptions",
            "organizations_url": "https://api.github.com/users/taoisu/orgs",
            "repos_url": "https://api.github.com/users/taoisu/repos",
            "events_url": "https://api.github.com/users/taoisu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/taoisu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "actor": {
            "login": "taoisu",
            "id": 30015018,
            "node_id": "MDQ6VXNlcjMwMDE1MDE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/30015018?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/taoisu",
            "html_url": "https://github.com/taoisu",
            "followers_url": "https://api.github.com/users/taoisu/followers",
            "following_url": "https://api.github.com/users/taoisu/following{/other_user}",
            "gists_url": "https://api.github.com/users/taoisu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/taoisu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/taoisu/subscriptions",
            "organizations_url": "https://api.github.com/users/taoisu/orgs",
            "repos_url": "https://api.github.com/users/taoisu/repos",
            "events_url": "https://api.github.com/users/taoisu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/taoisu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-27T21:22:48Z",
        "updated_at": "2022-07-27T21:22:48Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40",
                "repository_url": "https://api.github.com/repos/microsoft/onnx-converters-private",
                "labels_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40/events",
                "html_url": "https://github.com/microsoft/onnx-converters-private/issues/40",
                "id": 1320134351,
                "node_id": "I_kwDOHKR66c5Or6bP",
                "number": 40,
                "title": "RobertaEncoder model export issue: 1) the export disregard the dynamic axies, and 2) the export takes extremely long (20+ minutes)",
                "user": {
                    "login": "taoisu",
                    "id": 30015018,
                    "node_id": "MDQ6VXNlcjMwMDE1MDE4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/30015018?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/taoisu",
                    "html_url": "https://github.com/taoisu",
                    "followers_url": "https://api.github.com/users/taoisu/followers",
                    "following_url": "https://api.github.com/users/taoisu/following{/other_user}",
                    "gists_url": "https://api.github.com/users/taoisu/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/taoisu/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/taoisu/subscriptions",
                    "organizations_url": "https://api.github.com/users/taoisu/orgs",
                    "repos_url": "https://api.github.com/users/taoisu/repos",
                    "events_url": "https://api.github.com/users/taoisu/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/taoisu/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 4025055196,
                        "node_id": "LA_kwDOHKR66c7v6Xfc",
                        "url": "https://api.github.com/repos/microsoft/onnx-converters-private/labels/pytorch",
                        "name": "pytorch",
                        "color": "8d33b3",
                        "default": false,
                        "description": "PyTorch to ONNX Issues"
                    },
                    {
                        "id": 4395839646,
                        "node_id": "LA_kwDOHKR66c8AAAABBgMwng",
                        "url": "https://api.github.com/repos/microsoft/onnx-converters-private/labels/postmortem",
                        "name": "postmortem",
                        "color": "98C9C8",
                        "default": false,
                        "description": "Good candidate issues for improving exporter"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": {
                    "login": "BowenBao",
                    "id": 9376104,
                    "node_id": "MDQ6VXNlcjkzNzYxMDQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/9376104?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/BowenBao",
                    "html_url": "https://github.com/BowenBao",
                    "followers_url": "https://api.github.com/users/BowenBao/followers",
                    "following_url": "https://api.github.com/users/BowenBao/following{/other_user}",
                    "gists_url": "https://api.github.com/users/BowenBao/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/BowenBao/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/BowenBao/subscriptions",
                    "organizations_url": "https://api.github.com/users/BowenBao/orgs",
                    "repos_url": "https://api.github.com/users/BowenBao/repos",
                    "events_url": "https://api.github.com/users/BowenBao/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/BowenBao/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "BowenBao",
                        "id": 9376104,
                        "node_id": "MDQ6VXNlcjkzNzYxMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/9376104?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/BowenBao",
                        "html_url": "https://github.com/BowenBao",
                        "followers_url": "https://api.github.com/users/BowenBao/followers",
                        "following_url": "https://api.github.com/users/BowenBao/following{/other_user}",
                        "gists_url": "https://api.github.com/users/BowenBao/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/BowenBao/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/BowenBao/subscriptions",
                        "organizations_url": "https://api.github.com/users/BowenBao/orgs",
                        "repos_url": "https://api.github.com/users/BowenBao/repos",
                        "events_url": "https://api.github.com/users/BowenBao/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/BowenBao/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "titaiwangms",
                        "id": 18010845,
                        "node_id": "MDQ6VXNlcjE4MDEwODQ1",
                        "avatar_url": "https://avatars.githubusercontent.com/u/18010845?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/titaiwangms",
                        "html_url": "https://github.com/titaiwangms",
                        "followers_url": "https://api.github.com/users/titaiwangms/followers",
                        "following_url": "https://api.github.com/users/titaiwangms/following{/other_user}",
                        "gists_url": "https://api.github.com/users/titaiwangms/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/titaiwangms/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/titaiwangms/subscriptions",
                        "organizations_url": "https://api.github.com/users/titaiwangms/orgs",
                        "repos_url": "https://api.github.com/users/titaiwangms/repos",
                        "events_url": "https://api.github.com/users/titaiwangms/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/titaiwangms/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "milestone": null,
                "comments": 10,
                "created_at": "2022-07-27T21:21:14Z",
                "updated_at": "2022-08-04T23:48:28Z",
                "closed_at": "2022-08-04T23:46:26Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "repository": {
                    "id": 480541417,
                    "node_id": "R_kgDOHKR66Q",
                    "name": "onnx-converters-private",
                    "full_name": "microsoft/onnx-converters-private",
                    "private": true,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnx-converters-private",
                    "description": "ONNX Converters private stuff",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnx-converters-private",
                    "forks_url": "https://api.github.com/repos/microsoft/onnx-converters-private/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnx-converters-private/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnx-converters-private/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnx-converters-private/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnx-converters-private/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnx-converters-private/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnx-converters-private/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnx-converters-private/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnx-converters-private/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnx-converters-private/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnx-converters-private/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnx-converters-private/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnx-converters-private/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnx-converters-private/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnx-converters-private/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnx-converters-private/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnx-converters-private/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnx-converters-private/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnx-converters-private/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnx-converters-private/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnx-converters-private/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnx-converters-private/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnx-converters-private/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnx-converters-private/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnx-converters-private/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnx-converters-private/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnx-converters-private/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnx-converters-private/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnx-converters-private/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnx-converters-private/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnx-converters-private/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnx-converters-private/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnx-converters-private/deployments",
                    "created_at": "2022-04-11T20:28:52Z",
                    "updated_at": "2022-10-01T22:41:39Z",
                    "pushed_at": "2022-12-13T23:18:24Z",
                    "git_url": "git://github.com/microsoft/onnx-converters-private.git",
                    "ssh_url": "git@github.com:microsoft/onnx-converters-private.git",
                    "clone_url": "https://github.com/microsoft/onnx-converters-private.git",
                    "svn_url": "https://github.com/microsoft/onnx-converters-private",
                    "homepage": "",
                    "size": 120,
                    "stargazers_count": 2,
                    "watchers_count": 2,
                    "language": "C#",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": false,
                    "has_discussions": true,
                    "forks_count": 0,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 45,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [],
                    "visibility": "private",
                    "forks": 0,
                    "open_issues": 45,
                    "watchers": 2,
                    "default_branch": "main",
                    "permissions": {
                        "admin": true,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "body": "## Can you reproduce the issue using the [preview / nightly version of PyTorch](https://pytorch.org/get-started/locally/) (please try this!)?\r\n\r\nI haven't tried but I'll do so and share the update in this thread later.\r\n\r\n## Describe the problem, including error messages and / or stack traces:\r\n\r\nA clear and concise description of what the bug is. To avoid repetition please make sure this is not one of the known issues mentioned on the respective release page.\r\n\r\nOur production model leverages the RobertaEncoder module from huggingface, this model has this relative embedding calculation in the forward pass, after exporting this model to onnx, I noticed two things:\r\n\r\nThe exporting process takes extremely long, in our production training pipeline it took ~40 minutes, when I try to reproduce this issue locally with a few lines of code, it still took ~20 minutes.\r\nAfter the onnx model export, we cannot open this model with Netron, the Netron tool reports issues saying Maximum stack depth reached.\r\nWhen running this model, while the model is exported with dynamic length, only tensors from the max_seq_len is able to run. However, using fixed length input tensor would increase our COGs more than twice, so it is not an option.\r\n\r\n## Reproduction instructions (Colab link, or Git repo with credentials and a command to run inside the repo, docker image):\r\n\r\nTo reproduce this issue, the following is the code needed:\r\n\r\nstep 1), model export:\r\n```python\r\nimport math\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.nn.functional as F\r\n\r\n\r\ndef relative_position_bucket(relative_position, bidirectional=True, num_buckets=32, max_distance=128):\r\n    ret = 0\r\n    if bidirectional:\r\n        num_buckets //= 2\r\n        ret += (relative_position > 0).long() * num_buckets\r\n        n = torch.abs(relative_position)\r\n    else:\r\n        n = torch.max(-relative_position, torch.zeros_like(relative_position))\r\n    # now n is in the range [0, inf)\r\n\r\n    # half of the buckets are for exact increments in positions\r\n    max_exact = num_buckets // 2\r\n    is_small = n < max_exact\r\n\r\n    # The other half of the buckets are for logarithmically bigger bins in positions up to max_distance\r\n    val_if_large = max_exact + (\r\n        torch.log(n.float() / max_exact) / math.log(max_distance / max_exact) * (num_buckets - max_exact)\r\n    ).to(torch.long)\r\n    val_if_large = torch.min(val_if_large, torch.full_like(val_if_large, num_buckets - 1))\r\n\r\n    ret += torch.where(is_small, n, val_if_large)\r\n    return ret\r\n\r\n\r\n\r\nclass RobertaEncoder(nn.Module):\r\n\r\n    def __init__(self):\r\n        super().__init__()\r\n        num_attention_heads = 16\r\n        self.max_rel_pos = 128\r\n        self.rel_pos_bins = 32\r\n        self.rel_pos_onehot_size = 32\r\n        self.rel_pos_bias = nn.Linear(self.rel_pos_onehot_size, num_attention_heads, bias=False)\r\n\r\n    def forward(self,\r\n        hidden_states,\r\n        position_ids,\r\n        segment_ids,\r\n    ):\r\n        rel_pos = self._cal_1d_pos_emb(hidden_states, position_ids, segment_ids)\r\n        return rel_pos\r\n\r\n    def _cal_1d_pos_emb(self,\r\n        hidden_states,\r\n        position_ids,\r\n        segment_ids,\r\n    ):\r\n        rel_pos_mat = position_ids.unsqueeze(-2) - position_ids.unsqueeze(-1)\r\n        valid_span = torch.zeros_like(rel_pos_mat, device=rel_pos_mat.device, dtype=torch.short)\r\n        for i in range(rel_pos_mat.shape[0]):\r\n            for j in range(rel_pos_mat.shape[1]):\r\n                valid_span[i, j, :] = segment_ids[i, :] == segment_ids[i, j]\r\n\r\n        arange_list = torch.arange(0, position_ids.shape[1], step=1, device=position_ids.device).expand_as(position_ids)\r\n        full_rel = arange_list.unsqueeze(-2) - arange_list.unsqueeze(-1)\r\n        MAX_POS_DIS, MAX_NEG_DIS = 1024, -1024\r\n\r\n        rel_pos_mat[(full_rel > 0) & (valid_span == 0)] = MAX_POS_DIS\r\n        rel_pos_mat[(full_rel < 0) & (valid_span == 0)] = MAX_NEG_DIS\r\n\r\n        rel_pos = relative_position_bucket(\r\n            rel_pos_mat,\r\n            num_buckets=32,\r\n            max_distance=128,\r\n        )\r\n\r\n        rel_pos = F.one_hot(rel_pos, num_classes=32).type_as(hidden_states)\r\n        rel_pos = self.rel_pos_bias(rel_pos).permute(0, 3, 1, 2)\r\n        rel_pos = rel_pos.contiguous()\r\n        return rel_pos\r\n\r\n\r\nif __name__ == '__main__':\r\n    model = RobertaEncoder()\r\n    max_seq_len = 1024\r\n    args = [\r\n        torch.zeros((1, max_seq_len), dtype=torch.float32),\r\n        torch.zeros((1, max_seq_len), dtype=torch.int64),\r\n        torch.zeros((1, max_seq_len), dtype=torch.int64),\r\n    ]\r\n    input_names = [\r\n        'hidden_states',\r\n        'position_ids',\r\n        'segment_ids'\r\n    ]\r\n    output_names = [\r\n        'output_0'\r\n    ]\r\n    dynamic_axes = {\r\n        'hidden_states': { 0: 'batch', 1: 'seq_len' },\r\n        'position_ids': { 0: 'batch', 1: 'seq_len' },\r\n        'segment_ids': { 0: 'batch', 1: 'seq_len' },\r\n        'output_0': { 0: 'batch', 1: 'seq_len' },\r\n    }\r\n    model_path = 'out.onnx'\r\n    torch.onnx.export(\r\n        model,\r\n        tuple(args),\r\n        model_path,\r\n        opset_version=12,\r\n        verbose=False,\r\n        export_params=True,\r\n        do_constant_folding=True,\r\n        input_names=input_names,\r\n        output_names=output_names,\r\n        dynamic_axes=dynamic_axes,\r\n        use_external_data_format=True\r\n    )\r\n```\r\n\r\nstep 2), model inference:\r\n```python\r\nimport numpy as np\r\nimport onnxruntime as ort\r\n\r\nmodel_path = 'out.onnx'\r\nsess = ort.InferenceSession(\r\n    model_path,\r\n    providers=[\"CPUExecutionProvider\"])\r\n\r\n# length = 1024\r\nlength = 419\r\nhidden_states = np.zeros((1, length), dtype=np.float32)\r\nsegment_ids = np.zeros((1, length), dtype=np.int64)\r\nposition_ids = np.zeros((1, length), dtype=np.int64) + 2\r\n\r\ninputs = {\r\n    # 'hidden_states': hidden_states,\r\n    'segment_ids': segment_ids,\r\n    'position_ids': position_ids,\r\n}\r\nlogits = sess.run(None, inputs)\r\n```\r\n\r\nWe expect:\r\n\r\nThe model can run with any tensor length between [2, 1024]\r\nThe model export takes less than 10 minutes to export\r\nThe model can be opened with Netron\r\n\r\n## What product feature or scenario is this model used for (e.g. \"echo cancellation in Teams on Windows\")?\r\n\r\nThe model is aiming to be used for Form Recognizer's prebuilt invoice production as the core model to generate predictions for invoice fields.\r\n\r\n## Does this product feature already use ONNX Runtime in production?\r\n\r\nYes, we currently are using an older version of the model without the local1d embedding, but we want to transit to this new model where we have stronger multi-lingual capabilities.\r\n\r\n## Any deadline or reason for urgency?\r\n\r\nWe'd like this issue to be resolved within one month to be able to catch the shipping schedules.\r\n\r\n## Versions and platforms of any software besides PyTorch involved (e.g. \"ONNX Runtime 1.8.0 on Linux\"):\r\n\r\nONNX Runtime 1.4.0/1.10.0/1.12.0",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnx-converters-private/issues/40/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "event": "cross-referenced"
    },
    {
        "id": 7085588198,
        "node_id": "LE_lADOCVq1mM5OnLIFzwAAAAGmVX7m",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7085588198",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-07-28T23:20:46Z",
        "label": {
            "name": "component:converter-pytorch",
            "color": "303a93"
        },
        "performed_via_github_app": null
    },
    {
        "id": 7209559517,
        "node_id": "LE_lADOCVq1mM5OnLIFzwAAAAGtuSXd",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7209559517",
        "actor": {
            "login": "sophies927",
            "id": 107952697,
            "node_id": "U_kgDOBm86OQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/107952697?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sophies927",
            "html_url": "https://github.com/sophies927",
            "followers_url": "https://api.github.com/users/sophies927/followers",
            "following_url": "https://api.github.com/users/sophies927/following{/other_user}",
            "gists_url": "https://api.github.com/users/sophies927/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sophies927/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sophies927/subscriptions",
            "organizations_url": "https://api.github.com/users/sophies927/orgs",
            "repos_url": "https://api.github.com/users/sophies927/repos",
            "events_url": "https://api.github.com/users/sophies927/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sophies927/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-08-17T22:21:58Z",
        "label": {
            "name": "component:converter",
            "color": "303a93"
        },
        "performed_via_github_app": null
    },
    {
        "id": 7209561572,
        "node_id": "UNLE_lADOCVq1mM5OnLIFzwAAAAGtuS3k",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7209561572",
        "actor": {
            "login": "sophies927",
            "id": 107952697,
            "node_id": "U_kgDOBm86OQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/107952697?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sophies927",
            "html_url": "https://github.com/sophies927",
            "followers_url": "https://api.github.com/users/sophies927/followers",
            "following_url": "https://api.github.com/users/sophies927/following{/other_user}",
            "gists_url": "https://api.github.com/users/sophies927/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sophies927/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sophies927/subscriptions",
            "organizations_url": "https://api.github.com/users/sophies927/orgs",
            "repos_url": "https://api.github.com/users/sophies927/repos",
            "events_url": "https://api.github.com/users/sophies927/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sophies927/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "unlabeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-08-17T22:22:35Z",
        "label": {
            "name": "component:converter-pytorch",
            "color": "303a93"
        },
        "performed_via_github_app": null
    }
]