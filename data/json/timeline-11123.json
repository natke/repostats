[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090941983",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1090941983",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1090941983,
        "node_id": "IC_kwDOCVq1mM5BBnQf",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-07T00:03:52Z",
        "updated_at": "2022-04-07T00:03:52Z",
        "author_association": "MEMBER",
        "body": "Have you checked that the float values in the input are exactly the same between the two calls? \r\n\r\nThis doesn't look equivalent either\r\n\r\n`resized_normalized_fl = np.array(resized, np.float32) - 127) * 0.0078125`\r\nvs\r\n```\r\nauto mean = cv::Scalar(127, 127, 127);\r\nauto stdv = cv::Scalar(128.0, 128.0, 128.0);\r\nimage = resizedImage - mean;\r\nimage /= stdv;\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090941983/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1091104973",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1091104973",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1091104973,
        "node_id": "IC_kwDOCVq1mM5BCPDN",
        "user": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-07T05:47:07Z",
        "updated_at": "2022-04-07T05:49:01Z",
        "author_association": "NONE",
        "body": "> Have you checked that the float values in the input are exactly the same between the two calls?\r\n> \r\n> This doesn't look equivalent either\r\n> \r\n> `resized_normalized_fl = np.array(resized, np.float32) - 127) * 0.0078125` vs\r\n> \r\n> ```\r\n> auto mean = cv::Scalar(127, 127, 127);\r\n> auto stdv = cv::Scalar(128.0, 128.0, 128.0);\r\n> image = resizedImage - mean;\r\n> image /= stdv;\r\n> ```\r\n\r\nWhen I load the image, in both cases the values are the same.\r\nThe values start changing after I resize - in the Python version  (after I convert to float) it looks like this:\r\n``\r\narray([[[220., 241., 255.],\r\n        [220., 241., 255.],\r\n        [220., 241., 255.],\r\n       ...\r\n        [ 47.,  27.,  16.],\r\n        [ 48.,  26.,  11.],\r\n        [ 46.,  27.,  17.]],\r\n       ...\r\n       [[220., 241., 255.],\r\n        [221., 242., 255.],\r\n        [223., 243., 255.],\r\n        ...\r\n        [ 45.,  25.,  18.],\r\n        [ 46.,  28.,  13.],\r\n        [ 48.,  28.,  19.]],\r\n       ...\r\n       [[227., 245., 255.],\r\n        [230., 246., 255.],\r\n        [231., 244., 255.],\r\n``\r\n\r\nWhile in the C++ version some values change slightly - instead of \r\n[220., 241., 255.],\r\n        [220., 241., 255.],\r\n        [220., 241., 255.]\r\n\r\nI get something like this (before conversion to float):\r\n\r\n[220, 241, 255],\r\n        [219, 241, 255],\r\n        [219, 242, 255]\r\n\r\nAre you sure the normalization is not equivalent? in both cases I:\r\n- Convert to from uint8 to float32.\r\n- Decrease 127 from each value of the matrix\r\n- Divide the quotient by 128 (1/128 = 0.0078125, so multiplying by 0.0078125 is equal to dividing by 128)\r\n\r\nIs there something I'm missing?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1091104973/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1091125595",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1091125595",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1091125595,
        "node_id": "IC_kwDOCVq1mM5BCUFb",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-07T06:24:16Z",
        "updated_at": "2022-04-07T06:24:16Z",
        "author_association": "MEMBER",
        "body": "Whether you call from python or C++ the exact same C++ code is running to execute the model. We do not change the bytes provided by the user prior to executing the model.\r\n\r\nBased on that, if you're getting diffs either the input is not exactly the same (either the bytes or the shape you're saying the tensor has), or the way you're processing the output is not exactly the same.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1091125595/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1097136883",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1097136883",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1097136883,
        "node_id": "IC_kwDOCVq1mM5BZPrz",
        "user": {
            "login": "vade",
            "id": 65011,
            "node_id": "MDQ6VXNlcjY1MDEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/65011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vade",
            "html_url": "https://github.com/vade",
            "followers_url": "https://api.github.com/users/vade/followers",
            "following_url": "https://api.github.com/users/vade/following{/other_user}",
            "gists_url": "https://api.github.com/users/vade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vade/subscriptions",
            "organizations_url": "https://api.github.com/users/vade/orgs",
            "repos_url": "https://api.github.com/users/vade/repos",
            "events_url": "https://api.github.com/users/vade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vade/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-12T19:35:54Z",
        "updated_at": "2022-04-12T19:35:54Z",
        "author_association": "CONTRIBUTOR",
        "body": "From our experience a lot of this has to do with the re-sizing algorithm being used, and if it is doing bilinear interpolation, or any other sort of interpolation. There was a good write up here\r\n\r\nhttps://blog.zuru.tech/machine-learning/2021/08/09/the-dangers-behind-image-resizing",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1097136883/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "vade",
            "id": 65011,
            "node_id": "MDQ6VXNlcjY1MDEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/65011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vade",
            "html_url": "https://github.com/vade",
            "followers_url": "https://api.github.com/users/vade/followers",
            "following_url": "https://api.github.com/users/vade/following{/other_user}",
            "gists_url": "https://api.github.com/users/vade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vade/subscriptions",
            "organizations_url": "https://api.github.com/users/vade/orgs",
            "repos_url": "https://api.github.com/users/vade/repos",
            "events_url": "https://api.github.com/users/vade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vade/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1098014632",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1098014632",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1098014632,
        "node_id": "IC_kwDOCVq1mM5Bcl-o",
        "user": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-13T12:53:04Z",
        "updated_at": "2022-04-13T12:59:29Z",
        "author_association": "NONE",
        "body": "Thank you all for your answers.\r\nFirst, indeed the values after the resize was different in the Python script compared to the C++ script. \r\n\r\nSo, I resized the image using ffmpeg outside of the code to be 320x320x3 and compared the Python results to the C++.\r\nBefore the onnxruntime inference, the data was the same in both script:\r\n\r\n**Python:**\r\n``[[[ 0.7578125  0.921875   1.       ]\r\n  [ 0.7421875  0.90625    1.       ]\r\n  [ 0.75       0.8984375  1.       ]\r\n  ...\r\n  [-0.6171875 -0.8125    -0.8671875]\r\n  [-0.5625    -0.796875  -0.8125   ]\r\n  [-0.53125   -0.78125   -0.7578125]]\r\n\r\n [[ 0.7734375  0.9140625  1.       ]\r\n  [ 0.765625   0.9140625  1.       ]\r\n  [ 0.7734375  0.90625    1.       ]\r\n  ...\r\n  [-0.6328125 -0.765625  -0.703125 ]\r\n  [-0.6171875 -0.7734375 -0.84375  ]\r\n  [-0.625     -0.7890625 -0.953125 ]]\r\n\r\n [[ 0.796875   0.9296875  1.       ]\r\n  [ 0.7890625  0.9140625  1.       ]\r\n  [ 0.7578125  0.8828125  1.       ]\r\n  ...\r\n  [-0.515625  -0.3359375 -0.0703125]\r\n  [-0.625     -0.5859375 -0.359375 ]\r\n  [-0.6796875 -0.7109375 -0.53125  ]]\r\n\r\n ...\r\n\r\n [[ 0.25       0.421875   0.7109375]\r\n  [ 0.25       0.421875   0.7109375]\r\n  [ 0.2578125  0.4296875  0.71875  ]\r\n  ...\r\n  [-0.1015625  0.1015625  0.3125   ]\r\n  [-0.0859375  0.109375   0.34375  ]\r\n  [-0.0859375  0.125      0.3515625]]\r\n\r\n [[ 0.2421875  0.4140625  0.703125 ]\r\n  [ 0.25       0.421875   0.7109375]\r\n  [ 0.2578125  0.4296875  0.71875  ]\r\n  ...\r\n  [-0.1640625  0.0390625  0.25     ]\r\n  [-0.1484375  0.0546875  0.265625 ]\r\n  [-0.1484375  0.0625     0.2734375]]\r\n\r\n [[ 0.2421875  0.4140625  0.703125 ]\r\n  [ 0.2421875  0.4140625  0.703125 ]\r\n  [ 0.25       0.421875   0.7109375]\r\n  ...\r\n  [-0.203125   0.         0.1953125]\r\n  [-0.1953125  0.0078125  0.21875  ]\r\n  [-0.1953125  0.015625   0.2265625]]]``\r\n\r\n\r\n**C++:**\r\n``{0.7578125, 0.921875, 1, 0.7421875, 0.90625, 1, 0.75, 0.8984375, 1, 0.7734375, 0.921875, 1, 0.8125, \r\n  0.9453125, 1, 0.84375, 0.96875, 1, 0.8359375, 0.9609375, 1, 0.8359375, 0.9375, 1, 0.8359375, 0.859375, 1, 0.796875, 0.8203125, 0.96875, 0.71875, 0.7421875, \r\n  0.890625, 0.6171875, 0.640625, 0.7890625, 0.5078125, 0.53125, 0.6796875, 0.40625, 0.4296875, 0.578125, 0.3359375, 0.359375, 0.5078125, 0.2890625, 0.3125, \r\n  0.4609375, 0.1796875, 0.171875, 0.21875, 0.1640625, 0.15625, 0.203125, 0.140625, 0.1328125, 0.1796875, 0.1171875, 0.109375, 0.15625, 0.0859375, 0.078125, 0.125, \r\n  0.0625, 0.0546875, 0.1015625, 0.0390625, 0.03125, 0.078125, 0.03125, 0.0234375, 0.0703125, -0.015625, -0.0234375, 0.0234375, -0.015625, -0.0234375, 0.0234375, \r\n  -0.015625, -0.0234375, 0.0234375, -0.015625, -0.0234375, 0.0234375, -0.015625, -0.0234375, 0.0234375, -0.015625, -0.0234375, 0.0234375, -0.015625, -0.0234375, \r\n  0.0234375, -0.015625, -0.0234375, 0.0234375, -0.03125, -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, -0.03125, \r\n  -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, -0.03125, -0.0390625, 0.0078125, \r\n  -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, \r\n  -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, -0.0234375, -0.03125, 0.015625, -0.0078125, -0.015625, 0.03125, -0.0078125, -0.015625, 0.03125, \r\n  -0.0078125, -0.015625, 0.03125, -0.0078125, -0.015625, 0.03125, -0.0078125, -0.015625, 0.03125, -0.0078125, -0.015625, 0.03125, -0.0078125, -0.015625, 0.03125, \r\n  -0.0078125, -0.015625, 0.03125, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, \r\n  0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0546875, 0.015625, 0.0078125, 0.0703125, \r\n  0.0234375, 0.015625, 0.078125, 0.0234375, 0.015625...}``\r\n\r\n\r\n**_After_** the inference, the data was different:\r\n\r\n**Python**\r\n[array([25.], dtype=float32), array([[0.7179791 , 0.7119217 , 0.62644404, 0.61120206, 0.60349655,\r\n        0.59455496, 0.475785  , 0.45168328, 0.42625162, 0.41206586,\r\n        0.35856092, 0.33548713, 0.3174196 , 0.30479813, 0.29680106,\r\n        0.2750082 , 0.24047014, 0.23226899, 0.22655705, 0.21002227,\r\n        0.20035607, 0.19754827, 0.19366431, 0.19108632, 0.18938068]],\r\n      dtype=float32), array([[4., 4., 4., 4., 4., 1., 4., 4., 4., 4., 4., 4., 4., 3., 4., 4.,\r\n        3., 4., 3., 4., 2., 4., 4., 0., 4.]], dtype=float32), array([[[ 0.12975946,  0.6441527 ,  0.23351136,  0.80738896],\r\n        [ 0.2736489 ,  0.00185148,  0.4825773 ,  0.22635683],\r\n        [ 0.65909886, -0.01258603,  0.83043504,  0.19587263],\r\n        [ 0.10156354,  0.1404661 ,  0.2706743 ,  0.3601166 ],\r\n        [ 0.6712812 ,  0.11650395,  0.9390955 ,  0.45991158],\r\n        [ 0.10430276, -0.0154283 ,  0.9877626 ,  0.99496937],\r\n        [ 0.68577504,  0.03489889,  0.88403654,  0.30629593],\r\n        [ 0.1208953 ,  0.3588065 ,  0.27319536,  0.56323886],\r\n        [ 0.75791574,  0.28043842,  0.9900408 ,  0.8880708 ],\r\n        [ 0.1284423 ,  0.15103848,  0.31055123,  0.47694856],\r\n        [ 0.7945792 ,  0.44237936,  0.9571679 ,  0.7761717 ],\r\n        [ 0.7418754 ,  0.23470417,  0.9499682 ,  0.6870462 ],\r\n        [ 0.10430276, -0.0154283 ,  0.9877626 ,  0.99496937],\r\n        [ 0.10430276, -0.0154283 ,  0.9877626 ,  0.99496937],\r\n        [ 0.27733627,  0.10644138,  0.35180125,  0.22269616],\r\n        [ 0.8497372 ,  0.27455845,  0.99365884,  0.74148035],\r\n        [ 0.12975946,  0.6441527 ,  0.23351136,  0.80738896],\r\n        [ 0.6577364 ,  0.87984174,  0.9097352 ,  0.9911242 ],\r\n        [ 0.1039575 ,  0.14878443,  0.2790619 ,  0.37039748],\r\n        [ 0.28879404, -0.00826786,  0.60837495,  0.17147563],\r\n        [ 0.10789749,  0.0133456 ,  1.0126656 ,  1.021101  ],\r\n        [ 0.28280312, -0.00481155,  0.44011647,  0.15008521],\r\n        [ 0.07400489,  0.11371401,  0.34831053,  0.6553389 ],\r\n        [ 0.10430276, -0.0154283 ,  0.9877626 ,  0.99496937],\r\n        [ 0.15573569,  0.1945535 ,  0.27901036,  0.41661817]]],\r\n      dtype=float32)]\r\n\r\n\r\n**C++:**\r\n`Num of Detections: 25\r\nScores:\r\n0.710172 0.694793 0.612079 0.600294 0.598423\r\n0.581148 0.462774 0.43772 0.411057 0.349067\r\n0.323653 0.31031 0.284933 0.248059 0.240939\r\n0.235866 0.213165 0.212527 0.211755 0.199356\r\n0.19532 0.180585 0.179348 0.177948 0.174256\r\nClasses:\r\n4 4 1 4 4\r\n4 4 4 4 4\r\n3 4 4 4 4\r\n4 4 3 0 3\r\n2 4 4 4 3\r\nBoxes:\r\n0.130985 -5.59583e-22 0.804696 0.23496\r\n-0.000445321 0.130985 0.486398 0.23496\r\n-0.0163887 0.130985 0.996883 0.804696\r\n-0.0141229 0.130985 0.831537 0.804696\r\n0.113236 0.130985 0.385396 0.23496\r\n0.121371 0.130985 0.932411 0.804696\r\n0.126016 0.130985 0.563229 0.23496\r\n0.0369672 0.130985 0.88424 0.804696\r\n0.134313 0 0.530164 0.23496\r\n0.325595 0.645794 0.979523 0.804696\r\n-0.0163887 0.130985 0.996883 0.804696\r\n0.238456 0.645794 0.948744 0.804696\r\n0.679079 0 1.00041 0.804696\r\n0.452269 0.645794 0.972619 0.804696\r\n0.274299 0.645794 0.995574 0.804696\r\n-0.0163887 0.130985 0.996883 0.804696\r\n0.104204 0.130985 0.357313 0.23496\r\n0.105327 0.130985 0.369661 0.23496\r\n-0.0163887 0.130985 0.996883 0.804696\r\n0.130985 0.23496 0.804696 0.645794\r\n0.00858939 0.130985 1.02182 0.804696\r\n0.0762396 0.130985 0.634973 0.23496\r\n0.106924 0.130985 0.375005 0.23496\r\n0.00952158 0.130985 0.612958 0.23496\r\n-0.000445321 0.130985 0.486398 0.23496`\r\n\r\nI understand that the Python is also running a C++ code de facto, but I don't know how it's possible that pre-inference data is the same, while the post-inference data is different. \r\n\r\nThe only thing I changed in the scripts is the resize:\r\n\r\n**Python**:\r\nDeleted the line `resized = cv2.resize(image_RGB, (320, 320), interpolation = cv2.INTER_AREA)`\r\n\r\n**C++:**\r\nDeleted the line `cv::resize(imageBGR, resizedImageBGR, cv::Size(320, 320), cv::InterpolationFlags::INTER_AREA);`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1098014632/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1112167319",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1112167319",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1112167319,
        "node_id": "IC_kwDOCVq1mM5CSlOX",
        "user": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-28T12:53:43Z",
        "updated_at": "2022-04-28T12:54:17Z",
        "author_association": "NONE",
        "body": "> Whether you call from python or C++ the exact same C++ code is running to execute the model. We do not change the bytes provided by the user prior to executing the model.\r\n> \r\n> Based on that, if you're getting diffs either the input is not exactly the same (either the bytes or the shape you're saying the tensor has), or the way you're processing the output is not exactly the same.\r\n\r\nAfter checking and re-checking again, with a pre-resized input image, the values of the input tensor in both Python and C++ are identical. \r\nAfter the:\r\n**Python** - full_model_onnx.run(output_nodes, inputs)\r\nand\r\n**C++** - auto output_tensors = session.Run(Ort::RunOptions{nullptr}, input_names, &input_tensor, input_num, output_names, output_num);  \r\nThe output values are different. \r\n\r\nIf the same code in running on the background in both Python and C++, is the inputs are the same than the outputs should be the same. Since it's not the case, there are two options that I can think of:\r\n1. There's a difference in the ONNXRuntime \"run\" function between Python and C++.\r\n2. There a difference in the way the data is retrieved - In Python, the return value from the \"run\" functions is a simple list. In C++, the return value from \"run\" is an Ort::Value, and in order to get a printable / mutable data we need to use \"auto scores = output_tensors[0].GetTensorMutableData();\".\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1112167319/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1119140868",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1119140868",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1119140868,
        "node_id": "IC_kwDOCVq1mM5CtLwE",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-05T23:38:26Z",
        "updated_at": "2022-05-05T23:38:26Z",
        "author_association": "MEMBER",
        "body": "Can you clarify 'different'. The formatting for printing floating point numbers can differ between numpy and C++, especially in terms of rounding. \r\n\r\nFor example:\r\nhttps://github.com/microsoft/onnxruntime/blob/2a90922f01e2fa9861dda0c7a769cfed09658167/onnxruntime/test/onnx/main.cc#L534-L537\r\n\r\nThe same bytes should be being returned in the output buffer for the same input, so any difference from the conversion to string should be minor.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1119140868/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 6568274151,
        "node_id": "CE_lADOCVq1mM5HLqx0zwAAAAGHf-jn",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/6568274151",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "closed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-05-08T06:34:57Z",
        "state_reason": null,
        "performed_via_github_app": null
    },
    {
        "id": 6568274196,
        "node_id": "REE_lADOCVq1mM5HLqx0zwAAAAGHf-kU",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/6568274196",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "reopened",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-05-08T06:35:01Z",
        "state_reason": null,
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1120361081",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1120361081",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1120361081,
        "node_id": "IC_kwDOCVq1mM5Cx1p5",
        "user": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-08T06:45:19Z",
        "updated_at": "2022-05-08T06:45:19Z",
        "author_association": "NONE",
        "body": "> Can you clarify 'different'. The formatting for printing floating point numbers can differ between numpy and C++, especially in terms of rounding.\r\n> \r\n> For example:\r\n> \r\n> https://github.com/microsoft/onnxruntime/blob/2a90922f01e2fa9861dda0c7a769cfed09658167/onnxruntime/test/onnx/main.cc#L534-L537\r\n> \r\n> The same bytes should be being returned in the output buffer for the same input, so any difference from the conversion to string should be minor.\r\n\r\nIf you look in one of my comments above, I pasted the output values I get from Python and C++. \r\nIf, for example, we'll take the first 12 output coordinates of the detection boxes from both, these are the values we get:\r\n\r\nPython:\r\n[0.12975946, 0.6441527 , 0.23351136, 0.80738896],\r\n[ 0.2736489 , 0.00185148, 0.4825773 , 0.22635683],\r\n[ 0.65909886, -0.01258603, 0.83043504, 0.19587263]\r\n\r\nC++:\r\n0.130985 -5.59583e-22 0.804696 0.23496 \r\n-0.000445321 0.130985 0.486398 0.23496 \r\n-0.0163887 0.130985 0.996883 0.804696\r\n\r\nAs you can see her, the coordinates x_min, y_min, x_max_, y_max are not the same. sometimes its relatively a small diif, and sometimes its not even close. \r\nSince, as I showed in the comments above, the input values are identical in Python and C++, it seems that there's an issue in how the data is processed in the ORT \"run\" function, or in the data retrieval from the output Ort::Value.  \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1120361081/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1204817994",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1204817994",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1204817994,
        "node_id": "IC_kwDOCVq1mM5H0BBK",
        "user": {
            "login": "ZiyueWangUoB",
            "id": 33383959,
            "node_id": "MDQ6VXNlcjMzMzgzOTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/33383959?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZiyueWangUoB",
            "html_url": "https://github.com/ZiyueWangUoB",
            "followers_url": "https://api.github.com/users/ZiyueWangUoB/followers",
            "following_url": "https://api.github.com/users/ZiyueWangUoB/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZiyueWangUoB/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZiyueWangUoB/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZiyueWangUoB/subscriptions",
            "organizations_url": "https://api.github.com/users/ZiyueWangUoB/orgs",
            "repos_url": "https://api.github.com/users/ZiyueWangUoB/repos",
            "events_url": "https://api.github.com/users/ZiyueWangUoB/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZiyueWangUoB/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-04T06:28:21Z",
        "updated_at": "2022-08-04T06:28:21Z",
        "author_association": "NONE",
        "body": "Any updates on this? I'm facing the same issue. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1204817994/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "ZiyueWangUoB",
            "id": 33383959,
            "node_id": "MDQ6VXNlcjMzMzgzOTU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/33383959?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZiyueWangUoB",
            "html_url": "https://github.com/ZiyueWangUoB",
            "followers_url": "https://api.github.com/users/ZiyueWangUoB/followers",
            "following_url": "https://api.github.com/users/ZiyueWangUoB/following{/other_user}",
            "gists_url": "https://api.github.com/users/ZiyueWangUoB/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ZiyueWangUoB/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ZiyueWangUoB/subscriptions",
            "organizations_url": "https://api.github.com/users/ZiyueWangUoB/orgs",
            "repos_url": "https://api.github.com/users/ZiyueWangUoB/repos",
            "events_url": "https://api.github.com/users/ZiyueWangUoB/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ZiyueWangUoB/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1204993475",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1204993475",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1204993475,
        "node_id": "IC_kwDOCVq1mM5H0r3D",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-04T09:21:55Z",
        "updated_at": "2022-08-04T09:21:55Z",
        "author_association": "MEMBER",
        "body": "I can't reproduce. The same code runs the model so the same input bytes should produce the same output bytes. Any differences would be from the code before or after the InferenceSession Run call.\r\n\r\nI did the following to save the input generated by the python code and the output received by the python code in the format our [onnx_test_runner](https://github.com/microsoft/onnxruntime/tree/master/onnxruntime/test/onnx) test tool uses to validate models. The test tool is written in C++. It loads the bytes from the saved input/output and executes the model using the C++ API. It reports that the results match.\r\n\r\nI believe that validates that the same bytes of input produce the same bytes of output.\r\n\r\n```python\r\nimport cv2\r\nimport numpy as np\r\nimport onnxruntime as ort\r\n\r\n# do all pre-processing so we have the input we're going to provide to the model\r\nimage_BGR = cv2.imread(r'D:\\temp\\salad_test\\salad.jpg')\r\nimage_RGB= cv2.cvtColor(image_BGR, cv2.COLOR_BGR2RGB)\r\nresized = cv2.resize(image_RGB, (320, 320), interpolation = cv2.INTER_AREA)\r\nresized_normalized_fl = (np.array(resized, np.float32) - 127) * 0.0078125\r\ninput = np.expand_dims(resized_normalized_fl, 0)\r\n\r\n# save that input in a protobuf file so we can also use it from the onnx_test_runner C++ code\r\n#\r\n# import a helper script from ORT to write out the bytes for the input and output as protobuf files\r\n# Can probably download this from github as it's standalone\r\n# https://github.com/microsoft/onnxruntime/blob/master/tools/python/onnx_test_data_utils.py\r\nort_repo_python_tools = r'D:\\onnxruntime_repo_from_github\\tools\\python'\r\nimport sys\r\nsys.path.append(ort_repo_python_tools)\r\nimport onnx_test_data_utils\r\n\r\nonnx_test_data_utils.numpy_to_pb('serving_default_images:0', input,\r\n                                 r'D:\\temp\\salad_test\\test_data_set_0\\input_0.pb')\r\n\r\noutput_names = ['StatefulPartitionedCall:0', 'StatefulPartitionedCall:1', 'StatefulPartitionedCall:2', 'StatefulPartitionedCall:3']\r\nsession = ort.InferenceSession(r'D:\\temp\\salad_test\\salad.onnx')\r\noutputs = session.run(output_names, {'serving_default_images:0': input})\r\n\r\n# save the output data to validate the output from the C API\r\ni = 0\r\nfor o in outputs:\r\n    print(f\"Output {i}:{output_names[i]} has shape {np.shape(o)}\")\r\n    print(o)\r\n    onnx_test_data_utils.numpy_to_pb(output_names[i], o, r'D:\\temp\\salad_test\\test_data_set_0\\output_' + str(i) + '.pb')\r\n    i += 1\r\n```\r\n\r\nOutput from python:\r\n\r\n```\r\nOutput 0:StatefulPartitionedCall:0 has shape (1,)\r\n[25.]\r\nOutput 1:StatefulPartitionedCall:1 has shape (1, 25)\r\n[[0.7073383  0.6937418  0.65383303 0.63405895 0.62928486 0.5617206\r\n  0.5097608  0.42426664 0.39106843 0.3309952  0.28501803 0.27418488\r\n  0.22237387 0.21934518 0.21848157 0.21627447 0.21239078 0.2072804\r\n  0.19909242 0.19692048 0.19249496 0.1893397  0.18886447 0.18866774\r\n  0.18062428]]\r\nOutput 2:StatefulPartitionedCall:2 has shape (1, 25)\r\n[[4. 4. 1. 4. 4. 4. 4. 4. 4. 4. 3. 4. 4. 4. 0. 4. 4. 4. 3. 3. 4. 4. 3. 2.\r\n  4.]]\r\nOutput 3:StatefulPartitionedCall:3 has shape (1, 25, 4)\r\n[[[ 2.6536268e-01 -5.0874799e-04  4.8290437e-01  2.2682324e-01]\r\n  [ 1.3203146e-01  6.4495105e-01  2.3465361e-01  8.0632132e-01]\r\n  [ 1.0321391e-01 -1.3858557e-02  9.8806810e-01  1.0007272e+00]\r\n  [ 6.8402600e-01  1.2209380e-01  9.2899990e-01  4.6162629e-01]\r\n  [ 1.1299485e-01  1.4727369e-01  2.8355274e-01  3.7982914e-01]\r\n  [ 6.5955776e-01 -1.2563296e-02  8.2872158e-01  1.9798708e-01]\r\n  [ 1.2324050e-01  3.7302625e-01  2.8221276e-01  5.6010902e-01]\r\n  [ 6.8642479e-01  4.0286705e-02  8.8163620e-01  3.0838162e-01]\r\n  [ 1.3024744e-01  1.8475701e-01  3.1574792e-01  5.2967453e-01]\r\n  [ 7.3650724e-01  2.0920816e-01  9.8306054e-01  7.8827608e-01]\r\n  [ 1.0321391e-01 -1.3858557e-02  9.8806810e-01  1.0007272e+00]\r\n  [ 1.0321391e-01 -1.3858557e-02  9.8806810e-01  1.0007272e+00]\r\n  [ 7.9829597e-01  4.4458807e-01  9.5156658e-01  7.8481364e-01]\r\n  [ 8.4526575e-01  2.7085415e-01  9.9576116e-01  7.3343062e-01]\r\n  [ 1.0321391e-01 -1.3858557e-02  9.8806810e-01  1.0007272e+00]\r\n  [ 2.7537832e-01  1.0597825e-01  3.5489050e-01  2.2212991e-01]\r\n  [ 1.9314238e-01  5.4672018e-02  3.7764362e-01  3.2572681e-01]\r\n  [ 6.7706102e-01  8.8712126e-01  8.5774964e-01  1.0020802e+00]\r\n  [ 1.3203146e-01  6.4495105e-01  2.3465361e-01  8.0632132e-01]\r\n  [ 1.0506896e-01  1.4067614e-01  2.7989385e-01  3.6557829e-01]\r\n  [ 7.7638006e-01  2.2335689e-01  9.6234071e-01  5.7003754e-01]\r\n  [ 7.9946682e-02  1.1649597e-01  3.5405028e-01  6.5007287e-01]\r\n  [ 1.2727095e-01  3.8319668e-01  2.7833617e-01  5.6334996e-01]\r\n  [ 9.9618524e-02  4.2115450e-03  1.0073204e+00  1.0165281e+00]\r\n  [ 7.9993290e-01  2.8592539e-01  1.0374128e+00  8.5811651e-01]]]\r\n```\r\n\r\nOutput from onnx_test_runner:\r\n\r\n```cmd\r\nonnx_test_runner.exe D:\\temp\\salad_test\\\r\nresult:\r\n        Models: 1\r\n        Total test cases: 1\r\n                Succeeded: 1\r\n                Not implemented: 0\r\n                Failed: 0\r\n```\r\n\r\nTo be absolutely sure onnx_test_runner is doing what it's supposed to, I added this to the output processing to make the first entry in the 3rd output incorrect:\r\n\r\n```python\r\nfor o in outputs:\r\n    if i == 3:\r\n        o[0, 0, 0] = o[0, 0, 0] + 10\r\n```\r\n\r\nAnd that resulted in the expected failure from onnx_test_runner\r\n\r\n```\r\n2022-08-04 19:13:38.5316034 [E:onnxruntime:Default, dataitem_request.cc:212 onnxruntime::test::DataTaskRequestContext::RunImpl] salad_test:output=StatefulPartitionedCall:3:expected 10.2654 (41243eed), got 0.265363 (3e87dd9e), diff: 10, tol=0.0112654 idx=0. 1 of 100 differ\r\n2022-08-04 19:13:38.5391684 [E:onnxruntime:Default, testcase_request.cc:194 onnxruntime::test::TestCaseRequestContext::CalculateAndLogStats] salad_test: result differs. Dataset:D:\\temp\\salad_test\\test_data_set_0\r\n\r\nresult:\r\n        Models: 1\r\n        Total test cases: 1\r\n                Succeeded: 0\r\n                Not implemented: 0\r\n                Failed: 1\r\n                        Result differs: 1\r\n```\r\n\r\nSo the python input bytes -> saved -> read by C++ code -> executed using C++ code produces output that matches the output bytes saved from python.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1204993475/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1262326584",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1262326584",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1262326584,
        "node_id": "IC_kwDOCVq1mM5LPZM4",
        "user": {
            "login": "JHC521PJJ",
            "id": 90960853,
            "node_id": "MDQ6VXNlcjkwOTYwODUz",
            "avatar_url": "https://avatars.githubusercontent.com/u/90960853?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JHC521PJJ",
            "html_url": "https://github.com/JHC521PJJ",
            "followers_url": "https://api.github.com/users/JHC521PJJ/followers",
            "following_url": "https://api.github.com/users/JHC521PJJ/following{/other_user}",
            "gists_url": "https://api.github.com/users/JHC521PJJ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JHC521PJJ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JHC521PJJ/subscriptions",
            "organizations_url": "https://api.github.com/users/JHC521PJJ/orgs",
            "repos_url": "https://api.github.com/users/JHC521PJJ/repos",
            "events_url": "https://api.github.com/users/JHC521PJJ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JHC521PJJ/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-09-29T13:58:57Z",
        "updated_at": "2022-09-29T13:58:57Z",
        "author_association": "NONE",
        "body": "I have the same problem now. Anyone can help me?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1262326584/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "JHC521PJJ",
            "id": 90960853,
            "node_id": "MDQ6VXNlcjkwOTYwODUz",
            "avatar_url": "https://avatars.githubusercontent.com/u/90960853?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JHC521PJJ",
            "html_url": "https://github.com/JHC521PJJ",
            "followers_url": "https://api.github.com/users/JHC521PJJ/followers",
            "following_url": "https://api.github.com/users/JHC521PJJ/following{/other_user}",
            "gists_url": "https://api.github.com/users/JHC521PJJ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JHC521PJJ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JHC521PJJ/subscriptions",
            "organizations_url": "https://api.github.com/users/JHC521PJJ/orgs",
            "repos_url": "https://api.github.com/users/JHC521PJJ/repos",
            "events_url": "https://api.github.com/users/JHC521PJJ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JHC521PJJ/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1289072047",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11123#issuecomment-1289072047",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11123",
        "id": 1289072047,
        "node_id": "IC_kwDOCVq1mM5M1a2v",
        "user": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-24T13:53:36Z",
        "updated_at": "2022-10-24T13:53:36Z",
        "author_association": "NONE",
        "body": "It seems that the issue comes from the way the image is loaded and handled.\r\nBy loading the image like so:\r\n\r\n```\r\nimageBGR = cv::imread(imagePath, cv::ImreadModes::IMREAD_COLOR); \r\n\r\ncv::Mat resizedImageBGR, resizedImageRGB, resizedImage, image;\r\ncv::resize(imageBGR, resizedImageBGR, cv::Size(HEIGHT, WIDTH), cv::InterpolationFlags::INTER_CUBIC);\r\ncv::cvtColor(resizedImageBGR, resizedImageRGB, cv::ColorConversionCodes::COLOR_BGR2RGB);\r\nresizedImageRGB.convertTo(resizedImage, CV_32F, 1.0 / 255);\r\n```\r\nAnd applying the correct normalization, channels switching (HWC to CHW using cv::dnn::blobFromImage()) and post-process, I was able to get correct results on two different models (classification and detection).\r\n\r\n\r\n ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1289072047/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "omerwer",
            "id": 58146682,
            "node_id": "MDQ6VXNlcjU4MTQ2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/58146682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/omerwer",
            "html_url": "https://github.com/omerwer",
            "followers_url": "https://api.github.com/users/omerwer/followers",
            "following_url": "https://api.github.com/users/omerwer/following{/other_user}",
            "gists_url": "https://api.github.com/users/omerwer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/omerwer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/omerwer/subscriptions",
            "organizations_url": "https://api.github.com/users/omerwer/orgs",
            "repos_url": "https://api.github.com/users/omerwer/repos",
            "events_url": "https://api.github.com/users/omerwer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/omerwer/received_events",
            "type": "User",
            "site_admin": false
        }
    }
]