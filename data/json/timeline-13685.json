[
    {
        "id": 7838091117,
        "node_id": "LE_lADOCVq1mM5WquPrzwAAAAHTL8dt",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7838091117",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-11-17T21:46:48Z",
        "label": {
            "name": "feature request",
            "color": "5319E7"
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1320708024",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13685#issuecomment-1320708024",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13685",
        "id": 1320708024,
        "node_id": "IC_kwDOCVq1mM5OuGe4",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-19T00:44:48Z",
        "updated_at": "2022-11-19T00:44:48Z",
        "author_association": "MEMBER",
        "body": "@brian-pieces, Thanks for the feedback. I will add it to our back log.\r\n\r\nIt need update the operator spec, and add some code [here](https://github.com/microsoft/onnxruntime/blob/2ecd1d662203d3fb5d77bf2aa97f6b8bcd7d1759/onnxruntime/contrib_ops/cpu/transformers/beam_search_impl_t5.h#L144) where encoder_fetches[0] is the encoder_hidden_states.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1320708024/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 7848412838,
        "node_id": "MEE_lADOCVq1mM5WquPrzwAAAAHTzUam",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7848412838",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-11-19T00:44:48Z",
        "performed_via_github_app": null
    },
    {
        "id": 7848412841,
        "node_id": "SE_lADOCVq1mM5WquPrzwAAAAHTzUap",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7848412841",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-11-19T00:44:48Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1332310501",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13685#issuecomment-1332310501",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13685",
        "id": 1332310501,
        "node_id": "IC_kwDOCVq1mM5PaXHl",
        "user": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-30T15:06:24Z",
        "updated_at": "2022-11-30T15:14:03Z",
        "author_association": "NONE",
        "body": "@tianleiwu Thanks for the help. I implemented the changes by adding another optional output and it works properly but only if I also output the first two optional outputs (scores and sequence_scores). If I only try to output the `encoder_hidden_states` it looks like it's actually outputting the `sequence_scores` in its place even though I disabled that output. Any ideas here? I'm happy to continue working on this.\r\n\r\nI edited the op spec [here](https://github.com/open-runtime/onnxruntime/blob/86bcb1b7b345b3562f021d4d33f85f91251d4fb6/onnxruntime/core/graph/contrib_ops/contrib_defs.cc#L1038), the beamsearch t5 impl [here](https://github.com/open-runtime/onnxruntime/blob/86bcb1b7b345b3562f021d4d33f85f91251d4fb6/onnxruntime/contrib_ops/cpu/transformers/beam_search_impl_t5.h#L145), and tested it with a modified [convert_generation.py](https://github.com/open-runtime/onnxruntime/blob/encoder_hidden_states/onnxruntime/python/tools/transformers/convert_generation.py).\r\n\r\nAlso, just a sidenote, the hidden states actually look like they're at `encoder_fetches[1]` instead of `encoder_fetches[0]`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1332310501/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 7922997607,
        "node_id": "MEE_lADOCVq1mM5WquPrzwAAAAHYP1ln",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7922997607",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-11-30T15:06:25Z",
        "performed_via_github_app": null
    },
    {
        "id": 7922997619,
        "node_id": "SE_lADOCVq1mM5WquPrzwAAAAHYP1lz",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7922997619",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-11-30T15:06:25Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1335668104",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13685#issuecomment-1335668104",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13685",
        "id": 1335668104,
        "node_id": "IC_kwDOCVq1mM5PnK2I",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-12-02T18:40:23Z",
        "updated_at": "2022-12-02T18:41:16Z",
        "author_association": "MEMBER",
        "body": "@brian-pieces, for example, if you disabled the output of sequence_scores, you can add placeholder like the following in convert_generation.py:\r\n```\r\n    if args.output_sequences_scores:\r\n        graph_outputs.append(sequences_scores)\r\n    else:\r\n        graph_outputs.append(\"\") # place holder\r\n```\r\n\r\nYou are right, the hidden state is the second output of encoder subgraph. See the export script:\r\nhttps://github.com/microsoft/onnxruntime/blob/a0b470bc35cb2df26d3dc8c75c5261f92e8cf586/onnxruntime/python/tools/transformers/models/t5/t5_encoder_decoder_init.py#L130",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1335668104/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 7942995082,
        "node_id": "MEE_lADOCVq1mM5WquPrzwAAAAHZcHyK",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7942995082",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-12-02T18:40:24Z",
        "performed_via_github_app": null
    },
    {
        "id": 7942995087,
        "node_id": "SE_lADOCVq1mM5WquPrzwAAAAHZcHyP",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7942995087",
        "actor": {
            "login": "brian-pieces",
            "id": 98757707,
            "node_id": "U_kgDOBeLsSw",
            "avatar_url": "https://avatars.githubusercontent.com/u/98757707?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brian-pieces",
            "html_url": "https://github.com/brian-pieces",
            "followers_url": "https://api.github.com/users/brian-pieces/followers",
            "following_url": "https://api.github.com/users/brian-pieces/following{/other_user}",
            "gists_url": "https://api.github.com/users/brian-pieces/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/brian-pieces/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/brian-pieces/subscriptions",
            "organizations_url": "https://api.github.com/users/brian-pieces/orgs",
            "repos_url": "https://api.github.com/users/brian-pieces/repos",
            "events_url": "https://api.github.com/users/brian-pieces/events{/privacy}",
            "received_events_url": "https://api.github.com/users/brian-pieces/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-12-02T18:40:24Z",
        "performed_via_github_app": null
    }
]