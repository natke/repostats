[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/785478816",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6799#issuecomment-785478816",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6799",
        "id": 785478816,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTQ3ODgxNg==",
        "user": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-25T00:13:02Z",
        "updated_at": "2021-02-25T00:13:02Z",
        "author_association": "NONE",
        "body": "my output for this script : \r\nTime taken for Onnx model 0:00:00.250296\r\n\r\n--------------------------------------------------------------------------------------------------------------------------------------------\r\nimport time\r\nfrom datetime import datetime\r\nimport torch\r\nimport cv2\r\nimport onnxruntime as rt\r\n\r\nimport craft_utils\r\nimport imgproc\r\n\r\nsess = rt.InferenceSession(\"craft.onnx\")\r\ninput_name = sess.get_inputs()[0].name\r\nprint( rt.get_device()  )\r\nfirst_output_name = sess.get_outputs()[0].name\r\n\r\n\r\nprint('\\n')\r\nprint('\\n')\r\nprint('input_name',input_name)\r\nprint('output_name',first_output_name)\r\nprint('\\n')\r\nprint('\\n')\r\n\r\n\r\nimg = cv2.imread('./data/1.jpg')\r\nimg_resized, target_ratio, size_heatmap = imgproc.resize_aspect_ratio(img, 1280, interpolation=cv2.INTER_LINEAR, mag_ratio=1.5)\r\nratio_h = ratio_w = 1 / target_ratio\r\n\r\nprint(ratio_h, ratio_w)\r\n\r\n\r\nx = imgproc.normalizeMeanVariance(img_resized)\r\nx = torch.from_numpy(x).permute(2, 0, 1)    # [h, w, c] to [c, h, w]\r\nx = x.unsqueeze(0)                # [c, h, w] to [b, c, h, w]\r\n\r\nt1 = datetime.now()\r\ny, _ = sess.run(None, {input_name: x.numpy()})\r\nt2 = datetime.now()\r\nprint(\"Time taken for Onnx model\", str(t2-t1))\r\n# make score and link map\r\nscore_text = y[0, :, :, 0]\r\nscore_link = y[0, :, :, 1]\r\n\r\n# Post-processing\r\nboxes,polys = craft_utils.getDetBoxes(score_text, score_link, 0.5, 0.3, 0.3,True)\r\n#print(boxes)\r\nboxes = craft_utils.adjustResultCoordinates(boxes, ratio_w, ratio_h)\r\npolys = craft_utils.adjustResultCoordinates(polys, ratio_w, ratio_h)\r\nprint(boxes)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/785478816/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/785485374",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6799#issuecomment-785485374",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6799",
        "id": 785485374,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTQ4NTM3NA==",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-25T00:27:55Z",
        "updated_at": "2021-02-25T00:28:41Z",
        "author_association": "MEMBER",
        "body": "@sabrabano0, could you try the following:\r\n(1) Use a warm up query before measuring latency. That is, exclude the first call of sess.run(...).\r\n(2) After warming up, send N (like N=1000 of calls sess.run) and get statistics (like average) of latency.\r\n(3) Try [IO Binding](https://www.onnxruntime.ai/python/api_summary). You used API that need copy input tensors to GPU and copy output tensors to CPU. If you included those IO time, it might not be fair to compare with Torch (since input/output are in GPU for Torch) or CPU provider (since it does not need such IO).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/785485374/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4373870084,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDM3Mzg3MDA4NA==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4373870084",
        "actor": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-02-25T00:27:56Z",
        "performed_via_github_app": null
    },
    {
        "id": 4373870085,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQzNzM4NzAwODU=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4373870085",
        "actor": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-02-25T00:27:56Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/868093909",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6799#issuecomment-868093909",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6799",
        "id": 868093909,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2ODA5MzkwOQ==",
        "user": {
            "login": "purvang3",
            "id": 39809304,
            "node_id": "MDQ6VXNlcjM5ODA5MzA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/39809304?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/purvang3",
            "html_url": "https://github.com/purvang3",
            "followers_url": "https://api.github.com/users/purvang3/followers",
            "following_url": "https://api.github.com/users/purvang3/following{/other_user}",
            "gists_url": "https://api.github.com/users/purvang3/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/purvang3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/purvang3/subscriptions",
            "organizations_url": "https://api.github.com/users/purvang3/orgs",
            "repos_url": "https://api.github.com/users/purvang3/repos",
            "events_url": "https://api.github.com/users/purvang3/events{/privacy}",
            "received_events_url": "https://api.github.com/users/purvang3/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-25T00:28:31Z",
        "updated_at": "2021-06-25T00:28:31Z",
        "author_association": "NONE",
        "body": "> @sabrabano0, could you try the following:\r\n> (1) Use a warm up query before measuring latency. That is, exclude the first call of sess.run(...).\r\n> (2) After warming up, send N (like N=1000 of calls sess.run) and get statistics (like average) of latency.\r\n> (3) Try [IO Binding](https://www.onnxruntime.ai/python/api_summary). You used API that need copy input tensors to GPU and copy output tensors to CPU. If you included those IO time, it might not be fair to compare with Torch (since input/output are in GPU for Torch) or CPU provider (since it does not need such IO).\r\n\r\n> 1st suggestion should fix issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/868093909/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "purvang3",
            "id": 39809304,
            "node_id": "MDQ6VXNlcjM5ODA5MzA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/39809304?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/purvang3",
            "html_url": "https://github.com/purvang3",
            "followers_url": "https://api.github.com/users/purvang3/followers",
            "following_url": "https://api.github.com/users/purvang3/following{/other_user}",
            "gists_url": "https://api.github.com/users/purvang3/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/purvang3/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/purvang3/subscriptions",
            "organizations_url": "https://api.github.com/users/purvang3/orgs",
            "repos_url": "https://api.github.com/users/purvang3/repos",
            "events_url": "https://api.github.com/users/purvang3/events{/privacy}",
            "received_events_url": "https://api.github.com/users/purvang3/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4937395327,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDkzNzM5NTMyNw==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4937395327",
        "actor": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-06-25T00:28:32Z",
        "performed_via_github_app": null
    },
    {
        "id": 4937395329,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ5MzczOTUzMjk=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4937395329",
        "actor": {
            "login": "SabraHashemi",
            "id": 17723386,
            "node_id": "MDQ6VXNlcjE3NzIzMzg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/17723386?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SabraHashemi",
            "html_url": "https://github.com/SabraHashemi",
            "followers_url": "https://api.github.com/users/SabraHashemi/followers",
            "following_url": "https://api.github.com/users/SabraHashemi/following{/other_user}",
            "gists_url": "https://api.github.com/users/SabraHashemi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SabraHashemi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SabraHashemi/subscriptions",
            "organizations_url": "https://api.github.com/users/SabraHashemi/orgs",
            "repos_url": "https://api.github.com/users/SabraHashemi/repos",
            "events_url": "https://api.github.com/users/SabraHashemi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SabraHashemi/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-06-25T00:28:32Z",
        "performed_via_github_app": null
    }
]