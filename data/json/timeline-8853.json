[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907554808",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-907554808",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 907554808,
        "node_id": "IC_kwDOCVq1mM42GC_4",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-28T02:41:20Z",
        "updated_at": "2021-08-28T02:41:20Z",
        "author_association": "MEMBER",
        "body": "@jplu, compare_bert_results tool assumes that two ONNX models has same input data type. If --input_int32 is used, input_ids in original onnx model is int64, and optimized model has int32 inputs.\r\n\r\nAs walkaround, you can generate a model without --input_int32 for parity verification. Once the verification is done, you can add --input_int32 to generate the final model for performance test etc.\r\n\r\nHere is example commands to run from script of master branch:\r\n```\r\ngit clone https://github.com/microsoft/onnxruntime\r\ncd onnxruntime/onnxruntime/python/tools/transformers\r\npython -m transformers.onnx --model=bert-base-cased onnx/bert-base-cased/\r\npython optimizer.py --input onnx/bert-base-cased/model.onnx --output onnx/bert-base-cased/model_opt.onnx --model_type bert --float16\r\npython compare_bert_results.py --baseline_model onnx/bert-base-cased/model.onnx --optimized_model onnx/bert-base-cased/model_opt.onnx --input_ids input_ids --segment_ids token_type_ids --input_mask attention_mask --batch_size 1 --sequence_length 128 --samples 100\r\npython optimizer.py --input onnx/bert-base-cased/model.onnx --output onnx/bert-base-cased/model_int32.onnx --model_type bert --float16 --input_int32\r\npython bert_perf_test.py --model onnx/bert-base-cased/model_int32.onnx --use_gpu -b 1 -s 128 -t 100 --opt_level 99\r\n```\r\n\r\nExample outputs:\r\n```\r\n>python optimizer.py --input onnx/bert-base-cased/model.onnx --output onnx/bert-base-cased/model_opt.onnx --model_type bert --float16\r\n               apply: Fused LayerNormalization count: 25\r\n               apply: Fused Gelu count: 12\r\n               apply: Fused SkipLayerNormalization count: 24\r\n               apply: Fused Attention count: 12\r\n         prune_graph: Graph pruned: 0 inputs, 0 outputs and 5 nodes are removed\r\n               apply: Fused EmbedLayerNormalization(with mask) count: 1\r\n         prune_graph: Graph pruned: 0 inputs, 0 outputs and 4 nodes are removed\r\n         prune_graph: Graph pruned: 0 inputs, 0 outputs and 0 nodes are removed\r\n               apply: Fused BiasGelu count: 12\r\n               apply: Fused SkipLayerNormalization(add bias) count: 24\r\n            optimize: opset verion: 12\r\n  save_model_to_file: Sort graphs in topological order\r\n  save_model_to_file: Output model to onnx/bert-base-cased/model_opt.onnx\r\nget_fused_operator_statistics: Optimized operators:{'EmbedLayerNormalization': 1, 'Attention': 12, 'Gelu': 0, 'FastGelu': 0, 'BiasGelu': 12, 'LayerNormalization': 0, 'SkipLayerNormalization': 24}\r\n                main: The model has been fully optimized.\r\n\r\n>python compare_bert_results.py --baseline_model onnx/bert-base-cased/model.onnx --optimized_model onnx/bert-base-cased/model_opt.onnx --input_ids input_ids --segment_ids token_type_ids --input_mask attention_mask --batch_size 1 --sequence_length 128 --samples 100\r\nWARNING: 100 out of 100 results NOT passed for thresholds (rtol=0.001, atol=0.0001).\r\nmaximum absolute difference=0.008105754852294922\r\nmaximum relative difference=1947.8863525390625\r\n```\r\nThe threshold is for fp32 model. For fp16 model, I think the maximum absolute difference is expected (since the resolution of fp16 is around 0.001).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907554808/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5221205300,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyMTIwNTMwMA==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221205300",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T02:41:21Z",
        "performed_via_github_app": null
    },
    {
        "id": 5221205301,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjEyMDUzMDE=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221205301",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T02:41:21Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907594690",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-907594690",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 907594690,
        "node_id": "IC_kwDOCVq1mM42GMvC",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-28T08:40:15Z",
        "updated_at": "2021-08-28T08:40:15Z",
        "author_association": "NONE",
        "body": "Thanks @tianleiwu I tried what you suggested and I get the same error with the command:\r\n```\r\npython -m onnxruntime.transformers.bert_perf_test --model  onnx/bert-base-cased/model_opt.onnx --opt_level 99 -b 1 -s 128 -t 100 --input_ids_name input_ids --input_mask_name attention_mask --segment_ids token_type_ids --use_gpu\r\n```\r\n\r\n```\r\ntest setting TestSetting(batch_size=1, sequence_length=128, test_cases=10, test_times=100, use_gpu=True, intra_op_num_threads=None, seed=3, verbose=False)\r\nGenerating 10 samples for batch_size=1 sequence_length=128\r\nProcess Process-2:\r\nTraceback (most recent call last):\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/multiprocessing/process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/site-packages/onnxruntime/transformers/bert_perf_test.py\", line 116, in run_one_test\r\n    session = create_session(model_setting.model_path, test_setting.use_gpu, intra_op_num_threads,\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/site-packages/onnxruntime/transformers/bert_perf_test.py\", line 84, in create_session\r\n    session = onnxruntime.InferenceSession(model_path, sess_options, providers=execution_providers)\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 283, in __init__\r\n    self._create_inference_session(providers, provider_options, disabled_optimizers)\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 310, in _create_inference_session\r\n    sess = C.InferenceSession(session_options, self._model_path, True, self._read_config_from_model)\r\nonnxruntime.capi.onnxruntime_pybind11_state.Fail: [ONNXRuntimeError] : 1 : FAIL : Load model from onnx/encoder/model_opt.onnx failed:/onnxruntime_src/onnxruntime/core/graph/model.cc:111 onnxruntime::Model::Model(onnx::ModelProto&&, const PathString&, const IOnnxRuntimeOpSchemaRegistryList*, const onnxruntime::logging::Logger&) Unknown model file format version.\r\n```\r\n\r\nThe exact same error happen also when I try to just open the model:\r\n```\r\nimport onnxruntime as ort\r\n\r\nort_session = ort.InferenceSession(\"onnx/bert-base-cased/model_opt.onnx\")\r\n```\r\n\r\nWhat you suggest apparently doesn't seems to work :(  any other walkaround, or is that a real bug?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907594690/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5221495467,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyMTQ5NTQ2Nw==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221495467",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T08:40:16Z",
        "performed_via_github_app": null
    },
    {
        "id": 5221495468,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjE0OTU0Njg=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221495468",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T08:40:16Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907645061",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-907645061",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 907645061,
        "node_id": "IC_kwDOCVq1mM42GZCF",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-28T15:50:37Z",
        "updated_at": "2021-08-28T16:13:05Z",
        "author_association": "MEMBER",
        "body": "@jplu, It is working in my machine.\r\n\r\n`Unknown model file format version` is probably caused by related packages (like protobuf). You can check related packages like the following Python script:\r\n```\r\nimport pkg_resources\r\ninstalled_packages = pkg_resources.working_set\r\nrelated_packages = ['flatbuffers', 'numpy', 'onnx', 'onnxconverter-common', 'onnxruntime-gpu', 'onnxruntime', 'ort-nightly-gpu', 'ort-nightly', 'protobuf', 'sympy', 'torch', 'transformers']\r\nrelated_packages_list = sorted([\"%s==%s\" % (i.key, i.version) for i in installed_packages if i.key in related_packages])\r\nprint(related_packages_list)\r\n```\r\nIn my machine, the output is like\r\n```\r\n['flatbuffers==2.0', 'numpy==1.19.5', 'onnx==1.9.0', 'onnxconverter-common==1.9.0', 'onnxruntime-gpu==1.8.1', 'protobuf==3.17.3', 'sympy==1.5', 'torch==1.9.0+cu111', 'transformers==4.9.2']\r\n```\r\nAlso 1.8.1 need CUDA 11.0. Not sure it could work with CUDA 11.2.\r\n\r\nBTW, you will need run optimizer.py in master branch (instead of 1.8.1) to get fully optimized model, since 1.8.1 does not \r\n support the latest transformers. Also, remove --opt_level 99 in using optimizer.py, otherwise the model cannot be fully optimized.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907645061/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5221848624,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyMTg0ODYyNA==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221848624",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T15:50:37Z",
        "performed_via_github_app": null
    },
    {
        "id": 5221848626,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjE4NDg2MjY=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5221848626",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-28T15:50:37Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907648394",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-907648394",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 907648394,
        "node_id": "IC_kwDOCVq1mM42GZ2K",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-28T16:15:02Z",
        "updated_at": "2021-08-28T16:15:02Z",
        "author_association": "NONE",
        "body": "Here is my output:\r\n```\r\n['flatbuffers==2.0', 'numpy==1.20.3', 'onnx==1.10.1', 'onnxconverter-common==1.8.1', 'onnxruntime-gpu==1.8.1', 'protobuf==3.17.3', 'sympy==1.8', 'torch==1.9.0+cu111', 'transformers==4.9.2']\r\n```\r\n\r\n> BTW, you will need run optimizer.py in master branch (instead of 1.8.1) to get fully optimized model, since 1.8.1 does not\r\nsupport the latest transformers.\r\n\r\nI can use only pypi packages for now because of some reproducible reasons.\r\n\r\n> Also, remove --opt_level 99 in using optimizer.py, otherwise the model cannot be fully optimized.\r\n\r\nThanks for the hint! Good to know! Might be worth to specify this in the doc. And, by curiosity, why with this option the model cannot be fully optimized?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907648394/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907727044",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-907727044",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 907727044,
        "node_id": "IC_kwDOCVq1mM42GtDE",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-29T04:24:32Z",
        "updated_at": "2021-08-29T04:26:04Z",
        "author_association": "MEMBER",
        "body": "@jplu, I reproduced the problem with onnx 1.10.1. You can downgrade onnx to 1.9.0 to walkaround the issue. When 1.8.1 was released, onnx was at 1.9.0. I will investigate the root cause later.\r\n\r\n--opt_level 99 will use onnxruntime to do graph optimization (written in C++). It has some extra optimizations that could change the graph, which will cause no match in attention fusion in python later. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/907727044/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5222326629,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyMjMyNjYyOQ==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5222326629",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-29T04:24:32Z",
        "performed_via_github_app": null
    },
    {
        "id": 5222326630,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjIzMjY2MzA=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5222326630",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-29T04:24:32Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908147273",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-908147273",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 908147273,
        "node_id": "IC_kwDOCVq1mM42ITpJ",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-30T08:23:27Z",
        "updated_at": "2021-08-30T08:23:27Z",
        "author_association": "NONE",
        "body": ">@jplu, I reproduced the problem with onnx 1.10.1. You can downgrade onnx to 1.9.0 to walkaround the issue. When 1.8.1 was released, onnx was at 1.9.0. I will investigate the root cause later.\r\n\r\nPerfect, thanks a lot @tianleiwu for the walkaround. Happy to have helped to find a potential bug :)\r\n\r\n>--opt_level 99 will use onnxruntime to do graph optimization (written in C++). It has some extra optimizations that could change the graph, which will cause no match in attention fusion in python later.\r\n\r\nHumm I see. Do you suggest to use only `--opt_level` set to 1 or 2? Or no `--opt_level` at all?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908147273/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5224748416,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyNDc0ODQxNg==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5224748416",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-30T08:23:27Z",
        "performed_via_github_app": null
    },
    {
        "id": 5224748418,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjQ3NDg0MTg=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5224748418",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-30T08:23:27Z",
        "performed_via_github_app": null
    },
    {
        "id": 5224748426,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyNDc0ODQyNg==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5224748426",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-30T08:23:27Z",
        "performed_via_github_app": null
    },
    {
        "id": 5224748429,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjQ3NDg0Mjk=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5224748429",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-30T08:23:27Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908176732",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-908176732",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 908176732,
        "node_id": "IC_kwDOCVq1mM42Ia1c",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-30T09:08:53Z",
        "updated_at": "2021-08-30T09:08:53Z",
        "author_association": "NONE",
        "body": "It seems there might be another issue, even though the model can now be properly loaded it raises the following error when the inputs are in `int32`:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/jplu/anaconda3/envs/indexing/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py\", line 188, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.InvalidArgument: [ONNXRuntimeError] : 2 : INVALID_ARGUMENT : Unexpected input data type. Actual: (tensor(int32)) , expected: (tensor(int64))\r\n```\r\nThe command used to get the model is still similar to what I proposed:\r\n```\r\npython -m onnxruntime.transformers.optimizer --input onnx/bert-base-cased/model.onnx --output onnx/bert-base-cased/model_opt.onnx --disable_embed_layer_norm --model_type bert --num_heads 12 --hidden_size 768 --float16 --input_int32\r\n```\r\n\r\nHere also the small piece of code I used:\r\n```\r\nimport onnxruntime as ort\r\nfrom transformers import AutoTokenizer\r\n\r\nort_session = ort.InferenceSession(\"onnx/bert-base-cased/model_opt.onnx\")\r\ntokenizer = AutoTokenizer.from_pretrained(\"bert-base-cased\")\r\ninputs = tokenizer(\"Hello there!!\", return_tensors=\"np\")\r\ninputs = {key: val.astype(np.int32) for key, val in inputs.items()}\r\nort_session.run([\"last_hidden_state\", \"pooler_output\"], dict(inputs))\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908176732/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908894101",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-908894101",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 908894101,
        "node_id": "IC_kwDOCVq1mM42LJ-V",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-31T04:42:31Z",
        "updated_at": "2021-08-31T04:42:31Z",
        "author_association": "MEMBER",
        "body": "@jplu, the --input_int32 is designed for model with EmbedLayerNormalization. If you disable it (--disable_embed_layer_norm), only attention mask will be converted to int32, and other two inputs are still int64. You can open the onnx file with Netron and inspect the input data types.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908894101/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5229991841,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NTIyOTk5MTg0MQ==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5229991841",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-31T04:42:32Z",
        "performed_via_github_app": null
    },
    {
        "id": 5229991844,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDUyMjk5OTE4NDQ=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5229991844",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-08-31T04:42:32Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908994706",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-908994706",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 908994706,
        "node_id": "IC_kwDOCVq1mM42LiiS",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-31T08:01:06Z",
        "updated_at": "2021-08-31T08:53:01Z",
        "author_association": "NONE",
        "body": "The thing is that even if I remove the `--disable_embed_layer_norm` I get the exact same error. Is that normal?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/908994706/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/909042800",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8853#issuecomment-909042800",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8853",
        "id": 909042800,
        "node_id": "IC_kwDOCVq1mM42LuRw",
        "user": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-31T09:01:21Z",
        "updated_at": "2021-08-31T09:01:21Z",
        "author_association": "NONE",
        "body": "Apparently Netron shows that `input_ids` and `token_type_ids` are in int32 but `attention_mask` is still in int64. Here some screenshots\r\n![Capture dcran de 2021-08-31 10-59-45](https://user-images.githubusercontent.com/959590/131474303-1e145c00-ca22-4806-9e7d-d84b52338c6f.png)\r\n![Capture dcran de 2021-08-31 11-00-22](https://user-images.githubusercontent.com/959590/131474319-d7f913f6-50f5-409e-957e-ae8257ea4b41.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/909042800/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "jplu",
            "id": 959590,
            "node_id": "MDQ6VXNlcjk1OTU5MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/959590?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jplu",
            "html_url": "https://github.com/jplu",
            "followers_url": "https://api.github.com/users/jplu/followers",
            "following_url": "https://api.github.com/users/jplu/following{/other_user}",
            "gists_url": "https://api.github.com/users/jplu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jplu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jplu/subscriptions",
            "organizations_url": "https://api.github.com/users/jplu/orgs",
            "repos_url": "https://api.github.com/users/jplu/repos",
            "events_url": "https://api.github.com/users/jplu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jplu/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-01T17:25:23Z",
        "updated_at": "2021-09-01T17:25:23Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923/events",
                "html_url": "https://github.com/microsoft/onnxruntime/pull/8923",
                "id": 985408602,
                "node_id": "MDExOlB1bGxSZXF1ZXN0NzI0NzA3Njc4",
                "number": 8923,
                "title": "Disable some ORT graph optimizers in offline transformers optimization tool",
                "user": {
                    "login": "tianleiwu",
                    "id": 30328909,
                    "node_id": "MDQ6VXNlcjMwMzI4OTA5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/tianleiwu",
                    "html_url": "https://github.com/tianleiwu",
                    "followers_url": "https://api.github.com/users/tianleiwu/followers",
                    "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
                    "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
                    "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
                    "repos_url": "https://api.github.com/users/tianleiwu/repos",
                    "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2021-09-01T17:25:23Z",
                "updated_at": "2021-09-01T22:47:59Z",
                "closed_at": "2021-09-01T22:47:58Z",
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/pulls/8923",
                    "html_url": "https://github.com/microsoft/onnxruntime/pull/8923",
                    "diff_url": "https://github.com/microsoft/onnxruntime/pull/8923.diff",
                    "patch_url": "https://github.com/microsoft/onnxruntime/pull/8923.patch",
                    "merged_at": "2021-09-01T22:47:58Z"
                },
                "body": "**Description**: \r\n\r\nDisable some graph optimizers that having negative impact on transformers optimization.\r\n\r\nCurrent offline transformers optimization has two passes: one pass is to use OnnxRuntime to run graph optimization, and second pass is to use fusion in Python. In the second pass, we will use symbolic shape inference. \r\n\r\nCurrently, there are two issues caused by first pass:\r\n(1) Some contrib ops are not supported by symbolic shape inference. That could block the optimization in the second pass.\r\n(2) Some fusion will change the graph, which will impact fusion in Python since those graph changes might impact fusion.\r\n\r\n**Motivation and Context**\r\n- Why is this change required? What problem does it solve?\r\n- If it fixes an open issue, please link to the issue here.\r\n\r\nRelated issue: https://github.com/microsoft/onnxruntime/issues/8853\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8923/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-09-01T19:08:14Z",
        "updated_at": "2021-09-01T19:08:14Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927/events",
                "html_url": "https://github.com/microsoft/onnxruntime/pull/8927",
                "id": 985525320,
                "node_id": "MDExOlB1bGxSZXF1ZXN0NzI0ODA5OTE3",
                "number": 8927,
                "title": "Fix non deterministic of --input_int32 of transformer optimizer",
                "user": {
                    "login": "tianleiwu",
                    "id": 30328909,
                    "node_id": "MDQ6VXNlcjMwMzI4OTA5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/tianleiwu",
                    "html_url": "https://github.com/tianleiwu",
                    "followers_url": "https://api.github.com/users/tianleiwu/followers",
                    "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
                    "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
                    "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
                    "repos_url": "https://api.github.com/users/tianleiwu/repos",
                    "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2021-09-01T19:08:14Z",
                "updated_at": "2021-09-02T17:20:50Z",
                "closed_at": "2021-09-02T17:20:49Z",
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/pulls/8927",
                    "html_url": "https://github.com/microsoft/onnxruntime/pull/8927",
                    "diff_url": "https://github.com/microsoft/onnxruntime/pull/8927.diff",
                    "patch_url": "https://github.com/microsoft/onnxruntime/pull/8927.patch",
                    "merged_at": "2021-09-02T17:20:49Z"
                },
                "body": "**Description**:\r\nPrevious implementation of --input_int32 is non deterministic. The result will depend on optimization result. For example, when EmbedLayerNormalization is not fused, input_ids will not be changed to int32. That confuses users.\r\n\r\nUpdate the logic to always change graph inputs to int32.\r\n\r\n**Motivation and Context**\r\n- Why is this change required? What problem does it solve?\r\n- If it fixes an open issue, please link to the issue here.\r\n\r\nRelated issue: https://github.com/microsoft/onnxruntime/issues/8853",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8927/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "id": 5302273017,
        "node_id": "CE_lADOCVq1mM46bTUkzwAAAAE8CkP5",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5302273017",
        "actor": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "closed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-09-14T21:40:38Z",
        "state_reason": null,
        "performed_via_github_app": null
    }
]