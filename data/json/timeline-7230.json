[
    {
        "id": 4550036221,
        "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTAwMzYyMjE=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4550036221",
        "actor": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T04:37:55Z",
        "label": {
            "name": "ep:TensorRT",
            "color": "bfdadc"
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813177019",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-813177019",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 813177019,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzE3NzAxOQ==",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-05T04:38:50Z",
        "updated_at": "2021-04-05T04:38:50Z",
        "author_association": "MEMBER",
        "body": "@stevenlix can you please take a look? Thx.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813177019/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4550037784,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDU1MDAzNzc4NA==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4550037784",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T04:38:50Z",
        "performed_via_github_app": null
    },
    {
        "id": 4550037786,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1NTAwMzc3ODY=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4550037786",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T04:38:50Z",
        "performed_via_github_app": null
    },
    {
        "id": 4550042889,
        "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTAwNDI4ODk=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4550042889",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T04:41:41Z",
        "label": {
            "name": "type:performance",
            "color": "a2eeef"
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813184403",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-813184403",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 813184403,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzE4NDQwMw==",
        "user": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-05T05:04:17Z",
        "updated_at": "2021-04-05T05:04:17Z",
        "author_association": "MEMBER",
        "body": "TensorRT usually takes much longer time to build engine. Please add a warmup session (i.e. call sess.run once) before inference, so that engine can be built in advance. \r\nAnother thing is if the model can't run as a whole in TensorRT, you may add CUDA as a fallback, for example, sess = rt.InferenceSession(str(model_pth), opt, providers=[\"TensorrtExecutionProvider\", \"CUDAExecutionProvider\"])",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813184403/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813445376",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-813445376",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 813445376,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzQ0NTM3Ng==",
        "user": {
            "login": "oborchers",
            "id": 26734737,
            "node_id": "MDQ6VXNlcjI2NzM0NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oborchers",
            "html_url": "https://github.com/oborchers",
            "followers_url": "https://api.github.com/users/oborchers/followers",
            "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
            "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
            "organizations_url": "https://api.github.com/users/oborchers/orgs",
            "repos_url": "https://api.github.com/users/oborchers/repos",
            "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/oborchers/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-05T15:11:25Z",
        "updated_at": "2021-04-05T15:25:48Z",
        "author_association": "NONE",
        "body": "@stevenlix : Thank you for your comments! I have gone through all of those possibilities and the results are exactly the same. Furthermore, I provided a notebook for exact reproduction of the behavior here:\r\nhttps://github.com/oborchers/Medium_Repo/blob/master/onnxruntime-issues/TensorRT%20Slow.ipynb\r\nDockerfile can be found here: https://github.com/oborchers/Medium_Repo/blob/master/onnxruntime-issues/Dockerfile\r\n\r\nThe speeds look as follows:\r\n\r\n- Torch: 95 sentences/s\r\n- CUDA + CPU: 384 sentences/s\r\n- CUDA: 370 sentences/s\r\n- Tensorrt + CUDA + CPU: 91 sentences/s\r\n- Tensorrt: 91 sentences/s\r\n\r\nAdditional Info:\r\n- Tensorrt runs have been performed with 50 warmup iterations\r\n- GPU usage via `nvidia-smi`\r\n  - Torch: fluctuates around 25%\r\n  - CUDA+CPU: fluctuates around 65-75%\r\n  -  Tensorrt: wildly varies between 0 to 30-40%, and maxing at 70% while going back to 0%. Rinse, repeat.\r\n  \r\nThis is also something I have experience half a year ago while trying this, but postponed investigation as I assumed I just did something wrong. But now that I am able replicate the exact same problem in Docker, I can safely discard a problem on the side on our master server configuration.\r\n\r\nGPUs otherwise not occupied.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/813445376/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "oborchers",
            "id": 26734737,
            "node_id": "MDQ6VXNlcjI2NzM0NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oborchers",
            "html_url": "https://github.com/oborchers",
            "followers_url": "https://api.github.com/users/oborchers/followers",
            "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
            "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
            "organizations_url": "https://api.github.com/users/oborchers/orgs",
            "repos_url": "https://api.github.com/users/oborchers/repos",
            "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/oborchers/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4552033549,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDU1MjAzMzU0OQ==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4552033549",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T15:11:25Z",
        "performed_via_github_app": null
    },
    {
        "id": 4552033551,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1NTIwMzM1NTE=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4552033551",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-05T15:11:25Z",
        "performed_via_github_app": null
    },
    {
        "actor": {
            "login": "oborchers",
            "id": 26734737,
            "node_id": "MDQ6VXNlcjI2NzM0NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oborchers",
            "html_url": "https://github.com/oborchers",
            "followers_url": "https://api.github.com/users/oborchers/followers",
            "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
            "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
            "organizations_url": "https://api.github.com/users/oborchers/orgs",
            "repos_url": "https://api.github.com/users/oborchers/repos",
            "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/oborchers/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-05T23:10:07Z",
        "updated_at": "2021-04-05T23:10:07Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238/events",
                "html_url": "https://github.com/microsoft/onnxruntime/issues/7238",
                "id": 850551993,
                "node_id": "MDU6SXNzdWU4NTA1NTE5OTM=",
                "number": 7238,
                "title": "GPT-Neo: Torch CUDA 2x faster than ONNX CUDA",
                "user": {
                    "login": "oborchers",
                    "id": 26734737,
                    "node_id": "MDQ6VXNlcjI2NzM0NzM3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/oborchers",
                    "html_url": "https://github.com/oborchers",
                    "followers_url": "https://api.github.com/users/oborchers/followers",
                    "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
                    "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
                    "organizations_url": "https://api.github.com/users/oborchers/orgs",
                    "repos_url": "https://api.github.com/users/oborchers/repos",
                    "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/oborchers/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1122493981,
                        "node_id": "MDU6TGFiZWwxMTIyNDkzOTgx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/feature%20request",
                        "name": "feature request",
                        "color": "5319E7",
                        "default": false,
                        "description": "request for unsupported feature or enhancement"
                    },
                    {
                        "id": 2186357781,
                        "node_id": "MDU6TGFiZWwyMTg2MzU3Nzgx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/ep:CUDA",
                        "name": "ep:CUDA",
                        "color": "0052CC",
                        "default": false,
                        "description": "issues related to the CUDA execution provider"
                    },
                    {
                        "id": 2204061391,
                        "node_id": "MDU6TGFiZWwyMjA0MDYxMzkx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/ep:TensorRT",
                        "name": "ep:TensorRT",
                        "color": "0052CC",
                        "default": false,
                        "description": "issues related to TensorRT execution provider"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 16,
                "created_at": "2021-04-05T18:08:27Z",
                "updated_at": "2022-08-12T08:39:37Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "body": "**Describe the bug**\r\nI have been heavily investigating GPT-Neo for our company. Most of our models run directly on GPU with ONNX as backend. The problem is as follows:\r\n\r\nRunning the `gpt-neo-1.3B` model in a custom build `onnxruntime` instance on a V100 is 2x slower than base pytorch (onnx: 300ms vs torch: 120 ms). This is usually exactly the other way around.\r\n\r\nI would assume that this is either a problem of `gpt-neo-1.3B` or of `onnxruntime`, most probably the first one. But I am now sure how to best determine the responsible part in this chain and how we can go ahead without altering the model significantly and manually.\r\n\r\nHelp would be very appreciated.\r\n\r\n**Urgency**\r\nNone\r\n\r\n**System information**\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 20.04\r\n- ONNX Runtime installed from (source or binary): Source\r\n- ONNX Runtime version: 1.7.1\r\n- Python version: 3. 8\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 11.1.1 / 8.0.5\r\n- GPU model and memory: Nvidia V100\r\n\r\n**To Reproduce**\r\n\r\n1) Build the following Dockerfile (may take some time)\r\n\r\nhttps://github.com/oborchers/Medium_Repo/blob/master/onnxruntime-issues/Dockerfile\r\n\r\n2) Run the following notebook:\r\n\r\nhttps://github.com/oborchers/Medium_Repo/blob/master/onnxruntime-issues/GPT-Neo%20Slow-2.ipynb\r\n\r\nTorch: 1000 sentences took 53s at 18 sentences/s.\r\nONNX:  1000 sentences took 313s at 3 sentences/s.\r\n**Expected behavior**\r\nI would expect `onnxruntime` inference to be at least as fast as torch, which really surprised me.\r\n\r\nPartial Log:\r\n\r\n```\r\n2021-04-05 16:09:30.169135381 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_4368\r\n2021-04-05 16:09:30.169205679 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_4347\r\n2021-04-05 16:09:30.169232416 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_4326\r\n2021-04-05 16:09:30.169277052 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_4305\r\n2021-04-05 16:09:30.169305005 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_4284\r\n...\r\n2021-04-05 16:09:30.171179525 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: Pad node name: Pad_3045\r\n2021-04-05 16:09:30.171207277 [W:onnxruntime:Default, cuda_execution_provider.cc:1983 GetCapability] CUDA kernel not found in registries for Op type: LessOrEqual node name: LessOrEqual_7094\r\n...\r\n2021-04-05 16:09:30.358181987 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_5\r\n2021-04-05 16:09:30.358218137 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_17\r\n2021-04-05 16:09:30.358230511 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_18\r\n2021-04-05 16:09:30.358241440 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Add_13\r\n2021-04-05 16:09:30.358265649 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_37\r\n2021-04-05 16:09:30.358279929 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_38\r\n2021-04-05 16:09:30.358290325 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_85672\r\n2021-04-05 16:09:30.358301675 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_2\r\n2021-04-05 16:09:30.358311978 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_85670\r\n2021-04-05 16:09:30.358323299 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_85673\r\n2021-04-05 16:09:30.358344992 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_85\r\n2021-04-05 16:09:30.358356437 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_86\r\n2021-04-05 16:09:30.358373163 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Div_88\r\n2021-04-05 16:09:30.358386774 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_93\r\n2021-04-05 16:09:30.358399847 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_80\r\n2021-04-05 16:09:30.358410259 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_92\r\n2021-04-05 16:09:30.358425290 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_77\r\n2021-04-05 16:09:30.358437256 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_91\r\n2021-04-05 16:09:30.358452374 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_94\r\n2021-04-05 16:09:30.358476066 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_63\r\n2021-04-05 16:09:30.358490967 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_64\r\n2021-04-05 16:09:30.358503415 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Div_66\r\n2021-04-05 16:09:30.358515382 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_71\r\n2021-04-05 16:09:30.358528613 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_58\r\n2021-04-05 16:09:30.358538065 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_70\r\n2021-04-05 16:09:30.358551073 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_55\r\n2021-04-05 16:09:30.358562240 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_69\r\n2021-04-05 16:09:30.358578571 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_72\r\n2021-04-05 16:09:30.358601242 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_132\r\n2021-04-05 16:09:30.358612608 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_133\r\n2021-04-05 16:09:30.358623085 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_139\r\n2021-04-05 16:09:30.358639190 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_126\r\n2021-04-05 16:09:30.358648692 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_127\r\n2021-04-05 16:09:30.358659862 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Sub_134\r\n2021-04-05 16:09:30.358669326 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_135\r\n2021-04-05 16:09:30.358690866 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_11\r\n2021-04-05 16:09:30.358703730 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_20\r\n....\r\n2021-04-05 17:37:21.034558149 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_5\r\n2021-04-05 17:37:21.034596725 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_17\r\n2021-04-05 17:37:21.034649407 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_18\r\n2021-04-05 17:37:21.034679883 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Add_13\r\n2021-04-05 17:37:21.034709999 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_37\r\n2021-04-05 17:37:21.034741824 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_38\r\n2021-04-05 17:37:21.034771635 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_85672\r\n2021-04-05 17:37:21.034783311 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Gather_2\r\n2021-04-05 17:37:21.034813241 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_85670\r\n2021-04-05 17:37:21.034845762 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Concat_85673\r\n2021-04-05 17:37:21.034885673 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Slice_85\r\n2021-04-05 17:37:21.034918686 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Squeeze_86\r\n2021-04-05 17:37:21.034930886 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Div_88\r\n2021-04-05 17:37:21.035028500 [W:onnxruntime:Default, fallback_cpu_capability.cc:135 GetCpuPreferredNodes] Force fallback to CPU execution for node: Unsqueeze_93\r\n...\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7238/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/814619248",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-814619248",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 814619248,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDYxOTI0OA==",
        "user": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-07T05:44:41Z",
        "updated_at": "2021-04-07T05:47:18Z",
        "author_association": "MEMBER",
        "body": "If sequence length of the model is dynamic, you may need to build an engine in warmup to cover the shape range, otherwise TensorRT will rebuild engine during inference every time when new shape inputs are coming. For example, if sequence length varies from A to B, in warmup you may call session.run once with input shape[1,A] and call another session.run with input shape[1, B], then the engine will be used for any sequence length between A and B, and will not be rebuilt during inference.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/814619248/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/816967842",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-816967842",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 816967842,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjk2Nzg0Mg==",
        "user": {
            "login": "oborchers",
            "id": 26734737,
            "node_id": "MDQ6VXNlcjI2NzM0NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oborchers",
            "html_url": "https://github.com/oborchers",
            "followers_url": "https://api.github.com/users/oborchers/followers",
            "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
            "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
            "organizations_url": "https://api.github.com/users/oborchers/orgs",
            "repos_url": "https://api.github.com/users/oborchers/repos",
            "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/oborchers/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-09T20:57:37Z",
        "updated_at": "2021-04-09T20:57:37Z",
        "author_association": "NONE",
        "body": "@stevenlix:\r\n\r\nThis partially addresses the issue. I tried to do exactly that, and this has the side effect that the GPU usage now remains constantly at 85-90%. Encoding 10,000 sentences took 38s at 263 sentences/s. However, I am still nowhere near to beating base CUDA, which is residing at around 400-450 sentences/s.\r\n\r\nNext I tried to pad all inputs to the maximum length and sub-lengths. The following padding sizes result in the following performance:\r\n\r\n- 128: 90% GPU usage @ 192 sentences/s\r\n- 256: 92% GPU usage @  128 sentences/s\r\n- 512: 95% GPU usage @ 75 sentences/s\r\n\r\nI also played around with the environment variables, but this does not seem to have any effect:\r\n```\r\nexport ORT_TENSORRT_MAX_BATCH_SIZE=1\r\nexport ORT_TENSORRT_MAX_WORKSPACE_SIZE=8_589_934_592\r\nexport ORT_TENSORRT_MAX_PARTITION_ITERATIONS=40\r\nexport ORT_TENSORRT_MIN_SUBGRAPH_SIZE=1\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/816967842/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "oborchers",
            "id": 26734737,
            "node_id": "MDQ6VXNlcjI2NzM0NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/26734737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oborchers",
            "html_url": "https://github.com/oborchers",
            "followers_url": "https://api.github.com/users/oborchers/followers",
            "following_url": "https://api.github.com/users/oborchers/following{/other_user}",
            "gists_url": "https://api.github.com/users/oborchers/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/oborchers/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/oborchers/subscriptions",
            "organizations_url": "https://api.github.com/users/oborchers/orgs",
            "repos_url": "https://api.github.com/users/oborchers/repos",
            "events_url": "https://api.github.com/users/oborchers/events{/privacy}",
            "received_events_url": "https://api.github.com/users/oborchers/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4576380804,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDU3NjM4MDgwNA==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4576380804",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-09T20:57:37Z",
        "performed_via_github_app": null
    },
    {
        "id": 4576380809,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ1NzYzODA4MDk=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4576380809",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-04-09T20:57:38Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/835188828",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-835188828",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 835188828,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgzNTE4ODgyOA==",
        "user": {
            "login": "mudong0419",
            "id": 24379054,
            "node_id": "MDQ6VXNlcjI0Mzc5MDU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/24379054?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mudong0419",
            "html_url": "https://github.com/mudong0419",
            "followers_url": "https://api.github.com/users/mudong0419/followers",
            "following_url": "https://api.github.com/users/mudong0419/following{/other_user}",
            "gists_url": "https://api.github.com/users/mudong0419/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mudong0419/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mudong0419/subscriptions",
            "organizations_url": "https://api.github.com/users/mudong0419/orgs",
            "repos_url": "https://api.github.com/users/mudong0419/repos",
            "events_url": "https://api.github.com/users/mudong0419/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mudong0419/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-08T07:57:17Z",
        "updated_at": "2021-05-08T07:57:17Z",
        "author_association": "NONE",
        "body": "I have the same problem. When inference with Bert(HuggingFace), TensorrtExecutionProvider is slower than CUDAExecutionProvider.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/835188828/reactions",
            "total_count": 4,
            "+1": 4,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "mudong0419",
            "id": 24379054,
            "node_id": "MDQ6VXNlcjI0Mzc5MDU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/24379054?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mudong0419",
            "html_url": "https://github.com/mudong0419",
            "followers_url": "https://api.github.com/users/mudong0419/followers",
            "following_url": "https://api.github.com/users/mudong0419/following{/other_user}",
            "gists_url": "https://api.github.com/users/mudong0419/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mudong0419/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mudong0419/subscriptions",
            "organizations_url": "https://api.github.com/users/mudong0419/orgs",
            "repos_url": "https://api.github.com/users/mudong0419/repos",
            "events_url": "https://api.github.com/users/mudong0419/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mudong0419/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "actor": {
            "login": "romank87",
            "id": 85252,
            "node_id": "MDQ6VXNlcjg1MjUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/85252?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romank87",
            "html_url": "https://github.com/romank87",
            "followers_url": "https://api.github.com/users/romank87/followers",
            "following_url": "https://api.github.com/users/romank87/following{/other_user}",
            "gists_url": "https://api.github.com/users/romank87/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romank87/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romank87/subscriptions",
            "organizations_url": "https://api.github.com/users/romank87/orgs",
            "repos_url": "https://api.github.com/users/romank87/repos",
            "events_url": "https://api.github.com/users/romank87/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romank87/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-08T02:50:39Z",
        "updated_at": "2021-07-08T02:50:39Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315/events",
                "html_url": "https://github.com/microsoft/onnxruntime/issues/8315",
                "id": 938631185,
                "node_id": "MDU6SXNzdWU5Mzg2MzExODU=",
                "number": 8315,
                "title": "Awful performance with LASER model when using TensorRT provider",
                "user": {
                    "login": "cgr71ii",
                    "id": 16403611,
                    "node_id": "MDQ6VXNlcjE2NDAzNjEx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/16403611?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/cgr71ii",
                    "html_url": "https://github.com/cgr71ii",
                    "followers_url": "https://api.github.com/users/cgr71ii/followers",
                    "following_url": "https://api.github.com/users/cgr71ii/following{/other_user}",
                    "gists_url": "https://api.github.com/users/cgr71ii/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/cgr71ii/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/cgr71ii/subscriptions",
                    "organizations_url": "https://api.github.com/users/cgr71ii/orgs",
                    "repos_url": "https://api.github.com/users/cgr71ii/repos",
                    "events_url": "https://api.github.com/users/cgr71ii/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/cgr71ii/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 2204061391,
                        "node_id": "MDU6TGFiZWwyMjA0MDYxMzkx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/ep:TensorRT",
                        "name": "ep:TensorRT",
                        "color": "0052CC",
                        "default": false,
                        "description": "issues related to TensorRT execution provider"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2021-07-07T08:27:45Z",
                "updated_at": "2022-08-12T08:46:29Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "body": "**Describe the bug**\r\nI am trying to improve the performance of the LASER model, but once I do all the necessary steps to be able to run it with TensorRT, it is very slow.\r\n\r\n**Urgency**\r\nHigh (project-related timelines: 08/2021)\r\n\r\n**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 20.04\r\n- ONNX Runtime installed from (source or binary): source\r\n- ONNX Runtime version: https://github.com/microsoft/onnxruntime/commit/27d1784d44826e1f1b58b76dadce88617e5f1f4d\r\n- Python version: 3.6.3\r\n- GCC/Compiler version (if compiling from source): 9.3.0-17ubuntu1~20.04\r\n- CUDA/cuDNN version: 11.4/8.2.1\r\n- GPU model and memory: A100 (40 GiB)\r\n\r\nOther:\r\n- pytorch version: 1.8.1\r\n\r\n**To Reproduce**.\r\nIn the whole procedure, I am using a conda environment.\r\n\r\n1. Install TensorRT and onnxruntime from source (if not, we will not have TensorRT support):\r\n```bash\r\n# TensorRT\r\n## Download TensorRT from https://developer.nvidia.com/compute/machine-learning/tensorrt/secure/7.2.2/tars/TensorRT-7.2.2.3.Ubuntu-18.04.x86_64-gnu.cuda-11.1.cudnn8.0.tar.gz\r\n## Following steps from https://docs.nvidia.com/deeplearning/tensorrt/install-guide/index.html#installing-tar\r\n\r\n# onnxruntime\r\ngit clone --recursive https://github.com/Microsoft/onnxruntime\r\ncd onnxruntime\r\n./build.sh --parallel --build --update --config Release --cuda_home /usr/local/cuda --cudnn_home /usr/local/cuda/lib64 --tensorrt_home /home/cgarcia/Documentos/tensorrt/TensorRT-7.2.3.4 --use_tensorrt --build_wheel --cmake_extra_defines ONNXRUNTIME_VERSION=$(cat ./VERSION_NUMBER) --cuda_version=11.4 --enable_pybind\r\npip install ./build/Linux/Release/dist/onnxruntime_gpu_tensorrt-1.8.0-cp36-cp36m-linux_x86_64.whl\r\ncd ..\r\n\r\n# Check\r\npython -c \"import tensorrt\" # ok\r\npython -c \"import onnxruntime\" # ok\r\n```\r\n2. Modify LASER model to be able to export it to ONNX from pytorch (file `embed_opt.py` or file `laser.onnx`)\r\n3. Download [LASER](https://github.com/facebookresearch/LASER) and install dependencies\r\n4. Download BUCC data ([instructions from LASER](https://github.com/facebookresearch/LASER/tree/master/tasks/bucc))\r\n5. Copy the upload `embed_opt.py` to `$LASER/source` (it will be executed instead of the original `embed.py` by `bucc.sh`). Use the upload `bucc.sh` in `$LASER/tasks/bucc/bucc.sh` instead of the original. Copy the upload `embedding_util.py` to `$LASER/source`.\r\n6. Modify, if necessary, line 305, col 114, of `$LASER/source/embed_opt.py` in order to adapt the amount of GPU (I used 15GiB, but it may be adapted to ~5GiB or even less).\r\n7. Execute:\r\n```bash\r\n# You will need to modify the path to your TensorRT directory\r\nexport LD_LIBRARY_PATH=\"/home/cgarcia/Documentos/tensorrt/TensorRT-7.2.3.4/lib\"\r\n\r\ncd $LASER/tasks/bucc\r\n# laser.onnx will be generated if not provided (it has been upload with xz compression, which it will be needed to decompress to use or check with netron)\r\n/usr/bin/time -v ./bucc.sh \"--run-ort --ort-model $(pwd)/laser.onnx\"\r\n```\r\n\r\nPS: I might have forgotten some dependencies in order to make all the previous steps working or some scripts. If needed, I will update the issue with whatever that is needed.\r\n\r\nWhen I execute the model with CPU, CUDA or TensorRT provider, the results are the expected, but the times are not. The times with CPU and CUDA are similar to the corresponding version of pytorch, but with TensorRT does not work as expected in terms of time.\r\n\r\n**Expected behavior**\r\nBe, at least, as fast as the CUDA provider.\r\n\r\n**Additional context**\r\nI also have tried to use the script `symbolic_shape_infer.py`, but the same result remains:\r\n```bash\r\npython ./onnxruntime/onnxruntime/python/tools/symbolic_shape_infer.py --input /home/cgarcia/Documentos/LASER/tasks/bucc/laser.onnx --output /home/cgarcia/Documentos/LASER/tasks/bucc/new_laser.onnx --auto_merge --verbose 3\r\n```\r\n\r\nWhen executing the task with CUDA provider, the time it takes is ~30min, but with TensorRT I have not even be able to finish it (e.g. 30 sentences takes, the first inference, ~5 mins, but the rest takes ~10 mins). For instance, the file `bucc2018.fr-en.train.txt.en` contains 369810 lines, and the task processes 4 pairs of languages with a total of 2657641 sentences (i.e. 2657641 embeddings to be generated).\r\n\r\n**Files**\r\nCould not attach the files, so I uploaded to drive: https://drive.google.com/file/d/1J7masfUv6Wt4QrBHoWpbbDHkDvgM7GyS/view?usp=sharing",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8315/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/990663354",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-990663354",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 990663354,
        "node_id": "IC_kwDOCVq1mM47DFK6",
        "user": {
            "login": "LeeJiangWei",
            "id": 49602584,
            "node_id": "MDQ6VXNlcjQ5NjAyNTg0",
            "avatar_url": "https://avatars.githubusercontent.com/u/49602584?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LeeJiangWei",
            "html_url": "https://github.com/LeeJiangWei",
            "followers_url": "https://api.github.com/users/LeeJiangWei/followers",
            "following_url": "https://api.github.com/users/LeeJiangWei/following{/other_user}",
            "gists_url": "https://api.github.com/users/LeeJiangWei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/LeeJiangWei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/LeeJiangWei/subscriptions",
            "organizations_url": "https://api.github.com/users/LeeJiangWei/orgs",
            "repos_url": "https://api.github.com/users/LeeJiangWei/repos",
            "events_url": "https://api.github.com/users/LeeJiangWei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/LeeJiangWei/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-10T06:51:45Z",
        "updated_at": "2021-12-10T07:28:29Z",
        "author_association": "NONE",
        "body": "> I have the same problem. When inference with Bert(HuggingFace), TensorrtExecutionProvider is slower than CUDAExecutionProvider.\r\n\r\nSame here using HugginceFace models. It's a warm-up issue as @stevenlix said, and it will be much faster the second time you call sess.run().",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/990663354/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "LeeJiangWei",
            "id": 49602584,
            "node_id": "MDQ6VXNlcjQ5NjAyNTg0",
            "avatar_url": "https://avatars.githubusercontent.com/u/49602584?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LeeJiangWei",
            "html_url": "https://github.com/LeeJiangWei",
            "followers_url": "https://api.github.com/users/LeeJiangWei/followers",
            "following_url": "https://api.github.com/users/LeeJiangWei/following{/other_user}",
            "gists_url": "https://api.github.com/users/LeeJiangWei/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/LeeJiangWei/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/LeeJiangWei/subscriptions",
            "organizations_url": "https://api.github.com/users/LeeJiangWei/orgs",
            "repos_url": "https://api.github.com/users/LeeJiangWei/repos",
            "events_url": "https://api.github.com/users/LeeJiangWei/events{/privacy}",
            "received_events_url": "https://api.github.com/users/LeeJiangWei/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5745874286,
        "node_id": "MEE_lADOCVq1mM4yper1zwAAAAFWexVu",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5745874286",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-10T07:28:18Z",
        "performed_via_github_app": null
    },
    {
        "id": 5745874294,
        "node_id": "SE_lADOCVq1mM4yper1zwAAAAFWexV2",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5745874294",
        "actor": {
            "login": "stevenlix",
            "id": 38092805,
            "node_id": "MDQ6VXNlcjM4MDkyODA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38092805?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevenlix",
            "html_url": "https://github.com/stevenlix",
            "followers_url": "https://api.github.com/users/stevenlix/followers",
            "following_url": "https://api.github.com/users/stevenlix/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevenlix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevenlix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevenlix/subscriptions",
            "organizations_url": "https://api.github.com/users/stevenlix/orgs",
            "repos_url": "https://api.github.com/users/stevenlix/repos",
            "events_url": "https://api.github.com/users/stevenlix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevenlix/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-10T07:28:19Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100843586",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7230#issuecomment-1100843586",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7230",
        "id": 1100843586,
        "node_id": "IC_kwDOCVq1mM5BnYpC",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-17T09:53:59Z",
        "updated_at": "2022-04-17T09:53:59Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100843586/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        }
    },
    {
        "id": 6444353187,
        "node_id": "LE_lADOCVq1mM4yper1zwAAAAGAHQaj",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/6444353187",
        "actor": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-04-17T09:54:29Z",
        "label": {
            "name": "stale",
            "color": "ffffff"
        },
        "performed_via_github_app": null
    },
    {
        "id": 7177466486,
        "node_id": "UNLE_lADOCVq1mM4yper1zwAAAAGrz3J2",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7177466486",
        "actor": {
            "login": "sophies927",
            "id": 107952697,
            "node_id": "U_kgDOBm86OQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/107952697?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sophies927",
            "html_url": "https://github.com/sophies927",
            "followers_url": "https://api.github.com/users/sophies927/followers",
            "following_url": "https://api.github.com/users/sophies927/following{/other_user}",
            "gists_url": "https://api.github.com/users/sophies927/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sophies927/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sophies927/subscriptions",
            "organizations_url": "https://api.github.com/users/sophies927/orgs",
            "repos_url": "https://api.github.com/users/sophies927/repos",
            "events_url": "https://api.github.com/users/sophies927/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sophies927/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "unlabeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-08-12T08:39:18Z",
        "label": {
            "name": "type:performance",
            "color": "a2eeef"
        },
        "performed_via_github_app": null
    },
    {
        "id": 7177508105,
        "node_id": "UNLE_lADOCVq1mM4yper1zwAAAAGr0BUJ",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7177508105",
        "actor": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "event": "unlabeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-08-12T08:46:29Z",
        "label": {
            "name": "stale",
            "color": "ffffff"
        },
        "performed_via_github_app": null
    }
]