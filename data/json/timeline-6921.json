[
    {
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-06T03:05:18Z",
        "updated_at": "2021-03-06T03:05:18Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146/events",
                "html_url": "https://github.com/microsoft/onnxruntime/issues/6146",
                "id": 768638957,
                "node_id": "MDU6SXNzdWU3Njg2Mzg5NTc=",
                "number": 6146,
                "title": "Dubious implementation of ROIAlign in 'max' mode",
                "user": {
                    "login": "yury-intel",
                    "id": 57213286,
                    "node_id": "MDQ6VXNlcjU3MjEzMjg2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/57213286?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yury-intel",
                    "html_url": "https://github.com/yury-intel",
                    "followers_url": "https://api.github.com/users/yury-intel/followers",
                    "following_url": "https://api.github.com/users/yury-intel/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yury-intel/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yury-intel/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yury-intel/subscriptions",
                    "organizations_url": "https://api.github.com/users/yury-intel/orgs",
                    "repos_url": "https://api.github.com/users/yury-intel/repos",
                    "events_url": "https://api.github.com/users/yury-intel/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yury-intel/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1267486731,
                        "node_id": "MDU6TGFiZWwxMjY3NDg2NzMx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/contributions%20welcome",
                        "name": "contributions welcome",
                        "color": "FBCA04",
                        "default": false,
                        "description": "lower priority issues for the core ORT teams"
                    },
                    {
                        "id": 2014185961,
                        "node_id": "MDU6TGFiZWwyMDE0MTg1OTYx",
                        "url": "https://api.github.com/repos/microsoft/onnxruntime/labels/core%20runtime",
                        "name": "core runtime",
                        "color": "006B75",
                        "default": false,
                        "description": "issues related to core runtime"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 7,
                "created_at": "2020-12-16T09:39:10Z",
                "updated_at": "2022-06-21T02:06:32Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "body": "There are cases, when the results of ROIAlign may be significally different from expected.\r\n\r\nImplementation of ROIAlign runs questionably in MAX mode.\r\nhttps://github.com/microsoft/onnxruntime/blob/7f9d9557b1f4a427dbffa7265af2f478034bcc2f/onnxruntime/core/providers/cpu/object_detection/roialign.cc#L216\r\nI.e., when weighed data feature_map is collected, we commit MAX - operation to all collected data.\r\nSo, we return one of weighed value (by [0, 1] - coefficient), which is assuredly less, then all interpolated values.\r\nIn the case of centered coordinates of sampling point, nearly 1/4 from expected value is returned.\r\nWe need instead, at first, commit interpolation, and afterwards given type of operation (AVG or MAX).\r\nSuggested algorithm is similar to Caffe implementation.\r\n\r\n![image](https://user-images.githubusercontent.com/57213286/102330641-dc643400-3f9a-11eb-961f-2dfe4cba37cc.png)\r\n![image](https://user-images.githubusercontent.com/57213286/102331251-a70c1600-3f9b-11eb-9390-72cf6291b989.png)\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6146/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "id": 4424192701,
        "node_id": "MDEyOkxhYmVsZWRFdmVudDQ0MjQxOTI3MDE=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4424192701",
        "actor": {
            "login": "faxu",
            "id": 20780999,
            "node_id": "MDQ6VXNlcjIwNzgwOTk5",
            "avatar_url": "https://avatars.githubusercontent.com/u/20780999?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/faxu",
            "html_url": "https://github.com/faxu",
            "followers_url": "https://api.github.com/users/faxu/followers",
            "following_url": "https://api.github.com/users/faxu/following{/other_user}",
            "gists_url": "https://api.github.com/users/faxu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/faxu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/faxu/subscriptions",
            "organizations_url": "https://api.github.com/users/faxu/orgs",
            "repos_url": "https://api.github.com/users/faxu/repos",
            "events_url": "https://api.github.com/users/faxu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/faxu/received_events",
            "type": "User",
            "site_admin": true
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-03-08T23:41:49Z",
        "label": {
            "name": "component:operator",
            "color": "303a93"
        },
        "performed_via_github_app": null
    },
    {
        "id": 4424787317,
        "node_id": "MDEzOkFzc2lnbmVkRXZlbnQ0NDI0Nzg3MzE3",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4424787317",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "assigned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-03-09T02:34:58Z",
        "assignee": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793312534",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6921#issuecomment-793312534",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6921",
        "id": 793312534,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzMxMjUzNA==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-09T03:12:05Z",
        "updated_at": "2021-03-09T03:12:05Z",
        "author_association": "MEMBER",
        "body": "I will investigate this",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793312534/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793590105",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6921#issuecomment-793590105",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6921",
        "id": 793590105,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzU5MDEwNQ==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-09T09:08:51Z",
        "updated_at": "2021-03-09T11:21:57Z",
        "author_association": "MEMBER",
        "body": "Thanks Hari. Note that the coordinates of RoiAlign are on an infinite floating point grid, unlike RoiPool (with integers and that weirdo -1 size adjustment). So a ROI (x1,y1,x2,y2) of [1.6, 1.3, 3.3, 2.75] means a region size of width=1.7 (3.3 - 1.6) and height=1.45 (2.75 - 1.3).\r\n\r\n![image](https://user-images.githubusercontent.com/1809166/110446717-537a0780-8074-11eb-9350-5037838ea9da.png)\r\n\r\nAdded some diagrams in the above table, with blue as the input image and orange as the regions to write to output (the dots are the blue input sample points and orange output points).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793590105/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/799548790",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6921#issuecomment-799548790",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6921",
        "id": 799548790,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5OTU0ODc5MA==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-15T16:16:35Z",
        "updated_at": "2021-03-15T16:30:25Z",
        "author_association": "MEMBER",
        "body": "Hi Dwayne,\r\n\r\nI investigated this and here are my findings:\r\n\r\n1)  In your table above, this doesn't seem right:\r\n\r\nÂ  | torchvision.ops.roi_align(aligned=Falseâ€¦)*deprecated, legacy flag still exists | [13.75, 14.25, 14.75, 15.25],[18.75, 19.25, 19.75, 20.25],[23.75, 24.25, 24.75, 25.25],[28.75, 29.25, 29.75, 30.25]\r\n-- | -- | --\r\n???Â ðŸ™ƒ | ONNX Runtime 1.7 CPU EP RoiAlign | [6.1875, 6.75, 6.75, 7.3125],[11.8125, 12.375, 12.375, 12.9375],[11.8125, 12.375, 12.375, 12.9375],[17.4375, 18, 18, 18.5625]\r\n\r\nThe reason is that these results are produced by ORT when the pooling mode is 'max' for the operator. From the looks of it, Torch only seems to support 'avg' pooling. As soon as you change the mode to 'avg', you will see that the results from ORT are matching TorchVision (aligned = False).\r\n\r\nSo, my conclusion is ORT's CPU implementation (in avg mode) == Legacy Torch ROIAlign (aligned = False)\r\n\r\n2) To ensure backwards compatibility, TorchVision seems to have introduced the `aligned` flag and gives the user the option of \"fixing the misalignment\"(the legacy aligned = False is still the default mode though). In the Detectron project, the RoiAlign wrapper they have has the default value for the 'aligned' flag set to True and this nuance is seemingly the root cause for the diffs wrt to ORT. So, to summarize, ORT's CPU backend implements the legacy mode and DirectML backend (like Detectron) is implementing the \"misalignment fixed\"  logic. Does this make sense?\r\n\r\nUnfortunately, I don't know how to fix this without breaking backwards compatibility. The way I see it, we may have to introduce a new attribute in ONNX for this op (just like TorchVision introduced the `aligned` flag) that would allow the user to pick which implementation they would like. What do you think ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/799548790/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-15T16:38:54Z",
        "updated_at": "2021-03-15T16:38:54Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012/events",
                "html_url": "https://github.com/microsoft/onnxruntime/pull/7012",
                "id": 831990884,
                "node_id": "MDExOlB1bGxSZXF1ZXN0NTkzMjI1MDA0",
                "number": 7012,
                "title": "Avoid some unnecessary copies in CPU RoiAlign",
                "user": {
                    "login": "hariharans29",
                    "id": 9969784,
                    "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/hariharans29",
                    "html_url": "https://github.com/hariharans29",
                    "followers_url": "https://api.github.com/users/hariharans29/followers",
                    "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
                    "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
                    "organizations_url": "https://api.github.com/users/hariharans29/orgs",
                    "repos_url": "https://api.github.com/users/hariharans29/repos",
                    "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/hariharans29/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2021-03-15T16:38:54Z",
                "updated_at": "2021-03-16T14:21:59Z",
                "closed_at": "2021-03-16T14:21:58Z",
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/pulls/7012",
                    "html_url": "https://github.com/microsoft/onnxruntime/pull/7012",
                    "diff_url": "https://github.com/microsoft/onnxruntime/pull/7012.diff",
                    "patch_url": "https://github.com/microsoft/onnxruntime/pull/7012.patch",
                    "merged_at": "2021-03-16T14:21:58Z"
                },
                "body": "**Description*As title\r\n\r\n**Motivation and Context**\r\nNot related but noticed this as part of investigating https://github.com/microsoft/onnxruntime/issues/6921\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7012/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/799916014",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6921#issuecomment-799916014",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6921",
        "id": 799916014,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5OTkxNjAxNA==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-16T03:29:16Z",
        "updated_at": "2021-04-21T23:33:08Z",
        "author_association": "MEMBER",
        "body": "I fixed the table above and wording showing it matches deprecated PyTorch behavior (oops, sorry for the \"max\" vs \"avg\" mixup when I recorded that result ðŸ˜…). Yeah, back compat is a concern. Really ONNX should add an attribute to RoiAlign like it did with Resize and default to half_pixels (ONNX convertors from old opsets can set it to the legacy behavior). Thanks for investigating.\r\n\r\nI'll plot the output rectangles from both approaches over the original image to contrast them. I've opened an [ONNX issue](https://github.com/onnx/onnx/issues/3428).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/799916014/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 4462106493,
        "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDQ2MjEwNjQ5Mw==",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4462106493",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-03-16T03:29:16Z",
        "performed_via_github_app": null
    },
    {
        "id": 4462106495,
        "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ0NjIxMDY0OTU=",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/4462106495",
        "actor": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-03-16T03:29:16Z",
        "performed_via_github_app": null
    },
    {
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-16T05:45:17Z",
        "updated_at": "2021-04-16T05:45:17Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/onnx/onnx/issues/3428",
                "repository_url": "https://api.github.com/repos/onnx/onnx",
                "labels_url": "https://api.github.com/repos/onnx/onnx/issues/3428/labels{/name}",
                "comments_url": "https://api.github.com/repos/onnx/onnx/issues/3428/comments",
                "events_url": "https://api.github.com/repos/onnx/onnx/issues/3428/events",
                "html_url": "https://github.com/onnx/onnx/issues/3428",
                "id": 859477308,
                "node_id": "MDU6SXNzdWU4NTk0NzczMDg=",
                "number": 3428,
                "title": "[Operator] RoiAlign backend test case's output is misaligned",
                "user": {
                    "login": "fdwr",
                    "id": 1809166,
                    "node_id": "MDQ6VXNlcjE4MDkxNjY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/fdwr",
                    "html_url": "https://github.com/fdwr",
                    "followers_url": "https://api.github.com/users/fdwr/followers",
                    "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
                    "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
                    "organizations_url": "https://api.github.com/users/fdwr/orgs",
                    "repos_url": "https://api.github.com/users/fdwr/repos",
                    "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/fdwr/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 685678338,
                        "node_id": "MDU6TGFiZWw2ODU2NzgzMzg=",
                        "url": "https://api.github.com/repos/onnx/onnx/labels/bug",
                        "name": "bug",
                        "color": "ee0701",
                        "default": true,
                        "description": null
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2021-04-16T05:45:17Z",
                "updated_at": "2021-10-15T21:17:54Z",
                "closed_at": "2021-10-15T21:17:53Z",
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "repository": {
                    "id": 102692863,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxMDI2OTI4NjM=",
                    "name": "onnx",
                    "full_name": "onnx/onnx",
                    "private": false,
                    "owner": {
                        "login": "onnx",
                        "id": 31675368,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/31675368?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/onnx",
                        "html_url": "https://github.com/onnx",
                        "followers_url": "https://api.github.com/users/onnx/followers",
                        "following_url": "https://api.github.com/users/onnx/following{/other_user}",
                        "gists_url": "https://api.github.com/users/onnx/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/onnx/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/onnx/subscriptions",
                        "organizations_url": "https://api.github.com/users/onnx/orgs",
                        "repos_url": "https://api.github.com/users/onnx/repos",
                        "events_url": "https://api.github.com/users/onnx/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/onnx/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/onnx/onnx",
                    "description": "Open standard for machine learning interoperability",
                    "fork": false,
                    "url": "https://api.github.com/repos/onnx/onnx",
                    "forks_url": "https://api.github.com/repos/onnx/onnx/forks",
                    "keys_url": "https://api.github.com/repos/onnx/onnx/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/onnx/onnx/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/onnx/onnx/teams",
                    "hooks_url": "https://api.github.com/repos/onnx/onnx/hooks",
                    "issue_events_url": "https://api.github.com/repos/onnx/onnx/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/onnx/onnx/events",
                    "assignees_url": "https://api.github.com/repos/onnx/onnx/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/onnx/onnx/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/onnx/onnx/tags",
                    "blobs_url": "https://api.github.com/repos/onnx/onnx/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/onnx/onnx/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/onnx/onnx/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/onnx/onnx/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/onnx/onnx/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/onnx/onnx/languages",
                    "stargazers_url": "https://api.github.com/repos/onnx/onnx/stargazers",
                    "contributors_url": "https://api.github.com/repos/onnx/onnx/contributors",
                    "subscribers_url": "https://api.github.com/repos/onnx/onnx/subscribers",
                    "subscription_url": "https://api.github.com/repos/onnx/onnx/subscription",
                    "commits_url": "https://api.github.com/repos/onnx/onnx/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/onnx/onnx/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/onnx/onnx/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/onnx/onnx/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/onnx/onnx/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/onnx/onnx/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/onnx/onnx/merges",
                    "archive_url": "https://api.github.com/repos/onnx/onnx/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/onnx/onnx/downloads",
                    "issues_url": "https://api.github.com/repos/onnx/onnx/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/onnx/onnx/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/onnx/onnx/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/onnx/onnx/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/onnx/onnx/labels{/name}",
                    "releases_url": "https://api.github.com/repos/onnx/onnx/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/onnx/onnx/deployments",
                    "created_at": "2017-09-07T04:53:45Z",
                    "updated_at": "2022-12-20T08:49:46Z",
                    "pushed_at": "2022-12-20T17:45:57Z",
                    "git_url": "git://github.com/onnx/onnx.git",
                    "ssh_url": "git@github.com:onnx/onnx.git",
                    "clone_url": "https://github.com/onnx/onnx.git",
                    "svn_url": "https://github.com/onnx/onnx",
                    "homepage": "https://onnx.ai/",
                    "size": 25594,
                    "stargazers_count": 13832,
                    "watchers_count": 13832,
                    "language": "Python",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 3237,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 330,
                    "license": {
                        "key": "apache-2.0",
                        "name": "Apache License 2.0",
                        "spdx_id": "Apache-2.0",
                        "url": "https://api.github.com/licenses/apache-2.0",
                        "node_id": "MDc6TGljZW5zZTI="
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "deep-learning",
                        "deep-neural-networks",
                        "dnn",
                        "keras",
                        "machine-learning",
                        "ml",
                        "mxnet",
                        "neural-network",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 3237,
                    "open_issues": 330,
                    "watchers": 13832,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": false,
                        "push": false,
                        "triage": false,
                        "pull": true
                    }
                },
                "body": "# Bug Report\r\n\r\n### Is the issue related to model conversion?\r\nNo.\r\n\r\n### Describe the bug\r\nThe [RoiAlign operator](https://github.com/onnx/onnx/blob/master/docs/Operators.md#RoiAlign), per the [Mask R-CNN paper](https://arxiv.org/abs/1703.06870) and Facebook Research's [Detectron 2 implementation](https://github.com/facebookresearch/detectron2/blob/master/detectron2/layers/roi_align.py) aligns sampling points over the center of the pixels, but the [solitary test case](https://github.com/onnx/onnx/blob/master/onnx/backend/test/case/node/roialign.py) in the ONNX backend has output that is misaligned by half an input pixel. After comparing to various references (table below under **Notes**) and reading more into the history of this operator, I see this is actually an old bug (which Detectron since fixed and PyTorch also fixed with aligned=True) which applied an offset the output subsample by 0.5 but forgot to adjust the input sample to compensate (see their comment in the [code](https://github.com/facebookresearch/detectron2/blob/master/detectron2/layers/roi_align.py): \"_the original roi_align (aligned=False) does not subtract the 0.5 when computing neighboring pixel indices and therefore it uses pixels with a slightly incorrect alignment (relative to our pixel model) when performing bilinear interpolation_\" and the [test case](https://github.com/facebookresearch/detectron2/blob/master/tests/layers/test_roi_align.py#L15)).\r\n\r\n&nbsp; | equation\r\n----------|----------\r\nCorrect | `input.x = (output.x + 0.5) * computedOutputToInputScale + scaledCurrentRoi.x - 0.5` |\r\nIncorrect | `input.x = (output.x + 0.5) * computedOutputToInputScale + scaledCurrentRoi.x - 0.0` |\r\n\r\n![image](https://user-images.githubusercontent.com/1809166/110403224-95ce2500-8031-11eb-80c0-92732fa247d2.png)\r\n\r\nWe should fix the existing [ONNX backend test case](https://github.com/onnx/onnx/blob/master/onnx/backend/test/case/node/roialign.py) accordingly. Otherwise even a simple case of cropping an identity region from the input doesn't match. e.g. a new test case:\r\n\r\n```python\r\n    # Crop a 2x2 region from the 4x5 input.\r\n    @staticmethod\r\n    def export_roialign_identity_region():  # type: () -> None\r\n        node = onnx.helper.make_node(\r\n            \"RoiAlign\",\r\n            inputs=[\"X\", \"rois\", \"batch_indices\"],\r\n            outputs=[\"Y\"],\r\n            spatial_scale=1.0,\r\n            output_height=2,\r\n            output_width=2,\r\n            sampling_ratio=1,\r\n        )\r\n\r\n        X = np.array(\r\n            [\r\n                [\r\n                    [\r\n                        [ 0, 1, 2, 3],\r\n                        [ 4, 5, 6, 7],\r\n                        [ 8, 9,10,11], # 2x2 region of interest:  9,10\r\n                        [12,13,14,15], #                         13,14\r\n                        [16,17,18,19],\r\n                    ]\r\n                ]\r\n            ],\r\n            dtype=np.float32,\r\n        )\r\n        batch_indices = np.array([0], dtype=np.int64)\r\n        rois = np.array([[1, 2, 3, 4]], dtype=np.float32)\r\n        # (num_rois, C, output_height, output_width)\r\n        Y = np.array(\r\n            [\r\n                [\r\n                    [\r\n                        [ 9,10], # Should be identity scale/translation window into the input,\r\n                        [13,14], # and not [[11.5,12.5], [15.5,16.5]].\r\n                    ]\r\n                ]\r\n            ],\r\n            dtype=np.float32,\r\n        )\r\n\r\n        expect(node, inputs=[X, rois, batch_indices], outputs=[Y], name=\"test_roialign_identity_region\")\r\n```\r\n[roi_align_identity_region.zip](https://github.com/onnx/onnx/files/6322528/roi_align_identity_region.zip)\r\n\r\n### System information\r\n- OS Platform and Distribution: Windows 10 20H2 19042.867\r\n- ONNX version:  1.8.1\r\n- Python version: 3.9.1\r\n- GCC/Compiler version: VS2019\r\n- CMake version: NA\r\n- Protobuf version: NA\r\n- Visual Studio version (if applicable): VS2019\r\n\r\n### Reproduction instructions\r\n- Run the existing ONNX back test case.\r\n\r\n### Expected behavior\r\nThe test case should bilinearly sample from pixel centers in *both* input and output pixels, not half of one and zero of the other.\r\n\r\ne.g.\r\n![image](https://user-images.githubusercontent.com/1809166/110191631-5d82d880-7dde-11eb-938b-da13a22eda97.png)\r\n\r\n### Notes\r\n\r\nI compared the bounding box output for the [Mask R-CNN model](https://github.com/onnx/models/tree/master/vision/object_detection_segmentation/mask-rcnn/model) using the baseline output in the tar.gz vs the half-pixel aligned output from the ONNX Runtime DirectML execution provider, and I feel the alignment is tighter and more accurately aligned, with fewer random false positives in the half-pixel sampled implementation. Other data scientists have also complained online that the old bug in PyTorch negatively affected their object detection results.\r\n\r\n![image](https://user-images.githubusercontent.com/1809166/114975841-c75cbc00-9e39-11eb-8b7f-23e4ceb11d22.png)\r\n\r\n### Framework comparisons\r\n\r\n```\r\nInput Tensor =\r\n                   <------->\r\n              0.0 1.0 2.0 3.0 4.0 5.0 6.0\r\n               |.5 |.5 |.5 |.5 |.5 |.5 |\r\n        0.0___ |_|_|_|_|_|_|_|_|_|_|_|_|\r\n        1.0___[| 0,| 1,| 2,| 3,| 4,| 5 ]\r\n    /|\\ 2.0___[|10,â”ƒ11,â”ƒ12,â”ƒ13,|14,|15 ]\r\n    \\|/ 3.0___[|20,â”ƒ21,â”ƒ22,â”ƒ23,|24,|25 ]\r\n        4.0___[|30,|31,|32,|33,|34,|35 ]\r\n        5.0___[|40,|41,|42,|43,|44,|45 ]\r\n        6.0___[|50,|51,|52,|53,|54,|55 ]\r\n\r\nActive region of interest = [[1.0, 1.0, 3.0, 3.0], ...]\r\n// The first window is 2x2 over the input elements, covering values [[11,12],[21,22]].\r\nOutput tensor size = [4,4]\r\n```\r\n\r\nImage | Source | Output 4x4, from first 2x2 region\r\n-- | -- | --\r\n![image](https://user-images.githubusercontent.com/1809166/115476907-ac05fe00-a1f7-11eb-8b06-42d19070e5b8.png) | âœ” FB Research [Detectron 2](https://github.com/facebookresearch/detectron2/blob/master/detectron2/layers/roi_align.py) (MaskedRCNN paper) | [â€‚8.25, â€‚8.75, â€‚9.25, â€‚9.75],<br/>[13.25, 13.75, 14.25, 14.75],<br/>[18.25, 18.75, 19.25, 19.75],<br/>[23.25, 23.75, 24.25, 24.75]\r\n![image](https://user-images.githubusercontent.com/1809166/115476907-ac05fe00-a1f7-11eb-8b06-42d19070e5b8.png) | âœ” ONNX Runtime DirectML EP (ROI_ALIGN 0) | [â€‚8.25, â€‚8.75, â€‚9.25, â€‚9.75],<br/>[13.25, 13.75, 14.25, 14.75],<br/>[18.25, 18.75, 19.25, 19.75],<br/>[23.25, 23.75, 24.25, 24.75]\r\n![image](https://user-images.githubusercontent.com/1809166/115476907-ac05fe00-a1f7-11eb-8b06-42d19070e5b8.png) | âœ” ONNX Runtime 1.7 CPU [Resize](https://github.com/onnx/onnx/blob/master/docs/Operators.md#Resize) + Slice<br/>coordinate_transformation_mode=half | [â€‚8.25, â€‚8.75, â€‚9.25, â€‚9.75],<br/>[13.25, 13.75, 14.25, 14.75],<br/>[18.25, 18.75, 19.25, 19.75],<br/>[23.25, 23.75, 24.25, 24.75]\r\n![image](https://user-images.githubusercontent.com/1809166/115476907-ac05fe00-a1f7-11eb-8b06-42d19070e5b8.png) | âœ” [`torchvision.ops.roi_align(aligned=Trueâ€¦)`](https://pytorch.org/vision/0.8/_modules/torchvision/ops/roi_align.html) | [â€‚8.25, â€‚8.75, â€‚9.25, â€‚9.75],<br/>[13.25, 13.75, 14.25, 14.75],<br/>[18.25, 18.75, 19.25, 19.75],<br/>[23.25, 23.75, 24.25, 24.75]\r\n![image](https://user-images.githubusercontent.com/1809166/115477637-3733c380-a1f9-11eb-8205-1e2a8593e43c.png) | âœ– [`torchvision.ops.roi_align(aligned=Falseâ€¦)`](https://pytorch.org/vision/0.8/_modules/torchvision/ops/roi_align.html)<br/>*deprecated, legacy flag still exists | [13.75, 14.25, 14.75, 15.25],<br/>[18.75, 19.25, 19.75, 20.25],<br/>[23.75, 24.25, 24.75, 25.25],<br/>[28.75, 29.25, 29.75, 30.25]\r\n![image](https://user-images.githubusercontent.com/1809166/115477637-3733c380-a1f9-11eb-8205-1e2a8593e43c.png) | âœ– ONNX Runtime 1.7 CPU EP RoiAlign<br/>[PR \\#7354](https://github.com/microsoft/onnxruntime/pull/7354) [Issue \\#6921](https://github.com/microsoft/onnxruntime/issues/6921) | [13.75, 14.25, 14.75, 15.25],<br/>[18.75, 19.25, 19.75, 20.25],<br/>[23.75, 24.25, 24.75, 25.25],<br/>[28.75, 29.25, 29.75, 30.25]\r\n![image](https://user-images.githubusercontent.com/1809166/115477913-d3f66100-a1f9-11eb-9cd5-ceecaa7e5f1e.png) | ðŸ¤¨ [`tf.image.crop_and_resize(â€¦)`](https://www.tensorflow.org/api_docs/python/tf/image/crop_and_resize)<br/>*Note boxes are normalized 0 to 1 (so /5 each ROI element) | [11.00, 11.66, 12.33, 13.00],<br/>[17.66, 18.33, 19.00, 19.66],<br/>[24.33, 25.00, 25.66, 26.33],<br/>[31.00, 31.66, 32.33, 33.00]\r\n![image](https://user-images.githubusercontent.com/1809166/115477913-d3f66100-a1f9-11eb-9cd5-ceecaa7e5f1e.png) | ðŸ¤¨ `tf.image.resize_bilinear(align_corners=Trueâ€¦)`<br/> + `tf.slice` | [11.00, 11.66, 12.33, 13.00],<br/>[17.66, 18.33, 19.00, 19.66],<br/>[24.33, 25.00, 25.66, 26.33],<br/>[31.00, 31.66, 32.33, 33.00]\r\n![image](https://user-images.githubusercontent.com/1809166/115477858-b923ec80-a1f9-11eb-90be-a5ea5944ab49.png) | ðŸ¤¨ `tf.image.resize_bilinear(align_corners=Falseâ€¦)`<br/> + `tf.slice` | [11.00, 11.50, 12.00, 12.50],<br/>[16.00, 16.50, 17.00, 17.50],<br/>[21.00, 21.50, 22.00, 22.50],<br/>[26.00, 26.50, 27.00, 27.50]\r\n![image](https://user-images.githubusercontent.com/1809166/115476907-ac05fe00-a1f7-11eb-8b06-42d19070e5b8.png) | âœ” `tf.image.resize_bilinear(half_pixel_centers=Trueâ€¦)`<br/> + `tf.slice` | [â€‚8.25,Â â€‚8.75,Â â€‚9.25,Â â€‚9.75],<br/>[13.25, 13.75, 14.25, 14.75],<br/>[18.25, 18.75, 19.25, 19.75],<br/>[23.25, 23.75, 24.25, 24.75]\r\n\r\n----------\r\n\r\nFacebook research's [Detectron 2 test code](https://github.com/facebookresearch/detectron2/blob/master/tests/layers/test_roi_align.py#L15):\r\n\r\n```python\r\nclass ROIAlignTest(unittest.TestCase):\r\n    def test_forward_output(self):\r\n        input = np.arange(25).reshape(5, 5).astype(\"float32\")\r\n        \"\"\"\r\n        0  1  2   3 4\r\n        5  6  7   8 9\r\n        10 11 12 13 14\r\n        15 16 17 18 19\r\n        20 21 22 23 24\r\n        \"\"\"\r\n\r\n        output = self._simple_roialign(input, [1, 1, 3, 3], (4, 4), aligned=False)\r\n        output_correct = self._simple_roialign(input, [1, 1, 3, 3], (4, 4), aligned=True)\r\n\r\n        # without correction:\r\n        old_results = [\r\n            [7.5, 8, 8.5, 9],\r\n            [10, 10.5, 11, 11.5],\r\n            [12.5, 13, 13.5, 14],\r\n            [15, 15.5, 16, 16.5],\r\n        ]\r\n\r\n        # with 0.5 correction:\r\n        correct_results = [\r\n            [4.5, 5.0, 5.5, 6.0],\r\n            [7.0, 7.5, 8.0, 8.5],\r\n            [9.5, 10.0, 10.5, 11.0],\r\n            [12.0, 12.5, 13.0, 13.5],\r\n        ]\r\n        # This is an upsampled version of [[6, 7], [11, 12]]\r\n...\r\n```\r\n----------\r\n\r\nPyTorch sample code:\r\n```python\r\n# pip install torch==1.7.1+cpu torchvision==0.8.2+cpu torchaudio===0.7.2 -f https://download.pytorch.org/whl/torch_stable.html\r\nimport torch\r\nimport torchvision\r\nprint(\"PyTorch version:\", torch.__version__)\r\n\r\ninput = [[[[ 0, 1, 2, 3, 4, 5], # NCHW\r\n            [10,11,12,13,14,15],\r\n            [20,21,22,23,24,25],\r\n            [30,31,32,33,34,35],\r\n            [40,41,42,43,44,45],\r\n            [50,51,52,53,54,55]]]]\r\nboxes = [[0, 1,1,3,3]]\r\noutput_size = [4,4]\r\naligned=True # Correct\r\n#aligned=False # Legacy setting\r\nsampling_ratio=1\r\nspatial_scale=1\r\n\r\n# https://pytorch.org/vision/0.8/_modules/torchvision/ops/roi_align.html\r\noutput = torchvision.ops.roi_align(\r\n    torch.tensor(input, dtype=torch.float),\r\n    torch.tensor(boxes, dtype=torch.float),\r\n    output_size,\r\n    spatial_scale=spatial_scale,\r\n    sampling_ratio=sampling_ratio,\r\n    aligned=aligned\r\n)\r\n\r\ntorch.set_printoptions(sci_mode=False)\r\nprint(input)\r\nprint(boxes)\r\nprint(output)\r\n```\r\n\r\n----------\r\n\r\nTensorFlow sample code:\r\n```python\r\n# pip install tensorflow-gpu==1.15.0\r\nimport os\r\nimport tensorflow.compat.v1 as tf\r\n\r\ninput = [[ # NHWC\r\n            [[ 0.], [ 1.], [ 2.], [ 3.], [ 4.], [ 5.]],\r\n            [[10.], [11.], [12.], [13.], [14.], [15.]],\r\n            [[20.], [21.], [22.], [23.], [24.], [25.]],\r\n            [[30.], [31.], [32.], [33.], [34.], [35.]],\r\n            [[40.], [41.], [42.], [43.], [44.], [45.]],\r\n            [[50.], [51.], [52.], [53.], [54.], [55.]]\r\n        ]]\r\nboxes = [[1/5,1/5,3/5,3/5],[3/5,3/5,4/5,4/5]] # Normalized 0.0 to 1.0 (where 1.0 = width - 1 and height - 1)\r\nbox_indices = [0, 0] # Batch indices per corresponding region\r\ncrop_size = [4, 4] # Output tensor size HW\r\n\r\nprint(\"TensorFlow version:\", tf.__version__) # 1.15.0 (cpu/cuda)\r\n\r\n# Using half_pixel_centers=True is correct (not align_corners=True)\r\noutput_size = [6*2, 6*2]\r\nresize_output = tf.image.resize_bilinear(tf.constant(input), output_size, align_corners=False, half_pixel_centers=True)\r\nresize_bilinear_slice_output = tf.slice(resize_output, [0,2,2,0], [1,4,4,1])\r\n\r\n# Note crop_and_resize doesn't scale the image boundaries to pixel centers, but always to corners,\r\n# and there is sadly no flag to influence this (unlike resize_bilinear).\r\nmethod = 'bilinear'\r\nextrapolation_value = 0\r\ncrop_and_resize_output = tf.image.crop_and_resize(\r\n    image=tf.constant(input, dtype=tf.float32), # NHWC\r\n    boxes=tf.constant(boxes, dtype=tf.float32),\r\n    box_ind=tf.constant(box_indices, dtype=tf.int32),\r\n    crop_size=tf.constant(crop_size, dtype=tf.int32),\r\n    method=method,\r\n    extrapolation_value=extrapolation_value\r\n)\r\n\r\nwith tf.Session(config=config) as session:\r\n    with np.printoptions(precision=3, suppress=True):\r\n        print(\"input:\\n\", input)\r\n        print(\"crop_and_resize:\\n\", session.run(crop_and_resize_output))\r\n        print(\"resize_bilinear_and_slice:\\n\", session.run(resize_bilinear_slice_output))\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/onnx/onnx/issues/3428/reactions",
                    "total_count": 1,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 1,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/onnx/onnx/issues/3428/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "event": "cross-referenced"
    },
    {
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-16T05:52:21Z",
        "updated_at": "2021-04-16T05:52:21Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/onnx/onnx/issues/3429",
                "repository_url": "https://api.github.com/repos/onnx/onnx",
                "labels_url": "https://api.github.com/repos/onnx/onnx/issues/3429/labels{/name}",
                "comments_url": "https://api.github.com/repos/onnx/onnx/issues/3429/comments",
                "events_url": "https://api.github.com/repos/onnx/onnx/issues/3429/events",
                "html_url": "https://github.com/onnx/onnx/pull/3429",
                "id": 859481084,
                "node_id": "MDExOlB1bGxSZXF1ZXN0NjE2NTU1MzUw",
                "number": 3429,
                "title": "Fix RoiAlign backend test case output, and add new test case for an identity slice.",
                "user": {
                    "login": "fdwr",
                    "id": 1809166,
                    "node_id": "MDQ6VXNlcjE4MDkxNjY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/fdwr",
                    "html_url": "https://github.com/fdwr",
                    "followers_url": "https://api.github.com/users/fdwr/followers",
                    "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
                    "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
                    "organizations_url": "https://api.github.com/users/fdwr/orgs",
                    "repos_url": "https://api.github.com/users/fdwr/repos",
                    "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/fdwr/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2021-04-16T05:52:21Z",
                "updated_at": "2021-04-30T22:06:56Z",
                "closed_at": "2021-04-30T22:06:56Z",
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 102692863,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxMDI2OTI4NjM=",
                    "name": "onnx",
                    "full_name": "onnx/onnx",
                    "private": false,
                    "owner": {
                        "login": "onnx",
                        "id": 31675368,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjMxNjc1MzY4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/31675368?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/onnx",
                        "html_url": "https://github.com/onnx",
                        "followers_url": "https://api.github.com/users/onnx/followers",
                        "following_url": "https://api.github.com/users/onnx/following{/other_user}",
                        "gists_url": "https://api.github.com/users/onnx/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/onnx/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/onnx/subscriptions",
                        "organizations_url": "https://api.github.com/users/onnx/orgs",
                        "repos_url": "https://api.github.com/users/onnx/repos",
                        "events_url": "https://api.github.com/users/onnx/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/onnx/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/onnx/onnx",
                    "description": "Open standard for machine learning interoperability",
                    "fork": false,
                    "url": "https://api.github.com/repos/onnx/onnx",
                    "forks_url": "https://api.github.com/repos/onnx/onnx/forks",
                    "keys_url": "https://api.github.com/repos/onnx/onnx/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/onnx/onnx/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/onnx/onnx/teams",
                    "hooks_url": "https://api.github.com/repos/onnx/onnx/hooks",
                    "issue_events_url": "https://api.github.com/repos/onnx/onnx/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/onnx/onnx/events",
                    "assignees_url": "https://api.github.com/repos/onnx/onnx/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/onnx/onnx/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/onnx/onnx/tags",
                    "blobs_url": "https://api.github.com/repos/onnx/onnx/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/onnx/onnx/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/onnx/onnx/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/onnx/onnx/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/onnx/onnx/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/onnx/onnx/languages",
                    "stargazers_url": "https://api.github.com/repos/onnx/onnx/stargazers",
                    "contributors_url": "https://api.github.com/repos/onnx/onnx/contributors",
                    "subscribers_url": "https://api.github.com/repos/onnx/onnx/subscribers",
                    "subscription_url": "https://api.github.com/repos/onnx/onnx/subscription",
                    "commits_url": "https://api.github.com/repos/onnx/onnx/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/onnx/onnx/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/onnx/onnx/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/onnx/onnx/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/onnx/onnx/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/onnx/onnx/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/onnx/onnx/merges",
                    "archive_url": "https://api.github.com/repos/onnx/onnx/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/onnx/onnx/downloads",
                    "issues_url": "https://api.github.com/repos/onnx/onnx/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/onnx/onnx/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/onnx/onnx/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/onnx/onnx/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/onnx/onnx/labels{/name}",
                    "releases_url": "https://api.github.com/repos/onnx/onnx/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/onnx/onnx/deployments",
                    "created_at": "2017-09-07T04:53:45Z",
                    "updated_at": "2022-12-20T08:49:46Z",
                    "pushed_at": "2022-12-20T17:45:57Z",
                    "git_url": "git://github.com/onnx/onnx.git",
                    "ssh_url": "git@github.com:onnx/onnx.git",
                    "clone_url": "https://github.com/onnx/onnx.git",
                    "svn_url": "https://github.com/onnx/onnx",
                    "homepage": "https://onnx.ai/",
                    "size": 25594,
                    "stargazers_count": 13832,
                    "watchers_count": 13832,
                    "language": "Python",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 3237,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 330,
                    "license": {
                        "key": "apache-2.0",
                        "name": "Apache License 2.0",
                        "spdx_id": "Apache-2.0",
                        "url": "https://api.github.com/licenses/apache-2.0",
                        "node_id": "MDc6TGljZW5zZTI="
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "deep-learning",
                        "deep-neural-networks",
                        "dnn",
                        "keras",
                        "machine-learning",
                        "ml",
                        "mxnet",
                        "neural-network",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 3237,
                    "open_issues": 330,
                    "watchers": 13832,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": false,
                        "push": false,
                        "triage": false,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/onnx/onnx/pulls/3429",
                    "html_url": "https://github.com/onnx/onnx/pull/3429",
                    "diff_url": "https://github.com/onnx/onnx/pull/3429.diff",
                    "patch_url": "https://github.com/onnx/onnx/pull/3429.patch",
                    "merged_at": "2021-04-30T22:06:56Z"
                },
                "body": "**Description**:\r\n- See issue [3428](https://github.com/onnx/onnx/issues/3428) for details, but in short...\r\n- Fix `test_roialign` baseline results to align pixel sample to centers. The correct equation is:<br/>`input.x = (output.x + 0.5) * computedOutputToInputScale + scaledRoi.x1 - 0.5`, not<br/>`input.x = (output.x + 0.5) * computedOutputToInputScale + scaledRoi.x1 - 0.0`.\r\n- Add an identity window test case where output should exactly equal the input window.\r\n\r\n**Motivation and Context**\r\n- _Why is this change required? What problem does it solve?_ Fixes tolerance issues in failing test (ONNX Runtime DirectML EP). Fixes bug that has been addressed in other frameworks/implementations (Detectron [(1)](https://github.com/facebookresearch/detectron2/blob/master/detectron2/layers/roi_align.py#L24) [(2)](https://github.com/facebookresearch/detectron2/blob/master/tests/layers/test_roi_align.py#L35) [(3)](https://detectron2.readthedocs.io/en/latest/notes/compatibility.html#compatibility-with-detectron-and-maskrcnn-benchmark), Caffe/PyTorch [(1)](https://pytorch.org/vision/0.8/ops.html#torchvision.ops.roi_align) [(2)](https://github.com/pytorch/pytorch/pull/23706), mxnet [(1)](https://github.com/apache/incubator-mxnet/pull/16619)).\r\n- _If it fixes an open issue, please link to the issue here._ https://github.com/onnx/onnx/issues/3428",
                "reactions": {
                    "url": "https://api.github.com/repos/onnx/onnx/issues/3429/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/onnx/onnx/issues/3429/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-16T08:57:57Z",
        "updated_at": "2021-04-16T08:57:57Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354/events",
                "html_url": "https://github.com/microsoft/onnxruntime/pull/7354",
                "id": 859616912,
                "node_id": "MDExOlB1bGxSZXF1ZXN0NjE2NjY2Mzcz",
                "number": 7354,
                "title": "Fix RoiAlign CPU EP issues",
                "user": {
                    "login": "fdwr",
                    "id": 1809166,
                    "node_id": "MDQ6VXNlcjE4MDkxNjY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/fdwr",
                    "html_url": "https://github.com/fdwr",
                    "followers_url": "https://api.github.com/users/fdwr/followers",
                    "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
                    "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
                    "organizations_url": "https://api.github.com/users/fdwr/orgs",
                    "repos_url": "https://api.github.com/users/fdwr/repos",
                    "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/fdwr/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2021-04-16T08:57:57Z",
                "updated_at": "2022-11-03T06:27:17Z",
                "closed_at": null,
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/pulls/7354",
                    "html_url": "https://github.com/microsoft/onnxruntime/pull/7354",
                    "diff_url": "https://github.com/microsoft/onnxruntime/pull/7354.diff",
                    "patch_url": "https://github.com/microsoft/onnxruntime/pull/7354.patch",
                    "merged_at": null
                },
                "body": "**Description**:\r\n(1) max mode should take the *entire* bilinear sample, not a fragment of it. This line should be `output value = max(sum of all weighted values, previous maximum)`, not `output value = max(max(max(max(value1, value2), value3) value4), previous maximum)`.\r\n(2) 0 size regions are valid and should be treated as sampled points, not forced to 1. This leads to test failures when sampling tiny points or slivers in our ONNX conformance tests. `bin_size_w` and `bin_size_h` are only multiplied anyway, not divided, and so an attempt to prevent division by zero (or whatever the original intention) is unnecessary.\r\n(3) <i>The ONNX compat attribute was already added in https://github.com/onnx/onnx/pull/3625</i> <s>input pixel alignment is 0.5 off - the correct equation is `(x + 0.5) * scale - 0.5`, but the final 0.5 was missed `(x + 0.5) * scale` (see https://arxiv.org/abs/1703.06870).</s> \r\n\r\n**Motivation and Context**\r\n- _Why is this change required? What problem does it solve?_ The DML/WinML ONNX conformance tests fail on CPU for a number of cases.\r\n- _If it fixes an open issue, please link to the issue here._\r\n  - https://github.com/microsoft/onnxruntime/issues/6146\r\n  - related: https://github.com/microsoft/onnxruntime/issues/6921\r\n  - related: https://github.com/onnx/onnx/issues/3428.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7354/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "actor": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-09T03:13:44Z",
        "updated_at": "2022-07-09T03:13:44Z",
        "source": {
            "type": "issue",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136",
                "repository_url": "https://api.github.com/repos/microsoft/onnxruntime",
                "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136/comments",
                "events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136/events",
                "html_url": "https://github.com/microsoft/onnxruntime/pull/12136",
                "id": 1299556814,
                "node_id": "PR_kwDOCVq1mM47Issk",
                "number": 12136,
                "title": "RoiAlign CPU EP add warning for max mode with samples != 1",
                "user": {
                    "login": "fdwr",
                    "id": 1809166,
                    "node_id": "MDQ6VXNlcjE4MDkxNjY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/fdwr",
                    "html_url": "https://github.com/fdwr",
                    "followers_url": "https://api.github.com/users/fdwr/followers",
                    "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
                    "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
                    "organizations_url": "https://api.github.com/users/fdwr/orgs",
                    "repos_url": "https://api.github.com/users/fdwr/repos",
                    "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/fdwr/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2022-07-09T03:11:50Z",
                "updated_at": "2022-07-12T00:44:43Z",
                "closed_at": "2022-07-12T00:44:42Z",
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "repository": {
                    "id": 156939672,
                    "node_id": "MDEwOlJlcG9zaXRvcnkxNTY5Mzk2NzI=",
                    "name": "onnxruntime",
                    "full_name": "microsoft/onnxruntime",
                    "private": false,
                    "owner": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "html_url": "https://github.com/microsoft/onnxruntime",
                    "description": "ONNX Runtime: cross-platform, high performance ML inferencing and training accelerator",
                    "fork": false,
                    "url": "https://api.github.com/repos/microsoft/onnxruntime",
                    "forks_url": "https://api.github.com/repos/microsoft/onnxruntime/forks",
                    "keys_url": "https://api.github.com/repos/microsoft/onnxruntime/keys{/key_id}",
                    "collaborators_url": "https://api.github.com/repos/microsoft/onnxruntime/collaborators{/collaborator}",
                    "teams_url": "https://api.github.com/repos/microsoft/onnxruntime/teams",
                    "hooks_url": "https://api.github.com/repos/microsoft/onnxruntime/hooks",
                    "issue_events_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events{/number}",
                    "events_url": "https://api.github.com/repos/microsoft/onnxruntime/events",
                    "assignees_url": "https://api.github.com/repos/microsoft/onnxruntime/assignees{/user}",
                    "branches_url": "https://api.github.com/repos/microsoft/onnxruntime/branches{/branch}",
                    "tags_url": "https://api.github.com/repos/microsoft/onnxruntime/tags",
                    "blobs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/blobs{/sha}",
                    "git_tags_url": "https://api.github.com/repos/microsoft/onnxruntime/git/tags{/sha}",
                    "git_refs_url": "https://api.github.com/repos/microsoft/onnxruntime/git/refs{/sha}",
                    "trees_url": "https://api.github.com/repos/microsoft/onnxruntime/git/trees{/sha}",
                    "statuses_url": "https://api.github.com/repos/microsoft/onnxruntime/statuses/{sha}",
                    "languages_url": "https://api.github.com/repos/microsoft/onnxruntime/languages",
                    "stargazers_url": "https://api.github.com/repos/microsoft/onnxruntime/stargazers",
                    "contributors_url": "https://api.github.com/repos/microsoft/onnxruntime/contributors",
                    "subscribers_url": "https://api.github.com/repos/microsoft/onnxruntime/subscribers",
                    "subscription_url": "https://api.github.com/repos/microsoft/onnxruntime/subscription",
                    "commits_url": "https://api.github.com/repos/microsoft/onnxruntime/commits{/sha}",
                    "git_commits_url": "https://api.github.com/repos/microsoft/onnxruntime/git/commits{/sha}",
                    "comments_url": "https://api.github.com/repos/microsoft/onnxruntime/comments{/number}",
                    "issue_comment_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments{/number}",
                    "contents_url": "https://api.github.com/repos/microsoft/onnxruntime/contents/{+path}",
                    "compare_url": "https://api.github.com/repos/microsoft/onnxruntime/compare/{base}...{head}",
                    "merges_url": "https://api.github.com/repos/microsoft/onnxruntime/merges",
                    "archive_url": "https://api.github.com/repos/microsoft/onnxruntime/{archive_format}{/ref}",
                    "downloads_url": "https://api.github.com/repos/microsoft/onnxruntime/downloads",
                    "issues_url": "https://api.github.com/repos/microsoft/onnxruntime/issues{/number}",
                    "pulls_url": "https://api.github.com/repos/microsoft/onnxruntime/pulls{/number}",
                    "milestones_url": "https://api.github.com/repos/microsoft/onnxruntime/milestones{/number}",
                    "notifications_url": "https://api.github.com/repos/microsoft/onnxruntime/notifications{?since,all,participating}",
                    "labels_url": "https://api.github.com/repos/microsoft/onnxruntime/labels{/name}",
                    "releases_url": "https://api.github.com/repos/microsoft/onnxruntime/releases{/id}",
                    "deployments_url": "https://api.github.com/repos/microsoft/onnxruntime/deployments",
                    "created_at": "2018-11-10T02:22:53Z",
                    "updated_at": "2022-12-20T19:02:34Z",
                    "pushed_at": "2022-12-20T19:26:57Z",
                    "git_url": "git://github.com/microsoft/onnxruntime.git",
                    "ssh_url": "git@github.com:microsoft/onnxruntime.git",
                    "clone_url": "https://github.com/microsoft/onnxruntime.git",
                    "svn_url": "https://github.com/microsoft/onnxruntime",
                    "homepage": "https://www.onnxruntime.ai",
                    "size": 1018648,
                    "stargazers_count": 7949,
                    "watchers_count": 7949,
                    "language": "C++",
                    "has_issues": true,
                    "has_projects": true,
                    "has_downloads": true,
                    "has_wiki": true,
                    "has_pages": true,
                    "has_discussions": true,
                    "forks_count": 1862,
                    "mirror_url": null,
                    "archived": false,
                    "disabled": false,
                    "open_issues_count": 1453,
                    "license": {
                        "key": "mit",
                        "name": "MIT License",
                        "spdx_id": "MIT",
                        "url": "https://api.github.com/licenses/mit",
                        "node_id": "MDc6TGljZW5zZTEz"
                    },
                    "allow_forking": true,
                    "is_template": false,
                    "web_commit_signoff_required": false,
                    "topics": [
                        "ai-framework",
                        "deep-learning",
                        "hacktoberfest",
                        "hardware-acceleration",
                        "machine-learning",
                        "neural-networks",
                        "onnx",
                        "pytorch",
                        "scikit-learn",
                        "tensorflow"
                    ],
                    "visibility": "public",
                    "forks": 1862,
                    "open_issues": 1453,
                    "watchers": 7949,
                    "default_branch": "main",
                    "permissions": {
                        "admin": false,
                        "maintain": true,
                        "push": true,
                        "triage": true,
                        "pull": true
                    }
                },
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/pulls/12136",
                    "html_url": "https://github.com/microsoft/onnxruntime/pull/12136",
                    "diff_url": "https://github.com/microsoft/onnxruntime/pull/12136.diff",
                    "patch_url": "https://github.com/microsoft/onnxruntime/pull/12136.patch",
                    "merged_at": "2022-07-12T00:44:42Z"
                },
                "body": "**Description**: The CPU EP implementation of RoiAlign is incorrect per [ONNX](https://github.com/onnx/onnx/blob/main/docs/Operators.md#RoiAlign) for `mode` == `max` when the sample count is > 1 either when `sampling_ratio` is explicitly > 1 or when the `sampling_ratio` == 0 and is dynamically computed > 1. See https://github.com/microsoft/onnxruntime/issues/6146. Emit a warning for compatibility in ORT 1.12, as it will be fixed in ORT 1.13 via https://github.com/microsoft/onnxruntime/pull/7354.\r\n\r\n**Motivation and Context**\r\n- *Why is this change required? What problem does it solve?* \r\nA warning should be emitted so people have some time to update their models, such as `mask_rcnn_R_50_FPN_1x.onnx` which shows small differences in model output (this change mimic's Jacky's https://github.com/microsoft/onnxruntime/pull/11984).\r\n- *If it fixes an open issue, please link to the issue here.*\r\nhttps://github.com/microsoft/onnxruntime/issues/6146\r\nThe actual fix is [PR 7354](https://github.com/microsoft/onnxruntime/pull/7354), which introduces small differences in the output.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12136/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "event": "cross-referenced"
    },
    {
        "id": 7177452300,
        "node_id": "UNLE_lADOCVq1mM4xFk8EzwAAAAGrzzsM",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/7177452300",
        "actor": {
            "login": "sophies927",
            "id": 107952697,
            "node_id": "U_kgDOBm86OQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/107952697?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sophies927",
            "html_url": "https://github.com/sophies927",
            "followers_url": "https://api.github.com/users/sophies927/followers",
            "following_url": "https://api.github.com/users/sophies927/following{/other_user}",
            "gists_url": "https://api.github.com/users/sophies927/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sophies927/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sophies927/subscriptions",
            "organizations_url": "https://api.github.com/users/sophies927/orgs",
            "repos_url": "https://api.github.com/users/sophies927/repos",
            "events_url": "https://api.github.com/users/sophies927/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sophies927/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "unlabeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2022-08-12T08:37:05Z",
        "label": {
            "name": "component:operator",
            "color": "303a93"
        },
        "performed_via_github_app": null
    }
]