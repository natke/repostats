[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/983883112",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9892#issuecomment-983883112",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9892",
        "id": 983883112,
        "node_id": "IC_kwDOCVq1mM46pN1o",
        "user": {
            "login": "askhade",
            "id": 6475296,
            "node_id": "MDQ6VXNlcjY0NzUyOTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6475296?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/askhade",
            "html_url": "https://github.com/askhade",
            "followers_url": "https://api.github.com/users/askhade/followers",
            "following_url": "https://api.github.com/users/askhade/following{/other_user}",
            "gists_url": "https://api.github.com/users/askhade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/askhade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/askhade/subscriptions",
            "organizations_url": "https://api.github.com/users/askhade/orgs",
            "repos_url": "https://api.github.com/users/askhade/repos",
            "events_url": "https://api.github.com/users/askhade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/askhade/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-01T17:46:00Z",
        "updated_at": "2021-12-01T17:46:00Z",
        "author_association": "MEMBER",
        "body": "There could be 2 reasons - \r\n1. GPU does not have FP16 implementation so the execution fallbacks to CPU: To see the placement decided by ORT, turn on verbose logging and look at the console output. \r\n2. There is no FP16 implementation in CPU either so we add Cast nodes to go from FP16 to FP32. Simply enable model serialization to see whether cast nodes were added: https://onnxruntime.ai/docs/performance/graph-optimizations.html#python-api-example\r\n```\r\n# To enable model serialization after graph optimization set this\r\nsess_options.optimized_model_filepath = \"<model_output_path\\optimized_model.onnx>\"\r\n```\r\n\r\nYou can get more insights from profiling report as well. This is how you can enable profiling: https://onnxruntime.ai/docs/performance/tune-performance.html#profiling-and-performance-report\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/983883112/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "askhade",
            "id": 6475296,
            "node_id": "MDQ6VXNlcjY0NzUyOTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6475296?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/askhade",
            "html_url": "https://github.com/askhade",
            "followers_url": "https://api.github.com/users/askhade/followers",
            "following_url": "https://api.github.com/users/askhade/following{/other_user}",
            "gists_url": "https://api.github.com/users/askhade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/askhade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/askhade/subscriptions",
            "organizations_url": "https://api.github.com/users/askhade/orgs",
            "repos_url": "https://api.github.com/users/askhade/repos",
            "events_url": "https://api.github.com/users/askhade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/askhade/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5700764753,
        "node_id": "LE_lADOCVq1mM4_qYSdzwAAAAFTysRR",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5700764753",
        "actor": {
            "login": "askhade",
            "id": 6475296,
            "node_id": "MDQ6VXNlcjY0NzUyOTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6475296?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/askhade",
            "html_url": "https://github.com/askhade",
            "followers_url": "https://api.github.com/users/askhade/followers",
            "following_url": "https://api.github.com/users/askhade/following{/other_user}",
            "gists_url": "https://api.github.com/users/askhade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/askhade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/askhade/subscriptions",
            "organizations_url": "https://api.github.com/users/askhade/orgs",
            "repos_url": "https://api.github.com/users/askhade/repos",
            "events_url": "https://api.github.com/users/askhade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/askhade/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "labeled",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-01T17:46:16Z",
        "label": {
            "name": "type:performance",
            "color": "a2eeef"
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/985470860",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9892#issuecomment-985470860",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9892",
        "id": 985470860,
        "node_id": "IC_kwDOCVq1mM46vReM",
        "user": {
            "login": "MasterGG",
            "id": 13192737,
            "node_id": "MDQ6VXNlcjEzMTkyNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13192737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MasterGG",
            "html_url": "https://github.com/MasterGG",
            "followers_url": "https://api.github.com/users/MasterGG/followers",
            "following_url": "https://api.github.com/users/MasterGG/following{/other_user}",
            "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions",
            "organizations_url": "https://api.github.com/users/MasterGG/orgs",
            "repos_url": "https://api.github.com/users/MasterGG/repos",
            "events_url": "https://api.github.com/users/MasterGG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MasterGG/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-03T12:13:48Z",
        "updated_at": "2021-12-03T12:41:05Z",
        "author_association": "NONE",
        "body": "Thanks  @askhade , when i set batch size larger than 128 in V100, FP16 is faster than F32.\r\nBut i am doubt that whether it is run in GPU or not,\r\ni set :\r\n`sess = ort.InferenceSession(model_path, providers=[\"CUDAExecutionProvider\"]) `\r\n`print('EXECUTORS :', sess.get_providers())`\r\n`print('device :', ort.get_device())`\r\n\r\ngot logs : \r\nmy provider: ['CPUExecutionProvider']\r\nmy device: GPU\r\nIt shows that ort.get_device() is GPU, but then the_session.get_providers() is only cpu.provider and never GPU provider.\r\ndoes it mean that the model inference is not in GPU mode?  how can i set it in GPU mode?\r\n\r\n\r\nthis is my GPU info:\r\n$nvidia-smi\r\nFri Dec  3 20:12:55 2021       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 418.67       Driver Version: 418.67       CUDA Version: 10.1     |\r\n\r\n$nvcc -V\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2018 NVIDIA Corporation\r\nBuilt on Sat_Aug_25_21:08:01_CDT_2018\r\nCuda compilation tools, release 10.0, V10.0.130",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/985470860/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "MasterGG",
            "id": 13192737,
            "node_id": "MDQ6VXNlcjEzMTkyNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13192737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MasterGG",
            "html_url": "https://github.com/MasterGG",
            "followers_url": "https://api.github.com/users/MasterGG/followers",
            "following_url": "https://api.github.com/users/MasterGG/following{/other_user}",
            "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions",
            "organizations_url": "https://api.github.com/users/MasterGG/orgs",
            "repos_url": "https://api.github.com/users/MasterGG/repos",
            "events_url": "https://api.github.com/users/MasterGG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MasterGG/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5711760063,
        "node_id": "MEE_lADOCVq1mM4_qYSdzwAAAAFUcoq_",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5711760063",
        "actor": {
            "login": "askhade",
            "id": 6475296,
            "node_id": "MDQ6VXNlcjY0NzUyOTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6475296?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/askhade",
            "html_url": "https://github.com/askhade",
            "followers_url": "https://api.github.com/users/askhade/followers",
            "following_url": "https://api.github.com/users/askhade/following{/other_user}",
            "gists_url": "https://api.github.com/users/askhade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/askhade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/askhade/subscriptions",
            "organizations_url": "https://api.github.com/users/askhade/orgs",
            "repos_url": "https://api.github.com/users/askhade/repos",
            "events_url": "https://api.github.com/users/askhade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/askhade/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "mentioned",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-03T12:13:49Z",
        "performed_via_github_app": null
    },
    {
        "id": 5711760070,
        "node_id": "SE_lADOCVq1mM4_qYSdzwAAAAFUcorG",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5711760070",
        "actor": {
            "login": "askhade",
            "id": 6475296,
            "node_id": "MDQ6VXNlcjY0NzUyOTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6475296?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/askhade",
            "html_url": "https://github.com/askhade",
            "followers_url": "https://api.github.com/users/askhade/followers",
            "following_url": "https://api.github.com/users/askhade/following{/other_user}",
            "gists_url": "https://api.github.com/users/askhade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/askhade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/askhade/subscriptions",
            "organizations_url": "https://api.github.com/users/askhade/orgs",
            "repos_url": "https://api.github.com/users/askhade/repos",
            "events_url": "https://api.github.com/users/askhade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/askhade/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "subscribed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-03T12:13:49Z",
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/986464097",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9892#issuecomment-986464097",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9892",
        "id": 986464097,
        "node_id": "IC_kwDOCVq1mM46zD9h",
        "user": {
            "login": "MasterGG",
            "id": 13192737,
            "node_id": "MDQ6VXNlcjEzMTkyNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13192737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MasterGG",
            "html_url": "https://github.com/MasterGG",
            "followers_url": "https://api.github.com/users/MasterGG/followers",
            "following_url": "https://api.github.com/users/MasterGG/following{/other_user}",
            "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions",
            "organizations_url": "https://api.github.com/users/MasterGG/orgs",
            "repos_url": "https://api.github.com/users/MasterGG/repos",
            "events_url": "https://api.github.com/users/MasterGG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MasterGG/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-06T06:00:35Z",
        "updated_at": "2021-12-06T06:00:35Z",
        "author_association": "NONE",
        "body": "thank you, problems solved. I changed CUDA version to 11.4.2 and cudnn 8.2.4, print('EXECUTORS :', sess.get_providers()) got ['CUDAExecutionProvider', 'CPUExecutionProvider'] , and in such env when set batch size bigger than 512 ,FP16 is faster than F32.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/986464097/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null,
        "event": "commented",
        "actor": {
            "login": "MasterGG",
            "id": 13192737,
            "node_id": "MDQ6VXNlcjEzMTkyNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13192737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MasterGG",
            "html_url": "https://github.com/MasterGG",
            "followers_url": "https://api.github.com/users/MasterGG/followers",
            "following_url": "https://api.github.com/users/MasterGG/following{/other_user}",
            "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions",
            "organizations_url": "https://api.github.com/users/MasterGG/orgs",
            "repos_url": "https://api.github.com/users/MasterGG/repos",
            "events_url": "https://api.github.com/users/MasterGG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MasterGG/received_events",
            "type": "User",
            "site_admin": false
        }
    },
    {
        "id": 5718284437,
        "node_id": "CE_lADOCVq1mM4_qYSdzwAAAAFU1hiV",
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/events/5718284437",
        "actor": {
            "login": "MasterGG",
            "id": 13192737,
            "node_id": "MDQ6VXNlcjEzMTkyNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/13192737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MasterGG",
            "html_url": "https://github.com/MasterGG",
            "followers_url": "https://api.github.com/users/MasterGG/followers",
            "following_url": "https://api.github.com/users/MasterGG/following{/other_user}",
            "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions",
            "organizations_url": "https://api.github.com/users/MasterGG/orgs",
            "repos_url": "https://api.github.com/users/MasterGG/repos",
            "events_url": "https://api.github.com/users/MasterGG/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MasterGG/received_events",
            "type": "User",
            "site_admin": false
        },
        "event": "closed",
        "commit_id": null,
        "commit_url": null,
        "created_at": "2021-12-06T06:00:41Z",
        "state_reason": null,
        "performed_via_github_app": null
    }
]