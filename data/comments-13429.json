[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292891636",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1292891636",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1292891636,
        "node_id": "IC_kwDOCVq1mM5ND_X0",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T02:39:10Z",
        "updated_at": "2022-10-27T02:39:10Z",
        "author_association": "MEMBER",
        "body": "Dmitri's initial investigation indicates a packaging problem rather than a C# binding or DirectML issue. Evidently when building the C# program via Visual Studio, the build step is not unpacking the DLL from the Nuget package (and since the program is not finding DirectML.dll in the application directory, it falls back to the older system version, which didn't support those parameters). Manually copying the DirectML.dll from inside the Nuget package alongside the application made it work again, confirming that was the issue. Stay tuned...",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292891636/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292989202",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1292989202",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1292989202,
        "node_id": "IC_kwDOCVq1mM5NEXMS",
        "user": {
            "login": "yqzhishen",
            "id": 70186231,
            "node_id": "MDQ6VXNlcjcwMTg2MjMx",
            "avatar_url": "https://avatars.githubusercontent.com/u/70186231?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yqzhishen",
            "html_url": "https://github.com/yqzhishen",
            "followers_url": "https://api.github.com/users/yqzhishen/followers",
            "following_url": "https://api.github.com/users/yqzhishen/following{/other_user}",
            "gists_url": "https://api.github.com/users/yqzhishen/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yqzhishen/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yqzhishen/subscriptions",
            "organizations_url": "https://api.github.com/users/yqzhishen/orgs",
            "repos_url": "https://api.github.com/users/yqzhishen/repos",
            "events_url": "https://api.github.com/users/yqzhishen/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yqzhishen/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T04:45:05Z",
        "updated_at": "2022-10-27T04:45:05Z",
        "author_association": "NONE",
        "body": "> Dmitri's initial investigation indicates a packaging problem rather than a C# binding or DirectML issue. Evidently when building the C# program via Visual Studio, the build step is not unpacking the DLL from the Nuget package (and since the program is not finding DirectML.dll in the application directory, it falls back to the older system version, which didn't support those parameters). Manually copying the DirectML.dll from inside the Nuget package alongside the application made it work again, confirming that was the issue. Stay tuned...\r\n\r\nThanks for the explanations, but manually copying DirectML.dll does not seem to work on my machine. By the way, I've got no idea whether I copied the right DLLs to the application directory. Here is the program I built myself for testing this issue, which was targeted to .net framework 4.8:\r\n[Onnx.Tests.DirectML.zip](https://github.com/microsoft/onnxruntime/files/9875811/Onnx.Tests.DirectML.zip)\r\nRun with `Onnx.Tests.DirectML.exe <device_id>` to run the code above to reproduce the error on the specific DirectML device.\r\nI hope this can help you debugging.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1292989202/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293836359",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1293836359",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1293836359,
        "node_id": "IC_kwDOCVq1mM5NHmBH",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T17:18:07Z",
        "updated_at": "2022-10-27T17:18:07Z",
        "author_association": "MEMBER",
        "body": "Stay tuned for specific recommendations.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293836359/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293896464",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1293896464",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1293896464,
        "node_id": "IC_kwDOCVq1mM5NH0sQ",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T18:15:36Z",
        "updated_at": "2022-10-27T18:15:36Z",
        "author_association": "MEMBER",
        "body": "Long story short. There is a bug with Microsoft.AI.DirectML package. In the projects that are targeted to `Any CPU` the direct ML DLLs are not copied alongside with the binary you are building.\r\n\r\nInstall and restore 3 packages see the picture below.\r\n\r\n![image](https://user-images.githubusercontent.com/11303988/198365730-e10f161e-3c29-48a2-b2b0-940d516b749e.png)\r\n\r\nThe workaround currently is to target a specific arch.  And those DirectML appears automatically where they should be. Otherwise, you just extract those DLLs manually.\r\n\r\nI am using VS 2022.  Go to your binary `Project properties/Build` and select `Platform Target` other than Any CPU. I selected x64. In that case the `DirectML` dlls\r\n\r\n![image](https://user-images.githubusercontent.com/11303988/198366595-8642dedb-4c97-4810-8782-e39ad072191f.png)\r\n\r\nYour original program that you gave when reporting the issue runs as intended.\r\n\r\n`DirectML` now loads from the directory where your binary resides. The rules where the system looks for dependencies can be complicated, but the directory where the binary resides is looked up first.\r\n\r\n![image](https://user-images.githubusercontent.com/11303988/198367288-cc48c386-e20b-4a83-a997-1b909f203554.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1293896464/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294031507",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1294031507",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1294031507,
        "node_id": "IC_kwDOCVq1mM5NIVqT",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T20:31:48Z",
        "updated_at": "2022-10-27T20:31:48Z",
        "author_association": "MEMBER",
        "body": "A correction is in order. `Microsoft.AI.DirectML` is a native package, thus `Any CPU` managed configuration does not apply. However, the native `Platform Target` has to be set. `DirectML` is consumed by `onnxruntime`, which is an x64 binary in this example, so the `Platform Target` must set as appropriate.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294031507/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294045157",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1294045157",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1294045157,
        "node_id": "IC_kwDOCVq1mM5NIY_l",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-27T20:46:57Z",
        "updated_at": "2022-10-27T21:02:48Z",
        "author_association": "MEMBER",
        "body": "The fact that DirectML.dll ships as a system component makes it too easy for applications to load the wrong library at runtime.  Therefore, one must make sure that the correct library is used during development and runtime.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294045157/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294443547",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13429#issuecomment-1294443547",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13429",
        "id": 1294443547,
        "node_id": "IC_kwDOCVq1mM5NJ6Qb",
        "user": {
            "login": "yqzhishen",
            "id": 70186231,
            "node_id": "MDQ6VXNlcjcwMTg2MjMx",
            "avatar_url": "https://avatars.githubusercontent.com/u/70186231?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yqzhishen",
            "html_url": "https://github.com/yqzhishen",
            "followers_url": "https://api.github.com/users/yqzhishen/followers",
            "following_url": "https://api.github.com/users/yqzhishen/following{/other_user}",
            "gists_url": "https://api.github.com/users/yqzhishen/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yqzhishen/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yqzhishen/subscriptions",
            "organizations_url": "https://api.github.com/users/yqzhishen/orgs",
            "repos_url": "https://api.github.com/users/yqzhishen/repos",
            "events_url": "https://api.github.com/users/yqzhishen/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yqzhishen/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-28T04:35:56Z",
        "updated_at": "2022-10-28T04:35:56Z",
        "author_association": "NONE",
        "body": "> A correction is in order. `Microsoft.AI.DirectML` is a native package, thus `Any CPU` managed configuration does not apply. However, the native `Platform Target` has to be set. `DirectML` is consumed by `onnxruntime`, which is an x64 binary in this example, so the `Platform Target` must set as appropriate.\r\n\r\nSomething really wired is that when I use `NUnit` to run the program in a unit test, it fails even if I already selected the x64 target platform. However, when I run it directly in a console application or run it in a class library referenced by a console application, your solution works just fine. Maybe there is something to do with NUnit which I have not figured out. Anyway, it will not continue to bother me in my future development. Thanks a lot for your help.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1294443547/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]