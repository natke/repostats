[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1089036733",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1089036733",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1089036733,
        "node_id": "IC_kwDOCVq1mM5A6WG9",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-05T16:57:13Z",
        "updated_at": "2022-04-05T16:57:13Z",
        "author_association": "MEMBER",
        "body": "Can you attach the model and the repro code? Also, try disabling memory pattern; that should definitely help. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1089036733/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1089710412",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1089710412",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1089710412,
        "node_id": "IC_kwDOCVq1mM5A86lM",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-06T02:53:51Z",
        "updated_at": "2022-04-06T02:53:51Z",
        "author_association": "MEMBER",
        "body": "The setting is called enable_mem_pattern in SessionOptions. Set that to false. \r\n\r\ne.g. for python https://onnxruntime.ai/docs/api/python/api_summary.html#onnxruntime.SessionOptions.enable_mem_pattern",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1089710412/reactions",
            "total_count": 4,
            "+1": 1,
            "-1": 1,
            "laugh": 0,
            "hooray": 2,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090052967",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1090052967",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1090052967,
        "node_id": "IC_kwDOCVq1mM5A-ONn",
        "user": {
            "login": "shameem198",
            "id": 45461737,
            "node_id": "MDQ6VXNlcjQ1NDYxNzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/45461737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shameem198",
            "html_url": "https://github.com/shameem198",
            "followers_url": "https://api.github.com/users/shameem198/followers",
            "following_url": "https://api.github.com/users/shameem198/following{/other_user}",
            "gists_url": "https://api.github.com/users/shameem198/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shameem198/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shameem198/subscriptions",
            "organizations_url": "https://api.github.com/users/shameem198/orgs",
            "repos_url": "https://api.github.com/users/shameem198/repos",
            "events_url": "https://api.github.com/users/shameem198/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shameem198/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-06T09:25:29Z",
        "updated_at": "2022-04-06T09:31:30Z",
        "author_association": "NONE",
        "body": "@skottmckay thanks, I also disabled **cpu_mem_arena**, it helped to keep memory and cpu consumption stable. But there is a slight increment in inference time. @skottmckay is there any trade off in inference time vs above parameters ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090052967/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090114514",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1090114514",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1090114514,
        "node_id": "IC_kwDOCVq1mM5A-dPS",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-06T10:34:28Z",
        "updated_at": "2022-04-06T10:34:28Z",
        "author_association": "MEMBER",
        "body": "Yes. If the memory pattern is enabled we use offsets into one big block of memory for the tensors required during execution. If it's disabled we have to do allocations instead. Those allocations are via an arena, but it's still more expensive than using an offset into pre-allocated memory. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1090114514/reactions",
            "total_count": 3,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 1,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1607926479",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1607926479",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1607926479,
        "node_id": "IC_kwDOCVq1mM5f1wLP",
        "user": {
            "login": "kopyl",
            "id": 17604849,
            "node_id": "MDQ6VXNlcjE3NjA0ODQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/17604849?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kopyl",
            "html_url": "https://github.com/kopyl",
            "followers_url": "https://api.github.com/users/kopyl/followers",
            "following_url": "https://api.github.com/users/kopyl/following{/other_user}",
            "gists_url": "https://api.github.com/users/kopyl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kopyl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kopyl/subscriptions",
            "organizations_url": "https://api.github.com/users/kopyl/orgs",
            "repos_url": "https://api.github.com/users/kopyl/repos",
            "events_url": "https://api.github.com/users/kopyl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kopyl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-26T17:34:36Z",
        "updated_at": "2023-06-26T17:34:36Z",
        "author_association": "NONE",
        "body": "@skottmckay why did you close it? It still not fixed. \r\n\r\nNothing helps. Here is ho my code looks:\r\n\r\n```\r\noptions = onnxruntime.SessionOptions()\r\n        options.enable_mem_pattern = False\r\n        options.enable_cpu_mem_arena = False\r\n        options.enable_mem_reuse = False\r\n        self.session = onnxruntime.InferenceSession(path,\r\n                                                    sess_options=options,\r\n                                                    providers=['CUDAExecutionProvider',\r\n                                                               'CPUExecutionProvider'])\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1607926479/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1607927534",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1607927534",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1607927534,
        "node_id": "IC_kwDOCVq1mM5f1wbu",
        "user": {
            "login": "kopyl",
            "id": 17604849,
            "node_id": "MDQ6VXNlcjE3NjA0ODQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/17604849?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kopyl",
            "html_url": "https://github.com/kopyl",
            "followers_url": "https://api.github.com/users/kopyl/followers",
            "following_url": "https://api.github.com/users/kopyl/following{/other_user}",
            "gists_url": "https://api.github.com/users/kopyl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kopyl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kopyl/subscriptions",
            "organizations_url": "https://api.github.com/users/kopyl/orgs",
            "repos_url": "https://api.github.com/users/kopyl/repos",
            "events_url": "https://api.github.com/users/kopyl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kopyl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-26T17:35:16Z",
        "updated_at": "2023-06-26T17:35:16Z",
        "author_association": "NONE",
        "body": "https://github.com/microsoft/onnxruntime/issues/9313#issuecomment-939679497",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1607927534/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1608557283",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11118#issuecomment-1608557283",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11118",
        "id": 1608557283,
        "node_id": "IC_kwDOCVq1mM5f4KLj",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-27T01:13:08Z",
        "updated_at": "2023-06-27T01:13:08Z",
        "author_association": "MEMBER",
        "body": "@kopyl not quite following given this was the reply from the OP. \r\n\r\n> thanks, I also disabled cpu_mem_arena, it helped to keep memory and cpu consumption stable.\r\n\r\nIf you think there's a new problem please create a new issue with the model and repro including details of how the model is being run and how the inputs/outputs are managed. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1608557283/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]