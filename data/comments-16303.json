[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1585286884",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1585286884",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1585286884,
        "node_id": "IC_kwDOCVq1mM5efY7k",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-09T23:48:02Z",
        "updated_at": "2023-06-09T23:48:02Z",
        "author_association": "MEMBER",
        "body": "Look at `gpu_mem_limit` in the https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#samples:\r\n```\r\nimport onnxruntime as ort\r\n\r\nmodel_path = '<path to model>'\r\n\r\nproviders = [\r\n    ('CUDAExecutionProvider', {\r\n        'device_id': 0,\r\n        'arena_extend_strategy': 'kNextPowerOfTwo',\r\n        'gpu_mem_limit': 2 * 1024 * 1024 * 1024,\r\n        'cudnn_conv_algo_search': 'EXHAUSTIVE',\r\n        'do_copy_in_default_stream': True,\r\n    }),\r\n    'CPUExecutionProvider',\r\n]\r\n\r\nsession = ort.InferenceSession(model_path, providers=providers)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1585286884/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1587076233",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1587076233",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1587076233,
        "node_id": "IC_kwDOCVq1mM5emNyJ",
        "user": {
            "login": "feng-1985",
            "id": 8215563,
            "node_id": "MDQ6VXNlcjgyMTU1NjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8215563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/feng-1985",
            "html_url": "https://github.com/feng-1985",
            "followers_url": "https://api.github.com/users/feng-1985/followers",
            "following_url": "https://api.github.com/users/feng-1985/following{/other_user}",
            "gists_url": "https://api.github.com/users/feng-1985/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/feng-1985/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/feng-1985/subscriptions",
            "organizations_url": "https://api.github.com/users/feng-1985/orgs",
            "repos_url": "https://api.github.com/users/feng-1985/repos",
            "events_url": "https://api.github.com/users/feng-1985/events{/privacy}",
            "received_events_url": "https://api.github.com/users/feng-1985/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-12T10:47:18Z",
        "updated_at": "2023-06-14T06:28:05Z",
        "author_association": "NONE",
        "body": "import onnxruntime as ort\r\nmodel_path = 'model.onnx'\r\nproviders = [\r\n    ('CUDAExecutionProvider', {\r\n        'gpu_mem_limit': 2 * 1024 * 1024 * 1024\r\n    }),\r\n    'CPUExecutionProvider',\r\n]\r\nsession = ort.InferenceSession(model_path, providers=providers)\r\n\r\n---\r\n\r\nraise the error:\r\nTypeError: initialize_session(): incompatible function arguments. The following argument types are supported:\r\n  1. (self: onnxrumtime.capi.onnxruntime_pybind11_state.InferenceSession, arg0: List[str], arg1: List[Dict[str, str]]) -> None\r\n\r\nInvoked with:<onnnxruntime.capi.onnxruntime_pybind11_state.InferenceSession object at 0x7f062e395a70>, [('CUDAExecutionProvider', {'gpu_mem_limit': 2 * 1024 * 1024 * 1024}), 'CPUExecutionProvider'], []",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1587076233/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1589772379",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1589772379",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1589772379,
        "node_id": "IC_kwDOCVq1mM5ewgBb",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-13T17:50:31Z",
        "updated_at": "2023-06-13T17:50:31Z",
        "author_association": "MEMBER",
        "body": "@feng-1985, you need specify a correct model path (like `model_path=\"./model.onnx\"` instead of empty string).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1589772379/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590552490",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1590552490",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1590552490,
        "node_id": "IC_kwDOCVq1mM5ezeeq",
        "user": {
            "login": "feng-1985",
            "id": 8215563,
            "node_id": "MDQ6VXNlcjgyMTU1NjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8215563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/feng-1985",
            "html_url": "https://github.com/feng-1985",
            "followers_url": "https://api.github.com/users/feng-1985/followers",
            "following_url": "https://api.github.com/users/feng-1985/following{/other_user}",
            "gists_url": "https://api.github.com/users/feng-1985/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/feng-1985/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/feng-1985/subscriptions",
            "organizations_url": "https://api.github.com/users/feng-1985/orgs",
            "repos_url": "https://api.github.com/users/feng-1985/repos",
            "events_url": "https://api.github.com/users/feng-1985/events{/privacy}",
            "received_events_url": "https://api.github.com/users/feng-1985/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-14T06:27:29Z",
        "updated_at": "2023-06-14T06:27:29Z",
        "author_association": "NONE",
        "body": "Thanks for response! I have used the true model_path, the previous code just for example.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1590552490/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592060976",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1592060976",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1592060976,
        "node_id": "IC_kwDOCVq1mM5e5Oww",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-14T22:14:41Z",
        "updated_at": "2023-06-14T22:18:17Z",
        "author_association": "MEMBER",
        "body": "#[feng-1985](https://github.com/feng-1985), the example script of gpu_mem_limit works in ORT 1.15. \r\n\r\nI noticed that you are using ORT 1.6. Please follow the example to set cuda_mem_limit:\r\nhttps://github.com/microsoft/onnxruntime/blob/rel-1.6.0/onnxruntime/test/python/onnxruntime_test_python.py#L86-L96\r\n\r\n`sess.set_providers(['CUDAExecutionProvider'], [option])`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592060976/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592071723",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1592071723",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1592071723,
        "node_id": "IC_kwDOCVq1mM5e5RYr",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-14T22:24:40Z",
        "updated_at": "2023-06-14T22:24:40Z",
        "author_association": "MEMBER",
        "body": "If I recall correctly, the memory limit in the CUDA EP config is only for the CUDA memory arena used by the CUDA EP and hence limits ORT's memory allocation based on this value. But it doesn't limit memory allocation in other CUDA EP dependencies - like CuBlas, CuDNN. It is possible that there are memory allocations there that take it past the limit. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592071723/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592443806",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1592443806",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1592443806,
        "node_id": "IC_kwDOCVq1mM5e6sOe",
        "user": {
            "login": "feng-1985",
            "id": 8215563,
            "node_id": "MDQ6VXNlcjgyMTU1NjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8215563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/feng-1985",
            "html_url": "https://github.com/feng-1985",
            "followers_url": "https://api.github.com/users/feng-1985/followers",
            "following_url": "https://api.github.com/users/feng-1985/following{/other_user}",
            "gists_url": "https://api.github.com/users/feng-1985/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/feng-1985/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/feng-1985/subscriptions",
            "organizations_url": "https://api.github.com/users/feng-1985/orgs",
            "repos_url": "https://api.github.com/users/feng-1985/repos",
            "events_url": "https://api.github.com/users/feng-1985/events{/privacy}",
            "received_events_url": "https://api.github.com/users/feng-1985/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-15T06:29:53Z",
        "updated_at": "2023-06-15T06:29:53Z",
        "author_association": "NONE",
        "body": "The relate [issue](https://github.com/microsoft/onnxruntime/issues/16264).  What I want is to reduce the cuda memory. \r\nAs @hariharans29 said, it seems this parameter (cuda_mem_limit) cann't reduce cuda memory.\r\nWhen should i use this parameters ? Is there any reference ?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1592443806/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1595561126",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/16303#issuecomment-1595561126",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/16303",
        "id": 1595561126,
        "node_id": "IC_kwDOCVq1mM5fGlSm",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-17T01:07:51Z",
        "updated_at": "2023-06-17T01:07:51Z",
        "author_association": "MEMBER",
        "body": "ok, then it is by design. Let's track it in that issue instead.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1595561126/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]