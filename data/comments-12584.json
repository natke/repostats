[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1213604487",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1213604487",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1213604487,
        "node_id": "IC_kwDOCVq1mM5IViKH",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-13T00:10:10Z",
        "updated_at": "2022-08-13T00:10:10Z",
        "author_association": "MEMBER",
        "body": "Is this IOBinding feature what you are looking for?\r\nhttps://github.com/microsoft/onnxruntime/blob/0c6037b5abe571fc43a55ef7a9d2f846820fbe5d/docs/python/inference/api_summary.rst#data-on-device",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1213604487/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1213606146",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1213606146",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1213606146,
        "node_id": "IC_kwDOCVq1mM5IVikC",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-13T00:14:26Z",
        "updated_at": "2022-08-13T00:14:26Z",
        "author_association": "NONE",
        "body": "Not exactly.  If there is a tensor that needs to be manipulated before passing to the decoder in each step, that is a trip to CPU and back. There is also the extra overhead of execution planning at each decoder step, which can be avoided if there was a single ONNX file.\r\nPlus having a single ONNX is helpful.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1213606146/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1214208203",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1214208203",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1214208203,
        "node_id": "IC_kwDOCVq1mM5IX1jL",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-13T19:06:55Z",
        "updated_at": "2022-08-13T19:06:55Z",
        "author_association": "MEMBER",
        "body": "Looks like your scenario can be supported with customized beam search: https://github.com/ViswanathB/ORTCustomBeamsearchOpLibrary.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1214208203/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1215397896",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1215397896",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1215397896,
        "node_id": "IC_kwDOCVq1mM5IcYAI",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-15T17:07:52Z",
        "updated_at": "2022-08-15T17:07:52Z",
        "author_association": "NONE",
        "body": "Good one to take a look at. Still I do not know why I could not use `com.microsoft.BeamSearch` itself. It looks like it has all the pieces. I do want to use it for text generation. It just needs more documentation and examples I think ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1215397896/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1216201276",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1216201276",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1216201276,
        "node_id": "IC_kwDOCVq1mM5IfcI8",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-16T06:29:04Z",
        "updated_at": "2022-08-16T06:30:19Z",
        "author_association": "MEMBER",
        "body": "@dashesy, as long as your encoder and decoder has same inputs and outputs as T5 (It is fine that the modeling logic is different), you can use com.microsoft.BeamSearch. You can follow [T5 onnx conversion script](https://github.com/microsoft/onnxruntime/blob/main/onnxruntime/python/tools/transformers/models/t5/convert_to_onnx.py) to export your model to two onnx models. The input and output names and shapes shall exactly match those in t5 onnx models.\r\n\r\nThen use convert_generation.py and specify those two onnx models as input: https://github.com/microsoft/onnxruntime/blob/eb6aa861cfa7295ee9f7145db44aaec708e8ce1c/onnxruntime/python/tools/transformers/convert_generation.py#L117-L131. May need comment or change some test code in the script.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1216201276/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1217008407",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12584#issuecomment-1217008407",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12584",
        "id": 1217008407,
        "node_id": "IC_kwDOCVq1mM5IihMX",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-16T18:39:02Z",
        "updated_at": "2022-08-16T18:39:02Z",
        "author_association": "NONE",
        "body": "VL models are not exactly the same. But I think they can be adapted to use this. I will look into it.\r\n\r\nEncoder input: \"image\"\r\nEncoder output: \"hidden_states\"\r\n\r\nDecoder input: \"hidden_states\", \"input_ids\" (\"input_mask\" optional because I just create the mask based on \"input_ids\" inside ONNX dynamically)\r\nDecoder output: \"logits\"\r\n\r\nWe call the encoder just once, get \"hidden_states\" (usually no need to encode a text as well depending on task)\r\nIn each step we append the next token (e.g. topk from \"logits\") to \"input_ids\" and pass to decoder again (beam search)\r\n\r\nSo in a way, this is simpler than T5 model. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1217008407/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]