[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344792863",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13920#issuecomment-1344792863",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13920",
        "id": 1344792863,
        "node_id": "IC_kwDOCVq1mM5QJ-kf",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-12-09T21:19:36Z",
        "updated_at": "2022-12-09T21:19:36Z",
        "author_association": "MEMBER",
        "body": "The support matrix shows an export error, whereas we are seeing a runtime error here, so the errors detected there may be different than yours:\r\n\r\n![image](https://user-images.githubusercontent.com/11205048/206797553-877099a5-143e-46b6-9436-ecb3f07e919d.png)\r\n\r\nIt is still possible that the exported model is incorrect. Could you also share the exported onnx model here?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344792863/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344799872",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13920#issuecomment-1344799872",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13920",
        "id": 1344799872,
        "node_id": "IC_kwDOCVq1mM5QKASA",
        "user": {
            "login": "fxmarty",
            "id": 9808326,
            "node_id": "MDQ6VXNlcjk4MDgzMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9808326?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fxmarty",
            "html_url": "https://github.com/fxmarty",
            "followers_url": "https://api.github.com/users/fxmarty/followers",
            "following_url": "https://api.github.com/users/fxmarty/following{/other_user}",
            "gists_url": "https://api.github.com/users/fxmarty/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fxmarty/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fxmarty/subscriptions",
            "organizations_url": "https://api.github.com/users/fxmarty/orgs",
            "repos_url": "https://api.github.com/users/fxmarty/repos",
            "events_url": "https://api.github.com/users/fxmarty/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fxmarty/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-12-09T21:29:01Z",
        "updated_at": "2022-12-09T21:37:16Z",
        "author_association": "CONTRIBUTOR",
        "body": "Oh did not know we could click on there. Awesome!\r\n\r\nYes, you can find the model exported as in my original post [here](https://huggingface.co/fxmarty/broken-onnx-as-strided/blob/main/asstrided_model.onnx) and a preview in netron [here](https://netron.app/?url=https://huggingface.co/fxmarty/broken-onnx-as-strided/blob/main/asstrided_model.onnx).\r\n\r\nI suspect that the `strides_original = x.stride()` is not raising an error while maybe it should. Trying to put dynamic stride by using the shape values (`a, b, c`), or e.g. `x[0][0][0]` (see the updated comment in the original model for an example), then `torch.onnx.export` rightfully raises:\r\n\r\n```\r\ntorch.onnx.errors.SymbolicValueError: Failed to export a node '%17 : Long(requires_grad=0, device=cpu) = onnx::Gather[axis=0](%16, %1), scope: __main__.MyModel3:: # /home/fxmarty/test_torchsript.py:48:0\r\n' (in list node %21 : int[] = prim::ListConstruct(%17, %18, %20), scope: __main__.MyModel3::\r\n) because it is not constant. Please try to make things (e.g. kernel sizes) static if possible.  [Caused by the value '21 defined in (%21 : int[] = prim::ListConstruct(%17, %18, %20), scope: __main__.MyModel3::\r\n)' (type 'List[int]') in the TorchScript graph. The containing node has kind 'prim::ListConstruct'.] \r\n```\r\n\r\nEdit: oh, yes, it seems the graph is wrong. There are hard-coded values in `Mul` coming from the example given in `torch.onnx.export`. Should I rather open an issue under pytorch? I think this is somewhat very minor so maybe not worth it. Did still spend a quite long time debugging this on a large model!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344799872/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344853984",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13920#issuecomment-1344853984",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13920",
        "id": 1344853984,
        "node_id": "IC_kwDOCVq1mM5QKNfg",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-12-09T22:37:04Z",
        "updated_at": "2022-12-09T22:37:04Z",
        "author_association": "MEMBER",
        "body": "Yes, please open an issue on torch and mention me. Thanks for doing the hard work to isolate the issue!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1344853984/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1345193216",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/13920#issuecomment-1345193216",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/13920",
        "id": 1345193216,
        "node_id": "IC_kwDOCVq1mM5QLgUA",
        "user": {
            "login": "fxmarty",
            "id": 9808326,
            "node_id": "MDQ6VXNlcjk4MDgzMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9808326?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fxmarty",
            "html_url": "https://github.com/fxmarty",
            "followers_url": "https://api.github.com/users/fxmarty/followers",
            "following_url": "https://api.github.com/users/fxmarty/following{/other_user}",
            "gists_url": "https://api.github.com/users/fxmarty/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fxmarty/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fxmarty/subscriptions",
            "organizations_url": "https://api.github.com/users/fxmarty/orgs",
            "repos_url": "https://api.github.com/users/fxmarty/repos",
            "events_url": "https://api.github.com/users/fxmarty/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fxmarty/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-12-10T09:16:07Z",
        "updated_at": "2022-12-10T09:16:07Z",
        "author_association": "CONTRIBUTOR",
        "body": "Great thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1345193216/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]