[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014855577",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10300#issuecomment-1014855577",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10300",
        "id": 1014855577,
        "node_id": "IC_kwDOCVq1mM48fXeZ",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T20:09:58Z",
        "updated_at": "2022-01-17T20:09:58Z",
        "author_association": "MEMBER",
        "body": "We would need more information to see what's wrong. However, `synchronize_inputs()` are optional and is usually needed to ensure that the data in your GPU buffer finished copying to the device.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014855577/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017085256",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10300#issuecomment-1017085256",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10300",
        "id": 1017085256,
        "node_id": "IC_kwDOCVq1mM48n31I",
        "user": {
            "login": "edgchen1",
            "id": 18449977,
            "node_id": "MDQ6VXNlcjE4NDQ5OTc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/18449977?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/edgchen1",
            "html_url": "https://github.com/edgchen1",
            "followers_url": "https://api.github.com/users/edgchen1/followers",
            "following_url": "https://api.github.com/users/edgchen1/following{/other_user}",
            "gists_url": "https://api.github.com/users/edgchen1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/edgchen1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/edgchen1/subscriptions",
            "organizations_url": "https://api.github.com/users/edgchen1/orgs",
            "repos_url": "https://api.github.com/users/edgchen1/repos",
            "events_url": "https://api.github.com/users/edgchen1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/edgchen1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-20T03:30:58Z",
        "updated_at": "2022-01-20T03:30:58Z",
        "author_association": "MEMBER",
        "body": "I was unable to reproduce the segmentation fault with the minimal example code. Likely it depends on the model. Are you able to reproduce it with a different model that you can share?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017085256/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017962802",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10300#issuecomment-1017962802",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10300",
        "id": 1017962802,
        "node_id": "IC_kwDOCVq1mM48rOEy",
        "user": {
            "login": "jeshels",
            "id": 80462280,
            "node_id": "MDQ6VXNlcjgwNDYyMjgw",
            "avatar_url": "https://avatars.githubusercontent.com/u/80462280?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jeshels",
            "html_url": "https://github.com/jeshels",
            "followers_url": "https://api.github.com/users/jeshels/followers",
            "following_url": "https://api.github.com/users/jeshels/following{/other_user}",
            "gists_url": "https://api.github.com/users/jeshels/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jeshels/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jeshels/subscriptions",
            "organizations_url": "https://api.github.com/users/jeshels/orgs",
            "repos_url": "https://api.github.com/users/jeshels/repos",
            "events_url": "https://api.github.com/users/jeshels/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jeshels/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-20T21:58:16Z",
        "updated_at": "2022-01-20T21:58:58Z",
        "author_association": "NONE",
        "body": "@edgchen1, You are correct! It seems to depend on the model (also updated my initial message with the details).\r\n\r\nI am able to reproduce the segmentation fault with this [CenterFace](https://github.com/Star-Clouds/CenterFace) ONNX model (I downloaded [this](https://github.com/Star-Clouds/CenterFace/blob/master/models/onnx/centerface.onnx) file). In contrast, with [Tiny YOLOv2](https://github.com/onnx/models/tree/master/vision/object_detection_segmentation/tiny-yolov2) ONNX model, there is no segmentation fault.\r\n\r\nI deliberately chose detection models since I am facing this with a detection model.\r\n\r\nIs there any more information I can provide which may be useful?\r\n\r\n---\r\n\r\nHi @yuslepukhin, I couldn't find documentation on `synchronize_inputs()`. How can one tell if `synchronize_inputs()` should be used? (I asked you the same question in another issue. Feel free to answer in a single place and I'll update my other message to avoid duplication).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1017962802/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019009119",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10300#issuecomment-1019009119",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10300",
        "id": 1019009119,
        "node_id": "IC_kwDOCVq1mM48vNhf",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-22T01:38:57Z",
        "updated_at": "2022-01-22T01:38:57Z",
        "author_association": "MEMBER",
        "body": "`synchronize_inputs/outputs` has been recently exposed so it may not have made to the generated published documentation. [Here ](https://github.com/microsoft/onnxruntime/blob/master/csharp/src/Microsoft.ML.OnnxRuntime/OrtIoBinding.shared.cs#L91)how it is worded in C# code\r\n\r\nThe functionality of it is device specific. For CUDA GPU it means a call to `cudaSynchronize()`. You use it to ensure that the content of the memory you are binding as inputs finished copying the device before inference. And for outputs, you want all of the CUDA operations to finish before reading the bound outputs. If you see that you are getting wrong or inconsistent results, you may try calling it.\r\n\r\n[Here ](https://pytorch.org/docs/stable/generated/torch.cuda.synchronize.html)is how Pytorch docs put it.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019009119/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019012501",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10300#issuecomment-1019012501",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10300",
        "id": 1019012501,
        "node_id": "IC_kwDOCVq1mM48vOWV",
        "user": {
            "login": "edgchen1",
            "id": 18449977,
            "node_id": "MDQ6VXNlcjE4NDQ5OTc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/18449977?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/edgchen1",
            "html_url": "https://github.com/edgchen1",
            "followers_url": "https://api.github.com/users/edgchen1/followers",
            "following_url": "https://api.github.com/users/edgchen1/following{/other_user}",
            "gists_url": "https://api.github.com/users/edgchen1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/edgchen1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/edgchen1/subscriptions",
            "organizations_url": "https://api.github.com/users/edgchen1/orgs",
            "repos_url": "https://api.github.com/users/edgchen1/repos",
            "events_url": "https://api.github.com/users/edgchen1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/edgchen1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-22T01:51:34Z",
        "updated_at": "2022-01-22T01:51:34Z",
        "author_association": "MEMBER",
        "body": "Thanks for the link to the CenterFace model, I am able to reproduce the segmentation fault with it.\r\nonnxruntime-gpu 1.10 python package on Ubuntu 20.04\r\nWill investigate.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019012501/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]