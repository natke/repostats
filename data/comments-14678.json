[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1435115294",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14678#issuecomment-1435115294",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14678",
        "id": 1435115294,
        "node_id": "IC_kwDOCVq1mM5Vih8e",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-02-17T19:08:46Z",
        "updated_at": "2023-02-17T19:08:46Z",
        "author_association": "MEMBER",
        "body": "@liqunfu ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1435115294/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464671716",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14678#issuecomment-1464671716",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14678",
        "id": 1464671716,
        "node_id": "IC_kwDOCVq1mM5XTR3k",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-10T23:54:24Z",
        "updated_at": "2023-03-10T23:54:24Z",
        "author_association": "MEMBER",
        "body": "Same for ReduceMin",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1464671716/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1499476776",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14678#issuecomment-1499476776",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14678",
        "id": 1499476776,
        "node_id": "IC_kwDOCVq1mM5ZYDMo",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-04-06T18:46:19Z",
        "updated_at": "2023-04-06T18:46:19Z",
        "author_association": "MEMBER",
        "body": "free(): invalid pointer",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1499476776/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1666165047",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/14678#issuecomment-1666165047",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/14678",
        "id": 1666165047,
        "node_id": "IC_kwDOCVq1mM5jT6k3",
        "user": {
            "login": "justinchuby",
            "id": 11205048,
            "node_id": "MDQ6VXNlcjExMjA1MDQ4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11205048?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justinchuby",
            "html_url": "https://github.com/justinchuby",
            "followers_url": "https://api.github.com/users/justinchuby/followers",
            "following_url": "https://api.github.com/users/justinchuby/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinchuby/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justinchuby/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinchuby/subscriptions",
            "organizations_url": "https://api.github.com/users/justinchuby/orgs",
            "repos_url": "https://api.github.com/users/justinchuby/repos",
            "events_url": "https://api.github.com/users/justinchuby/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justinchuby/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-08-04T20:47:31Z",
        "updated_at": "2023-08-04T20:47:43Z",
        "author_association": "MEMBER",
        "body": "### Summary\r\n\r\nONNX Runtime raises aborts when executing test `ops_test.TestOutputConsistencyFullGraphCPU.test_output_match_opinfo__logsumexp_cpu_float32` in ONNX Script `TorchLib`.\r\n\r\nTo recreate this report, use\r\n\r\n```bash\r\nCREATE_REPRODUCTION_REPORT=1 python -m pytest onnxscript/tests/function_libs/torch_lib/ops_test.py -k test_output_match_opinfo__logsumexp_cpu_float32\r\n```\r\n\r\n### To reproduce\r\n\r\n```python\r\nimport google.protobuf.text_format\r\nimport numpy as np\r\nfrom numpy import array, float16, float32, float64, int32, int64\r\nimport onnx\r\nimport onnxruntime as ort\r\n\r\n# Run n times\r\nN = 1\r\n\r\nonnx_model_text = \"\"\"\r\nir_version: 8\r\nproducer_name: \"pytorch\"\r\nproducer_version: \"2.1.0\"\r\ngraph {\r\n  node {\r\n    input: \"input_0\"\r\n    input: \"input_1\"\r\n    output: \"_val_2\"\r\n    name: \"aten_logsumexp_0\"\r\n    op_type: \"aten_logsumexp\"\r\n    attribute {\r\n      name: \"keepdim\"\r\n      i: 1\r\n      type: INT\r\n    }\r\n    doc_string: \"\"\r\n    domain: \"pkg.onnxscript.torch_lib\"\r\n  }\r\n  name: \"torch_jit\"\r\n  input {\r\n    name: \"input_0\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 1\r\n        shape {\r\n        }\r\n      }\r\n    }\r\n  }\r\n  input {\r\n    name: \"input_1\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 7\r\n        shape {\r\n          dim {\r\n            dim_value: 1\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  output {\r\n    name: \"_val_2\"\r\n    type {\r\n      tensor_type {\r\n        elem_type: 1\r\n        shape {\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nopset_import {\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n  version: 1\r\n}\r\nopset_import {\r\n  domain: \"\"\r\n  version: 18\r\n}\r\nfunctions {\r\n  name: \"aten_logsumexp\"\r\n  input: \"self\"\r\n  input: \"dim\"\r\n  output: \"result\"\r\n  node {\r\n    input: \"self\"\r\n    input: \"dim\"\r\n    output: \"result\"\r\n    name: \"n0\"\r\n    op_type: \"ReduceLogSumExp\"\r\n    attribute {\r\n      name: \"keepdims\"\r\n      type: INT\r\n      ref_attr_name: \"keepdim\"\r\n    }\r\n    domain: \"\"\r\n  }\r\n  doc_string: \"logsumexp(Tensor self, int[1] dim, bool keepdim=False) -> Tensor\"\r\n  opset_import {\r\n    domain: \"\"\r\n    version: 18\r\n  }\r\n  domain: \"pkg.onnxscript.torch_lib\"\r\n  attribute_proto {\r\n    name: \"keepdim\"\r\n    i: 0\r\n    type: INT\r\n  }\r\n}\r\n\r\n\"\"\"\r\n\r\nort_inputs = {'input_0': array(1921064.8, dtype=float32), 'input_1': array([0])}\r\n\r\n# Set up the inference session\r\nsession_options = ort.SessionOptions()\r\nsession_options.graph_optimization_level = ort.GraphOptimizationLevel.ORT_DISABLE_ALL\r\nonnx_model = onnx.ModelProto()\r\ngoogle.protobuf.text_format.Parse(onnx_model_text, onnx_model)\r\n\r\n# Uncomment this line to save the model to a file for examination\r\n# onnx.save_model(onnx_model, \"test_output_match_opinfo__logsumexp_cpu_float32.onnx\")\r\n\r\nonnx.checker.check_model(onnx_model)\r\nsession = ort.InferenceSession(onnx_model.SerializeToString(), session_options, providers=(\"CPUExecutionProvider\",))\r\n\r\n# Run the model\r\nfor _ in range(N):\r\n    ort_outputs = session.run(None, ort_inputs)\r\n\r\n```\r\n\r\n### Full error stack\r\n\r\n```\r\n\r\n  File \"/home/justinchu/dev/onnx-script/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 533, in _capture_graph_and_evaluate_torch_script_evaluator\r\n    return _safe_ort_session_run(onnx_model.SerializeToString(), ort_inputs)\r\n  File \"/home/justinchu/dev/onnx-script/onnxscript/tests/function_libs/torch_lib/ops_test_common.py\", line 347, in _safe_ort_session_run\r\n    raise OrtAbortedError()\r\n\r\n```\r\n\r\n### Environment\r\n\r\n```\r\nOS: Linux-5.15.0-1042-azure-x86_64-with-glibc2.35\r\nPython version: 3.10.9 (main, Jan 11 2023, 15:21:40) [GCC 11.2.0]\r\nonnx==1.15.0.dev20230731\r\nonnxruntime==1.15.1\r\nnumpy==1.25.1\r\ntorch==2.1.0.dev20230622+cpu\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1666165047/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]