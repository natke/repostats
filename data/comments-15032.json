[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1467122294",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1467122294",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1467122294,
        "node_id": "IC_kwDOCVq1mM5XcoJ2",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-13T23:36:10Z",
        "updated_at": "2023-03-13T23:52:44Z",
        "author_association": "MEMBER",
        "body": "It looks fairly correct at first glance. What specifically is listed as an undefined reference?\r\n\r\nNot sure you need 3 protobuf libraries though. Would have expected just libprotobuf-lite.a\r\n\r\nAlso I believe protobuf uses absl so I'd expect all the libabsl things to be close to the end of the list. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1467122294/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468421431",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1468421431",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1468421431,
        "node_id": "IC_kwDOCVq1mM5XhlU3",
        "user": {
            "login": "hkhatoonabadi",
            "id": 14734038,
            "node_id": "MDQ6VXNlcjE0NzM0MDM4",
            "avatar_url": "https://avatars.githubusercontent.com/u/14734038?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hkhatoonabadi",
            "html_url": "https://github.com/hkhatoonabadi",
            "followers_url": "https://api.github.com/users/hkhatoonabadi/followers",
            "following_url": "https://api.github.com/users/hkhatoonabadi/following{/other_user}",
            "gists_url": "https://api.github.com/users/hkhatoonabadi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hkhatoonabadi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hkhatoonabadi/subscriptions",
            "organizations_url": "https://api.github.com/users/hkhatoonabadi/orgs",
            "repos_url": "https://api.github.com/users/hkhatoonabadi/repos",
            "events_url": "https://api.github.com/users/hkhatoonabadi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hkhatoonabadi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-14T16:23:41Z",
        "updated_at": "2023-03-14T16:23:41Z",
        "author_association": "NONE",
        "body": "Thanks for your comment. \r\n\r\nDepending on the order of libs in `target_link_libraries`, I'm getting different errors. With the above order:\r\n```\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::UnloadDynamicLibrary(void*) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x1d): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x25): undefined reference to `dlclose'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x2c): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::GetSymbolFromLibrary(void*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, void**) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x18): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x24): undefined reference to `dlsym'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x2d): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::LoadDynamicLibrary(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, void**) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x18): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x30): undefined reference to `dlopen'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x38): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/abseil_cpp-build/absl/hash/libabsl_hash.a(hash.cc.o): in function `absl::lts_20220623::hash_internal::MixingHashState::CombineLargeContiguousImpl32(unsigned long, unsigned char const*, unsigned long)':\r\n\r\nhash.cc:(.text._ZN4absl12lts_2022062313hash_internal15MixingHashState28CombineLargeContiguousImpl32EmPKhm+0x60): undefined reference to `absl::lts_20220623::hash_internal::CityHash32(char const*, unsigned long)'\r\n\r\n/usr/bin/ld: hash.cc:(.text._ZN4absl12lts_2022062313hash_internal15MixingHashState28CombineLargeContiguousImpl32EmPKhm+0x9e): undefined reference to `absl::lts_20220623::hash_internal::CityHash32(char const*, unsigned long)'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(api.c.o): in function `cpuinfo_log_fatal.constprop.0':\r\n\r\napi.c:(.text.cpuinfo_log_fatal.constprop.0+0x96): undefined reference to `clog_vlog_fatal'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(init.c.o): in function `cpuinfo_log_error':\r\n\r\ninit.c:(.text.cpuinfo_log_error+0x95): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(processors.c.o): in function `cpuinfo_log_error':\r\n\r\nprocessors.c:(.text.cpuinfo_log_error+0x95): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(smallfile.c.o): in function `cpuinfo_log_error.constprop.0':\r\n\r\nsmallfile.c:(.text.cpuinfo_log_error.constprop.0+0x96): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: my_project: internal symbol `clog_vlog_error' isn't defined\r\n\r\n/usr/bin/ld: final link failed: bad value\r\n\r\ncollect2: error: ld returned 1 exit status\r\n```\r\nbut if I switch the order of `libonnxruntime_session.a` and `libonnxruntime_optimizer.a`, I will get\r\n```\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::AddPredefinedTransformers(onnxruntime::GraphTransformerManager&, onnxruntime::TransformerLevel, onnxruntime::InferenceSession::MinimalBuildOptimizationHandling, std::function<onnxruntime::common::Status (onnx::OpSchema const&)>) const':\r\n\r\ninference_session.cc:(.text._ZNK11onnxruntime16InferenceSession25AddPredefinedTransformersERNS_23GraphTransformerManagerENS_16TransformerLevelENS0_32MinimalBuildOptimizationHandlingESt8functionIFNS_6common6StatusERKN4onnx8OpSchemaEEE+0x274): undefined reference to `onnxruntime::optimizer_utils::GenerateTransformersForMinimalBuild(onnxruntime::TransformerLevel, onnxruntime::SessionOptions const&, std::variant<onnxruntime::SatDirectApplicationContext, onnxruntime::SatRuntimeOptimizationSaveContext, onnxruntime::SatRuntimeOptimizationLoadContext> const&, onnxruntime::IExecutionProvider const&, onnxruntime::InlinedHashSet<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZNK11onnxruntime16InferenceSession25AddPredefinedTransformersERNS_23GraphTransformerManagerENS_16TransformerLevelENS0_32MinimalBuildOptimizationHandlingESt8functionIFNS_6common6StatusERKN4onnx8OpSchemaEEE+0x2b5): undefined reference to `onnxruntime::optimizer_utils::GenerateTransformers(onnxruntime::TransformerLevel, onnxruntime::SessionOptions const&, onnxruntime::IExecutionProvider const&, onnxruntime::InlinedHashSet<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZNK11onnxruntime16InferenceSession25AddPredefinedTransformersERNS_23GraphTransformerManagerENS_16TransformerLevelENS0_32MinimalBuildOptimizationHandlingESt8functionIFNS_6common6StatusERKN4onnx8OpSchemaEEE+0x314): undefined reference to `onnxruntime::GraphTransformerManager::Register(std::unique_ptr<onnxruntime::GraphTransformer, std::default_delete<onnxruntime::GraphTransformer> >, onnxruntime::TransformerLevel)'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::RegisterGraphTransformer(std::unique_ptr<onnxruntime::GraphTransformer, std::default_delete<onnxruntime::GraphTransformer> >, onnxruntime::TransformerLevel)':\r\n\r\ninference_session.cc:(.text._ZN11onnxruntime16InferenceSession24RegisterGraphTransformerESt10unique_ptrINS_16GraphTransformerESt14default_deleteIS2_EENS_16TransformerLevelE+0x114): undefined reference to `onnxruntime::GraphTransformerManager::Register(std::unique_ptr<onnxruntime::GraphTransformer, std::default_delete<onnxruntime::GraphTransformer> >, onnxruntime::TransformerLevel)'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InsertCastTransformer::InsertCastTransformer(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':\r\n\r\ninference_session.cc:(.text._ZN11onnxruntime21InsertCastTransformerC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN11onnxruntime21InsertCastTransformerC5ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x19c): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::TransformGraph(onnxruntime::Graph&, onnxruntime::GraphTransformerManager const&, onnxruntime::ExecutionProviders const&, onnxruntime::KernelRegistryManager&, onnxruntime::InsertCastTransformer const&, onnxruntime::SessionState&, bool) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0xe7): undefined reference to `vtable for onnxruntime::MemcpyTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::TransformGraph(onnxruntime::Graph&, onnxruntime::GraphTransformerManager const&, onnxruntime::ExecutionProviders const&, onnxruntime::KernelRegistryManager&, onnxruntime::InsertCastTransformer const&, onnxruntime::SessionState&, bool)':\r\n\r\ninference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x4f): undefined reference to `onnxruntime::GraphTransformerManager::ApplyTransformers(onnxruntime::Graph&, onnxruntime::TransformerLevel, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0xaf): undefined reference to `onnxruntime::layout_transformer::IsSupportedOpset(onnxruntime::Graph const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x1a3): undefined reference to `onnxruntime::layout_transformer::TransformLayoutForEP(onnxruntime::Graph&, bool&, onnxruntime::IExecutionProvider const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x228): undefined reference to `onnxruntime::GraphTransformerManager::ApplyTransformers(onnxruntime::Graph&, onnxruntime::TransformerLevel, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x24e): undefined reference to `onnxruntime::GraphTransformerManager::ApplyTransformers(onnxruntime::Graph&, onnxruntime::TransformerLevel, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x283): undefined reference to `onnxruntime::GraphTransformer::Apply(onnxruntime::Graph&, bool&, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x67c): undefined reference to `vtable for onnxruntime::MemcpyTransformer'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x7ff): undefined reference to `onnxruntime::GraphTransformer::Apply(onnxruntime::Graph&, bool&, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession14TransformGraphERNS_5GraphERKNS_23GraphTransformerManagerERKNS_18ExecutionProvidersERNS_21KernelRegistryManagerERKNS_21InsertCastTransformerERNS_12SessionStateEb+0x84d): undefined reference to `vtable for onnxruntime::MemcpyTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::ConstructorCommon(onnxruntime::SessionOptions const&, onnxruntime::Environment const&)':\r\n\r\ninference_session.cc:(.text._ZN11onnxruntime16InferenceSession17ConstructorCommonERKNS_14SessionOptionsERKNS_11EnvironmentE+0x384): undefined reference to `onnxruntime::GraphTransformerManager::SetSteps(unsigned int)'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::InferenceSession(onnxruntime::SessionOptions const&, onnxruntime::Environment const&) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSessionC2ERKNS_14SessionOptionsERKNS_11EnvironmentE+0x15b): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::InferenceSession(onnxruntime::SessionOptions const&, onnxruntime::Environment const&, onnxruntime::concurrency::ThreadPool*, onnxruntime::concurrency::ThreadPool*) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSessionC2ERKNS_14SessionOptionsERKNS_11EnvironmentEPNS_11concurrency10ThreadPoolES9_+0x15b): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::InferenceSession(onnxruntime::SessionOptions const&, onnxruntime::Environment const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSessionC2ERKNS_14SessionOptionsERKNS_11EnvironmentERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE+0x233): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::InferenceSession(onnxruntime::SessionOptions const&, onnxruntime::Environment const&, std::istream&) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSessionC2ERKNS_14SessionOptionsERKNS_11EnvironmentERSi+0x267): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::InferenceSession(onnxruntime::SessionOptions const&, onnxruntime::Environment const&, void const*, int) [clone .cold]':\r\n\r\ninference_session.cc:(.text.unlikely._ZN11onnxruntime16InferenceSessionC2ERKNS_14SessionOptionsERKNS_11EnvironmentEPKvi+0x211): undefined reference to `vtable for onnxruntime::InsertCastTransformer'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_session.a(inference_session.cc.o): in function `onnxruntime::InferenceSession::Initialize()':\r\n\r\ninference_session.cc:(.text._ZN11onnxruntime16InferenceSession10InitializeEv+0xdb6): undefined reference to `onnxruntime::layout_transformer::IsSupportedOpset(onnxruntime::Graph const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession10InitializeEv+0xeef): undefined reference to `onnxruntime::layout_transformer::TransformLayoutForEP(onnxruntime::Graph&, bool&, onnxruntime::IExecutionProvider const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession10InitializeEv+0x1194): undefined reference to `onnxruntime::optimizer_utils::GenerateTransformersForMinimalBuild(onnxruntime::TransformerLevel, onnxruntime::SessionOptions const&, std::variant<onnxruntime::SatDirectApplicationContext, onnxruntime::SatRuntimeOptimizationSaveContext, onnxruntime::SatRuntimeOptimizationLoadContext> const&, onnxruntime::IExecutionProvider const&, onnxruntime::InlinedHashSet<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'\r\n\r\n/usr/bin/ld: inference_session.cc:(.text._ZN11onnxruntime16InferenceSession10InitializeEv+0x1237): undefined reference to `onnxruntime::GraphTransformer::Apply(onnxruntime::Graph&, bool&, onnxruntime::logging::Logger const&) const'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::UnloadDynamicLibrary(void*) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x1d): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x25): undefined reference to `dlclose'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20UnloadDynamicLibraryEPv+0x2c): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::GetSymbolFromLibrary(void*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, void**) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x18): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x24): undefined reference to `dlsym'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv20GetSymbolFromLibraryEPvRKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS2_+0x2d): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/libonnxruntime_common.a(env.cc.o): in function `onnxruntime::(anonymous namespace)::PosixEnv::LoadDynamicLibrary(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool, void**) const':\r\n\r\nenv.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x18): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x30): undefined reference to `dlopen'\r\n\r\n/usr/bin/ld: env.cc:(.text._ZNK11onnxruntime12_GLOBAL__N_18PosixEnv18LoadDynamicLibraryERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEbPPv+0x38): undefined reference to `dlerror'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/abseil_cpp-build/absl/hash/libabsl_hash.a(hash.cc.o): in function `absl::lts_20220623::hash_internal::MixingHashState::CombineLargeContiguousImpl32(unsigned long, unsigned char const*, unsigned long)':\r\n\r\nhash.cc:(.text._ZN4absl12lts_2022062313hash_internal15MixingHashState28CombineLargeContiguousImpl32EmPKhm+0x60): undefined reference to `absl::lts_20220623::hash_internal::CityHash32(char const*, unsigned long)'\r\n\r\n/usr/bin/ld: hash.cc:(.text._ZN4absl12lts_2022062313hash_internal15MixingHashState28CombineLargeContiguousImpl32EmPKhm+0x9e): undefined reference to `absl::lts_20220623::hash_internal::CityHash32(char const*, unsigned long)'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(api.c.o): in function `cpuinfo_log_fatal.constprop.0':\r\n\r\napi.c:(.text.cpuinfo_log_fatal.constprop.0+0x96): undefined reference to `clog_vlog_fatal'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(init.c.o): in function `cpuinfo_log_error':\r\n\r\ninit.c:(.text.cpuinfo_log_error+0x95): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(processors.c.o): in function `cpuinfo_log_error':\r\n\r\nprocessors.c:(.text.cpuinfo_log_error+0x95): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(smallfile.c.o): in function `cpuinfo_log_error.constprop.0':\r\n\r\nsmallfile.c:(.text.cpuinfo_log_error.constprop.0+0x96): undefined reference to `clog_vlog_error'\r\n\r\n/usr/bin/ld: my_project: internal symbol `clog_vlog_error' isn't defined\r\n\r\n/usr/bin/ld: final link failed: bad value\r\n\r\ncollect2: error: ld returned 1 exit status\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468421431/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468500678",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1468500678",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1468500678,
        "node_id": "IC_kwDOCVq1mM5Xh4rG",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-14T17:10:35Z",
        "updated_at": "2023-03-14T17:10:35Z",
        "author_association": "MEMBER",
        "body": "Side question: is there any reason you've chosen to link ORT statically? Also, do realize that some EPs (openvino, dnnl, cuda, tensorrt) won't work in this setup.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468500678/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468562383",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1468562383",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1468562383,
        "node_id": "IC_kwDOCVq1mM5XiHvP",
        "user": {
            "login": "hkhatoonabadi",
            "id": 14734038,
            "node_id": "MDQ6VXNlcjE0NzM0MDM4",
            "avatar_url": "https://avatars.githubusercontent.com/u/14734038?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hkhatoonabadi",
            "html_url": "https://github.com/hkhatoonabadi",
            "followers_url": "https://api.github.com/users/hkhatoonabadi/followers",
            "following_url": "https://api.github.com/users/hkhatoonabadi/following{/other_user}",
            "gists_url": "https://api.github.com/users/hkhatoonabadi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hkhatoonabadi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hkhatoonabadi/subscriptions",
            "organizations_url": "https://api.github.com/users/hkhatoonabadi/orgs",
            "repos_url": "https://api.github.com/users/hkhatoonabadi/repos",
            "events_url": "https://api.github.com/users/hkhatoonabadi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hkhatoonabadi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-14T17:51:24Z",
        "updated_at": "2023-03-14T17:51:24Z",
        "author_association": "NONE",
        "body": "We link to all libraries that we use statically. I don't think we use those EPs at the moment. Wondering if it is a strong recommendation to link ORT dynamically rather than statically?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1468562383/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469356055",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1469356055",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1469356055,
        "node_id": "IC_kwDOCVq1mM5XlJgX",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T05:21:53Z",
        "updated_at": "2023-03-15T05:21:53Z",
        "author_association": "MEMBER",
        "body": "The first set of errors is what you want to resolve. As there are no errors for missing ORT symbols (they would be expected to be in the 'onnxruntime::' namespace) the ORT libraries are in the correct order. The missing symbols are from code that is external to onnxruntime. \r\n\r\ndlopen, dlerror, dlsym are from libdl which is missing from your list.\r\n\r\n> /usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/abseil_cpp-build/absl/hash/libabsl_hash.a(hash.cc.o): in function `absl::lts_20220623::hash_internal::MixingHashState::CombineLargeContiguousImpl32(unsigned long, unsigned char const*, unsigned long)':\r\nhash.cc:(.text._ZN4absl12lts_2022062313hash_internal15MixingHashState28CombineLargeContiguousImpl32EmPKhm+0x60): undefined reference to `absl::lts_20220623::hash_internal::CityHash32(char const*, unsigned long)'\r\n\r\nThis is an error from code in the absl libraries missing other absl symbols, so the order of those isn't correct. You should checkout https://github.com/abseil/abseil-cpp for info on what static library order is correct.\r\n\r\n> /usr/bin/ld: /home/ai/onnxruntime/build/Linux/Release/_deps/pytorch_cpuinfo-build/libcpuinfo.a(api.c.o): in function `cpuinfo_log_fatal.constprop.0':\r\napi.c:(.text.cpuinfo_log_fatal.constprop.0+0x96): undefined reference to `clog_vlog_fatal'\r\n\r\ncpuinfo uses clog so the order of those two needs to be swapped.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1469356055/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470563460",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1470563460",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1470563460,
        "node_id": "IC_kwDOCVq1mM5XpwSE",
        "user": {
            "login": "pranavsharma",
            "id": 2732907,
            "node_id": "MDQ6VXNlcjI3MzI5MDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2732907?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pranavsharma",
            "html_url": "https://github.com/pranavsharma",
            "followers_url": "https://api.github.com/users/pranavsharma/followers",
            "following_url": "https://api.github.com/users/pranavsharma/following{/other_user}",
            "gists_url": "https://api.github.com/users/pranavsharma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pranavsharma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pranavsharma/subscriptions",
            "organizations_url": "https://api.github.com/users/pranavsharma/orgs",
            "repos_url": "https://api.github.com/users/pranavsharma/repos",
            "events_url": "https://api.github.com/users/pranavsharma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pranavsharma/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T18:34:06Z",
        "updated_at": "2023-03-15T18:34:06Z",
        "author_association": "MEMBER",
        "body": "> We link to all libraries that we use statically. I don't think we use those EPs at the moment. Wondering if it is a strong recommendation to link ORT dynamically rather than statically?\r\n\r\nIf you plan to use any of the EPs I mentioned before the only option is to link dynamically. Otherwise, you're free to consume ORT as per your convenience and needs.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470563460/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470752500",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/15032#issuecomment-1470752500",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/15032",
        "id": 1470752500,
        "node_id": "IC_kwDOCVq1mM5Xqeb0",
        "user": {
            "login": "hkhatoonabadi",
            "id": 14734038,
            "node_id": "MDQ6VXNlcjE0NzM0MDM4",
            "avatar_url": "https://avatars.githubusercontent.com/u/14734038?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hkhatoonabadi",
            "html_url": "https://github.com/hkhatoonabadi",
            "followers_url": "https://api.github.com/users/hkhatoonabadi/followers",
            "following_url": "https://api.github.com/users/hkhatoonabadi/following{/other_user}",
            "gists_url": "https://api.github.com/users/hkhatoonabadi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hkhatoonabadi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hkhatoonabadi/subscriptions",
            "organizations_url": "https://api.github.com/users/hkhatoonabadi/orgs",
            "repos_url": "https://api.github.com/users/hkhatoonabadi/repos",
            "events_url": "https://api.github.com/users/hkhatoonabadi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hkhatoonabadi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-03-15T19:56:49Z",
        "updated_at": "2023-03-15T19:56:49Z",
        "author_association": "NONE",
        "body": "Thanks for all your help.\r\nIn case someone else has the same issue, this is the updated list (as [skottmckay](https://github.com/skottmckay) mentioned you can get rid of some extra libs)\r\n```cmake\r\n      target_link_libraries(\r\n        my_project\r\n        libonnxruntime_session.a\r\n        libonnxruntime_optimizer.a\r\n        libonnxruntime_providers.a\r\n        libonnxruntime_util.a\r\n        libonnxruntime_framework.a\r\n        libonnxruntime_graph.a\r\n        libonnxruntime_mlas.a\r\n        libonnxruntime_common.a\r\n        libonnxruntime_flatbuffers.a\r\n        libonnx_test_data_proto.a\r\n\r\n        # version 1.14.1: git checkout c57cf374b67f72575546d7b4c69a1af4972e2b54\r\n        libabsl_base.a\r\n        libabsl_log_severity.a\r\n        libabsl_malloc_internal.a\r\n        libabsl_raw_logging_internal.a\r\n        libabsl_spinlock_wait.a\r\n        libabsl_throw_delegate.a\r\n        libabsl_hashtablez_sampler.a\r\n        libabsl_raw_hash_set.a\r\n        libabsl_hash.a\r\n        libabsl_city.a\r\n        libabsl_low_level_hash.a\r\n        libabsl_int128.a\r\n        libabsl_exponential_biased.a\r\n        libabsl_cord.a\r\n        libabsl_cord_internal.a\r\n        libabsl_cordz_functions.a\r\n        libabsl_cordz_handle.a\r\n        libabsl_cordz_info.a\r\n        libabsl_strings.a\r\n        libabsl_strings_internal.a\r\n        libabsl_graphcycles_internal.a\r\n        libabsl_synchronization.a\r\n        libabsl_civil_time.a\r\n        libabsl_time.a\r\n        libabsl_time_zone.a\r\n        libabsl_bad_optional_access.a\r\n        libabsl_bad_variant_access.a\r\n        libflatbuffers.a\r\n        libnsync_cpp.a\r\n        libonnx.a\r\n        libonnx_proto.a\r\n        libprotobuf-lite.a\r\n        libprotobuf.a\r\n        libprotoc.a\r\n        libcpuinfo.a\r\n        libclog.a\r\n        libre2.a\r\n\r\n        pthread\r\n        atomic\r\n        dl\r\n      )\r\n```      ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1470752500/reactions",
            "total_count": 3,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]