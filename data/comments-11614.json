[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1136517695",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1136517695",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1136517695,
        "node_id": "IC_kwDOCVq1mM5DveI_",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-24T23:08:00Z",
        "updated_at": "2022-05-24T23:08:25Z",
        "author_association": "MEMBER",
        "body": "Can you elaborate on why the nodes are \"unused\" in the second model ? You mean it is in a conditional branch of the `If` node that will never be executed (because the condition to the `If` will never be equal to what it should be to execute the \"unused\" nodes ?)\r\n\r\nEven if they will be \"unused\" at runtime for the afore-mentioned reason, ORT still needs to load the graph and it seems to have triggered a sanity check failure in the ONNX shape inference while loading the graph (https://github.com/onnx/onnx/blob/a525f98d5ed31660b629bab90c680a39658a5c08/onnx/defs/tensor/defs.cc#L931) that is complaining that one/more axis values is out of range for the deduced input rank. This *usually* points to something faulty in the model.\r\n\r\nTL;DR: Even if a sub-graph will never be used at runtime, it still needs to be \"valid\" for ORT to be able to load it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1136517695/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1137158093",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1137158093",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1137158093,
        "node_id": "IC_kwDOCVq1mM5Dx6fN",
        "user": {
            "login": "xadupre",
            "id": 22452781,
            "node_id": "MDQ6VXNlcjIyNDUyNzgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22452781?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xadupre",
            "html_url": "https://github.com/xadupre",
            "followers_url": "https://api.github.com/users/xadupre/followers",
            "following_url": "https://api.github.com/users/xadupre/following{/other_user}",
            "gists_url": "https://api.github.com/users/xadupre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xadupre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xadupre/subscriptions",
            "organizations_url": "https://api.github.com/users/xadupre/orgs",
            "repos_url": "https://api.github.com/users/xadupre/repos",
            "events_url": "https://api.github.com/users/xadupre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xadupre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-25T12:06:25Z",
        "updated_at": "2022-05-25T12:06:25Z",
        "author_association": "MEMBER",
        "body": "Here is a diff between the two models:\r\n[diff.json.html.zip](https://github.com/microsoft/onnxruntime/files/8770872/diff.json.html.zip)\r\n\r\nModel 1:\r\n- `onnx.checker.check_model` fails due to `ValidationError: Field 'shape' of type is required but missing.`\r\n- input and output shape are not specified\r\n- there is no unused nodes\r\n- onnxruntime succeeds in computing the output\r\n\r\nModel 2\r\n- `onnx.checker.check_model` succeeds\r\n- input and output have an empty shape (`[]`)\r\n- there are 2 unused nodes `Constant` in the main graph\r\n- onnxruntime fails due to `Node () Op (If) [TypeInferenceError] Graph attribute inferencing failed: Node () Op (Slice) [ShapeInferenceError] Input axes has invalid data'`\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1137158093/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1137842964",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1137842964",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1137842964,
        "node_id": "IC_kwDOCVq1mM5D0hsU",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-25T20:59:25Z",
        "updated_at": "2022-05-25T20:59:25Z",
        "author_association": "MEMBER",
        "body": "If you think this is a problem with shape inference, then this issue should be opened in the ONNX repo. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1137842964/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1140127776",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1140127776",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1140127776,
        "node_id": "IC_kwDOCVq1mM5D9Pgg",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-28T01:13:21Z",
        "updated_at": "2022-05-28T01:13:21Z",
        "author_association": "MEMBER",
        "body": "I wonder if the unused nodes are misleading. Maybe the scalar shape specified for the inputs is the main cause (regardless of what the bug is, if any). It might help to test with the input shape specified, but include the unused nodes. If it still fails, at least we know which of the two deltas is causing the problem.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1140127776/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1140155712",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1140155712",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1140155712,
        "node_id": "IC_kwDOCVq1mM5D9WVA",
        "user": {
            "login": "gramalingam",
            "id": 10075881,
            "node_id": "MDQ6VXNlcjEwMDc1ODgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/10075881?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gramalingam",
            "html_url": "https://github.com/gramalingam",
            "followers_url": "https://api.github.com/users/gramalingam/followers",
            "following_url": "https://api.github.com/users/gramalingam/following{/other_user}",
            "gists_url": "https://api.github.com/users/gramalingam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gramalingam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gramalingam/subscriptions",
            "organizations_url": "https://api.github.com/users/gramalingam/orgs",
            "repos_url": "https://api.github.com/users/gramalingam/repos",
            "events_url": "https://api.github.com/users/gramalingam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gramalingam/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-28T03:27:15Z",
        "updated_at": "2022-05-28T03:27:15Z",
        "author_association": "MEMBER",
        "body": "Ok, the problem is with the input shapes specified. You have used an empty shape for the input and output, which makes it a scalar. And you cannot slice a scalar. You should change the input shapes to have a symbolic dimension, some shape like [N] or [M, N] depending on the rank of the input/output.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1140155712/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1143508389",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/11614#issuecomment-1143508389",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/11614",
        "id": 1143508389,
        "node_id": "IC_kwDOCVq1mM5EKI2l",
        "user": {
            "login": "xadupre",
            "id": 22452781,
            "node_id": "MDQ6VXNlcjIyNDUyNzgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22452781?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xadupre",
            "html_url": "https://github.com/xadupre",
            "followers_url": "https://api.github.com/users/xadupre/followers",
            "following_url": "https://api.github.com/users/xadupre/following{/other_user}",
            "gists_url": "https://api.github.com/users/xadupre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xadupre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xadupre/subscriptions",
            "organizations_url": "https://api.github.com/users/xadupre/orgs",
            "repos_url": "https://api.github.com/users/xadupre/repos",
            "events_url": "https://api.github.com/users/xadupre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xadupre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-01T11:53:14Z",
        "updated_at": "2022-06-17T12:30:30Z",
        "author_association": "MEMBER",
        "body": "The rank is unknown in that case.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1143508389/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]